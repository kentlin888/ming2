/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["index"],{

/***/ "./js/dataDefine/index.js":
/*!********************************!*\
  !*** ./js/dataDefine/index.js ***!
  \********************************/
/*! namespace exports */
/*! export ENUM_ProductCategory [provided] [no usage info] [missing usage info prevents renaming] */
/*! export LogType [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Map_ProductCategory [provided] [no usage info] [missing usage info prevents renaming] */
/*! export OrderInfo [provided] [no usage info] [missing usage info prevents renaming] */
/*! export OrderLog [provided] [no usage info] [missing usage info prevents renaming] */
/*! export OrderStatus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ProductInfo [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ShopItemInfo [provided] [no usage info] [missing usage info prevents renaming] */
/*! export UserData [provided] [no usage info] [missing usage info prevents renaming] */
/*! export UserProfile [provided] [no usage info] [missing usage info prevents renaming] */
/*! export fakeProductInfo1 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export fakeProductInfo2 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export fakeProductInfo3 [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ShopItemInfo\": () => /* binding */ ShopItemInfo,\n/* harmony export */   \"ENUM_ProductCategory\": () => /* binding */ ENUM_ProductCategory,\n/* harmony export */   \"Map_ProductCategory\": () => /* binding */ Map_ProductCategory,\n/* harmony export */   \"ProductInfo\": () => /* binding */ ProductInfo,\n/* harmony export */   \"OrderStatus\": () => /* binding */ OrderStatus,\n/* harmony export */   \"OrderLog\": () => /* binding */ OrderLog,\n/* harmony export */   \"LogType\": () => /* binding */ LogType,\n/* harmony export */   \"OrderInfo\": () => /* binding */ OrderInfo,\n/* harmony export */   \"UserData\": () => /* binding */ UserData,\n/* harmony export */   \"UserProfile\": () => /* binding */ UserProfile,\n/* harmony export */   \"fakeProductInfo1\": () => /* binding */ fakeProductInfo1,\n/* harmony export */   \"fakeProductInfo2\": () => /* binding */ fakeProductInfo2,\n/* harmony export */   \"fakeProductInfo3\": () => /* binding */ fakeProductInfo3\n/* harmony export */ });\n/* harmony import */ var _firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../firebase/FirebaseMJS.js */ \"./js/firebase/FirebaseMJS.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//@ts-check\n//Inside of settings.json, add the following:{ \"javascript.implicitProjectConfig.checkJs\": true }\n\n/**\r\n * @class\r\n * @desc ming1 project ShopItem.jsx\r\n */\n\nvar ShopItemInfo = /*#__PURE__*/function () {\n  function ShopItemInfo() {\n    _classCallCheck(this, ShopItemInfo);\n\n    _defineProperty(this, \"_productInfo\", void 0);\n\n    _defineProperty(this, \"productId\", 'XXXXXXXXXXXXX');\n\n    _defineProperty(this, \"amount\", 0);\n\n    _defineProperty(this, \"price\", 0);\n  }\n\n  _createClass(ShopItemInfo, [{\n    key: \"fill_ProductInfo_ByProductArray\",\n\n    /**\r\n     * fill _productInfo - from given product list\r\n     * @param {ProductInfo[]} arrayProducts \r\n     */\n    value: function fill_ProductInfo_ByProductArray(arrayProducts) {\n      var _this = this;\n\n      if (arrayProducts.length === 0) {\n        this.productInfo = null;\n        return;\n      } // console.log(this.productId)\n      //console.log(arrayProducts)\n\n\n      var findProductInfo = arrayProducts.find(function (item) {\n        return item.productId === _this.productId;\n      }); //console.log('find---', findProductInfo)\n      //if result not found, force to clear this._productInfo\n\n      this.productInfo = null;\n      if (findProductInfo) this.productInfo = findProductInfo; //console.log(this._productInfo)\n    }\n    /**@type {ProductInfo} - set this ShopItem's ProductInfo*/\n\n  }, {\n    key: \"productName\",\n    //productInfo\n\n    /**@property {string}*/\n    get: function get() {\n      if (!this._productInfo) return '';\n      return this._productInfo.name;\n    }\n  }, {\n    key: \"productInfo\",\n    set: function set(value) {\n      this._productInfo = value;\n\n      if (value) {\n        this.productId = value.productId;\n        this.price = value.price;\n      }\n    }\n    /**@type {(ProductInfo|null|undefined)} - return this ShopItem's ProductInfo*/\n    ,\n    get: function get() {\n      return this._productInfo;\n    }\n  }]);\n\n  return ShopItemInfo;\n}();\n/**@enum {string} */\n\nvar ENUM_ProductCategory = {\n  // soybean:\"soybean\",\n  // duck:\"duck\",\n  // chicken:\"chicken\",\n  // beef:\"beef\",\n  // pork:\"pork\",\n  // others:\"others\",\n  mainCourse: \"mainCourse\",\n  meats: \"meats\",\n  soups: \"soups\",\n  stirFired: \"stirFired\",\n  coldPlates: \"coldPlates\"\n};\nvar Map_ProductCategory = {\n  // soybean:\"豆類\",\n  // duck:\"鴨肉類\",\n  // chicken:\"雞肉類\",\n  // beef:\"牛肉類\",\n  // pork:\"豬肉類\",\n  // others:\"其他類別\",\n\n  /**@type {string} */\n  mainCourse: \"主菜\",\n\n  /**@type {string} */\n  meats: \"肉類\",\n\n  /**@type {string} */\n  soups: \"湯\",\n\n  /**@type {string} */\n  stirFired: \"快炒\",\n\n  /**@type {string} */\n  coldPlates: \"冷盤\"\n};\n/**\r\n * @class\r\n * @description firestore.Products/ProductList.jsx/ProductCard.jsx\r\n * */\n\nvar ProductInfo = function ProductInfo() {\n  _classCallCheck(this, ProductInfo);\n\n  _defineProperty(this, \"productId\", \"null\");\n\n  _defineProperty(this, \"name\", \"null\");\n\n  _defineProperty(this, \"price\", 0);\n\n  _defineProperty(this, \"fstsAddDateTime_server\", null);\n\n  _defineProperty(this, \"category\", \"null\");\n\n  _defineProperty(this, \"tag\", \"#\");\n\n  _defineProperty(this, \"imgUrl\", \"./\");\n\n  _defineProperty(this, \"imgFileName\", \"default.png\");\n\n  _defineProperty(this, \"autoNum\", null);\n\n  _defineProperty(this, \"isActived\", false);\n};\n/**\r\n * @class\r\n * @description OrderInfo.OrderStatus\r\n */\n\nvar OrderStatus = function OrderStatus() {\n  _classCallCheck(this, OrderStatus);\n\n  _defineProperty(this, \"isPaid\", false);\n\n  _defineProperty(this, \"isCompleted\", false);\n\n  _defineProperty(this, \"isCanceled\", false);\n\n  _defineProperty(this, \"isDelivery\", false);\n};\n/**\r\n * @class\r\n * @description - OrderInfo.OrderLog by LogType\r\n */\n\nvar OrderLog = function OrderLog() {\n  _classCallCheck(this, OrderLog);\n\n  _defineProperty(this, \"fstsLogDateTime_server\", null);\n\n  _defineProperty(this, \"logType\", '');\n\n  _defineProperty(this, \"remarks\", '');\n};\n/**\r\n * @enum {string}\r\n * @desc firestore.OrderInfo.LogType\r\n * */\n\nvar LogType = {\n  NewOrder: \"NewOrder\",\n  PaidMoney: \"PaidMoney\",\n  CancelOrder: \"CancelOrder\",\n  DeliveryOrder: \"DeliveryOrder\",\n  CompleteOrder: \"CompleteOrder\"\n};\n/** \r\n * @class\r\n * @description - from firestore.OrderInfo \r\n */\n\nvar OrderInfo = /*#__PURE__*/function () {\n  function OrderInfo() {\n    _classCallCheck(this, OrderInfo);\n\n    _defineProperty(this, \"userId\", \"xxxxxxx\");\n\n    _defineProperty(this, \"fstsCreateDateTime_server\", null);\n\n    _defineProperty(this, \"orderId\", \"XXXXXXXX\");\n\n    _defineProperty(this, \"orderAddress\", 'XXXXXX');\n\n    _defineProperty(this, \"shopItemList\", []);\n\n    _defineProperty(this, \"getShopItems_ProdId\", function () {\n      var list_productId = this.shopItemList.map(function (item) {\n        return item.productId;\n      });\n      return list_productId; //console.log(arr)\n      //console.log(this.shopItemList)\n    });\n\n    _defineProperty(this, \"totalPrice\", 0);\n\n    _defineProperty(this, \"orderStatus\", {\n      isPaid: false,\n      isCompleted: false,\n      isCanceled: false,\n      isDelivery: false\n    });\n\n    _defineProperty(this, \"orderLog\", []);\n\n    _defineProperty(this, \"userData\", new UserData());\n  }\n\n  _createClass(OrderInfo, [{\n    key: \"fillShopItems\",\n\n    /**\r\n     * fill shopItem detail information\r\n     * @param {ProductInfo[]} arrayProductInfo - distinct product list\r\n     */\n    value: function fillShopItems(arrayProductInfo) {\n      var _this2 = this;\n\n      //console.log(arrayProductInfo)\n      //console.log(this.shopItemList)\n      this.totalPrice = 0;\n      this.shopItemList = this.shopItemList.map(function (item) {\n        // convert to ShopItemInfo()\n        var shopiteminfo = item;\n\n        if (item instanceof ShopItemInfo == false) {\n          shopiteminfo = Object.assign(new ShopItemInfo(), item);\n        } // fill shopiteminfo._productInfo\n\n\n        shopiteminfo.fill_ProductInfo_ByProductArray(arrayProductInfo); // count OrderInfo.totalPrice\n\n        _this2.totalPrice += shopiteminfo.amount * shopiteminfo.price; //console.log(shopiteminfo)\n\n        return shopiteminfo;\n      }); //console.log(this.shopItemList)\n    }\n    /**@type {number} */\n\n  }, {\n    key: \"convertDbFields\",\n    // {\n    //     \"dispalyName\": null,\n    //     \"emailVerified\": true,\n    //     \"userProfile\": {\n    //         \"name\": \"HH\",\n    //         \"address\": \"台北市萬華區寧波街11號XXXXXXXXXX\"\n    //     },\n    //     \"phoneNumber\": \"+886926923281\",\n    //     \"uid\": \"s5hWIA4pdQN8NGjBmPekJoOodBi2\",\n    //     \"photoURL\": \"https://lh3.googleusercontent.com/a-/AOh14GgufKuvpe34oq9gzvV9CppvPhWjISRrNeF4wbdOkw=s96-c\",\n    //     \"providerId\": \"google.com\",\n    //     \"email\": \"tristan829@gmail.com\"\n    // }\n    value: function convertDbFields() {\n      if (!this.fstsCreateDateTime_server.toDate) {\n        var toDate2 = function toDate2() {\n          return (0,_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_0__.getDate_From_Firestore_TimeStamp)(this);\n        };\n\n        this.fstsCreateDateTime_server.toDate = toDate2;\n      }\n    }\n  }, {\n    key: \"jsdtCreateDateTime_server\",\n\n    /**@type {?Date} - server time conver to client js datetime*/\n    get: function get() {\n      return this.fstsCreateDateTime_server == null ? null : this.fstsCreateDateTime_server.toDate();\n    }\n    /**@property {string} */\n\n  }, {\n    key: \"sCreateDateTime\",\n    get: function get() {\n      return getDisplayTime(this.jsdtCreateDateTime_server);\n    }\n    /**@property {string} */\n\n  }, {\n    key: \"sOrderStatus\",\n    get: function get() {\n      var rtnStatus = \"訂單成立,等待出貨\";\n      if (this.orderStatus.isPaid === true) rtnStatus = \"已付款\";\n      if (this.orderStatus.isDelivery === true) rtnStatus = \"已出貨\";\n      if (this.orderStatus.isCanceled === true) rtnStatus = \"已取消\";\n      if (this.orderStatus.isCompleted === true) rtnStatus = \"訂單完成(已送達)\"; // orderStatus = {\n      //     isPaid: false,\n      //     isCompleted: false,\n      //     isCanceled: false,\n      //     isDelivery: false\n      // }\n\n      return rtnStatus;\n    }\n    /**@type {string} */\n\n  }, {\n    key: \"orderProductName\",\n\n    /**@property {string} - first shop product name with /.... */\n    get: function get() {\n      if (this.shopItemList.length == 0) return '';\n      var shopItem_0 = this.shopItemList[0];\n      if (this.shopItemList.length >= 2) return \"\".concat(shopItem_0.productName, \" / .....\");else return \"\".concat(shopItem_0.productName);\n    }\n    /**\r\n     * get listProductId\r\n     * @returns {string[]}\r\n     */\n\n  }], [{\n    key: \"getOrderInfo_FromDbFormat\",\n    value: function getOrderInfo_FromDbFormat(db_orderInfo) {\n      var newOrderInfo = new OrderInfo();\n      newOrderInfo = Object.assign(newOrderInfo, db_orderInfo);\n      newOrderInfo.convertDbFields();\n      return newOrderInfo;\n    }\n  }]);\n\n  return OrderInfo;\n}();\n/**@class \r\n * @desc firestore.Users\r\n*/\n\nvar UserData = /*#__PURE__*/function () {\n  function UserData() {\n    _classCallCheck(this, UserData);\n\n    _defineProperty(this, \"dispalyName\", null);\n\n    _defineProperty(this, \"emailVerified\", false);\n\n    _defineProperty(this, \"userProfile\", new UserProfile());\n\n    _defineProperty(this, \"phoneNumber\", \"\");\n\n    _defineProperty(this, \"uid\", \"\");\n\n    _defineProperty(this, \"photoURL\", \"\");\n\n    _defineProperty(this, \"email\", \"\");\n\n    _defineProperty(this, \"listProviderId\", []);\n  }\n\n  _createClass(UserData, [{\n    key: \"providerId\",\n\n    /**@prop {string} */\n    //providerId= \"\"\n    get: function get() {\n      if (this.listProviderId.length === 0) return null; //find google providerId\n\n      var findGoogle = this.listProviderId.find(function (item) {\n        if (item === UserData.ENUM_ProviderType.google) //'google.com')\n          return true; // return 'google.com'\n      });\n      if (findGoogle) // type string\n        return UserData.ENUM_ProviderType.google; //'google.com'\n      else //undefined\n        return UserData.ENUM_ProviderType.password; //'password'\n    },\n    set: function set(value) {\n      this.listProviderId = [value];\n    }\n    /**@prop {string} */\n\n  }], [{\n    key: \"getListProviderId_ByAuthUserProviderData\",\n    value: function getListProviderId_ByAuthUserProviderData(AuthUserProviderData) {\n      var arrayData = AuthUserProviderData;\n      var listProviderId = arrayData.map(function (item) {\n        return item.providerId;\n      });\n      return listProviderId;\n    }\n    /**@prop {string[]} */\n\n  }]);\n\n  return UserData;\n}();\n/**\r\n * @class\r\n * @desc firestore.Users.userProfile\r\n */\n\n_defineProperty(UserData, \"ENUM_ProviderType\", {\n  google: \"google.com\",\n  password: \"password\"\n});\n\nvar UserProfile = function UserProfile() {\n  _classCallCheck(this, UserProfile);\n\n  _defineProperty(this, \"uid\", \"XXXXXXX\");\n\n  _defineProperty(this, \"name\", \"\");\n\n  _defineProperty(this, \"address\", \"\");\n} // /**@type {string} */\n// address1 = \"XXXXXXX\"\n// /**@type {string} */\n// address2 = \"XXXXXXX\"\n// /**@type {string} */\n// address3 = \"XXXXXXX\"\n// /**@type {(1|2|3)} */\n// addressSelectNo = 1\n///**@function */\n// getSelectedAddress() {\n//     let propName = `address${this.addressSelectNo}`\n//     return this[propName]\n// }\n;\n/**\r\n * @typedef {Object} GlobalFlag\r\n * @prop {boolean} [__myFlag__]\r\n * @prop {firebase} [firebase]\r\n * @prop {import('../firebase/FirebaseMJS.js').default} [Firebase]\r\n * @prop {object} [app]\r\n * @typedef {Window & GlobalFlag} ExtendedWindow\r\n */\n\nvar fakeProductInfo1 = new ProductInfo();\nfakeProductInfo1.productId = \"ajnck\";\nfakeProductInfo1.name = \"胖老爹美式炸雞,胖老爹美式炸雞,胖老爹美式炸雞,胖老爹美式炸雞\";\nfakeProductInfo1.price = 140;\nfakeProductInfo1.imgFileName = \"白斬雞.jpg\"; //fakeProductInfo1.imgUrl = \"images/四季豆-d83dcdceb072b6cb1e7eb3cff1d5c656.jpg\"\n\nvar fakeProductInfo2 = new ProductInfo();\nfakeProductInfo2.productId = \"okdsf\";\nfakeProductInfo2.name = \"蔥爆牛肉\";\nfakeProductInfo2.price = 550;\nfakeProductInfo2.imgFileName = \"蔥爆牛肉.jpg\"; //fakeProductInfo2.imgUrl = \"images/四季豆-d83dcdceb072b6cb1e7eb3cff1d5c656.jpg\"\n\nvar fakeProductInfo3 = new ProductInfo();\nfakeProductInfo3.productId = \"fdsafe\";\nfakeProductInfo3.name = \"蔥爆牛肉222\";\nfakeProductInfo3.price = 220;\nfakeProductInfo3.imgFileName = \"四季豆.jpg\"; //fakeProductInfo3.imgUrl = \"images/蔥爆牛肉-c5015d40ca191cbb33002457f64a7cf7.jpg\"\n\n\n/**\r\n * \r\n * @param {?Date} inDate \r\n * @returns {string}\r\n */\n\nfunction getDisplayTime(inDate) {\n  if (!inDate) return 'noTime';else return \"\".concat(inDate.getFullYear(), \"/\").concat(inDate.getMonth() + 1, \"/\").concat(inDate.getDate(), \" \").concat(inDate.getHours(), \":\").concat(inDate.getMinutes(), \":\").concat(inDate.getSeconds());\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9kYXRhRGVmaW5lL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvZGF0YURlZmluZS9pbmRleC5qcz8zZWE2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vQHRzLWNoZWNrXHJcbi8vSW5zaWRlIG9mIHNldHRpbmdzLmpzb24sIGFkZCB0aGUgZm9sbG93aW5nOnsgXCJqYXZhc2NyaXB0LmltcGxpY2l0UHJvamVjdENvbmZpZy5jaGVja0pzXCI6IHRydWUgfVxyXG5cclxuaW1wb3J0IEZpcmViYXNlTUpTLCB7Z2V0RGF0ZV9Gcm9tX0ZpcmVzdG9yZV9UaW1lU3RhbXB9IGZyb20gJy4uL2ZpcmViYXNlL0ZpcmViYXNlTUpTLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3NcclxuICogQGRlc2MgbWluZzEgcHJvamVjdCBTaG9wSXRlbS5qc3hcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTaG9wSXRlbUluZm8ge1xyXG4gICAgLyoqQHR5cGUgeyhQcm9kdWN0SW5mb3xudWxsfHVuZGVmaW5lZCl9ICovXHJcbiAgICBfcHJvZHVjdEluZm87XHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgcHJvZHVjdElkID0gJ1hYWFhYWFhYWFhYWFgnXHJcbiAgICAvL3Byb2R1Y3RJbmZvPXtwcm9kdWN0SWQ6J21tbW1tbW1tbW0nfVxyXG4gICAgLyoqQHR5cGUge251bWJlcn0gKi9cclxuICAgIGFtb3VudCA9IDBcclxuICAgIC8qKkB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICBwcmljZSA9IDBcclxuICAgIC8vcHJvZHVjdEluZm9cclxuICAgIC8qKkBwcm9wZXJ0eSB7c3RyaW5nfSovXHJcbiAgICBnZXQgcHJvZHVjdE5hbWUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9wcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgcmV0dXJuICcnXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2R1Y3RJbmZvLm5hbWVcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZmlsbCBfcHJvZHVjdEluZm8gLSBmcm9tIGdpdmVuIHByb2R1Y3QgbGlzdFxyXG4gICAgICogQHBhcmFtIHtQcm9kdWN0SW5mb1tdfSBhcnJheVByb2R1Y3RzIFxyXG4gICAgICovXHJcbiAgICBmaWxsX1Byb2R1Y3RJbmZvX0J5UHJvZHVjdEFycmF5KGFycmF5UHJvZHVjdHMpIHtcclxuICAgICAgICBpZiAoYXJyYXlQcm9kdWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0SW5mbyA9IG51bGxcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RJZClcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGFycmF5UHJvZHVjdHMpXHJcbiAgICAgICAgbGV0IGZpbmRQcm9kdWN0SW5mbyA9IGFycmF5UHJvZHVjdHMuZmluZCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5wcm9kdWN0SWQgPT09IHRoaXMucHJvZHVjdElkXHJcbiAgICAgICAgfSlcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdmaW5kLS0tJywgZmluZFByb2R1Y3RJbmZvKVxyXG4gICAgICAgIC8vaWYgcmVzdWx0IG5vdCBmb3VuZCwgZm9yY2UgdG8gY2xlYXIgdGhpcy5fcHJvZHVjdEluZm9cclxuICAgICAgICB0aGlzLnByb2R1Y3RJbmZvID0gbnVsbFxyXG4gICAgICAgIGlmIChmaW5kUHJvZHVjdEluZm8pXHJcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdEluZm8gPSBmaW5kUHJvZHVjdEluZm9cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLl9wcm9kdWN0SW5mbylcclxuICAgIH1cclxuICAgIC8qKkB0eXBlIHtQcm9kdWN0SW5mb30gLSBzZXQgdGhpcyBTaG9wSXRlbSdzIFByb2R1Y3RJbmZvKi9cclxuICAgIHNldCBwcm9kdWN0SW5mbyh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3Byb2R1Y3RJbmZvID0gdmFsdWVcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0SWQgPSB2YWx1ZS5wcm9kdWN0SWRcclxuICAgICAgICAgICAgdGhpcy5wcmljZSA9IHZhbHVlLnByaWNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIC8qKkB0eXBlIHsoUHJvZHVjdEluZm98bnVsbHx1bmRlZmluZWQpfSAtIHJldHVybiB0aGlzIFNob3BJdGVtJ3MgUHJvZHVjdEluZm8qL1xyXG4gICAgZ2V0IHByb2R1Y3RJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9kdWN0SW5mb1xyXG4gICAgfVxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmV4cG9ydCBjb25zdCBFTlVNX1Byb2R1Y3RDYXRlZ29yeSA9IHtcclxuICAgIC8vIHNveWJlYW46XCJzb3liZWFuXCIsXHJcbiAgICAvLyBkdWNrOlwiZHVja1wiLFxyXG4gICAgLy8gY2hpY2tlbjpcImNoaWNrZW5cIixcclxuICAgIC8vIGJlZWY6XCJiZWVmXCIsXHJcbiAgICAvLyBwb3JrOlwicG9ya1wiLFxyXG4gICAgLy8gb3RoZXJzOlwib3RoZXJzXCIsXHJcblxyXG4gICAgbWFpbkNvdXJzZTpcIm1haW5Db3Vyc2VcIixcclxuICAgIG1lYXRzOlwibWVhdHNcIixcclxuICAgIHNvdXBzOlwic291cHNcIixcclxuICAgIHN0aXJGaXJlZDpcInN0aXJGaXJlZFwiLFxyXG4gICAgY29sZFBsYXRlczpcImNvbGRQbGF0ZXNcIlxyXG59XHJcbmV4cG9ydCBjb25zdCBNYXBfUHJvZHVjdENhdGVnb3J5ID0ge1xyXG4gICAgLy8gc295YmVhbjpcIuixhumhnlwiLFxyXG4gICAgLy8gZHVjazpcIum0qOiCiemhnlwiLFxyXG4gICAgLy8gY2hpY2tlbjpcIumbnuiCiemhnlwiLFxyXG4gICAgLy8gYmVlZjpcIueJm+iCiemhnlwiLFxyXG4gICAgLy8gcG9yazpcIuixrOiCiemhnlwiLFxyXG4gICAgLy8gb3RoZXJzOlwi5YW25LuW6aGe5YilXCIsXHJcblxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIG1haW5Db3Vyc2U6XCLkuLvoj5xcIixcclxuICAgIC8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICBtZWF0czpcIuiCiemhnlwiLFxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIHNvdXBzOlwi5rmvXCIsXHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgc3RpckZpcmVkOlwi5b+r54KSXCIsXHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgY29sZFBsYXRlczpcIuWGt+ebpFwiXHJcbn1cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKiBAZGVzY3JpcHRpb24gZmlyZXN0b3JlLlByb2R1Y3RzL1Byb2R1Y3RMaXN0LmpzeC9Qcm9kdWN0Q2FyZC5qc3hcclxuICogKi9cclxuZXhwb3J0IGNsYXNzIFByb2R1Y3RJbmZvIHtcclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBwcm9kdWN0SWQgPSBcIm51bGxcIiAvL2FhYWFhLTFcclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBuYW1lID0gXCJudWxsXCIgLy9cIueZveaWrOmbnlwiXHJcbiAgICAvKipAcHJvcCB7bnVtYmVyfSAqL1xyXG4gICAgcHJpY2UgPSAwIC8vMTQwXHJcbiAgICAvKipAcHJvcCB7P2ZpcmViYXNlLmZpcmVzdG9yZS5UaW1lc3RhbXB9ICovXHJcbiAgICBmc3RzQWRkRGF0ZVRpbWVfc2VydmVyID0gbnVsbFxyXG5cclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBjYXRlZ29yeSA9IFwibnVsbFwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgdGFnID0gXCIjXCJcclxuXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgaW1nVXJsID0gXCIuL1wiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgaW1nRmlsZU5hbWUgPSBcImRlZmF1bHQucG5nXCIgLy/nmb3mlqzpm54uanBnXHJcbiAgICAvKipAcHJvcCB7P251bWJlcn0gKi9cclxuICAgIGF1dG9OdW0gPSBudWxsXHJcbiAgICAvKipAcHJvcCB7P2Jvb2xlYW59IC0gaW4gdXNlIG9yIG5vdCAqL1xyXG4gICAgaXNBY3RpdmVkID0gZmFsc2VcclxufVxyXG5cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKiBAZGVzY3JpcHRpb24gT3JkZXJJbmZvLk9yZGVyU3RhdHVzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT3JkZXJTdGF0dXMge1xyXG4gICAgLyoqQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICBpc1BhaWQgPSBmYWxzZTtcclxuICAgIC8qKkB0eXBlIHtib29sZWFufSAqL1xyXG4gICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgIC8qKkB0eXBlIHtib29sZWFufSAqL1xyXG4gICAgaXNDYW5jZWxlZCA9IGZhbHNlO1xyXG4gICAgLyoqQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICBpc0RlbGl2ZXJ5ID0gZmFsc2U7XHJcbn1cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKiBAZGVzY3JpcHRpb24gLSBPcmRlckluZm8uT3JkZXJMb2cgYnkgTG9nVHlwZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9yZGVyTG9nIHtcclxuICAgIC8qKkB0eXBlIHs/ZmlyZWJhc2UuZmlyZXN0b3JlLlRpbWVzdGFtcH0gKi9cclxuICAgIGZzdHNMb2dEYXRlVGltZV9zZXJ2ZXIgPSBudWxsXHJcbiAgICAvKipAdHlwZSB7TG9nVHlwZX0gKi9cclxuICAgIGxvZ1R5cGUgPSAnJ1xyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIHJlbWFya3MgPSAnJ1xyXG59XHJcblxyXG4vKipcclxuICogQGVudW0ge3N0cmluZ31cclxuICogQGRlc2MgZmlyZXN0b3JlLk9yZGVySW5mby5Mb2dUeXBlXHJcbiAqICovXHJcbmV4cG9ydCBjb25zdCBMb2dUeXBlID0ge1xyXG4gICAgTmV3T3JkZXI6IFwiTmV3T3JkZXJcIixcclxuICAgIFBhaWRNb25leTogXCJQYWlkTW9uZXlcIixcclxuICAgIENhbmNlbE9yZGVyOiBcIkNhbmNlbE9yZGVyXCIsXHJcbiAgICBEZWxpdmVyeU9yZGVyOiBcIkRlbGl2ZXJ5T3JkZXJcIixcclxuICAgIENvbXBsZXRlT3JkZXI6IFwiQ29tcGxldGVPcmRlclwiXHJcbn1cclxuXHJcbi8qKiBcclxuICogQGNsYXNzXHJcbiAqIEBkZXNjcmlwdGlvbiAtIGZyb20gZmlyZXN0b3JlLk9yZGVySW5mbyBcclxuICovZXhwb3J0IGNsYXNzIE9yZGVySW5mbyB7XHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAtIGZpcmVzdG9yZS5Vc2Vycy51aWQqL1xyXG4gICAgdXNlcklkID0gXCJ4eHh4eHh4XCJcclxuICAgIC8qKkB0eXBlIHsoP2ZpcmViYXNlLmZpcmVzdG9yZS5UaW1lc3RhbXApfSAtIG9yZGVyIGNyZWF0ZSBkYXRldGltZSBmcm9tIGZpcmVzdG9yZSovXHJcbiAgICBmc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyID0gbnVsbFxyXG4gICAgLyoqQHR5cGUgez9EYXRlfSAtIHNlcnZlciB0aW1lIGNvbnZlciB0byBjbGllbnQganMgZGF0ZXRpbWUqLyBcclxuICAgIGdldCBqc2R0Q3JlYXRlRGF0ZVRpbWVfc2VydmVyKCl7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZzdHNDcmVhdGVEYXRlVGltZV9zZXJ2ZXIgPT0gbnVsbCkgPyBudWxsIDogdGhpcy5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyLnRvRGF0ZSgpOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICAvKipAcHJvcGVydHkge3N0cmluZ30gKi9cclxuICAgIGdldCBzQ3JlYXRlRGF0ZVRpbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldERpc3BsYXlUaW1lKHRoaXMuanNkdENyZWF0ZURhdGVUaW1lX3NlcnZlcilcclxuICAgIH1cclxuICAgIC8qKkBwcm9wZXJ0eSB7c3RyaW5nfSAqL1xyXG4gICAgZ2V0IHNPcmRlclN0YXR1cygpIHtcclxuICAgICAgICBsZXQgcnRuU3RhdHVzID0gXCLoqILllq7miJDnq4ss562J5b6F5Ye66LKoXCJcclxuICAgICAgICBpZiAodGhpcy5vcmRlclN0YXR1cy5pc1BhaWQgPT09IHRydWUpXHJcbiAgICAgICAgICAgIHJ0blN0YXR1cyA9IFwi5bey5LuY5qy+XCJcclxuICAgICAgICBpZiAodGhpcy5vcmRlclN0YXR1cy5pc0RlbGl2ZXJ5ID09PSB0cnVlKVxyXG4gICAgICAgICAgICBydG5TdGF0dXMgPSBcIuW3suWHuuiyqFwiXHJcbiAgICAgICAgaWYgKHRoaXMub3JkZXJTdGF0dXMuaXNDYW5jZWxlZCA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgcnRuU3RhdHVzID0gXCLlt7Llj5bmtohcIlxyXG4gICAgICAgIGlmICh0aGlzLm9yZGVyU3RhdHVzLmlzQ29tcGxldGVkID09PSB0cnVlKVxyXG4gICAgICAgICAgICBydG5TdGF0dXMgPSBcIuioguWWruWujOaIkCjlt7LpgIHpgZQpXCJcclxuICAgICAgICAvLyBvcmRlclN0YXR1cyA9IHtcclxuICAgICAgICAvLyAgICAgaXNQYWlkOiBmYWxzZSxcclxuICAgICAgICAvLyAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxyXG4gICAgICAgIC8vICAgICBpc0NhbmNlbGVkOiBmYWxzZSxcclxuICAgICAgICAvLyAgICAgaXNEZWxpdmVyeTogZmFsc2VcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcmV0dXJuIHJ0blN0YXR1c1xyXG4gICAgfVxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIG9yZGVySWQgPSBcIlhYWFhYWFhYXCIgLy8gb2RrZS0yMDIwMDcxNy0wMDAxXHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgb3JkZXJBZGRyZXNzID0gJ1hYWFhYWCdcclxuICAgIC8qKkB0eXBlIHtTaG9wSXRlbUluZm9bXX0gKi9cclxuICAgIHNob3BJdGVtTGlzdCA9IFtdXHJcbiAgICAvKipAcHJvcGVydHkge3N0cmluZ30gLSBmaXJzdCBzaG9wIHByb2R1Y3QgbmFtZSB3aXRoIC8uLi4uICovXHJcbiAgICBnZXQgb3JkZXJQcm9kdWN0TmFtZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG9wSXRlbUxpc3QubGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgIHJldHVybiAnJ1xyXG4gICAgICAgIGxldCBzaG9wSXRlbV8wID0gdGhpcy5zaG9wSXRlbUxpc3RbMF1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvcEl0ZW1MaXN0Lmxlbmd0aCA+PSAyKVxyXG4gICAgICAgICAgICByZXR1cm4gYCR7c2hvcEl0ZW1fMC5wcm9kdWN0TmFtZX0gLyAuLi4uLmBcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBgJHtzaG9wSXRlbV8wLnByb2R1Y3ROYW1lfWBcclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGdldCBsaXN0UHJvZHVjdElkXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119XHJcbiAgICAgKi9cclxuICAgIGdldFNob3BJdGVtc19Qcm9kSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGxpc3RfcHJvZHVjdElkID0gdGhpcy5zaG9wSXRlbUxpc3QubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnByb2R1Y3RJZFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGxpc3RfcHJvZHVjdElkXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhhcnIpXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNob3BJdGVtTGlzdClcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZmlsbCBzaG9wSXRlbSBkZXRhaWwgaW5mb3JtYXRpb25cclxuICAgICAqIEBwYXJhbSB7UHJvZHVjdEluZm9bXX0gYXJyYXlQcm9kdWN0SW5mbyAtIGRpc3RpbmN0IHByb2R1Y3QgbGlzdFxyXG4gICAgICovXHJcbiAgICBmaWxsU2hvcEl0ZW1zKGFycmF5UHJvZHVjdEluZm8pIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGFycmF5UHJvZHVjdEluZm8pXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNob3BJdGVtTGlzdClcclxuICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwO1xyXG4gICAgICAgIHRoaXMuc2hvcEl0ZW1MaXN0ID0gdGhpcy5zaG9wSXRlbUxpc3QubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdG8gU2hvcEl0ZW1JbmZvKClcclxuICAgICAgICAgICAgbGV0IHNob3BpdGVtaW5mbyA9IGl0ZW1cclxuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBTaG9wSXRlbUluZm8gPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHNob3BpdGVtaW5mbyA9IE9iamVjdC5hc3NpZ24obmV3IFNob3BJdGVtSW5mbygpLCBpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBmaWxsIHNob3BpdGVtaW5mby5fcHJvZHVjdEluZm9cclxuICAgICAgICAgICAgc2hvcGl0ZW1pbmZvLmZpbGxfUHJvZHVjdEluZm9fQnlQcm9kdWN0QXJyYXkoYXJyYXlQcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgLy8gY291bnQgT3JkZXJJbmZvLnRvdGFsUHJpY2VcclxuICAgICAgICAgICAgdGhpcy50b3RhbFByaWNlICs9IChzaG9waXRlbWluZm8uYW1vdW50ICogc2hvcGl0ZW1pbmZvLnByaWNlKVxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNob3BpdGVtaW5mbylcclxuICAgICAgICAgICAgcmV0dXJuIHNob3BpdGVtaW5mb1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNob3BJdGVtTGlzdClcclxuICAgIH1cclxuICAgIC8qKkB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICB0b3RhbFByaWNlID0gMFxyXG4gICAgLyoqQHR5cGUge09yZGVyU3RhdHVzfSAqL1xyXG4gICAgb3JkZXJTdGF0dXMgPSB7XHJcbiAgICAgICAgaXNQYWlkOiBmYWxzZSxcclxuICAgICAgICBpc0NvbXBsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgaXNDYW5jZWxlZDogZmFsc2UsXHJcbiAgICAgICAgaXNEZWxpdmVyeTogZmFsc2VcclxuICAgIH1cclxuICAgIC8qKkB0eXBlIHtPcmRlckxvZ1tdfSAqL1xyXG4gICAgb3JkZXJMb2cgPSBbXVxyXG4gICAgLy8ge1xyXG4gICAgLy8gICAgIGZzdHNMb2dEYXRlVGltZV9zZXJ2ZXI6IG51bGwsXHJcbiAgICAvLyAgICAgbG9nVHlwZTogJycsXHJcbiAgICAvLyAgICAgcmVtYXJrczogJydcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipAcHJvcCB7VXNlckRhdGF9ICovXHJcbiAgICB1c2VyRGF0YSA9IG5ldyBVc2VyRGF0YSgpO1xyXG4gICAgLy8ge1xyXG4gICAgLy8gICAgIFwiZGlzcGFseU5hbWVcIjogbnVsbCxcclxuICAgIC8vICAgICBcImVtYWlsVmVyaWZpZWRcIjogdHJ1ZSxcclxuICAgIC8vICAgICBcInVzZXJQcm9maWxlXCI6IHtcclxuICAgIC8vICAgICAgICAgXCJuYW1lXCI6IFwiSEhcIixcclxuICAgIC8vICAgICAgICAgXCJhZGRyZXNzXCI6IFwi5Y+w5YyX5biC6JCs6I+v5Y2A5a+n5rOi6KGXMTHomZ9YWFhYWFhYWFhYXCJcclxuICAgIC8vICAgICB9LFxyXG4gICAgLy8gICAgIFwicGhvbmVOdW1iZXJcIjogXCIrODg2OTI2OTIzMjgxXCIsXHJcbiAgICAvLyAgICAgXCJ1aWRcIjogXCJzNWhXSUE0cGRRTjhOR2pCbVBla0pvT29kQmkyXCIsXHJcbiAgICAvLyAgICAgXCJwaG90b1VSTFwiOiBcImh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hLS9BT2gxNEdndWZLdXZwZTM0b3E5Z3p2VjlDcHB2UGhXaklTUnJOZUY0d2JkT2t3PXM5Ni1jXCIsXHJcbiAgICAvLyAgICAgXCJwcm92aWRlcklkXCI6IFwiZ29vZ2xlLmNvbVwiLFxyXG4gICAgLy8gICAgIFwiZW1haWxcIjogXCJ0cmlzdGFuODI5QGdtYWlsLmNvbVwiXHJcbiAgICAvLyB9XHJcblxyXG4gICAgXHJcbiAgICBjb252ZXJ0RGJGaWVsZHMoKXtcclxuICAgICAgICBpZighdGhpcy5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyLnRvRGF0ZSl7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvRGF0ZTIoKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXREYXRlX0Zyb21fRmlyZXN0b3JlX1RpbWVTdGFtcCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyLnRvRGF0ZSA9IHRvRGF0ZTI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldE9yZGVySW5mb19Gcm9tRGJGb3JtYXQoZGJfb3JkZXJJbmZvKXtcclxuICAgICAgICBsZXQgbmV3T3JkZXJJbmZvID0gbmV3IE9yZGVySW5mbygpO1xyXG4gICAgICAgIG5ld09yZGVySW5mbyA9IE9iamVjdC5hc3NpZ24obmV3T3JkZXJJbmZvLCBkYl9vcmRlckluZm8pXHJcbiAgICAgICAgbmV3T3JkZXJJbmZvLmNvbnZlcnREYkZpZWxkcygpO1xyXG4gICAgICAgIHJldHVybiBuZXdPcmRlckluZm9cclxuICAgIH1cclxufVxyXG4vKipAY2xhc3MgXHJcbiAqIEBkZXNjIGZpcmVzdG9yZS5Vc2Vyc1xyXG4qL1xyXG5leHBvcnQgY2xhc3MgVXNlckRhdGF7XHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgZGlzcGFseU5hbWU9IG51bGxcclxuICAgIC8qKkBwcm9wIHtib29sZWFufSAqL1xyXG4gICAgZW1haWxWZXJpZmllZD0gZmFsc2VcclxuICAgIC8qKkBwcm9wIHtVc2VyUHJvZmlsZX0gKi9cclxuICAgIHVzZXJQcm9maWxlPSBuZXcgVXNlclByb2ZpbGUoKTtcclxuICAgIC8vIHtcclxuICAgIC8vICAgICBuYW1lOiBcIkhIXCIsXHJcbiAgICAvLyAgICAgYWRkcmVzczogXCLlj7DljJfluILokKzoj6/ljYDlr6fms6LooZcxMeiZn1hYWFhYWFhYWFhcIlxyXG4gICAgLy8gfVxyXG4gICAgLyoqQHByb3Age3N0cmluZ30gKi9cclxuICAgIHBob25lTnVtYmVyPSBcIlwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgdWlkPSBcIlwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgcGhvdG9VUkw9IFwiXCJcclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICAvL3Byb3ZpZGVySWQ9IFwiXCJcclxuICAgIGdldCBwcm92aWRlcklkKCkge1xyXG4gICAgICAgIGlmKHRoaXMubGlzdFByb3ZpZGVySWQubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAvL2ZpbmQgZ29vZ2xlIHByb3ZpZGVySWRcclxuICAgICAgICBsZXQgZmluZEdvb2dsZSA9IHRoaXMubGlzdFByb3ZpZGVySWQuZmluZCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBpZihpdGVtID09PSBVc2VyRGF0YS5FTlVNX1Byb3ZpZGVyVHlwZS5nb29nbGUpLy8nZ29vZ2xlLmNvbScpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZSAvLyByZXR1cm4gJ2dvb2dsZS5jb20nXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZihmaW5kR29vZ2xlKS8vIHR5cGUgc3RyaW5nXHJcbiAgICAgICAgICAgIHJldHVybiBVc2VyRGF0YS5FTlVNX1Byb3ZpZGVyVHlwZS5nb29nbGUvLydnb29nbGUuY29tJ1xyXG4gICAgICAgIGVsc2UvL3VuZGVmaW5lZFxyXG4gICAgICAgICAgICByZXR1cm4gVXNlckRhdGEuRU5VTV9Qcm92aWRlclR5cGUucGFzc3dvcmQvLydwYXNzd29yZCdcclxuICAgIH1cclxuICAgIHNldCBwcm92aWRlcklkKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5saXN0UHJvdmlkZXJJZCA9IFt2YWx1ZV1cclxuICAgIH1cclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBlbWFpbD0gXCJcIlxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IEF1dGhVc2VyUHJvdmlkZXJEYXRhIFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRU5VTV9Qcm92aWRlclR5cGU9e1xyXG4gICAgICAgIGdvb2dsZTpcImdvb2dsZS5jb21cIixcclxuICAgICAgICBwYXNzd29yZDpcInBhc3N3b3JkXCJcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXRMaXN0UHJvdmlkZXJJZF9CeUF1dGhVc2VyUHJvdmlkZXJEYXRhKEF1dGhVc2VyUHJvdmlkZXJEYXRhKXtcclxuICAgICAgICBsZXQgYXJyYXlEYXRhID0gQXV0aFVzZXJQcm92aWRlckRhdGE7XHJcbiAgICAgICAgbGV0IGxpc3RQcm92aWRlcklkID0gYXJyYXlEYXRhLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5wcm92aWRlcklkO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGxpc3RQcm92aWRlcklkO1xyXG4gICAgfVxyXG4gICAgLyoqQHByb3Age3N0cmluZ1tdfSAqL1xyXG4gICAgbGlzdFByb3ZpZGVySWQgPSBbXVxyXG4gICAgXHJcbn1cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKiBAZGVzYyBmaXJlc3RvcmUuVXNlcnMudXNlclByb2ZpbGVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVc2VyUHJvZmlsZSB7XHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgdWlkID0gXCJYWFhYWFhYXCJcclxuICAgIC8vIC8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICAvLyBzZW5kRW1haWwgPSBcIlhYWFhYWFhcIlxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIG5hbWUgPSBcIlwiXHJcbiAgICAvLy8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICAvL3Bob25lTnVtYmVyID0gXCJYWFhYWFhYXCJcclxuICAgIC8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICBhZGRyZXNzID0gXCJcIlxyXG4gICAgLy8gLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIC8vIGFkZHJlc3MxID0gXCJYWFhYWFhYXCJcclxuICAgIC8vIC8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICAvLyBhZGRyZXNzMiA9IFwiWFhYWFhYWFwiXHJcbiAgICAvLyAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgLy8gYWRkcmVzczMgPSBcIlhYWFhYWFhcIlxyXG4gICAgLy8gLyoqQHR5cGUgeygxfDJ8Myl9ICovXHJcbiAgICAvLyBhZGRyZXNzU2VsZWN0Tm8gPSAxXHJcbiAgICAvLy8qKkBmdW5jdGlvbiAqL1xyXG4gICAgLy8gZ2V0U2VsZWN0ZWRBZGRyZXNzKCkge1xyXG4gICAgLy8gICAgIGxldCBwcm9wTmFtZSA9IGBhZGRyZXNzJHt0aGlzLmFkZHJlc3NTZWxlY3ROb31gXHJcbiAgICAvLyAgICAgcmV0dXJuIHRoaXNbcHJvcE5hbWVdXHJcbiAgICAvLyB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBHbG9iYWxGbGFnXHJcbiAqIEBwcm9wIHtib29sZWFufSBbX19teUZsYWdfX11cclxuICogQHByb3Age2ZpcmViYXNlfSBbZmlyZWJhc2VdXHJcbiAqIEBwcm9wIHtpbXBvcnQoJy4uL2ZpcmViYXNlL0ZpcmViYXNlTUpTLmpzJykuZGVmYXVsdH0gW0ZpcmViYXNlXVxyXG4gKiBAcHJvcCB7b2JqZWN0fSBbYXBwXVxyXG4gKiBAdHlwZWRlZiB7V2luZG93ICYgR2xvYmFsRmxhZ30gRXh0ZW5kZWRXaW5kb3dcclxuICovXHJcblxyXG5jb25zdCBmYWtlUHJvZHVjdEluZm8xID0gbmV3IFByb2R1Y3RJbmZvKClcclxuZmFrZVByb2R1Y3RJbmZvMS5wcm9kdWN0SWQgPSBcImFqbmNrXCJcclxuZmFrZVByb2R1Y3RJbmZvMS5uYW1lID0gXCLog5bogIHniLnnvo7lvI/ngrjpm54s6IOW6ICB54i5576O5byP54K46ZueLOiDluiAgeeIuee+juW8j+eCuOmbnizog5bogIHniLnnvo7lvI/ngrjpm55cIlxyXG5mYWtlUHJvZHVjdEluZm8xLnByaWNlID0gMTQwXHJcbmZha2VQcm9kdWN0SW5mbzEuaW1nRmlsZU5hbWUgPSBcIueZveaWrOmbni5qcGdcIlxyXG4vL2Zha2VQcm9kdWN0SW5mbzEuaW1nVXJsID0gXCJpbWFnZXMv5Zub5a2j6LGGLWQ4M2RjZGNlYjA3MmI2Y2IxZTdlYjNjZmYxZDVjNjU2LmpwZ1wiXHJcbmNvbnN0IGZha2VQcm9kdWN0SW5mbzIgPSBuZXcgUHJvZHVjdEluZm8oKVxyXG5mYWtlUHJvZHVjdEluZm8yLnByb2R1Y3RJZCA9IFwib2tkc2ZcIlxyXG5mYWtlUHJvZHVjdEluZm8yLm5hbWUgPSBcIuiUpeeIhueJm+iCiVwiXHJcbmZha2VQcm9kdWN0SW5mbzIucHJpY2UgPSA1NTBcclxuZmFrZVByb2R1Y3RJbmZvMi5pbWdGaWxlTmFtZSA9IFwi6JSl54iG54mb6IKJLmpwZ1wiXHJcbi8vZmFrZVByb2R1Y3RJbmZvMi5pbWdVcmwgPSBcImltYWdlcy/lm5vlraPosYYtZDgzZGNkY2ViMDcyYjZjYjFlN2ViM2NmZjFkNWM2NTYuanBnXCJcclxuY29uc3QgZmFrZVByb2R1Y3RJbmZvMyA9IG5ldyBQcm9kdWN0SW5mbygpXHJcbmZha2VQcm9kdWN0SW5mbzMucHJvZHVjdElkID0gXCJmZHNhZmVcIlxyXG5mYWtlUHJvZHVjdEluZm8zLm5hbWUgPSBcIuiUpeeIhueJm+iCiTIyMlwiXHJcbmZha2VQcm9kdWN0SW5mbzMucHJpY2UgPSAyMjBcclxuZmFrZVByb2R1Y3RJbmZvMy5pbWdGaWxlTmFtZSA9IFwi5Zub5a2j6LGGLmpwZ1wiXHJcbi8vZmFrZVByb2R1Y3RJbmZvMy5pbWdVcmwgPSBcImltYWdlcy/olKXniIbniZvogoktYzUwMTVkNDBjYTE5MWNiYjMzMDAyNDU3ZjY0YTdjZjcuanBnXCJcclxuZXhwb3J0IHtcclxuICAgIGZha2VQcm9kdWN0SW5mbzEsXHJcbiAgICBmYWtlUHJvZHVjdEluZm8yLFxyXG4gICAgZmFrZVByb2R1Y3RJbmZvM1xyXG59XHJcblxyXG4vKipcclxuICogXHJcbiAqIEBwYXJhbSB7P0RhdGV9IGluRGF0ZSBcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICovXHJcbmZ1bmN0aW9uIGdldERpc3BsYXlUaW1lKGluRGF0ZSkge1xyXG4gICAgaWYgKCFpbkRhdGUpXHJcbiAgICAgICAgcmV0dXJuICdub1RpbWUnXHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIGAke2luRGF0ZS5nZXRGdWxsWWVhcigpfS8ke2luRGF0ZS5nZXRNb250aCgpKzF9LyR7aW5EYXRlLmdldERhdGUoKX0gJHtpbkRhdGUuZ2V0SG91cnMoKX06JHtpbkRhdGUuZ2V0TWludXRlcygpfToke2luRGF0ZS5nZXRTZWNvbmRzKCl9YFxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBcUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBeENBO0FBQUE7QUFVQTtBQUNBO0FBQUE7QUFYQTtBQWFBO0FBRUE7QUFDQTtBQWhCQTtBQUFBO0FBQUE7QUF5Q0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQWhEQTtBQUFBO0FBa0RBO0FBQ0E7QUFuREE7QUFDQTtBQURBO0FBQUE7QUFxREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFqQkE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQXVEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQTlEQTtBQUNBO0FBREE7QUF5RkE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBekZBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUE2REE7QUFDQTtBQUNBO0FBQ0E7QUFqRUE7QUFrRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXRGQTtBQUFBO0FBd0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEhBO0FBd0hBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEvSEE7QUFBQTtBQUNBO0FBSUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFkQTtBQUFBO0FBQUE7QUFlQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFqQ0E7QUFBQTtBQUNBO0FBcUNBO0FBdENBO0FBd0NBO0FBRUE7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXREQTtBQUFBO0FBQUE7QUFpSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJJQTtBQUNBO0FBREE7QUFBQTtBQXVJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQWdCQTtBQUNBO0FBbEJBO0FBb0JBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFoQ0E7QUFrQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQ0E7QUFBQTtBQUFBO0FBK0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0REE7QUFDQTtBQURBO0FBQUE7QUF5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdEQTtBQTJDQTtBQUNBO0FBRkE7QUFDQTtBQWtCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7QUEwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/dataDefine/index.js\n");

/***/ }),

/***/ "./js/firebase/Firebase.js":
/*!*********************************!*\
  !*** ./js/firebase/Firebase.js ***!
  \*********************************/
/*! namespace exports */
/*! export ENUM_orderStatus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Email_ResendPassword [provided] [no usage info] [missing usage info prevents renaming] */
/*! export FIRESTORAGE_FOLDERS [provided] [no usage info] [missing usage info prevents renaming] */
/*! export FIRESTORE_COLLECTION [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MIME_TYPE [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MIME_TYPE\": () => /* binding */ MIME_TYPE,\n/* harmony export */   \"FIRESTORE_COLLECTION\": () => /* binding */ FIRESTORE_COLLECTION,\n/* harmony export */   \"FIRESTORAGE_FOLDERS\": () => /* binding */ FIRESTORAGE_FOLDERS,\n/* harmony export */   \"ENUM_orderStatus\": () => /* binding */ ENUM_orderStatus,\n/* harmony export */   \"default\": () => /* binding */ Firebase,\n/* harmony export */   \"Email_ResendPassword\": () => /* binding */ Email_ResendPassword\n/* harmony export */ });\n/* harmony import */ var _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dataDefine/index.js */ \"./js/dataDefine/index.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//@ts-check\n//Inside of settings.json, add the following:{ \"javascript.implicitProjectConfig.checkJs\": true }\n\n/**@typedef {object} EnumObj \r\n * @prop {number} value\r\n * @prop {string} desc\r\n */\n\n/**@enum {string} */\n\nvar MIME_TYPE = {\n  jpg: 'image/jpeg',\n  png: 'image/png'\n};\n/**@enum {string} */\n\nvar FIRESTORE_COLLECTION = {\n  Products: \"Products\",\n  ProductInfo: \"ProductInfo\",\n  Users: \"Users\",\n  OrderInfo: \"OrderInfo\"\n};\n/**@enum {string} */\n\nvar FIRESTORAGE_FOLDERS = {\n  Products: \"Products\"\n};\n/**@enum {string} */\n\nvar ENUM_orderStatus = {\n  all: 'all',\n  completed: 'completed',\n  waitForPay: 'waitForPay',\n  waitForDelivery: 'waitForDelivery',\n  canceled: 'canceled'\n};\n/**\r\n * @module\r\n * @class \r\n * @description Firebase class\r\n */\n\nvar Firebase = /*#__PURE__*/function () {\n  /**\r\n   * @param {firebase} firebase - from firebase\r\n   */\n  function Firebase(firebase, app) {\n    var _this = this;\n\n    _classCallCheck(this, Firebase);\n\n    _defineProperty(this, \"productInfo\", {\n      productId: \"xxxxxxxx\",\n      //aaaaa-1\n      name: \"xxxxxx\",\n      //\"白斬雞\"\n      price: 0,\n      //140\n      //imgFileName: \"xxxxxx\", //白斬雞.jpg\n      fstsAddDateTime_server: null,\n      isActived: false,\n      category: \"beef\",\n      tag: \"#牛肉#青椒\",\n      imgUrl: \"xxxxxx\",\n      imgFileName: \"XXX\",\n      autoNum: null\n    });\n\n    _defineProperty(this, \"initStorage\", function () {\n      if (_this._storageRef == null) // Create a root reference\n        _this._storageRef = _this._firebase.storage().ref();\n    });\n\n    _defineProperty(this, \"initDB\", function () {\n      if (_this._db == null) _this._db = _this._firebase.firestore();\n    });\n\n    _defineProperty(this, \"initFunctions\", function () {// if (this._functions == null)\n      //     this._functions = this._firebase.app().functions();\n    });\n\n    _defineProperty(this, \"_addProduct_db\", function (name, price) {\n      _this.initDB();\n\n      return _this._db.collection(FIRESTORE_COLLECTION.Products).add({\n        name: name,\n        price: price,\n        fstsAddDateTime_server: _this._firebase.firestore.FieldValue.serverTimestamp()\n      }); //new promise\n    });\n\n    _defineProperty(this, \"_setProduct_db\", function (productid, imgUrl, imgFileName) {\n      _this.initDB();\n\n      return _this._db.collection(FIRESTORE_COLLECTION.Products).doc(productid).set({\n        imgUrl: imgUrl,\n        imgFileName: imgFileName\n      }, {\n        merge: true\n      }); //new promise\n    });\n\n    _defineProperty(this, \"_setProduct_db_merge\", function (productid, newObject, options) {\n      if (options && options.beginEvent) {\n        options.beginEvent();\n      }\n\n      _this.initDB();\n\n      var newPromise = _this._db.collection(FIRESTORE_COLLECTION.Products).doc(productid).set(newObject, {\n        merge: true\n      }) //new promise\n      .then(function () {\n        if (options && options.endEvent) {\n          options.endEvent();\n        }\n\n        return 'end'; //Promise.resolve('TTT');\n      })[\"catch\"](function (err) {\n        return err; //Promise.reject(err)\n      });\n\n      return newPromise;\n    });\n\n    _defineProperty(this, \"getUser\", function () {\n      if (!_this._firebase.auth()) {\n        throw new Error('this._firebase.auth() is --->' + _this._firebase.auth());\n      }\n\n      if (_this._firebase.auth()) {\n        /**@ignore */\n        var pp = _this._firebase.auth();\n\n        if (pp) pp.currentUser.uid;\n      }\n\n      var uid = _this._firebase.auth().currentUser.uid;\n\n      _this.initDB();\n\n      return _this._db.collection(FIRESTORE_COLLECTION.Users).doc(uid).get().then(function (doc) {\n        return doc.data();\n      }); // .then((query) => {\n      //     console.log(query.docs)\n      // }\n      // )\n    });\n\n    _defineProperty(this, \"getProducts\", function () {\n      _this.initDB();\n\n      var rtn_ProductInfo_List = []; //console.log(this._db)\n      // this._db.collection(FIRESTORE_COLLECTION.Products)\n      //     .where(\"autoNum\", \"==\", 1)\n      //     .get()\n      //     .then((querySnapshot) => {\n      //         querySnapshot.forEach((item) => {\n      //             console.log(item.autoNum)\n      //         })\n      //     })\n      //     .catch((err) => {\n      //         console.log(err)\n      //     })\n      //let str = \"\";\n\n      return _this._db.collection(FIRESTORE_COLLECTION.Products) //.where(\"autoNum\", \"==\", 7)\n      .get().then(function (querySnapshot) {\n        // let {docs} = querySnapshot\n        // console.log(docs[2].data())\n        //console.log(querySnapshot.docs[1].data())\n        querySnapshot.forEach(function (doc) {\n          //console.log(doc.id)\n          if (doc.id === '--AutoNum--') return true; //console.log(111)\n          // doc.data() is never undefined for query doc snapshots\n          //console.log(doc.id)\n\n          var data = doc.data();\n          rtn_ProductInfo_List.push(data); // str += JSON.stringify(data)\n          // console.log(doc.id, \" => \", doc.data());\n        }); //console.log(888)\n\n        return rtn_ProductInfo_List;\n      }); // .catch(function (error) {\n      // });\n    });\n\n    _defineProperty(this, \"addProduct4\", function (name, price, blob, options) {\n      //console.log(87)\n      if (options && options.beginEvent) {\n        options.beginEvent();\n      } // if(options.endEvent)\n\n\n      _this.initDB();\n\n      var that = _this; //get blob extension\n\n      var extention = _this.getBlobExtension(blob); //console.log(extention)\n\n\n      return _this._setProducts_And_autoNum(name, price, extention).then(function (_ref) {\n        var imgFileName = _ref.imgFileName,\n            newDoc = _ref.newDoc;\n        //{imgFileName,newDoc}\n        // console.log(e)\n        // console.log(111)\n        // debugger\n        var promise1 = that.uploadFile(blob, \"\".concat(FIRESTORAGE_FOLDERS.Products, \"/\").concat(imgFileName));\n        return Promise.all([promise1, Promise.resolve(imgFileName), Promise.resolve(newDoc)]);\n      }).then(function (result) {\n        // console.log(222)\n        // debugger\n        var url = result[0];\n        var imgFileName = result[1];\n        var newDoc = result[2]; //console.log(result[0])\n\n        return newDoc.set({\n          imgUrl: url,\n          imgFileName: imgFileName\n        }, {\n          merge: true\n        });\n      }).then(function () {\n        if (options && options.endEvent) {\n          options.endEvent();\n        }\n      })[\"catch\"](function (err) {});\n    });\n\n    _defineProperty(this, \"addProduct5\", function (name, price, category, imgUrl, options) {\n      function getRandomId(num) {\n        var startIndex = 2; //ignore '0.'\n\n        var endIndex = 2 + num; //let uuid = Math.random().toString(36).substring(2, 10) // 36 carry bit, ignore '0.', get 8 char\n\n        var uuid = Math.random().toString(36).substring(startIndex, endIndex); // 36 carry bit, ignore '0.', get 8 char\n\n        return uuid;\n      } //console.log(87)\n\n\n      if (options && options.beginEvent) {\n        options.beginEvent();\n      } // if(options.endEvent)\n\n\n      _this.initDB();\n\n      var that = _this;\n      var newNum = 0; //1\n\n      var FIRESTORE_COLLECTION_ProductInfo = 'ProductInfo';\n\n      var autoNum_DocRef = that._db.collection(FIRESTORE_COLLECTION_ProductInfo).doc(\"--AutoNum--\");\n\n      return that._db.runTransaction(function (transaction) {\n        return transaction.get(autoNum_DocRef).then(function (autoNum_Doc) {\n          if (!autoNum_Doc.exists) {\n            //throw \"autoNum_DocDocument does not exist!\";\n            return autoNum_DocRef.set({\n              '--AutoNum--': newNum,\n              //0\n              'autoNum': newNum,\n              //0\n              updateDateTime: that._firebase.firestore.FieldValue.serverTimestamp()\n            });\n          } //get autoNum data\n\n\n          var autoNum_data = autoNum_Doc.data();\n          var nowNum = autoNum_data.autoNum; //serial number\n\n          nowNum++;\n          var sNowNum = String(nowNum).padStart(4, '0'); // //add new doc\n          // let uuid = Math.random().toString(36).substring(2, 10) // 36 carry bit, ignore '0.', get 8 char\n\n          var newProdId = \"\".concat(sNowNum, \"-\").concat(getRandomId(3)); //let price = 140\n          //let name = \"白斬雞\"\n          // let sNowNum = nowNum.toString().padStart(4, \"0\")\n          // uuid = `${uuid}-${sNowNum}`\n\n          var newDocRef = that._db.collection(FIRESTORE_COLLECTION_ProductInfo).doc(newProdId);\n          /**@type {import('../dataDefine/index.js').ProductInfo} */\n\n\n          var prodInfo = new _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.ProductInfo();\n          prodInfo.productId = newProdId; // 0001-tds\n\n          prodInfo.name = name; //\"白斬雞\"\n\n          prodInfo.price = price; //140\n\n          prodInfo.fstsAddDateTime_server = that._firebase.firestore.FieldValue.serverTimestamp();\n          prodInfo.category = category;\n          if (imgUrl) prodInfo.imgUrl = imgUrl; //prodInfo.tag = \"#\"\n          //prodInfo.imgUrl = 'null'\n          //prodInfo.imgFileName = 'null'\n\n          prodInfo.autoNum = nowNum; // convert to plain object\n\n          prodInfo = Object.assign({}, prodInfo); // prodInfo = {\n          //     \"name\": \"豬腱\",\n          //     \"price\": 100,\n          //     \"category\": \"pork\"\n          // }\n\n          transaction.set(newDocRef, prodInfo);\n          transaction.update(autoNum_DocRef, {\n            autoNum: nowNum\n          });\n          return newDocRef; //newProdId\n          //return Promise.resolve(newProdId)\n        });\n      }).then(function (newDocRef) {\n        return newDocRef.get();\n      }).then(function (docSnapShot) {\n        return docSnapShot.data();\n      });\n    });\n\n    _defineProperty(this, \"uploadFile\", function (blob, cloudFilePath) {\n      _this.initStorage(); // Create a root reference\n      //var storageRef = firebase.storage().ref();\n      // Create a reference to 'mountains.jpg'\n      //var mountainsRef = storageRef.child('MenuImages/mountains.jpg');\n\n\n      var childRef = _this._storageRef.child(cloudFilePath); // Create a reference to 'images/mountains.jpg'\n      //var mountainImagesRef = storageRef.child('images/mountains.jpg');\n      // While the file names are the same, the references point to different files\n      // mountainsRef.name === mountainImagesRef.name // true\n      // mountainsRef.fullPath === mountainImagesRef.fullPath // false\n      // var file = ... // use the Blob or File API\n\n\n      var promise_UploadTask = childRef.put(blob).then(function (snapshot) {\n        //console.log(snapshot)\n        return snapshot.ref.getDownloadURL(); // snapshot.ref.getDownloadURL().then(url => {\n        // })\n        //return snapshot.ref.downloadURL()\n      }).then(function (url) {\n        // console.log(url)\n        return url;\n      }) // .then((snapshot) => {\n      //     console.log(snapshot)\n      // })\n      [\"catch\"](function (e) {});\n      return promise_UploadTask; // uploadTask.on('state_changed',(snapshot) => {\n      //     var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n      // });\n    });\n\n    _defineProperty(this, \"downloadFile\", function (cloudFilePath, fnApplyUrl) {\n      //'images/stars.jpg'\n      _this.initStorage(); // Create a reference to the file we want to download\n\n\n      var starsRef = _this._storageRef.child(cloudFilePath); // Get the download URL\n\n\n      starsRef.getDownloadURL().then(function (url) {\n        // Insert url into an <img> tag to \"download\"\n        fnApplyUrl(url);\n      })[\"catch\"](function (error) {\n        console.log(error); // A full list of error codes is available at\n        // https://firebase.google.com/docs/storage/web/handle-errors\n\n        switch (error.code) {\n          case 'storage/object-not-found':\n            // File doesn't exist\n            break;\n\n          case 'storage/unauthorized':\n            // User doesn't have permission to access the object\n            break;\n\n          case 'storage/canceled':\n            // User canceled the upload\n            break;\n          //...\n\n          case 'storage/unknown':\n            // Unknown error occurred, inspect the server response\n            break;\n        }\n      });\n    });\n\n    _defineProperty(this, \"uploadFile_progress\", function (blob, cloudFilePath) {\n      _this.initStorage();\n\n      var uploadTask = _this._storageRef.child(cloudFilePath).put(blob);\n\n      var self = _this; // Register three observers:\n      // 1. 'state_changed' observer, called any time the state changes\n      // 2. Error observer, called on failure\n      // 3. Completion observer, called on successful completion\n\n      uploadTask.on(self._firebase.storage.TaskEvent.STATE_CHANGED, function (snapshot) {\n        // Observe state change events such as progress, pause, and resume\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n\n        switch (snapshot.state) {\n          case self._firebase.storage.TaskState.PAUSED:\n            // or 'paused'\n            break;\n\n          case self._firebase.storage.TaskState.RUNNING:\n            // or 'running'\n            break;\n        }\n      }, function (error) {\n        // Handle unsuccessful uploads\n        // A full list of error codes is available at\n        // https://firebase.google.com/docs/storage/web/handle-errors\n        console.log(error);\n\n        switch (error.code) {\n          case 'storage/unauthorized':\n            // User doesn't have permission to access the object\n            break;\n\n          case 'storage/canceled':\n            // User canceled the upload\n            break;\n          //...\n\n          case 'storage/unknown':\n            // Unknown error occurred, inspect error.serverResponse\n            break;\n        }\n      }, function () {\n        // Handle successful uploads on complete\n        // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {});\n      });\n    });\n\n    _defineProperty(this, \"getUser2\", function (data) {\n      _this.initFunctions(); //var addMessage = this._firebase.app().functions('asia-east2').httpsCallable('getUser');\n\n\n      var addMessage = _this._firebase.app().functions('asia-east2').httpsCallable('addOrderInfo');\n\n      return addMessage(data); // .then(function (result) {\n      //     chai.expect(10).to.be.equal(10);\n      //     // Read result of the Cloud Function.\n      //     //var sanitizedMessage = result.data.text;\n      //     //console.log(result)\n      // }).catch(function (error) {\n      //     // Getting the Error details.\n      //     var code = error.code;\n      //     var message = error.message;\n      //     var details = error.details;\n      //     console.log(error)\n      //     // ...\n      // });\n    });\n\n    _defineProperty(this, \"getOrderInfo\", function (userId, orderStatus) {\n      _this.initDB(); // if(userId)\n      //     fakeUid = userId\n\n\n      var rtnOrderInfo_list = [];\n      var list_productId = [];\n      var self = _this;\n      /**@param {ENUM_orderStatus} inOrderStatus */\n\n      function getQuery(inOrderStatus) {\n        switch (inOrderStatus) {\n          case ENUM_orderStatus.all:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId);\n\n          case ENUM_orderStatus.completed:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isCompleted', '==', true);\n\n          case ENUM_orderStatus.waitForPay:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', false).where('orderStatus.isCanceled', '==', false);\n\n          case ENUM_orderStatus.waitForDelivery:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', true).where('orderStatus.isDelivery', '==', false);\n\n          case ENUM_orderStatus.canceled:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isCanceled', '==', true);\n\n          default:\n            break;\n        }\n      } //return this._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', true).get()\n\n\n      return getQuery(orderStatus).get() //.orderBy(\"createDateTime\",\"desc\").get()\n      .then(function (snapshot) {\n        snapshot.forEach(function (element) {\n          var _list_productId;\n\n          //let data = snapshot.docs[0].data()\n          var orderInfo = _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.OrderInfo.getOrderInfo_FromDbFormat(element.data()); //orderInfo = Object.assign(orderInfo, element.data());\n          //orderInfo.fstsCreateDateTime_server = (orderInfo.fstsCreateDateTime_server == null) ? null : orderInfo.fstsCreateDateTime_server.toDate()\n\n          rtnOrderInfo_list.push(orderInfo);\n          var arr = orderInfo.getShopItems_Id();\n\n          (_list_productId = list_productId).push.apply(_list_productId, _toConsumableArray(arr));\n        }); //list_productId.push('AAA','AAA');\n        //distinct\n\n        list_productId = _toConsumableArray(new Set(list_productId));\n        rtnOrderInfo_list.sort(function (a, b) {\n          return b.jsdtCreateDateTime_server - a.jsdtCreateDateTime_server;\n        }); //console.log(list_productId)\n        //console.log(rtnOrderInfo_list)\n\n        return [rtnOrderInfo_list, list_productId];\n      }).then(function (array) {\n        var _array = _slicedToArray(array, 2),\n            orderInfo_list = _array[0],\n            list_productId = _array[1]; //------- group list_productId limit -- 10\n\n\n        function getGroupedArray_ByTimes(TargetArray, eachGroupCount) {\n          var rtnGroupedArray = []; // loop times\n\n          var doTimes = Math.ceil(TargetArray.length / eachGroupCount); //4\n\n          for (var i = 0; i < doTimes; i++) {\n            var newGroup = TargetArray.splice(0, eachGroupCount);\n            rtnGroupedArray.push(newGroup);\n          }\n\n          return rtnGroupedArray;\n        }\n        /**@type {Array} */\n\n\n        var listGroupProductId = getGroupedArray_ByTimes(list_productId, 10); // get firestore - Products in Id\n\n        var newPromise = function newPromise(list_Limit_10_ProductIds) {\n          return self._db.collection(FIRESTORE_COLLECTION.ProductInfo).where(self._firebase.firestore.FieldPath.documentId(), 'in', list_Limit_10_ProductIds) //['02d2bss3-0012','1c718och-0001'])\n          .get();\n        }; // console.log(newPromise)\n\n\n        var PromistArray = []; //console.log(listGroupProductId[0])\n\n        PromistArray.push(orderInfo_list); //PromistArray.push(list_productId)\n\n        listGroupProductId.forEach(function (item) {\n          PromistArray.push(newPromise(item)); //listGroupProductId[0]))    \n        }); //PromistArray.push(newPromise(listGroupProductId[0]))\n        // PromistArray.push(newPromise(listGroupProductId[1]))\n        // for(let i=0;i<listGroupProductId.length;i++){\n        //     let list_Limit_10_ProductIds = listGroupProductId[i]\n        //     PromistArray.push(newPromise(list_Limit_10_ProductIds))\n        // }\n\n        return Promise.all(PromistArray); //[orderInfo_list, list_productId, newPromise()])\n      }).then(function (array) {\n        var orderInfo_list = array.shift(); // pop [0]\n        //let list_productId = array.splice(0, 1)\n        //let [orderInfo_list, list_productId, snapshot] = array\n\n        var arraySnapshot = array;\n        var rtnOrderInfo_list = orderInfo_list;\n        /**\r\n         * @type {ProductInfo[]} - distinct productInfo list\r\n         */\n\n        var arrayDistinctProducts = []; //collect distinct productInfo array\n        //arraySnapshot = arraySnapshot.flat(1)\n\n        var arrayDocs = [];\n        arraySnapshot.forEach(function (snapshot) {\n          arrayDocs = arrayDocs.concat(snapshot.docs);\n        }); //arraySnapshot[0].docs, arraySnapshot[1].docs\n        //arrayDocs = arrayDocs.flat(1)\n\n        arrayDocs.forEach(function (element) {\n          /**@type {ProductInfo} */\n          var productInfo = element.data();\n          productInfo = Object.assign(new _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.ProductInfo(), productInfo);\n          arrayDistinctProducts.push(productInfo); //console.log(productInfo)\n        }); //fill ShopItems - _productInfo\n        //console.log('-----',rtnOrderInfo_list)\n        //rtnOrderInfo_list = rtnOrderInfo_list.flat(1)\n\n        rtnOrderInfo_list.forEach(function (eachOrderInfo) {\n          //console.log('---------',eachOrderInfo[0])\n          eachOrderInfo.fillShopItems(arrayDistinctProducts); //console.log(element.orderId)\n        });\n        /**@type {OrderInfo[]} */\n\n        return rtnOrderInfo_list;\n      }); // .then((array) => {\n      //     let [orderInfo_list, list_productId] = array\n      //     let rtnOrderInfo_list = orderInfo_list\n      //     /**\n      //      * @type {ProductInfo[]} - distinct productInfo list\n      //      */\n      //     let arrayDistinctProducts = []\n      //     // console.log(rtnOrderInfo_list)\n      //     // console.log(list_productId)\n      //     //.where(self._db.FieldPath.documentId(), 'in', ['02d2bss3-0012'])\n      //     //console.log(self._db.FieldPath)\n      //     self._db.collection(FIRESTORE_COLLECTION.Products)\n      //     .where(self._firebase.firestore.FieldPath.documentId(), 'in', list_productId)//['02d2bss3-0012','1c718och-0001'])\n      //     .get()\n      //     .then((snapshot) => {\n      //         //collect distinct productInfo array\n      //         snapshot.forEach(element => {\n      //             /**@type {ProductInfo} */\n      //             let productInfo = element.data()\n      //             productInfo = Object.assign(new ProductInfo(),productInfo)\n      //             arrayDistinctProducts.push(productInfo)\n      //             //console.log(productInfo)\n      //         });\n      //         //fill ShopItems - _productInfo\n      //         rtnOrderInfo_list.forEach(element => {\n      //             element.fillShopItems(arrayDistinctProducts)\n      //             //console.log(element.orderId)\n      //         });\n      //         //rtnOrderInfo_list[0].fillShopItems(arrayDistinctProducts)\n      //         //console.log(rtnOrderInfo_list)\n      //     })\n      //     //console.log(arrayDistinctProducts)\n      //     //console.log(rtnOrderInfo_list[0].shopItemList)\n      //     return rtnOrderInfo_list\n      // })\n    });\n\n    _defineProperty(this, \"getProductInfo\", function () {\n      _this.initDB(); // if(userId)\n      //     fakeUid = userId\n\n\n      var rtnProductInfo_list = [];\n      var self = _this;\n      return _this._db.collection(FIRESTORE_COLLECTION.ProductInfo).get().then(function (snapshot) {\n        snapshot.forEach(function (element) {\n          var data = element.data();\n          if (data.hasOwnProperty('--AutoNum--')) return true;\n          var prodInfo = new _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.ProductInfo();\n          prodInfo = Object.assign(prodInfo, data);\n          rtnProductInfo_list.push(prodInfo);\n        });\n        rtnProductInfo_list.sort(function (a, b) {\n          return b.autoNum - a.autoNum;\n        });\n        return rtnProductInfo_list;\n      });\n    });\n\n    _defineProperty(this, \"updateProductInfo\", function (productid, newObject, options) {\n      if (options && options.beginEvent) {\n        options.beginEvent();\n      }\n\n      _this.initDB();\n\n      return _this._db.collection(FIRESTORE_COLLECTION.ProductInfo).doc(productid).set(newObject, {\n        merge: true\n      }) //new promise\n      .then(function () {\n        return _this._db.collection(FIRESTORE_COLLECTION.ProductInfo).doc(productid).get(); //Promise.resolve('TTT');\n      }).then(function (snapShot) {\n        if (snapShot.exists) return snapShot.data();else return null;\n      })[\"finally\"](function () {\n        if (options && options.endEvent) {\n          options.endEvent();\n        }\n      });\n    });\n\n    _defineProperty(this, \"deleteProductInfo\", function (productid) {\n      _this.initDB();\n\n      return _this._db.collection(FIRESTORE_COLLECTION.ProductInfo).doc(productid)[\"delete\"](); // .then(() => {\n      //     //return this._db.collection(FIRESTORE_COLLECTION.ProductInfo).doc(productid).get() //Promise.resolve('TTT');\n      //     return 'ok'\n      // })\n    });\n\n    _defineProperty(this, \"SignOut\", function () {\n      _this._firebase.auth().signOut().then(function () {\n        // Sign-out successful.\n        console.log('Sign-out successful');\n      })[\"catch\"](function (error) {\n        console.log('Sign out Error--> ', error); // An error happened.\n      });\n    });\n\n    this._firebase = firebase;\n    this._app = app ? app : firebase.app();\n    this._serverArea = 'asia-east2'; //this._firebase.initializeApp(firebaseConfig);\n    //this._firebase.analytics();\n\n    /**\r\n     * initial-- use this.initStorageRef()\r\n     * @type {object} - this._firebase.storage().ref()\r\n     */\n\n    this._storageRef = null;\n    /**\r\n     * initial-- use this.initDb()\r\n     * @type {object} - this._firebase.firestore()\r\n     */\n\n    this._db = null;\n    /**\r\n     * initial-- use this.initFunctions()\r\n     * @type {object} - this._firebase.functions()\r\n     */\n\n    this._functions = null;\n  }\n  /**@type {import(\"../dataDefine/index.js\").ProductInfo} */\n\n\n  _createClass(Firebase, [{\n    key: \"_setProducts_And_autoNum\",\n\n    /**\r\n     * @param  {string} name\r\n     * @param  {number} price\r\n     * @param  {string} extension - image filename extension\r\n     */\n    value: function _setProducts_And_autoNum(name, price, extension) {\n      var _this2 = this;\n\n      //console.log(777)\n      this.initDB();\n      var that = this;\n\n      var autoNum_DocRef = this._db.collection(FIRESTORE_COLLECTION.Products).doc(\"--AutoNum--\");\n\n      return this._db.runTransaction(function (transaction) {\n        return transaction.get(autoNum_DocRef).then(function (autoNum_Doc) {\n          if (!autoNum_Doc.exists) {\n            throw \"autoNum_DocDocument does not exist!\";\n          } //get autoNum data\n\n\n          var autoNum_data = autoNum_Doc.data();\n          var nowNum = autoNum_data.autoNum; //serial number\n          //add new doc\n\n          var uuid = Math.random().toString(36).substring(2, 10); // 36 carry bit, ignore '0.', get 8 char\n\n          var sNowNum = nowNum.toString().padStart(4, \"0\");\n          uuid = \"\".concat(uuid, \"-\").concat(sNowNum);\n\n          var newDoc = _this2._db.collection(FIRESTORE_COLLECTION.Products).doc(uuid);\n          /**@type {ProductInfo} */\n\n\n          var prodInfo = {\n            productId: uuid,\n            //aaaaa-1\n            name: name,\n            //\"白斬雞\"\n            price: price,\n            //140\n            //imgFileName: \"xxxxxx\", //白斬雞.jpg\n\n            /**@type {(Date|object)} */\n            fstsAddDateTime_server: that._firebase.firestore.FieldValue.serverTimestamp(),\n            category: \"beef\",\n            tag: \"#牛肉#青椒\",\n            imgUrl: 'XXXXXXXXXXXXX',\n            imgFileName: 'XXXXXXXXXXXXXX',\n            autoNum: nowNum,\n            isActived: false\n          };\n          transaction.update(autoNum_DocRef, {\n            autoNum: nowNum + 1\n          }); //throw \"Force stop!\";\n\n          transaction.set(newDoc, prodInfo);\n          var imgFileName = \"\".concat(uuid).concat(extension);\n          return {\n            imgFileName: imgFileName,\n            newDoc: newDoc\n          }; //var newPopulation = sfDoc.data().population + 1;\n        });\n      });\n    }\n  }, {\n    key: \"_setOrderInfo_And_autoNum\",\n    value: function _setOrderInfo_And_autoNum() {\n      //console.log(777)\n      this.initDB();\n      var that = this;\n\n      this._db.collection(FIRESTORE_COLLECTION.OrderInfo).doc(\"--AutoNum--\").get().then(function (docSnapshot) {\n        console.log(docSnapshot.readTime);\n      });\n\n      return;\n\n      var autoNum_DocRef = this._db.collection(FIRESTORE_COLLECTION.OrderInfo).doc(\"--AutoNum--\");\n\n      return this._db.runTransaction(function (transaction) {\n        return transaction.get(autoNum_DocRef).then(function (autoNum_Doc) {\n          if (!autoNum_Doc.exists) {\n            throw \"autoNum_DocDocument does not exist!\";\n          }\n\n          var autoNum_data = autoNum_Doc.data();\n          var nowNum = autoNum_data.autoNum; //serial number\n\n          console.log(autoNum_Doc.id); //transaction.update(cityRef, { population: population })\n          // let uuid = Math.random().toString(36).substring(2, 10) // 36 carry bit, ignore '0.', get 8 char\n          // let sNowNum = nowNum.toString().padStart(4, \"0\")\n          // uuid = `${uuid}-${sNowNum}`\n          // let newDoc = this._db.collection(FIRESTORE_COLLECTION.Products).doc(uuid)\n          // let prodInfo = {\n          //     productId: uuid, //aaaaa-1\n          //     name: name, //\"白斬雞\"\n          //     price: price, //140\n          //     //imgFileName: \"xxxxxx\", //白斬雞.jpg\n          //     addDateTime: that._firebase.firestore.FieldValue.serverTimestamp(),\n          //     category: \"beef\",\n          //     tag: \"#牛肉#青椒\",\n          //     imgUrl: 'XXXXXXXXXXXXX',\n          //     imgFileName: 'XXXXXXXXXXXXXX',\n          //     autoNum: nowNum\n          // }\n          // transaction.update(autoNum_DocRef, {\n          //     autoNum: nowNum + 1\n          // })\n          // transaction.set(newDoc, prodInfo)\n          // let imgFileName = `${uuid}${extension}`\n          // return {\n          //     imgFileName: imgFileName,\n          //     newDoc: newDoc\n          // }\n        });\n      });\n    }\n    /**\r\n     * @function\r\n     * @return {Promise<object>} - firestore.Users.data()\r\n     */\n\n  }, {\n    key: \"getBlobExtension\",\n\n    /**\r\n     * get filename.Extension of image \r\n     * @param {Blob} blob - image blob\r\n     * @returns {string} - file extension name(.jpg |.png)\r\n     */\n    value: function getBlobExtension(blob) {\n      var extention = \"\";\n\n      switch (blob.type) {\n        case MIME_TYPE.jpg:\n          extention = \".jpg\";\n          break;\n\n        case MIME_TYPE.png:\n          extention = \".png\";\n          break;\n\n        default:\n          break;\n      }\n\n      return extention;\n    }\n    /**\r\n     * upload file blob to firebase cloud storage\r\n     * @param {Blob} blob \r\n     * @param {string} cloudFilePath \r\n     */\n\n  }, {\n    key: \"updateCloudStorageFile\",\n\n    /**\r\n     * \r\n     * @param {string} productId \r\n     * @param {Blob} blob \r\n     * @param  {{beginEvent:function, endEvent:function}} [options] - callback events\r\n     */\n    value: function updateCloudStorageFile(productId, blob, options) {\n      if (options && options.beginEvent) {\n        options.beginEvent();\n      }\n\n      this.initStorage();\n      var self = this;\n      var extensionName = this.getBlobExtension(blob);\n      var filename = \"\".concat(productId).concat(extensionName);\n      var cloudFilePath = \"ProductInfo/\".concat(filename);\n\n      var childRef = this._storageRef.child(cloudFilePath);\n\n      return childRef.put(blob).then(function (snapShot) {\n        // console.log(snapShot)\n        return snapShot.ref.getDownloadURL();\n      }).then(function (url) {\n        return self.updateProductInfo(productId, {\n          imgUrl: url,\n          imgFileName: filename\n        }); //return url\n      })[\"finally\"](function () {\n        if (options && options.endEvent) {\n          options.endEvent();\n        }\n      });\n    }\n    /**\r\n     * test and deprecated\r\n     */\n\n  }, {\n    key: \"autoIncrementNum\",\n    value: function autoIncrementNum() {\n      this.initDB();\n      var that = this;\n\n      var increment = this._firebase.firestore.FieldValue.increment(1);\n\n      var decrement = this._firebase.firestore.FieldValue.increment(-1);\n\n      var refStat = this._db.collection('AutoIncrement').doc('--AutoNum--');\n\n      var refRandom = this._db.collection('AutoIncrement').doc(\"\".concat(Math.random()));\n\n      var batch = this._db.batch();\n\n      batch.set(refRandom, {\n        title: 'New Story'\n      });\n      batch.set(refStat, {\n        autoNum: increment\n      }, {\n        merge: true\n      });\n      batch.commit();\n    }\n    /**\r\n     * test and deprecated\r\n     */\n\n  }, {\n    key: \"batch_auto_get_id\",\n    value: function batch_auto_get_id() {\n      this.initDB();\n      var that = this;\n\n      var batch = this._db.batch();\n\n      var newDocRef = this._db.collection('Batch').doc();\n\n      var id = newDocRef.id;\n      batch.set(newDocRef, {\n        title: 'Hello Again, World',\n        id: newDocRef.id\n      }); // const postsRef = this._db.collection('posts').doc(postKey);\n      // batch.set(postsRef, {\n      //     title: 'Hello Again, World'\n      // });\n      // const votesRef = this._db.collection('posts').doc(postKey)\n      //     .collection('votes').doc();\n      // batch.set(votesRef, {\n      //     upvote: true\n      // })\n\n      batch.commit().then(function () {});\n    }\n    /**\r\n     * download file from firestore cloud storage\r\n     * @param {string} cloudFilePath - firestore cloud path\r\n     * @param {function} fnApplyUrl - callback function after downloaded\r\n     */\n\n  }, {\n    key: \"callFunctions\",\n\n    /**\r\n     * add OrderInfo to firestore.OrderInfo\r\n     * @param {string} funcName\r\n     * @param {boolean} isProductSite\r\n     * @param {any} data\r\n     * @param {{beginEvent: function, endEvent: function}} [options] - callback functions\r\n     */\n    value: function callFunctions(funcName, isProductSite, data, options) {\n      //console.log(87)\n      if (options && options.beginEvent) {\n        options.beginEvent();\n      }\n\n      var callFunc = isProductSite === true ? this._app.functions('asia-east2').httpsCallable(funcName) : this._app.functions().httpsCallable(funcName); // if(isProductSite === true)\n      //     callFunc = this._app.functions('asia-east2').httpsCallable(funcName)//('addOrderInfo');\n      // else\n      //     callFunc = this._app.functions().httpsCallable(funcName)//('addOrderInfo');\n\n      return callFunc(data).then(function (result) {\n        if (options && options.endEvent) {\n          options.endEvent();\n        }\n\n        return result;\n      });\n    }\n    /**\r\n     * add OrderInfo to firestore.OrderInfo\r\n     * @param  {import(\"../dataDefine/index.js\").OrderInfo} data\r\n     * @param  {{beginEvent: function, endEvent: function}} [options] - callback functions\r\n     */\n\n  }, {\n    key: \"addOrderInfo\",\n    value: function addOrderInfo(data, isProductSite, options) {\n      var order = Object.assign({}, data); //console.log(\"LOG:: Firebase -> addOrderInfo -> order\", order)\n\n      removeFuncProp(order); //remove getShopItems_Id \n\n      /**@function default=true */\n\n      function get_isUseProdSite(isProductSite) {\n        if (isProductSite === undefined || isProductSite === null) return true;else return isProductSite;\n      }\n\n      var isUseProdSite = get_isUseProdSite(isProductSite);\n      order.fstsCreateDateTime_server = null; //this._firebase.firestore.FieldValue.serverTimestamp();\n\n      return this.callFunctions('addOrderInfo', isUseProdSite, order, options); //console.log(87)\n\n      if (options && options.beginEvent) {\n        options.beginEvent();\n      }\n\n      this.initFunctions();\n      var that = this;\n      order = Object.assign({}, data); //order = {totalPrice:555}\n\n      order.fstsCreateDateTime_server = null; //this._firebase.firestore.FieldValue.serverTimestamp();\n      //var addMessage = firebase.app().functions('asia-east2').httpsCallable('getUser');\n      //let app = firebase.initializeTestApp({\n      //app.functions().useFunctionsEmulator(\"http://localhost:5001\");\n      //const local_addOrderInfo = firebase.app().functions('asia-east2').httpsCallable('addOrderInfo');\n\n      var call_addOrderInfo = this._app.functions('asia-east2').httpsCallable('addOrderInfo'); //var call_addOrderInfo = this._firebase.app().functions('asia-east2').httpsCallable('addOrderInfo');\n\n\n      return call_addOrderInfo(order).then(function (result) {\n        if (options && options.endEvent) {\n          options.endEvent();\n        }\n\n        return result;\n      }); // .then((res) => {\n      //     return 11\n      // })\n    }\n    /**\r\n     * \r\n     * @param {string} userId \r\n     * @param {ENUM_orderStatus} orderStatus \r\n     * @returns {Promise<OrderInfo[]>}\r\n     */\n\n  }, {\n    key: \"getProductInfo_GroupedItems_ByCategory\",\n\n    /**\r\n     * @param {import('lodash')} _ \r\n     * @param {ProductInfo[]} listProductInfo \r\n     */\n    value: function getProductInfo_GroupedItems_ByCategory(_, listProductInfo) {\n      var groupedData = _(listProductInfo).groupBy('category').map(function (arrayGroupedItems, category) {\n        // return ''\n        // Object.\n        return {\n          category: category,\n          categoryZhTW: _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.Map_ProductCategory[category],\n          arrayGroupedItems: arrayGroupedItems\n        }; // return {\n        //     category,\n        //     name: _.map(arrayGroupedItems, 'name')\n        // }\n      }).value(); //console.log(d2)\n\n\n      return groupedData;\n    }\n    /**\r\n     * merge data to firestore.Products\r\n     * @param  {string} productid\r\n     * @param  {Object} newObject -- ProductInfo\r\n     * @param  {{beginEvent:function, endEvent:function}} [options] - callback events\r\n     */\n\n  }, {\n    key: \"Google_Register_Login\",\n    value: function Google_Register_Login() {\n      var self = this;\n      var provider = new this._firebase.auth.GoogleAuthProvider(); // this._firebase.auth().signInWithRedirect(provider);\n      // return;\n      //signInWithRedirect\n      //firebase.auth().signInWithPopup(provider).then(function (result) {\n\n      this._firebase.auth().signInWithPopup(provider).then(function (result) {\n        // This gives you a Google Access Token. You can use it to access the Google API.\n        //console.log('signInWithPopup')\n        var token = result.credential;\n        console.log(\"LOG:: Firebase -> Google_Register_Login -> token\", token); //console.log(\"LOG:: Firebase -> Google_Register_Login -> token\", token)\n        // The signed-in user info.\n\n        var user = result.user; //console.log(\"LOG:: Firebase -> Google_Register_Login -> user\", user)\n        // ...\n      })[\"catch\"](function (error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message; // The email of the user's account used.\n\n        var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n        var credential = error.credential;\n        console.log(errorMessage); // ...\n      });\n    }\n  }], [{\n    key: \"isDate\",\n    value: function isDate(value) {\n      switch (_typeof(value)) {\n        case 'number':\n          return true;\n\n        case 'string':\n          return !isNaN(Date.parse(value));\n\n        case 'object':\n          if (value instanceof Date) {\n            return !isNaN(value.getTime());\n          }\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getDate_From_Firestore_TimeStamp\",\n    value: function getDate_From_Firestore_TimeStamp(timestamp) {\n      var seconds = null;\n      if (timestamp.seconds) seconds = timestamp.seconds;else if (timestamp._seconds) {\n        seconds = timestamp._seconds;\n      }\n      if (seconds === null) return null;else return new Date(seconds * 1000);\n    }\n  }]);\n\n  return Firebase;\n}();\n\n\n\nfunction removeFuncProp(obj) {\n  for (var propName in obj) {\n    if (typeof obj[propName] === 'function') delete obj[propName]; //if(${typeof arry1[0][keyName]} == )\n  }\n}\n\nfunction Email_ResendPassword(emailAddress, inFirebase, swal, funcCloseModal) {\n  var auth = inFirebase.auth(); //var emailAddress = this.proxyUI.bindIptResentPwdEmail;\n\n  return auth.sendPasswordResetEmail(emailAddress).then(function () {\n    // Email sent.\n    swal.fire({\n      title: '提醒',\n      text: '密碼已寄出，請至信箱收信',\n      icon: 'success'\n    }).then(function () {\n      //self.showModal(false)\n      if (funcCloseModal) funcCloseModal();\n    });\n  })[\"catch\"](function (error) {\n    // An error happened.\n    var errCode_ZhTW;\n    console.log(error.code);\n\n    switch (error.code) {\n      case 'auth/invalid-email':\n        errCode_ZhTW = '輸入錯誤';\n        break;\n\n      case 'auth/user-not-found':\n        errCode_ZhTW = '此Email帳號不存在';\n        break;\n\n      default:\n        errCode_ZhTW = error.code;\n        break;\n    }\n\n    swal.fire({\n      title: 'Error',\n      text: \"\".concat(errCode_ZhTW, \",\").concat(error.message),\n      icon: 'error' //confirmButtonText: 'Cool'\n\n    });\n  }); //this.showModal(false)\n} // export function syncEmailVerified_ToDB(emailVerified_FromAuth, uid, firestore) {\n//     return firestore.collection('Users').doc(uid).set({\n//         emailVerified: emailVerified_FromAuth\n//     }, {\n//         merge: true\n//     })\n// }//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9maXJlYmFzZS9GaXJlYmFzZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2ZpcmViYXNlL0ZpcmViYXNlLmpzP2ZlZTYiXSwic291cmNlc0NvbnRlbnQiOlsiLy9AdHMtY2hlY2tcclxuLy9JbnNpZGUgb2Ygc2V0dGluZ3MuanNvbiwgYWRkIHRoZSBmb2xsb3dpbmc6eyBcImphdmFzY3JpcHQuaW1wbGljaXRQcm9qZWN0Q29uZmlnLmNoZWNrSnNcIjogdHJ1ZSB9XHJcbi8qKkB0eXBlZGVmIHtvYmplY3R9IEVudW1PYmogXHJcbiAqIEBwcm9wIHtudW1iZXJ9IHZhbHVlXHJcbiAqIEBwcm9wIHtzdHJpbmd9IGRlc2NcclxuICovXHJcbmltcG9ydCB7XHJcbiAgICBQcm9kdWN0SW5mbyxcclxuICAgIE9yZGVySW5mbyxcclxuICAgIEVOVU1fUHJvZHVjdENhdGVnb3J5LFxyXG4gICAgTWFwX1Byb2R1Y3RDYXRlZ29yeSxcclxufSBmcm9tIFwiLi4vZGF0YURlZmluZS9pbmRleC5qc1wiO1xyXG5cclxuLyoqQGVudW0ge3N0cmluZ30gKi9cclxuZXhwb3J0IGNvbnN0IE1JTUVfVFlQRSA9IHtcclxuICAgIGpwZzogJ2ltYWdlL2pwZWcnLFxyXG4gICAgcG5nOiAnaW1hZ2UvcG5nJyxcclxufVxyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5leHBvcnQgY29uc3QgRklSRVNUT1JFX0NPTExFQ1RJT04gPSB7XHJcbiAgICBQcm9kdWN0czogXCJQcm9kdWN0c1wiLFxyXG4gICAgUHJvZHVjdEluZm86IFwiUHJvZHVjdEluZm9cIixcclxuICAgIFVzZXJzOiBcIlVzZXJzXCIsXHJcbiAgICBPcmRlckluZm86IFwiT3JkZXJJbmZvXCJcclxufVxyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5leHBvcnQgY29uc3QgRklSRVNUT1JBR0VfRk9MREVSUyA9IHtcclxuICAgIFByb2R1Y3RzOiBcIlByb2R1Y3RzXCJcclxufVxyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5leHBvcnQgY29uc3QgRU5VTV9vcmRlclN0YXR1cyA9IHtcclxuICAgIGFsbDogJ2FsbCcsXHJcbiAgICBjb21wbGV0ZWQ6ICdjb21wbGV0ZWQnLFxyXG4gICAgd2FpdEZvclBheTogJ3dhaXRGb3JQYXknLFxyXG4gICAgd2FpdEZvckRlbGl2ZXJ5OiAnd2FpdEZvckRlbGl2ZXJ5JyxcclxuICAgIGNhbmNlbGVkOiAnY2FuY2VsZWQnLFxyXG59XHJcblxyXG4vKipcclxuICogQG1vZHVsZVxyXG4gKiBAY2xhc3MgXHJcbiAqIEBkZXNjcmlwdGlvbiBGaXJlYmFzZSBjbGFzc1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlyZWJhc2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2ZpcmViYXNlfSBmaXJlYmFzZSAtIGZyb20gZmlyZWJhc2VcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZmlyZWJhc2UsIGFwcCkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmViYXNlID0gZmlyZWJhc2U7XHJcbiAgICAgICAgdGhpcy5fYXBwID0gKGFwcCkgPyBhcHAgOiBmaXJlYmFzZS5hcHAoKVxyXG4gICAgICAgIHRoaXMuX3NlcnZlckFyZWEgPSAnYXNpYS1lYXN0MidcclxuICAgICAgICAvL3RoaXMuX2ZpcmViYXNlLmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG4gICAgICAgIC8vdGhpcy5fZmlyZWJhc2UuYW5hbHl0aWNzKCk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogaW5pdGlhbC0tIHVzZSB0aGlzLmluaXRTdG9yYWdlUmVmKClcclxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fSAtIHRoaXMuX2ZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3N0b3JhZ2VSZWYgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGluaXRpYWwtLSB1c2UgdGhpcy5pbml0RGIoKVxyXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R9IC0gdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlKClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9kYiA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogaW5pdGlhbC0tIHVzZSB0aGlzLmluaXRGdW5jdGlvbnMoKVxyXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R9IC0gdGhpcy5fZmlyZWJhc2UuZnVuY3Rpb25zKClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9mdW5jdGlvbnMgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKkB0eXBlIHtpbXBvcnQoXCIuLi9kYXRhRGVmaW5lL2luZGV4LmpzXCIpLlByb2R1Y3RJbmZvfSAqL1xyXG4gICAgcHJvZHVjdEluZm8gPSB7XHJcbiAgICAgICAgcHJvZHVjdElkOiBcInh4eHh4eHh4XCIsIC8vYWFhYWEtMVxyXG4gICAgICAgIG5hbWU6IFwieHh4eHh4XCIsIC8vXCLnmb3mlqzpm55cIlxyXG4gICAgICAgIHByaWNlOiAwLCAvLzE0MFxyXG4gICAgICAgIC8vaW1nRmlsZU5hbWU6IFwieHh4eHh4XCIsIC8v55m95pas6ZueLmpwZ1xyXG4gICAgICAgIGZzdHNBZGREYXRlVGltZV9zZXJ2ZXI6IG51bGwsXHJcbiAgICAgICAgaXNBY3RpdmVkOiBmYWxzZSxcclxuXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiYmVlZlwiLFxyXG4gICAgICAgIHRhZzogXCIj54mb6IKJI+mdkuakklwiLFxyXG5cclxuICAgICAgICBpbWdVcmw6IFwieHh4eHh4XCIsXHJcbiAgICAgICAgaW1nRmlsZU5hbWU6IFwiWFhYXCIsXHJcbiAgICAgICAgYXV0b051bTogbnVsbFxyXG5cclxuICAgIH1cclxuICAgIC8qKkBkZXNjcmlwdGlvbiBpbml0aWFsIHRoaXMuX2ZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKSAqL1xyXG4gICAgaW5pdFN0b3JhZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0b3JhZ2VSZWYgPT0gbnVsbClcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgcm9vdCByZWZlcmVuY2VcclxuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZVJlZiA9IHRoaXMuX2ZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKTtcclxuICAgIH1cclxuICAgIC8qKkBkZXNjcmlwdGlvbiBpbml0aWFsIHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZSgpKi9cclxuICAgIGluaXREQiA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5fZGIgPT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5fZGIgPSB0aGlzLl9maXJlYmFzZS5maXJlc3RvcmUoKTtcclxuICAgIH1cclxuICAgIC8qKkBkZXNjcmlwdGlvbiBpbml0aWFsIHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZSgpKi9cclxuICAgIGluaXRGdW5jdGlvbnMgPSAoKSA9PiB7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuX2Z1bmN0aW9ucyA9PSBudWxsKVxyXG4gICAgICAgIC8vICAgICB0aGlzLl9mdW5jdGlvbnMgPSB0aGlzLl9maXJlYmFzZS5hcHAoKS5mdW5jdGlvbnMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogYWRkIFByb2R1Y3RJbmZvIHRvIGZpcmVzdG9yZVxyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHByaWNlXHJcbiAgICAgKi9cclxuICAgIF9hZGRQcm9kdWN0X2RiID0gKG5hbWUsIHByaWNlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0cykuYWRkKHtcclxuICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgcHJpY2U6IHByaWNlLFxyXG4gICAgICAgICAgICBmc3RzQWRkRGF0ZVRpbWVfc2VydmVyOiB0aGlzLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAgICAgICB9KSAvL25ldyBwcm9taXNlXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIG1lcmdlIGltYWdlIEluZm8gdG8gZmlyZXN0b3JlLlByb2R1Y3RzXHJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHByb2R1Y3RpZFxyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBpbWdVcmxcclxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gaW1nRmlsZU5hbWVcclxuICAgICAqL1xyXG4gICAgX3NldFByb2R1Y3RfZGIgPSAocHJvZHVjdGlkLCBpbWdVcmwsIGltZ0ZpbGVOYW1lKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0cykuZG9jKHByb2R1Y3RpZCkuc2V0KHtcclxuICAgICAgICAgICAgaW1nVXJsOiBpbWdVcmwsXHJcbiAgICAgICAgICAgIGltZ0ZpbGVOYW1lOiBpbWdGaWxlTmFtZVxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgbWVyZ2U6IHRydWVcclxuICAgICAgICB9KSAvL25ldyBwcm9taXNlXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIG1lcmdlIGRhdGEgdG8gZmlyZXN0b3JlLlByb2R1Y3RzXHJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHByb2R1Y3RpZFxyXG4gICAgICogQHBhcmFtICB7UHJvZHVjdEluZm99IG5ld09iamVjdFxyXG4gICAgICogQHBhcmFtICB7e2JlZ2luRXZlbnQ6ZnVuY3Rpb24sIGVuZEV2ZW50OmZ1bmN0aW9ufX0gb3B0aW9ucyAtIGNhbGxiYWNrIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBfc2V0UHJvZHVjdF9kYl9tZXJnZSA9IChwcm9kdWN0aWQsIG5ld09iamVjdCwgb3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYmVnaW5FdmVudCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmJlZ2luRXZlbnQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgICAgIGxldCBuZXdQcm9taXNlID0gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0cykuZG9jKHByb2R1Y3RpZCkuc2V0KFxyXG4gICAgICAgICAgICAgICAgbmV3T2JqZWN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2U6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pIC8vbmV3IHByb21pc2VcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5lbmRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZW5kRXZlbnQoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdlbmQnIC8vUHJvbWlzZS5yZXNvbHZlKCdUVFQnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnIgLy9Qcm9taXNlLnJlamVjdChlcnIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIG5ld1Byb21pc2VcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHByaWNlXHJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGV4dGVuc2lvbiAtIGltYWdlIGZpbGVuYW1lIGV4dGVuc2lvblxyXG4gICAgICovXHJcbiAgICBfc2V0UHJvZHVjdHNfQW5kX2F1dG9OdW0obmFtZSwgcHJpY2UsIGV4dGVuc2lvbikge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coNzc3KVxyXG4gICAgICAgIHRoaXMuaW5pdERCKCk7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzXHJcbiAgICAgICAgdmFyIGF1dG9OdW1fRG9jUmVmID0gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0cykuZG9jKFwiLS1BdXRvTnVtLS1cIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RiLnJ1blRyYW5zYWN0aW9uKCh0cmFuc2FjdGlvbikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb24uZ2V0KGF1dG9OdW1fRG9jUmVmKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGF1dG9OdW1fRG9jKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdXRvTnVtX0RvYy5leGlzdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJhdXRvTnVtX0RvY0RvY3VtZW50IGRvZXMgbm90IGV4aXN0IVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2dldCBhdXRvTnVtIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXV0b051bV9kYXRhID0gYXV0b051bV9Eb2MuZGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub3dOdW0gPSBhdXRvTnVtX2RhdGEuYXV0b051bSAvL3NlcmlhbCBudW1iZXJcclxuICAgICAgICAgICAgICAgICAgICAvL2FkZCBuZXcgZG9jXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHV1aWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApIC8vIDM2IGNhcnJ5IGJpdCwgaWdub3JlICcwLicsIGdldCA4IGNoYXJcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc05vd051bSA9IG5vd051bS50b1N0cmluZygpLnBhZFN0YXJ0KDQsIFwiMFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHV1aWQgPSBgJHt1dWlkfS0ke3NOb3dOdW19YFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2MgPSB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RzKS5kb2ModXVpZClcclxuICAgICAgICAgICAgICAgICAgICAvKipAdHlwZSB7UHJvZHVjdEluZm99ICovXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2RJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0SWQ6IHV1aWQsIC8vYWFhYWEtMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLCAvL1wi55m95pas6ZueXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlLCAvLzE0MFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ltZ0ZpbGVOYW1lOiBcInh4eHh4eFwiLCAvL+eZveaWrOmbni5qcGdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUgeyhEYXRlfG9iamVjdCl9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzdHNBZGREYXRlVGltZV9zZXJ2ZXI6IHRoYXQuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpLFxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBcImJlZWZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiBcIiPniZvogokj6Z2S5qSSXCIsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWdVcmw6ICdYWFhYWFhYWFhYWFhYJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1nRmlsZU5hbWU6ICdYWFhYWFhYWFhYWFhYWCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9OdW06IG5vd051bSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi51cGRhdGUoYXV0b051bV9Eb2NSZWYsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b051bTogbm93TnVtICsgMVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy90aHJvdyBcIkZvcmNlIHN0b3AhXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uc2V0KG5ld0RvYywgcHJvZEluZm8pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWdGaWxlTmFtZSA9IGAke3V1aWR9JHtleHRlbnNpb259YFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZ0ZpbGVOYW1lOiBpbWdGaWxlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RG9jOiBuZXdEb2NcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3ZhciBuZXdQb3B1bGF0aW9uID0gc2ZEb2MuZGF0YSgpLnBvcHVsYXRpb24gKyAxO1xyXG5cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIF9zZXRPcmRlckluZm9fQW5kX2F1dG9OdW0oKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyg3NzcpXHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXNcclxuICAgICAgICB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykuZG9jKFwiLS1BdXRvTnVtLS1cIilcclxuICAgICAgICAgICAgLmdldCgpLnRoZW4oKGRvY1NuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkb2NTbmFwc2hvdC5yZWFkVGltZSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICByZXR1cm5cclxuICAgICAgICB2YXIgYXV0b051bV9Eb2NSZWYgPSB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykuZG9jKFwiLS1BdXRvTnVtLS1cIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RiLnJ1blRyYW5zYWN0aW9uKCh0cmFuc2FjdGlvbikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb24uZ2V0KGF1dG9OdW1fRG9jUmVmKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGF1dG9OdW1fRG9jKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdXRvTnVtX0RvYy5leGlzdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJhdXRvTnVtX0RvY0RvY3VtZW50IGRvZXMgbm90IGV4aXN0IVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF1dG9OdW1fZGF0YSA9IGF1dG9OdW1fRG9jLmRhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbm93TnVtID0gYXV0b051bV9kYXRhLmF1dG9OdW0gLy9zZXJpYWwgbnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXV0b051bV9Eb2MuaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLy90cmFuc2FjdGlvbi51cGRhdGUoY2l0eVJlZiwgeyBwb3B1bGF0aW9uOiBwb3B1bGF0aW9uIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCB1dWlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDEwKSAvLyAzNiBjYXJyeSBiaXQsIGlnbm9yZSAnMC4nLCBnZXQgOCBjaGFyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHNOb3dOdW0gPSBub3dOdW0udG9TdHJpbmcoKS5wYWRTdGFydCg0LCBcIjBcIilcclxuICAgICAgICAgICAgICAgICAgICAvLyB1dWlkID0gYCR7dXVpZH0tJHtzTm93TnVtfWBcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgbmV3RG9jID0gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0cykuZG9jKHV1aWQpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBwcm9kSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcHJvZHVjdElkOiB1dWlkLCAvL2FhYWFhLTFcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgbmFtZTogbmFtZSwgLy9cIueZveaWrOmbnlwiXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHByaWNlOiBwcmljZSwgLy8xNDBcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy9pbWdGaWxlTmFtZTogXCJ4eHh4eHhcIiwgLy/nmb3mlqzpm54uanBnXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGFkZERhdGVUaW1lOiB0aGF0Ll9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSxcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBjYXRlZ29yeTogXCJiZWVmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRhZzogXCIj54mb6IKJI+mdkuakklwiLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgaW1nVXJsOiAnWFhYWFhYWFhYWFhYWCcsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGltZ0ZpbGVOYW1lOiAnWFhYWFhYWFhYWFhYWFgnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBhdXRvTnVtOiBub3dOdW1cclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi51cGRhdGUoYXV0b051bV9Eb2NSZWYsIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgYXV0b051bTogbm93TnVtICsgMVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLnNldChuZXdEb2MsIHByb2RJbmZvKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgaW1nRmlsZU5hbWUgPSBgJHt1dWlkfSR7ZXh0ZW5zaW9ufWBcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBpbWdGaWxlTmFtZTogaW1nRmlsZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIG5ld0RvYzogbmV3RG9jXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8b2JqZWN0Pn0gLSBmaXJlc3RvcmUuVXNlcnMuZGF0YSgpXHJcbiAgICAgKi9cclxuICAgIGdldFVzZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9maXJlYmFzZS5hdXRoKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aGlzLl9maXJlYmFzZS5hdXRoKCkgaXMgLS0tPicgKyB0aGlzLl9maXJlYmFzZS5hdXRoKCkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9maXJlYmFzZS5hdXRoKCkpIHtcclxuICAgICAgICAgICAgLyoqQGlnbm9yZSAqL1xyXG4gICAgICAgICAgICBsZXQgcHAgPSB0aGlzLl9maXJlYmFzZS5hdXRoKClcclxuICAgICAgICAgICAgaWYgKHBwKVxyXG4gICAgICAgICAgICAgICAgcHAuY3VycmVudFVzZXIudWlkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB1aWQgPSB0aGlzLl9maXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkXHJcblxyXG4gICAgICAgIHRoaXMuaW5pdERCKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uVXNlcnMpLmRvYyh1aWQpLmdldCgpXHJcbiAgICAgICAgICAgIC50aGVuKChkb2MpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2MuZGF0YSgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gLnRoZW4oKHF1ZXJ5KSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHF1ZXJ5LmRvY3MpXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIClcclxuXHJcbiAgICB9XHJcbiAgICBnZXRQcm9kdWN0cyA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgICAgIGxldCBydG5fUHJvZHVjdEluZm9fTGlzdCA9IFtdXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLl9kYilcclxuICAgICAgICAvLyB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RzKVxyXG4gICAgICAgIC8vICAgICAud2hlcmUoXCJhdXRvTnVtXCIsIFwiPT1cIiwgMSlcclxuICAgICAgICAvLyAgICAgLmdldCgpXHJcbiAgICAgICAgLy8gICAgIC50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtLmF1dG9OdW0pXHJcbiAgICAgICAgLy8gICAgICAgICB9KVxyXG5cclxuICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAvLyAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAvL2xldCBzdHIgPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RzKSAvLy53aGVyZShcImF1dG9OdW1cIiwgXCI9PVwiLCA3KVxyXG4gICAgICAgICAgICAuZ2V0KClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgIC8vIGxldCB7ZG9jc30gPSBxdWVyeVNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2NzWzJdLmRhdGEoKSlcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocXVlcnlTbmFwc2hvdC5kb2NzWzFdLmRhdGEoKSlcclxuICAgICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkb2MuaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvYy5pZCA9PT0gJy0tQXV0b051bS0tJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKDExMSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBkb2MuZGF0YSgpIGlzIG5ldmVyIHVuZGVmaW5lZCBmb3IgcXVlcnkgZG9jIHNuYXBzaG90c1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZG9jLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gZG9jLmRhdGEoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJ0bl9Qcm9kdWN0SW5mb19MaXN0LnB1c2goZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBzdHIgKz0gSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2MuaWQsIFwiID0+IFwiLCBkb2MuZGF0YSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coODg4KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ0bl9Qcm9kdWN0SW5mb19MaXN0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmljZSBcclxuICAgICAqIEBwYXJhbSB7QmxvYn0gYmxvYiAtIGltYWdlIGJsb2JcclxuICAgICAqIEBwYXJhbSB7e2JlZ2luRXZlbnQ6ZnVuY3Rpb24sIGVuZEV2ZW50OmZ1bmN0aW9ufX0gb3B0aW9ucyAtIGNhbGxiYWNrIGZ1bmN0aW9uc1xyXG4gICAgICovXHJcbiAgICBhZGRQcm9kdWN0NCA9IChuYW1lLCBwcmljZSwgYmxvYiwgb3B0aW9ucykgPT4ge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coODcpXHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5iZWdpbkV2ZW50KSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuYmVnaW5FdmVudCgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmKG9wdGlvbnMuZW5kRXZlbnQpXHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXNcclxuICAgICAgICAvL2dldCBibG9iIGV4dGVuc2lvblxyXG4gICAgICAgIGxldCBleHRlbnRpb24gPSB0aGlzLmdldEJsb2JFeHRlbnNpb24oYmxvYilcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGV4dGVudGlvbilcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0UHJvZHVjdHNfQW5kX2F1dG9OdW0obmFtZSwgcHJpY2UsIGV4dGVudGlvbilcclxuICAgICAgICAgICAgLnRoZW4oKHtcclxuICAgICAgICAgICAgICAgIGltZ0ZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgbmV3RG9jXHJcbiAgICAgICAgICAgIH0pID0+IHtcclxuICAgICAgICAgICAgICAgIC8ve2ltZ0ZpbGVOYW1lLG5ld0RvY31cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygxMTEpXHJcbiAgICAgICAgICAgICAgICAvLyBkZWJ1Z2dlclxyXG4gICAgICAgICAgICAgICAgbGV0IHByb21pc2UxID0gdGhhdC51cGxvYWRGaWxlKGJsb2IsIGAke0ZJUkVTVE9SQUdFX0ZPTERFUlMuUHJvZHVjdHN9LyR7aW1nRmlsZU5hbWV9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtwcm9taXNlMSwgUHJvbWlzZS5yZXNvbHZlKGltZ0ZpbGVOYW1lKSwgUHJvbWlzZS5yZXNvbHZlKG5ld0RvYyldKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygyMjIpXHJcbiAgICAgICAgICAgICAgICAvLyBkZWJ1Z2dlclxyXG4gICAgICAgICAgICAgICAgbGV0IHVybCA9IHJlc3VsdFswXVxyXG4gICAgICAgICAgICAgICAgbGV0IGltZ0ZpbGVOYW1lID0gcmVzdWx0WzFdXHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3RG9jID0gcmVzdWx0WzJdXHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3VsdFswXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdEb2Muc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICBpbWdVcmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICBpbWdGaWxlTmFtZTogaW1nRmlsZU5hbWVcclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5lbmRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZW5kRXZlbnQoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge30pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByaWNlXHJcbiAgICAgKiBAcGFyYW0ge0VOVU1fUHJvZHVjdENhdGVnb3J5fSBjYXRlZ29yeSAtIGJlZWYvY2hpY2tlbi9zb3liZWFuLi4uZXRjXHJcbiAgICAgKiBAcGFyYW0ge3tiZWdpbkV2ZW50OmZ1bmN0aW9uLCBlbmRFdmVudDpmdW5jdGlvbn19IFtvcHRpb25zXSAtIGNhbGxiYWNrIGZ1bmN0aW9uc1xyXG4gICAgICovXHJcbiAgICBhZGRQcm9kdWN0NSA9IChuYW1lLCBwcmljZSwgY2F0ZWdvcnksaW1nVXJsLCBvcHRpb25zKSA9PiB7XHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UmFuZG9tSWQobnVtKSB7XHJcbiAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gMiAvL2lnbm9yZSAnMC4nXHJcbiAgICAgICAgICAgIGxldCBlbmRJbmRleCA9IDIgKyBudW1cclxuICAgICAgICAgICAgLy9sZXQgdXVpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMCkgLy8gMzYgY2FycnkgYml0LCBpZ25vcmUgJzAuJywgZ2V0IDggY2hhclxyXG4gICAgICAgICAgICBsZXQgdXVpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyhzdGFydEluZGV4LCBlbmRJbmRleCkgLy8gMzYgY2FycnkgYml0LCBpZ25vcmUgJzAuJywgZ2V0IDggY2hhclxyXG4gICAgICAgICAgICByZXR1cm4gdXVpZFxyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKDg3KVxyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYmVnaW5FdmVudCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmJlZ2luRXZlbnQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZihvcHRpb25zLmVuZEV2ZW50KVxyXG4gICAgICAgIHRoaXMuaW5pdERCKCk7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzXHJcblxyXG4gICAgICAgIGxldCBuZXdOdW0gPSAwIC8vMVxyXG4gICAgICAgIGxldCBGSVJFU1RPUkVfQ09MTEVDVElPTl9Qcm9kdWN0SW5mbyA9ICdQcm9kdWN0SW5mbydcclxuICAgICAgICB2YXIgYXV0b051bV9Eb2NSZWYgPSB0aGF0Ll9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OX1Byb2R1Y3RJbmZvKS5kb2MoXCItLUF1dG9OdW0tLVwiKTtcclxuICAgICAgICByZXR1cm4gdGhhdC5fZGIucnVuVHJhbnNhY3Rpb24oKHRyYW5zYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb24uZ2V0KGF1dG9OdW1fRG9jUmVmKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChhdXRvTnVtX0RvYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWF1dG9OdW1fRG9jLmV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aHJvdyBcImF1dG9OdW1fRG9jRG9jdW1lbnQgZG9lcyBub3QgZXhpc3QhXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0b051bV9Eb2NSZWYuc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLS1BdXRvTnVtLS0nOiBuZXdOdW0sIC8vMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhdXRvTnVtJzogbmV3TnVtLCAvLzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRlVGltZTogdGhhdC5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9nZXQgYXV0b051bSBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhdXRvTnVtX2RhdGEgPSBhdXRvTnVtX0RvYy5kYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBub3dOdW0gPSBhdXRvTnVtX2RhdGEuYXV0b051bSAvL3NlcmlhbCBudW1iZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm93TnVtKytcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNOb3dOdW0gPSBTdHJpbmcobm93TnVtKS5wYWRTdGFydCg0LCAnMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vYWRkIG5ldyBkb2NcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHV1aWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApIC8vIDM2IGNhcnJ5IGJpdCwgaWdub3JlICcwLicsIGdldCA4IGNoYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1Byb2RJZCA9IGAke3NOb3dOdW19LSR7Z2V0UmFuZG9tSWQoMyl9YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2xldCBwcmljZSA9IDE0MFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2xldCBuYW1lID0gXCLnmb3mlqzpm55cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgc05vd051bSA9IG5vd051bS50b1N0cmluZygpLnBhZFN0YXJ0KDQsIFwiMFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1dWlkID0gYCR7dXVpZH0tJHtzTm93TnVtfWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY1JlZiA9IHRoYXQuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT05fUHJvZHVjdEluZm8pLmRvYyhuZXdQcm9kSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtpbXBvcnQoJy4uL2RhdGFEZWZpbmUvaW5kZXguanMnKS5Qcm9kdWN0SW5mb30gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByb2RJbmZvID0gbmV3IFByb2R1Y3RJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2RJbmZvLnByb2R1Y3RJZCA9IG5ld1Byb2RJZCAvLyAwMDAxLXRkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kSW5mby5uYW1lID0gbmFtZSAvL1wi55m95pas6ZueXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZEluZm8ucHJpY2UgPSBwcmljZSAvLzE0MFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kSW5mby5mc3RzQWRkRGF0ZVRpbWVfc2VydmVyID0gdGhhdC5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZEluZm8uY2F0ZWdvcnkgPSBjYXRlZ29yeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpbWdVcmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kSW5mby5pbWdVcmwgPSBpbWdVcmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9wcm9kSW5mby50YWcgPSBcIiNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Byb2RJbmZvLmltZ1VybCA9ICdudWxsJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Byb2RJbmZvLmltZ0ZpbGVOYW1lID0gJ251bGwnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2RJbmZvLmF1dG9OdW0gPSBub3dOdW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udmVydCB0byBwbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZEluZm8gPSBPYmplY3QuYXNzaWduKHt9LCBwcm9kSW5mbylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvZEluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBcIm5hbWVcIjogXCLosazohbFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIFwicHJpY2VcIjogMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgXCJjYXRlZ29yeVwiOiBcInBvcmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5zZXQobmV3RG9jUmVmLCBwcm9kSW5mbylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udXBkYXRlKGF1dG9OdW1fRG9jUmVmLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvTnVtOiBub3dOdW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0RvY1JlZiAvL25ld1Byb2RJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBQcm9taXNlLnJlc29sdmUobmV3UHJvZElkKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChuZXdEb2NSZWYpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdEb2NSZWYuZ2V0KClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKGRvY1NuYXBTaG90KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jU25hcFNob3QuZGF0YSgpXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXQgZmlsZW5hbWUuRXh0ZW5zaW9uIG9mIGltYWdlIFxyXG4gICAgICogQHBhcmFtIHtCbG9ifSBibG9iIC0gaW1hZ2UgYmxvYlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gLSBmaWxlIGV4dGVuc2lvbiBuYW1lKC5qcGcgfC5wbmcpXHJcbiAgICAgKi9cclxuICAgIGdldEJsb2JFeHRlbnNpb24oYmxvYikge1xyXG4gICAgICAgIGxldCBleHRlbnRpb24gPSBcIlwiO1xyXG4gICAgICAgIHN3aXRjaCAoYmxvYi50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTUlNRV9UWVBFLmpwZzpcclxuICAgICAgICAgICAgICAgIGV4dGVudGlvbiA9IFwiLmpwZ1wiXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNSU1FX1RZUEUucG5nOlxyXG4gICAgICAgICAgICAgICAgZXh0ZW50aW9uID0gXCIucG5nXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBleHRlbnRpb247XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHVwbG9hZCBmaWxlIGJsb2IgdG8gZmlyZWJhc2UgY2xvdWQgc3RvcmFnZVxyXG4gICAgICogQHBhcmFtIHtCbG9ifSBibG9iIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsb3VkRmlsZVBhdGggXHJcbiAgICAgKi9cclxuICAgIHVwbG9hZEZpbGUgPSAoYmxvYiwgY2xvdWRGaWxlUGF0aCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW5pdFN0b3JhZ2UoKTtcclxuICAgICAgICAvLyBDcmVhdGUgYSByb290IHJlZmVyZW5jZVxyXG4gICAgICAgIC8vdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIHJlZmVyZW5jZSB0byAnbW91bnRhaW5zLmpwZydcclxuICAgICAgICAvL3ZhciBtb3VudGFpbnNSZWYgPSBzdG9yYWdlUmVmLmNoaWxkKCdNZW51SW1hZ2VzL21vdW50YWlucy5qcGcnKTtcclxuICAgICAgICB2YXIgY2hpbGRSZWYgPSB0aGlzLl9zdG9yYWdlUmVmLmNoaWxkKGNsb3VkRmlsZVBhdGgpO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSByZWZlcmVuY2UgdG8gJ2ltYWdlcy9tb3VudGFpbnMuanBnJ1xyXG4gICAgICAgIC8vdmFyIG1vdW50YWluSW1hZ2VzUmVmID0gc3RvcmFnZVJlZi5jaGlsZCgnaW1hZ2VzL21vdW50YWlucy5qcGcnKTtcclxuXHJcbiAgICAgICAgLy8gV2hpbGUgdGhlIGZpbGUgbmFtZXMgYXJlIHRoZSBzYW1lLCB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byBkaWZmZXJlbnQgZmlsZXNcclxuICAgICAgICAvLyBtb3VudGFpbnNSZWYubmFtZSA9PT0gbW91bnRhaW5JbWFnZXNSZWYubmFtZSAvLyB0cnVlXHJcbiAgICAgICAgLy8gbW91bnRhaW5zUmVmLmZ1bGxQYXRoID09PSBtb3VudGFpbkltYWdlc1JlZi5mdWxsUGF0aCAvLyBmYWxzZVxyXG5cclxuICAgICAgICAvLyB2YXIgZmlsZSA9IC4uLiAvLyB1c2UgdGhlIEJsb2Igb3IgRmlsZSBBUElcclxuICAgICAgICB2YXIgcHJvbWlzZV9VcGxvYWRUYXNrID0gY2hpbGRSZWYucHV0KGJsb2IpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzbmFwc2hvdClcclxuICAgICAgICAgICAgICAgIHJldHVybiBzbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKVxyXG4gICAgICAgICAgICAgICAgLy8gc25hcHNob3QucmVmLmdldERvd25sb2FkVVJMKCkudGhlbih1cmwgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiBzbmFwc2hvdC5yZWYuZG93bmxvYWRVUkwoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigodXJsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh1cmwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coc25hcHNob3QpXHJcbiAgICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2VfVXBsb2FkVGFza1xyXG4gICAgICAgIC8vIHVwbG9hZFRhc2sub24oJ3N0YXRlX2NoYW5nZWQnLChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgIC8vICAgICB2YXIgcHJvZ3Jlc3MgPSAoc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMpICogMTAwO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9kdWN0SWQgXHJcbiAgICAgKiBAcGFyYW0ge0Jsb2J9IGJsb2IgXHJcbiAgICAgKiBAcGFyYW0gIHt7YmVnaW5FdmVudDpmdW5jdGlvbiwgZW5kRXZlbnQ6ZnVuY3Rpb259fSBbb3B0aW9uc10gLSBjYWxsYmFjayBldmVudHNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlQ2xvdWRTdG9yYWdlRmlsZShwcm9kdWN0SWQsIGJsb2IsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmJlZ2luRXZlbnQpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5iZWdpbkV2ZW50KClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFN0b3JhZ2UoKTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgICAgICBsZXQgZXh0ZW5zaW9uTmFtZSA9IHRoaXMuZ2V0QmxvYkV4dGVuc2lvbihibG9iKVxyXG4gICAgICAgIGxldCBmaWxlbmFtZSA9IGAke3Byb2R1Y3RJZH0ke2V4dGVuc2lvbk5hbWV9YFxyXG4gICAgICAgIGxldCBjbG91ZEZpbGVQYXRoID0gYFByb2R1Y3RJbmZvLyR7ZmlsZW5hbWV9YFxyXG4gICAgICAgIHZhciBjaGlsZFJlZiA9IHRoaXMuX3N0b3JhZ2VSZWYuY2hpbGQoY2xvdWRGaWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkUmVmLnB1dChibG9iKVxyXG4gICAgICAgICAgICAudGhlbigoc25hcFNob3QpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNuYXBTaG90KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNuYXBTaG90LnJlZi5nZXREb3dubG9hZFVSTCgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCh1cmwpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnVwZGF0ZVByb2R1Y3RJbmZvKHByb2R1Y3RJZCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGltZ1VybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGltZ0ZpbGVOYW1lOiBmaWxlbmFtZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIHVybFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmVuZEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lbmRFdmVudCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHRlc3QgYW5kIGRlcHJlY2F0ZWRcclxuICAgICAqL1xyXG4gICAgYXV0b0luY3JlbWVudE51bSgpIHtcclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpc1xyXG4gICAgICAgIGNvbnN0IGluY3JlbWVudCA9IHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLmluY3JlbWVudCgxKVxyXG4gICAgICAgIGNvbnN0IGRlY3JlbWVudCA9IHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLmluY3JlbWVudCgtMSlcclxuICAgICAgICBjb25zdCByZWZTdGF0ID0gdGhpcy5fZGIuY29sbGVjdGlvbignQXV0b0luY3JlbWVudCcpLmRvYygnLS1BdXRvTnVtLS0nKVxyXG4gICAgICAgIGNvbnN0IHJlZlJhbmRvbSA9IHRoaXMuX2RiLmNvbGxlY3Rpb24oJ0F1dG9JbmNyZW1lbnQnKS5kb2MoYCR7TWF0aC5yYW5kb20oKX1gKVxyXG4gICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5fZGIuYmF0Y2goKTtcclxuICAgICAgICBiYXRjaC5zZXQocmVmUmFuZG9tLCB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnTmV3IFN0b3J5J1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgYmF0Y2guc2V0KHJlZlN0YXQsIHtcclxuICAgICAgICAgICAgYXV0b051bTogaW5jcmVtZW50XHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBtZXJnZTogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgYmF0Y2guY29tbWl0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHRlc3QgYW5kIGRlcHJlY2F0ZWRcclxuICAgICAqL1xyXG4gICAgYmF0Y2hfYXV0b19nZXRfaWQoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXNcclxuICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuX2RiLmJhdGNoKCk7XHJcbiAgICAgICAgY29uc3QgbmV3RG9jUmVmID0gdGhpcy5fZGIuY29sbGVjdGlvbignQmF0Y2gnKS5kb2MoKTtcclxuICAgICAgICBsZXQgaWQgPSBuZXdEb2NSZWYuaWRcclxuXHJcbiAgICAgICAgYmF0Y2guc2V0KG5ld0RvY1JlZiwge1xyXG4gICAgICAgICAgICB0aXRsZTogJ0hlbGxvIEFnYWluLCBXb3JsZCcsXHJcbiAgICAgICAgICAgIGlkOiBuZXdEb2NSZWYuaWRcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBjb25zdCBwb3N0c1JlZiA9IHRoaXMuX2RiLmNvbGxlY3Rpb24oJ3Bvc3RzJykuZG9jKHBvc3RLZXkpO1xyXG4gICAgICAgIC8vIGJhdGNoLnNldChwb3N0c1JlZiwge1xyXG4gICAgICAgIC8vICAgICB0aXRsZTogJ0hlbGxvIEFnYWluLCBXb3JsZCdcclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgLy8gY29uc3Qgdm90ZXNSZWYgPSB0aGlzLl9kYi5jb2xsZWN0aW9uKCdwb3N0cycpLmRvYyhwb3N0S2V5KVxyXG4gICAgICAgIC8vICAgICAuY29sbGVjdGlvbigndm90ZXMnKS5kb2MoKTtcclxuICAgICAgICAvLyBiYXRjaC5zZXQodm90ZXNSZWYsIHtcclxuICAgICAgICAvLyAgICAgdXB2b3RlOiB0cnVlXHJcbiAgICAgICAgLy8gfSlcclxuXHJcblxyXG5cclxuICAgICAgICBiYXRjaC5jb21taXQoKS50aGVuKGZ1bmN0aW9uICgpIHt9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBkb3dubG9hZCBmaWxlIGZyb20gZmlyZXN0b3JlIGNsb3VkIHN0b3JhZ2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbG91ZEZpbGVQYXRoIC0gZmlyZXN0b3JlIGNsb3VkIHBhdGhcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuQXBwbHlVcmwgLSBjYWxsYmFjayBmdW5jdGlvbiBhZnRlciBkb3dubG9hZGVkXHJcbiAgICAgKi9cclxuICAgIGRvd25sb2FkRmlsZSA9IChjbG91ZEZpbGVQYXRoLCBmbkFwcGx5VXJsKSA9PiB7XHJcbiAgICAgICAgLy8naW1hZ2VzL3N0YXJzLmpwZydcclxuICAgICAgICB0aGlzLmluaXRTdG9yYWdlKCk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgcmVmZXJlbmNlIHRvIHRoZSBmaWxlIHdlIHdhbnQgdG8gZG93bmxvYWRcclxuICAgICAgICB2YXIgc3RhcnNSZWYgPSB0aGlzLl9zdG9yYWdlUmVmLmNoaWxkKGNsb3VkRmlsZVBhdGgpO1xyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIGRvd25sb2FkIFVSTFxyXG4gICAgICAgIHN0YXJzUmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgICAgIC8vIEluc2VydCB1cmwgaW50byBhbiA8aW1nPiB0YWcgdG8gXCJkb3dubG9hZFwiXHJcbiAgICAgICAgICAgIGZuQXBwbHlVcmwodXJsKTtcclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgIC8vIEEgZnVsbCBsaXN0IG9mIGVycm9yIGNvZGVzIGlzIGF2YWlsYWJsZSBhdFxyXG4gICAgICAgICAgICAvLyBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9zdG9yYWdlL3dlYi9oYW5kbGUtZXJyb3JzXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnc3RvcmFnZS9vYmplY3Qtbm90LWZvdW5kJzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaWxlIGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICdzdG9yYWdlL3VuYXV0aG9yaXplZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBkb2Vzbid0IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhlIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0b3JhZ2UvY2FuY2VsZWQnOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgY2FuY2VsZWQgdGhlIHVwbG9hZFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLy4uLlxyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0b3JhZ2UvdW5rbm93bic6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVW5rbm93biBlcnJvciBvY2N1cnJlZCwgaW5zcGVjdCB0aGUgc2VydmVyIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLyoqdGVzdCBhbmQgZGVwcmVjYXRlZCAqL1xyXG4gICAgdXBsb2FkRmlsZV9wcm9ncmVzcyA9IChibG9iLCBjbG91ZEZpbGVQYXRoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbml0U3RvcmFnZSgpO1xyXG4gICAgICAgIHZhciB1cGxvYWRUYXNrID0gdGhpcy5fc3RvcmFnZVJlZi5jaGlsZChjbG91ZEZpbGVQYXRoKS5wdXQoYmxvYik7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICAgICAgLy8gUmVnaXN0ZXIgdGhyZWUgb2JzZXJ2ZXJzOlxyXG4gICAgICAgIC8vIDEuICdzdGF0ZV9jaGFuZ2VkJyBvYnNlcnZlciwgY2FsbGVkIGFueSB0aW1lIHRoZSBzdGF0ZSBjaGFuZ2VzXHJcbiAgICAgICAgLy8gMi4gRXJyb3Igb2JzZXJ2ZXIsIGNhbGxlZCBvbiBmYWlsdXJlXHJcbiAgICAgICAgLy8gMy4gQ29tcGxldGlvbiBvYnNlcnZlciwgY2FsbGVkIG9uIHN1Y2Nlc3NmdWwgY29tcGxldGlvblxyXG4gICAgICAgIHVwbG9hZFRhc2sub24oc2VsZi5fZmlyZWJhc2Uuc3RvcmFnZS5UYXNrRXZlbnQuU1RBVEVfQ0hBTkdFRCwgZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgIC8vIE9ic2VydmUgc3RhdGUgY2hhbmdlIGV2ZW50cyBzdWNoIGFzIHByb2dyZXNzLCBwYXVzZSwgYW5kIHJlc3VtZVxyXG4gICAgICAgICAgICAvLyBHZXQgdGFzayBwcm9ncmVzcywgaW5jbHVkaW5nIHRoZSBudW1iZXIgb2YgYnl0ZXMgdXBsb2FkZWQgYW5kIHRoZSB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgdG8gYmUgdXBsb2FkZWRcclxuICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gKHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzKSAqIDEwMDtcclxuICAgICAgICAgICAgc3dpdGNoIChzbmFwc2hvdC5zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLl9maXJlYmFzZS5zdG9yYWdlLlRhc2tTdGF0ZS5QQVVTRUQ6IC8vIG9yICdwYXVzZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHNlbGYuX2ZpcmViYXNlLnN0b3JhZ2UuVGFza1N0YXRlLlJVTk5JTkc6IC8vIG9yICdydW5uaW5nJ1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSB1bnN1Y2Nlc3NmdWwgdXBsb2Fkc1xyXG4gICAgICAgICAgICAvLyBBIGZ1bGwgbGlzdCBvZiBlcnJvciBjb2RlcyBpcyBhdmFpbGFibGUgYXRcclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3Mvc3RvcmFnZS93ZWIvaGFuZGxlLWVycm9yc1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdzdG9yYWdlL3VuYXV0aG9yaXplZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBkb2Vzbid0IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhlIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0b3JhZ2UvY2FuY2VsZWQnOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgY2FuY2VsZWQgdGhlIHVwbG9hZFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLy4uLlxyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0b3JhZ2UvdW5rbm93bic6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVW5rbm93biBlcnJvciBvY2N1cnJlZCwgaW5zcGVjdCBlcnJvci5zZXJ2ZXJSZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBIYW5kbGUgc3VjY2Vzc2Z1bCB1cGxvYWRzIG9uIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIC8vIEZvciBpbnN0YW5jZSwgZ2V0IHRoZSBkb3dubG9hZCBVUkw6IGh0dHBzOi8vZmlyZWJhc2VzdG9yYWdlLmdvb2dsZWFwaXMuY29tLy4uLlxyXG4gICAgICAgICAgICB1cGxvYWRUYXNrLnNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKGRvd25sb2FkVVJMKSB7fSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VyMiA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbml0RnVuY3Rpb25zKClcclxuICAgICAgICAvL3ZhciBhZGRNZXNzYWdlID0gdGhpcy5fZmlyZWJhc2UuYXBwKCkuZnVuY3Rpb25zKCdhc2lhLWVhc3QyJykuaHR0cHNDYWxsYWJsZSgnZ2V0VXNlcicpO1xyXG4gICAgICAgIHZhciBhZGRNZXNzYWdlID0gdGhpcy5fZmlyZWJhc2UuYXBwKCkuZnVuY3Rpb25zKCdhc2lhLWVhc3QyJykuaHR0cHNDYWxsYWJsZSgnYWRkT3JkZXJJbmZvJyk7XHJcblxyXG5cclxuICAgICAgICByZXR1cm4gYWRkTWVzc2FnZShkYXRhKVxyXG4gICAgICAgIC8vIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAvLyAgICAgY2hhaS5leHBlY3QoMTApLnRvLmJlLmVxdWFsKDEwKTtcclxuICAgICAgICAvLyAgICAgLy8gUmVhZCByZXN1bHQgb2YgdGhlIENsb3VkIEZ1bmN0aW9uLlxyXG4gICAgICAgIC8vICAgICAvL3ZhciBzYW5pdGl6ZWRNZXNzYWdlID0gcmVzdWx0LmRhdGEudGV4dDtcclxuICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgLy8gfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIEdldHRpbmcgdGhlIEVycm9yIGRldGFpbHMuXHJcbiAgICAgICAgLy8gICAgIHZhciBjb2RlID0gZXJyb3IuY29kZTtcclxuICAgICAgICAvLyAgICAgdmFyIG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgIC8vICAgICB2YXIgZGV0YWlscyA9IGVycm9yLmRldGFpbHM7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgIC8vICAgICAvLyAuLi5cclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGFkZCBPcmRlckluZm8gdG8gZmlyZXN0b3JlLk9yZGVySW5mb1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZ1bmNOYW1lXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzUHJvZHVjdFNpdGVcclxuICAgICAqIEBwYXJhbSB7YW55fSBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge3tiZWdpbkV2ZW50OiBmdW5jdGlvbiwgZW5kRXZlbnQ6IGZ1bmN0aW9ufX0gW29wdGlvbnNdIC0gY2FsbGJhY2sgZnVuY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIGNhbGxGdW5jdGlvbnMoZnVuY05hbWUsIGlzUHJvZHVjdFNpdGUsIGRhdGEsIG9wdGlvbnMpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKDg3KVxyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYmVnaW5FdmVudCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmJlZ2luRXZlbnQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY2FsbEZ1bmMgPSAoaXNQcm9kdWN0U2l0ZSA9PT0gdHJ1ZSkgP1xyXG4gICAgICAgICAgICB0aGlzLl9hcHAuZnVuY3Rpb25zKCdhc2lhLWVhc3QyJykuaHR0cHNDYWxsYWJsZShmdW5jTmFtZSkgOlxyXG4gICAgICAgICAgICB0aGlzLl9hcHAuZnVuY3Rpb25zKCkuaHR0cHNDYWxsYWJsZShmdW5jTmFtZSlcclxuICAgICAgICAvLyBpZihpc1Byb2R1Y3RTaXRlID09PSB0cnVlKVxyXG4gICAgICAgIC8vICAgICBjYWxsRnVuYyA9IHRoaXMuX2FwcC5mdW5jdGlvbnMoJ2FzaWEtZWFzdDInKS5odHRwc0NhbGxhYmxlKGZ1bmNOYW1lKS8vKCdhZGRPcmRlckluZm8nKTtcclxuICAgICAgICAvLyBlbHNlXHJcbiAgICAgICAgLy8gICAgIGNhbGxGdW5jID0gdGhpcy5fYXBwLmZ1bmN0aW9ucygpLmh0dHBzQ2FsbGFibGUoZnVuY05hbWUpLy8oJ2FkZE9yZGVySW5mbycpO1xyXG4gICAgICAgIHJldHVybiBjYWxsRnVuYyhkYXRhKVxyXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmVuZEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lbmRFdmVudCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGFkZCBPcmRlckluZm8gdG8gZmlyZXN0b3JlLk9yZGVySW5mb1xyXG4gICAgICogQHBhcmFtICB7aW1wb3J0KFwiLi4vZGF0YURlZmluZS9pbmRleC5qc1wiKS5PcmRlckluZm99IGRhdGFcclxuICAgICAqIEBwYXJhbSAge3tiZWdpbkV2ZW50OiBmdW5jdGlvbiwgZW5kRXZlbnQ6IGZ1bmN0aW9ufX0gW29wdGlvbnNdIC0gY2FsbGJhY2sgZnVuY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIGFkZE9yZGVySW5mbyhkYXRhLCBpc1Byb2R1Y3RTaXRlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IG9yZGVyID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxPRzo6IEZpcmViYXNlIC0+IGFkZE9yZGVySW5mbyAtPiBvcmRlclwiLCBvcmRlcilcclxuICAgICAgICByZW1vdmVGdW5jUHJvcChvcmRlcik7IC8vcmVtb3ZlIGdldFNob3BJdGVtc19JZCBcclxuICAgICAgICAvKipAZnVuY3Rpb24gZGVmYXVsdD10cnVlICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0X2lzVXNlUHJvZFNpdGUoaXNQcm9kdWN0U2l0ZSkge1xyXG4gICAgICAgICAgICBpZiAoaXNQcm9kdWN0U2l0ZSA9PT0gdW5kZWZpbmVkIHx8IGlzUHJvZHVjdFNpdGUgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNQcm9kdWN0U2l0ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaXNVc2VQcm9kU2l0ZSA9IGdldF9pc1VzZVByb2RTaXRlKGlzUHJvZHVjdFNpdGUpXHJcbiAgICAgICAgb3JkZXIuZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlciA9IG51bGwgLy90aGlzLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsRnVuY3Rpb25zKCdhZGRPcmRlckluZm8nLCBpc1VzZVByb2RTaXRlLCBvcmRlciwgb3B0aW9ucylcclxuICAgICAgICAvL2NvbnNvbGUubG9nKDg3KVxyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYmVnaW5FdmVudCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmJlZ2luRXZlbnQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRGdW5jdGlvbnMoKTtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXNcclxuICAgICAgICBvcmRlciA9IE9iamVjdC5hc3NpZ24oe30sIGRhdGEpO1xyXG4gICAgICAgIC8vb3JkZXIgPSB7dG90YWxQcmljZTo1NTV9XHJcbiAgICAgICAgb3JkZXIuZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlciA9IG51bGwgLy90aGlzLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKTtcclxuICAgICAgICAvL3ZhciBhZGRNZXNzYWdlID0gZmlyZWJhc2UuYXBwKCkuZnVuY3Rpb25zKCdhc2lhLWVhc3QyJykuaHR0cHNDYWxsYWJsZSgnZ2V0VXNlcicpO1xyXG5cclxuICAgICAgICAvL2xldCBhcHAgPSBmaXJlYmFzZS5pbml0aWFsaXplVGVzdEFwcCh7XHJcbiAgICAgICAgLy9hcHAuZnVuY3Rpb25zKCkudXNlRnVuY3Rpb25zRW11bGF0b3IoXCJodHRwOi8vbG9jYWxob3N0OjUwMDFcIik7XHJcbiAgICAgICAgLy9jb25zdCBsb2NhbF9hZGRPcmRlckluZm8gPSBmaXJlYmFzZS5hcHAoKS5mdW5jdGlvbnMoJ2FzaWEtZWFzdDInKS5odHRwc0NhbGxhYmxlKCdhZGRPcmRlckluZm8nKTtcclxuICAgICAgICB2YXIgY2FsbF9hZGRPcmRlckluZm8gPSB0aGlzLl9hcHAuZnVuY3Rpb25zKCdhc2lhLWVhc3QyJykuaHR0cHNDYWxsYWJsZSgnYWRkT3JkZXJJbmZvJyk7XHJcbiAgICAgICAgLy92YXIgY2FsbF9hZGRPcmRlckluZm8gPSB0aGlzLl9maXJlYmFzZS5hcHAoKS5mdW5jdGlvbnMoJ2FzaWEtZWFzdDInKS5odHRwc0NhbGxhYmxlKCdhZGRPcmRlckluZm8nKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNhbGxfYWRkT3JkZXJJbmZvKG9yZGVyKVxyXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmVuZEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lbmRFdmVudCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gMTFcclxuICAgICAgICAvLyB9KVxyXG5cclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgXHJcbiAgICAgKiBAcGFyYW0ge0VOVU1fb3JkZXJTdGF0dXN9IG9yZGVyU3RhdHVzIFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8T3JkZXJJbmZvW10+fVxyXG4gICAgICovXHJcbiAgICBnZXRPcmRlckluZm8gPSAodXNlcklkLCBvcmRlclN0YXR1cykgPT4ge1xyXG4gICAgICAgIHRoaXMuaW5pdERCKCk7XHJcblxyXG4gICAgICAgIC8vIGlmKHVzZXJJZClcclxuICAgICAgICAvLyAgICAgZmFrZVVpZCA9IHVzZXJJZFxyXG4gICAgICAgIGxldCBydG5PcmRlckluZm9fbGlzdCA9IFtdXHJcbiAgICAgICAgbGV0IGxpc3RfcHJvZHVjdElkID0gW11cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuXHJcbiAgICAgICAgLyoqQHBhcmFtIHtFTlVNX29yZGVyU3RhdHVzfSBpbk9yZGVyU3RhdHVzICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UXVlcnkoaW5PcmRlclN0YXR1cykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGluT3JkZXJTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy5hbGw6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uT3JkZXJJbmZvKS53aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFTlVNX29yZGVyU3RhdHVzLmNvbXBsZXRlZDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc0NvbXBsZXRlZCcsICc9PScsIHRydWUpXHJcbiAgICAgICAgICAgICAgICBjYXNlIEVOVU1fb3JkZXJTdGF0dXMud2FpdEZvclBheTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc1BhaWQnLCAnPT0nLCBmYWxzZSkud2hlcmUoJ29yZGVyU3RhdHVzLmlzQ2FuY2VsZWQnLCAnPT0nLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy53YWl0Rm9yRGVsaXZlcnk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uT3JkZXJJbmZvKS53aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKS53aGVyZSgnb3JkZXJTdGF0dXMuaXNQYWlkJywgJz09JywgdHJ1ZSkud2hlcmUoJ29yZGVyU3RhdHVzLmlzRGVsaXZlcnknLCAnPT0nLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy5jYW5jZWxlZDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc0NhbmNlbGVkJywgJz09JywgdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9yZXR1cm4gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc1BhaWQnLCAnPT0nLCB0cnVlKS5nZXQoKVxyXG4gICAgICAgIHJldHVybiBnZXRRdWVyeShvcmRlclN0YXR1cykuZ2V0KCkgLy8ub3JkZXJCeShcImNyZWF0ZURhdGVUaW1lXCIsXCJkZXNjXCIpLmdldCgpXHJcbiAgICAgICAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc25hcHNob3QuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvL2xldCBkYXRhID0gc25hcHNob3QuZG9jc1swXS5kYXRhKClcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb3JkZXJJbmZvID0gT3JkZXJJbmZvLmdldE9yZGVySW5mb19Gcm9tRGJGb3JtYXQoZWxlbWVudC5kYXRhKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLy9vcmRlckluZm8gPSBPYmplY3QuYXNzaWduKG9yZGVySW5mbywgZWxlbWVudC5kYXRhKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vb3JkZXJJbmZvLmZzdHNDcmVhdGVEYXRlVGltZV9zZXJ2ZXIgPSAob3JkZXJJbmZvLmZzdHNDcmVhdGVEYXRlVGltZV9zZXJ2ZXIgPT0gbnVsbCkgPyBudWxsIDogb3JkZXJJbmZvLmZzdHNDcmVhdGVEYXRlVGltZV9zZXJ2ZXIudG9EYXRlKClcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBydG5PcmRlckluZm9fbGlzdC5wdXNoKG9yZGVySW5mbylcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXJyID0gb3JkZXJJbmZvLmdldFNob3BJdGVtc19JZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdF9wcm9kdWN0SWQucHVzaCguLi5hcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvL2xpc3RfcHJvZHVjdElkLnB1c2goJ0FBQScsJ0FBQScpO1xyXG4gICAgICAgICAgICAgICAgLy9kaXN0aW5jdFxyXG4gICAgICAgICAgICAgICAgbGlzdF9wcm9kdWN0SWQgPSBbLi4ubmV3IFNldChsaXN0X3Byb2R1Y3RJZCldXHJcbiAgICAgICAgICAgICAgICBydG5PcmRlckluZm9fbGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIuanNkdENyZWF0ZURhdGVUaW1lX3NlcnZlciAtIGEuanNkdENyZWF0ZURhdGVUaW1lX3NlcnZlclxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobGlzdF9wcm9kdWN0SWQpXHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJ0bk9yZGVySW5mb19saXN0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtydG5PcmRlckluZm9fbGlzdCwgbGlzdF9wcm9kdWN0SWRdXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKGFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgW29yZGVySW5mb19saXN0LCBsaXN0X3Byb2R1Y3RJZF0gPSBhcnJheVxyXG5cclxuICAgICAgICAgICAgICAgIC8vLS0tLS0tLSBncm91cCBsaXN0X3Byb2R1Y3RJZCBsaW1pdCAtLSAxMFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0R3JvdXBlZEFycmF5X0J5VGltZXMoVGFyZ2V0QXJyYXksIGVhY2hHcm91cENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJ0bkdyb3VwZWRBcnJheSA9IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aW1lc1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkb1RpbWVzID0gTWF0aC5jZWlsKFRhcmdldEFycmF5Lmxlbmd0aCAvIGVhY2hHcm91cENvdW50KSAvLzRcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvVGltZXM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3R3JvdXAgPSBUYXJnZXRBcnJheS5zcGxpY2UoMCwgZWFjaEdyb3VwQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ0bkdyb3VwZWRBcnJheS5wdXNoKG5ld0dyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnRuR3JvdXBlZEFycmF5XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvKipAdHlwZSB7QXJyYXl9ICovXHJcbiAgICAgICAgICAgICAgICBsZXQgbGlzdEdyb3VwUHJvZHVjdElkID0gZ2V0R3JvdXBlZEFycmF5X0J5VGltZXMobGlzdF9wcm9kdWN0SWQsIDEwKVxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGZpcmVzdG9yZSAtIFByb2R1Y3RzIGluIElkXHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3UHJvbWlzZSA9IChsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndoZXJlKHNlbGYuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFBhdGguZG9jdW1lbnRJZCgpLCAnaW4nLCBsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMpIC8vWycwMmQyYnNzMy0wMDEyJywnMWM3MThvY2gtMDAwMSddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld1Byb21pc2UpXHJcbiAgICAgICAgICAgICAgICBsZXQgUHJvbWlzdEFycmF5ID0gW11cclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobGlzdEdyb3VwUHJvZHVjdElkWzBdKVxyXG4gICAgICAgICAgICAgICAgUHJvbWlzdEFycmF5LnB1c2gob3JkZXJJbmZvX2xpc3QpXHJcbiAgICAgICAgICAgICAgICAvL1Byb21pc3RBcnJheS5wdXNoKGxpc3RfcHJvZHVjdElkKVxyXG4gICAgICAgICAgICAgICAgbGlzdEdyb3VwUHJvZHVjdElkLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBQcm9taXN0QXJyYXkucHVzaChuZXdQcm9taXNlKGl0ZW0pKSAvL2xpc3RHcm91cFByb2R1Y3RJZFswXSkpICAgIFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vUHJvbWlzdEFycmF5LnB1c2gobmV3UHJvbWlzZShsaXN0R3JvdXBQcm9kdWN0SWRbMF0pKVxyXG4gICAgICAgICAgICAgICAgLy8gUHJvbWlzdEFycmF5LnB1c2gobmV3UHJvbWlzZShsaXN0R3JvdXBQcm9kdWN0SWRbMV0pKVxyXG4gICAgICAgICAgICAgICAgLy8gZm9yKGxldCBpPTA7aTxsaXN0R3JvdXBQcm9kdWN0SWQubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgbGV0IGxpc3RfTGltaXRfMTBfUHJvZHVjdElkcyA9IGxpc3RHcm91cFByb2R1Y3RJZFtpXVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIFByb21pc3RBcnJheS5wdXNoKG5ld1Byb21pc2UobGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzKSlcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChQcm9taXN0QXJyYXkpIC8vW29yZGVySW5mb19saXN0LCBsaXN0X3Byb2R1Y3RJZCwgbmV3UHJvbWlzZSgpXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKGFycmF5KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG9yZGVySW5mb19saXN0ID0gYXJyYXkuc2hpZnQoKSAvLyBwb3AgWzBdXHJcbiAgICAgICAgICAgICAgICAvL2xldCBsaXN0X3Byb2R1Y3RJZCA9IGFycmF5LnNwbGljZSgwLCAxKVxyXG4gICAgICAgICAgICAgICAgLy9sZXQgW29yZGVySW5mb19saXN0LCBsaXN0X3Byb2R1Y3RJZCwgc25hcHNob3RdID0gYXJyYXlcclxuICAgICAgICAgICAgICAgIGxldCBhcnJheVNuYXBzaG90ID0gYXJyYXlcclxuICAgICAgICAgICAgICAgIGxldCBydG5PcmRlckluZm9fbGlzdCA9IG9yZGVySW5mb19saXN0XHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtQcm9kdWN0SW5mb1tdfSAtIGRpc3RpbmN0IHByb2R1Y3RJbmZvIGxpc3RcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgbGV0IGFycmF5RGlzdGluY3RQcm9kdWN0cyA9IFtdXHJcbiAgICAgICAgICAgICAgICAvL2NvbGxlY3QgZGlzdGluY3QgcHJvZHVjdEluZm8gYXJyYXlcclxuICAgICAgICAgICAgICAgIC8vYXJyYXlTbmFwc2hvdCA9IGFycmF5U25hcHNob3QuZmxhdCgxKVxyXG4gICAgICAgICAgICAgICAgbGV0IGFycmF5RG9jcyA9IFtdXHJcbiAgICAgICAgICAgICAgICBhcnJheVNuYXBzaG90LmZvckVhY2goc25hcHNob3QgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5RG9jcyA9IGFycmF5RG9jcy5jb25jYXQoc25hcHNob3QuZG9jcylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy9hcnJheVNuYXBzaG90WzBdLmRvY3MsIGFycmF5U25hcHNob3RbMV0uZG9jc1xyXG4gICAgICAgICAgICAgICAgLy9hcnJheURvY3MgPSBhcnJheURvY3MuZmxhdCgxKVxyXG4gICAgICAgICAgICAgICAgYXJyYXlEb2NzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge1Byb2R1Y3RJbmZvfSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0SW5mbyA9IGVsZW1lbnQuZGF0YSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEluZm8gPSBPYmplY3QuYXNzaWduKG5ldyBQcm9kdWN0SW5mbygpLCBwcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgICAgICAgICBhcnJheURpc3RpbmN0UHJvZHVjdHMucHVzaChwcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHByb2R1Y3RJbmZvKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvL2ZpbGwgU2hvcEl0ZW1zIC0gX3Byb2R1Y3RJbmZvXHJcblxyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnLS0tLS0nLHJ0bk9yZGVySW5mb19saXN0KVxyXG4gICAgICAgICAgICAgICAgLy9ydG5PcmRlckluZm9fbGlzdCA9IHJ0bk9yZGVySW5mb19saXN0LmZsYXQoMSlcclxuICAgICAgICAgICAgICAgIHJ0bk9yZGVySW5mb19saXN0LmZvckVhY2goZWFjaE9yZGVySW5mbyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnLS0tLS0tLS0tJyxlYWNoT3JkZXJJbmZvWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgIGVhY2hPcmRlckluZm8uZmlsbFNob3BJdGVtcyhhcnJheURpc3RpbmN0UHJvZHVjdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlbGVtZW50Lm9yZGVySWQpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtPcmRlckluZm9bXX0gKi9cclxuICAgICAgICAgICAgICAgIHJldHVybiBydG5PcmRlckluZm9fbGlzdFxyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAvLyAudGhlbigoYXJyYXkpID0+IHtcclxuICAgICAgICAvLyAgICAgbGV0IFtvcmRlckluZm9fbGlzdCwgbGlzdF9wcm9kdWN0SWRdID0gYXJyYXlcclxuICAgICAgICAvLyAgICAgbGV0IHJ0bk9yZGVySW5mb19saXN0ID0gb3JkZXJJbmZvX2xpc3RcclxuICAgICAgICAvLyAgICAgLyoqXHJcbiAgICAgICAgLy8gICAgICAqIEB0eXBlIHtQcm9kdWN0SW5mb1tdfSAtIGRpc3RpbmN0IHByb2R1Y3RJbmZvIGxpc3RcclxuICAgICAgICAvLyAgICAgICovXHJcbiAgICAgICAgLy8gICAgIGxldCBhcnJheURpc3RpbmN0UHJvZHVjdHMgPSBbXVxyXG4gICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyhydG5PcmRlckluZm9fbGlzdClcclxuICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2cobGlzdF9wcm9kdWN0SWQpXHJcbiAgICAgICAgLy8gICAgIC8vLndoZXJlKHNlbGYuX2RiLkZpZWxkUGF0aC5kb2N1bWVudElkKCksICdpbicsIFsnMDJkMmJzczMtMDAxMiddKVxyXG4gICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKHNlbGYuX2RiLkZpZWxkUGF0aClcclxuICAgICAgICAvLyAgICAgc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0cylcclxuICAgICAgICAvLyAgICAgLndoZXJlKHNlbGYuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFBhdGguZG9jdW1lbnRJZCgpLCAnaW4nLCBsaXN0X3Byb2R1Y3RJZCkvL1snMDJkMmJzczMtMDAxMicsJzFjNzE4b2NoLTAwMDEnXSlcclxuICAgICAgICAvLyAgICAgLmdldCgpXHJcbiAgICAgICAgLy8gICAgIC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgLy9jb2xsZWN0IGRpc3RpbmN0IHByb2R1Y3RJbmZvIGFycmF5XHJcbiAgICAgICAgLy8gICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8qKkB0eXBlIHtQcm9kdWN0SW5mb30gKi9cclxuICAgICAgICAvLyAgICAgICAgICAgICBsZXQgcHJvZHVjdEluZm8gPSBlbGVtZW50LmRhdGEoKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHByb2R1Y3RJbmZvID0gT2JqZWN0LmFzc2lnbihuZXcgUHJvZHVjdEluZm8oKSxwcm9kdWN0SW5mbylcclxuICAgICAgICAvLyAgICAgICAgICAgICBhcnJheURpc3RpbmN0UHJvZHVjdHMucHVzaChwcm9kdWN0SW5mbylcclxuICAgICAgICAvLyAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHByb2R1Y3RJbmZvKVxyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgICAvL2ZpbGwgU2hvcEl0ZW1zIC0gX3Byb2R1Y3RJbmZvXHJcbiAgICAgICAgLy8gICAgICAgICBydG5PcmRlckluZm9fbGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGVsZW1lbnQuZmlsbFNob3BJdGVtcyhhcnJheURpc3RpbmN0UHJvZHVjdHMpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlbGVtZW50Lm9yZGVySWQpXHJcbiAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgICAgIC8vcnRuT3JkZXJJbmZvX2xpc3RbMF0uZmlsbFNob3BJdGVtcyhhcnJheURpc3RpbmN0UHJvZHVjdHMpXHJcbiAgICAgICAgLy8gICAgICAgICAvL2NvbnNvbGUubG9nKHJ0bk9yZGVySW5mb19saXN0KVxyXG4gICAgICAgIC8vICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2coYXJyYXlEaXN0aW5jdFByb2R1Y3RzKVxyXG5cclxuICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZyhydG5PcmRlckluZm9fbGlzdFswXS5zaG9wSXRlbUxpc3QpXHJcbiAgICAgICAgLy8gICAgIHJldHVybiBydG5PcmRlckluZm9fbGlzdFxyXG5cclxuICAgICAgICAvLyB9KVxyXG5cclxuICAgIH1cclxuICAgIGdldFByb2R1Y3RJbmZvID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW5pdERCKCk7XHJcblxyXG4gICAgICAgIC8vIGlmKHVzZXJJZClcclxuICAgICAgICAvLyAgICAgZmFrZVVpZCA9IHVzZXJJZFxyXG4gICAgICAgIGxldCBydG5Qcm9kdWN0SW5mb19saXN0ID0gW11cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0SW5mbykuZ2V0KClcclxuICAgICAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gZWxlbWVudC5kYXRhKClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSgnLS1BdXRvTnVtLS0nKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2RJbmZvID0gbmV3IFByb2R1Y3RJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZEluZm8gPSBPYmplY3QuYXNzaWduKHByb2RJbmZvLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBydG5Qcm9kdWN0SW5mb19saXN0LnB1c2gocHJvZEluZm8pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBydG5Qcm9kdWN0SW5mb19saXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5hdXRvTnVtIC0gYS5hdXRvTnVtXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ0blByb2R1Y3RJbmZvX2xpc3Q7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCdsb2Rhc2gnKX0gXyBcclxuICAgICAqIEBwYXJhbSB7UHJvZHVjdEluZm9bXX0gbGlzdFByb2R1Y3RJbmZvIFxyXG4gICAgICovXHJcbiAgICBnZXRQcm9kdWN0SW5mb19Hcm91cGVkSXRlbXNfQnlDYXRlZ29yeShfLCBsaXN0UHJvZHVjdEluZm8pIHtcclxuICAgICAgICBsZXQgZ3JvdXBlZERhdGEgPSBfKGxpc3RQcm9kdWN0SW5mbykuZ3JvdXBCeSgnY2F0ZWdvcnknKS5tYXAoKGFycmF5R3JvdXBlZEl0ZW1zLCBjYXRlZ29yeSkgPT4ge1xyXG4gICAgICAgICAgICAvLyByZXR1cm4gJydcclxuICAgICAgICAgICAgLy8gT2JqZWN0LlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeVpoVFc6IE1hcF9Qcm9kdWN0Q2F0ZWdvcnlbY2F0ZWdvcnldLFxyXG4gICAgICAgICAgICAgICAgYXJyYXlHcm91cGVkSXRlbXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyByZXR1cm4ge1xyXG4gICAgICAgICAgICAvLyAgICAgY2F0ZWdvcnksXHJcbiAgICAgICAgICAgIC8vICAgICBuYW1lOiBfLm1hcChhcnJheUdyb3VwZWRJdGVtcywgJ25hbWUnKVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSkudmFsdWUoKVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coZDIpXHJcbiAgICAgICAgcmV0dXJuIGdyb3VwZWREYXRhXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIG1lcmdlIGRhdGEgdG8gZmlyZXN0b3JlLlByb2R1Y3RzXHJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHByb2R1Y3RpZFxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBuZXdPYmplY3QgLS0gUHJvZHVjdEluZm9cclxuICAgICAqIEBwYXJhbSAge3tiZWdpbkV2ZW50OmZ1bmN0aW9uLCBlbmRFdmVudDpmdW5jdGlvbn19IFtvcHRpb25zXSAtIGNhbGxiYWNrIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVQcm9kdWN0SW5mbyA9IChwcm9kdWN0aWQsIG5ld09iamVjdCwgb3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYmVnaW5FdmVudCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmJlZ2luRXZlbnQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RJbmZvKS5kb2MocHJvZHVjdGlkKS5zZXQoXHJcbiAgICAgICAgICAgICAgICBuZXdPYmplY3QsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSkgLy9uZXcgcHJvbWlzZVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0SW5mbykuZG9jKHByb2R1Y3RpZCkuZ2V0KCkgLy9Qcm9taXNlLnJlc29sdmUoJ1RUVCcpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoc25hcFNob3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzbmFwU2hvdC5leGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNuYXBTaG90LmRhdGEoKVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZW5kRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmVuZEV2ZW50KClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb2R1Y3RpZCBcclxuICAgICAqL1xyXG4gICAgZGVsZXRlUHJvZHVjdEluZm8gPSAocHJvZHVjdGlkKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0SW5mbykuZG9jKHByb2R1Y3RpZCkuZGVsZXRlKClcclxuICAgICAgICAvLyAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIC8vcmV0dXJuIHRoaXMuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uUHJvZHVjdEluZm8pLmRvYyhwcm9kdWN0aWQpLmdldCgpIC8vUHJvbWlzZS5yZXNvbHZlKCdUVFQnKTtcclxuICAgICAgICAvLyAgICAgcmV0dXJuICdvaydcclxuICAgICAgICAvLyB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldFByb2R1Y3RzX0J5SWRBcnJheSA9IChhcnJheUlkLCB1c2VySWQpID0+IHtcclxuXHJcbiAgICAvLyAgICAgdGhpcy5pbml0REIoKVxyXG4gICAgLy8gICAgIHRoaXMuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uT3JkZXJJbmZvKS53aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKS5nZXQoKVxyXG4gICAgLy8gICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHt9KVxyXG5cclxuICAgIC8vIH1cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEFVVEhcclxuICAgIFNpZ25PdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gU2lnbi1vdXQgc3VjY2Vzc2Z1bC5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NpZ24tb3V0IHN1Y2Nlc3NmdWwnKVxyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2lnbiBvdXQgRXJyb3ItLT4gJywgZXJyb3IpXHJcbiAgICAgICAgICAgIC8vIEFuIGVycm9yIGhhcHBlbmVkLlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgR29vZ2xlX1JlZ2lzdGVyX0xvZ2luKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgcHJvdmlkZXIgPSBuZXcgdGhpcy5fZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICAgICAgICAvLyB0aGlzLl9maXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aFJlZGlyZWN0KHByb3ZpZGVyKTtcclxuICAgICAgICAvLyByZXR1cm47XHJcblxyXG4gICAgICAgIC8vc2lnbkluV2l0aFJlZGlyZWN0XHJcbiAgICAgICAgLy9maXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICB0aGlzLl9maXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBHb29nbGUgQWNjZXNzIFRva2VuLiBZb3UgY2FuIHVzZSBpdCB0byBhY2Nlc3MgdGhlIEdvb2dsZSBBUEkuXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NpZ25JbldpdGhQb3B1cCcpXHJcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdC5jcmVkZW50aWFsXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTE9HOjogRmlyZWJhc2UgLT4gR29vZ2xlX1JlZ2lzdGVyX0xvZ2luIC0+IHRva2VuXCIsIHRva2VuKVxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTE9HOjogRmlyZWJhc2UgLT4gR29vZ2xlX1JlZ2lzdGVyX0xvZ2luIC0+IHRva2VuXCIsIHRva2VuKVxyXG4gICAgICAgICAgICAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICAgICAgICAgICAgdmFyIHVzZXIgPSByZXN1bHQudXNlcjtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxPRzo6IEZpcmViYXNlIC0+IEdvb2dsZV9SZWdpc3Rlcl9Mb2dpbiAtPiB1c2VyXCIsIHVzZXIpXHJcbiAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBIYW5kbGUgRXJyb3JzIGhlcmUuXHJcbiAgICAgICAgICAgIHZhciBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgLy8gVGhlIGVtYWlsIG9mIHRoZSB1c2VyJ3MgYWNjb3VudCB1c2VkLlxyXG4gICAgICAgICAgICB2YXIgZW1haWwgPSBlcnJvci5lbWFpbDtcclxuICAgICAgICAgICAgLy8gVGhlIGZpcmViYXNlLmF1dGguQXV0aENyZWRlbnRpYWwgdHlwZSB0aGF0IHdhcyB1c2VkLlxyXG4gICAgICAgICAgICB2YXIgY3JlZGVudGlhbCA9IGVycm9yLmNyZWRlbnRpYWw7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSlcclxuICAgICAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyBpc0RhdGUodmFsdWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlICdudW1iZXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKERhdGUucGFyc2UodmFsdWUpKTtcclxuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKHZhbHVlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0RGF0ZV9Gcm9tX0ZpcmVzdG9yZV9UaW1lU3RhbXAodGltZXN0YW1wKSB7XHJcbiAgICAgICAgbGV0IHNlY29uZHMgPSBudWxsXHJcbiAgICAgICAgaWYgKHRpbWVzdGFtcC5zZWNvbmRzKVxyXG4gICAgICAgICAgICBzZWNvbmRzID0gdGltZXN0YW1wLnNlY29uZHNcclxuICAgICAgICBlbHNlIGlmICh0aW1lc3RhbXAuX3NlY29uZHMpIHtcclxuICAgICAgICAgICAgc2Vjb25kcyA9IHRpbWVzdGFtcC5fc2Vjb25kc1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2Vjb25kcyA9PT0gbnVsbClcclxuICAgICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShzZWNvbmRzICogMTAwMClcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUZ1bmNQcm9wKG9iaikge1xyXG4gICAgZm9yIChsZXQgcHJvcE5hbWUgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICBkZWxldGUgb2JqW3Byb3BOYW1lXVxyXG4gICAgICAgIC8vaWYoJHt0eXBlb2YgYXJyeTFbMF1ba2V5TmFtZV19ID09IClcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBFbWFpbF9SZXNlbmRQYXNzd29yZChlbWFpbEFkZHJlc3MsIGluRmlyZWJhc2UsIHN3YWwsIGZ1bmNDbG9zZU1vZGFsKSB7XHJcbiAgICB2YXIgYXV0aCA9IGluRmlyZWJhc2UuYXV0aCgpO1xyXG4gICAgLy92YXIgZW1haWxBZGRyZXNzID0gdGhpcy5wcm94eVVJLmJpbmRJcHRSZXNlbnRQd2RFbWFpbDtcclxuICAgIHJldHVybiBhdXRoLnNlbmRQYXNzd29yZFJlc2V0RW1haWwoZW1haWxBZGRyZXNzKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBFbWFpbCBzZW50LlxyXG4gICAgICAgIHN3YWwuZmlyZSh7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ+aPkOmGkicsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAn5a+G56K85bey5a+E5Ye677yM6KuL6Iez5L+h566x5pS25L+hJyxcclxuICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy9zZWxmLnNob3dNb2RhbChmYWxzZSlcclxuICAgICAgICAgICAgICAgIGlmKGZ1bmNDbG9zZU1vZGFsKVxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmNDbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgLy8gQW4gZXJyb3IgaGFwcGVuZWQuXHJcbiAgICAgICAgbGV0IGVyckNvZGVfWmhUVztcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5jb2RlKVxyXG4gICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xyXG4gICAgICAgICAgICBjYXNlICdhdXRoL2ludmFsaWQtZW1haWwnOlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZV9aaFRXID0gJ+i8uOWFpemMr+iqpCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhdXRoL3VzZXItbm90LWZvdW5kJzpcclxuICAgICAgICAgICAgICAgIGVyckNvZGVfWmhUVyA9ICfmraRFbWFpbOW4s+iZn+S4jeWtmOWcqCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZV9aaFRXID0gZXJyb3IuY29kZVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3YWwuZmlyZSh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLFxyXG4gICAgICAgICAgICB0ZXh0OiBgJHtlcnJDb2RlX1poVFd9LCR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICBpY29uOiAnZXJyb3InLFxyXG4gICAgICAgICAgICAvL2NvbmZpcm1CdXR0b25UZXh0OiAnQ29vbCdcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vdGhpcy5zaG93TW9kYWwoZmFsc2UpXHJcbn1cclxuXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBzeW5jRW1haWxWZXJpZmllZF9Ub0RCKGVtYWlsVmVyaWZpZWRfRnJvbUF1dGgsIHVpZCwgZmlyZXN0b3JlKSB7XHJcbi8vICAgICByZXR1cm4gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ1VzZXJzJykuZG9jKHVpZCkuc2V0KHtcclxuLy8gICAgICAgICBlbWFpbFZlcmlmaWVkOiBlbWFpbFZlcmlmaWVkX0Zyb21BdXRoXHJcbi8vICAgICB9LCB7XHJcbi8vICAgICAgICAgbWVyZ2U6IHRydWVcclxuLy8gICAgIH0pXHJcbi8vIH0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQXlCQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBYkE7QUFDQTtBQXpCQTtBQTBDQTtBQUVBO0FBQ0E7QUFDQTtBQTlDQTtBQWdEQTtBQUVBO0FBQ0E7QUFuREE7QUFzREE7QUFDQTtBQUNBO0FBeERBO0FBOERBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQXJFQTtBQTRFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQURBO0FBR0E7QUFDQTtBQXBGQTtBQTJGQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBREE7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQTlHQTtBQWlQQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBdlFBO0FBd1FBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBalRBO0FBd1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBREE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQXBXQTtBQTJXQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUExYkE7QUFtZEE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFmQTtBQW1CQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBM2ZBO0FBd2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQW1CQTtBQUNBO0FBQ0E7QUExbkJBO0FBNm5CQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeHFCQTtBQXlxQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQTlyQkE7QUFxeEJBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQTU3QkE7QUE2N0JBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXQ5QkE7QUFrL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6Z0NBO0FBNmdDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcGhDQTtBQThoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXJpQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7O0FBcUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBbUJBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBUUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBME1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBUkE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUF5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUF1R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQWtNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBcURBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBVkE7QUFZQTs7O0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBSUE7Ozs7OztBQW5tQ0E7QUFDQTtBQXNtQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/firebase/Firebase.js\n");

/***/ }),

/***/ "./js/firebase/FirebaseMJS.js":
/*!************************************!*\
  !*** ./js/firebase/FirebaseMJS.js ***!
  \************************************/
/*! namespace exports */
/*! export ENUM_orderStatus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Email_ResendPassword [provided] [no usage info] [missing usage info prevents renaming] */
/*! export FIRESTORAGE_FOLDERS [provided] [no usage info] [missing usage info prevents renaming] */
/*! export FIRESTORE_COLLECTION [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MIME_TYPE [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getDate_From_Firestore_TimeStamp [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MIME_TYPE\": () => /* binding */ MIME_TYPE,\n/* harmony export */   \"FIRESTORE_COLLECTION\": () => /* binding */ FIRESTORE_COLLECTION,\n/* harmony export */   \"FIRESTORAGE_FOLDERS\": () => /* binding */ FIRESTORAGE_FOLDERS,\n/* harmony export */   \"ENUM_orderStatus\": () => /* binding */ ENUM_orderStatus,\n/* harmony export */   \"default\": () => /* binding */ FirebaseMJS,\n/* harmony export */   \"getDate_From_Firestore_TimeStamp\": () => /* binding */ getDate_From_Firestore_TimeStamp,\n/* harmony export */   \"Email_ResendPassword\": () => /* binding */ Email_ResendPassword\n/* harmony export */ });\n/* harmony import */ var _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dataDefine/index.js */ \"./js/dataDefine/index.js\");\n/* harmony import */ var _lib_dataKits_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/dataKits.js */ \"./js/lib/dataKits.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n/**@enum {string} */\n\nvar MIME_TYPE = {\n  jpg: 'image/jpeg',\n  png: 'image/png'\n};\n/**@enum {string} */\n\nvar FIRESTORE_COLLECTION = {\n  //Products: \"Products\",\n  ProductInfo: \"ProductInfo\",\n  Users: \"Users\",\n  OrderInfo: \"OrderInfo\"\n};\n/**@enum {string} */\n\nvar FIRESTORAGE_FOLDERS = {\n  Products: \"Products\"\n};\n/**@enum {string} */\n\nvar ENUM_orderStatus = {\n  all: 'all',\n  completed: 'completed',\n  waitForPay: 'waitForPay',\n  waitForDelivery: 'waitForDelivery',\n  canceled: 'canceled'\n};\n/**\r\n * @module\r\n * @class \r\n * @description Firebase class\r\n */\n\nvar FirebaseMJS = /*#__PURE__*/function () {\n  /**\r\n   * @param {firebase} firebase - from firebase\r\n   * @param {import('../lib/dataKits.js')} dataKits\r\n   */\n  function FirebaseMJS(firebase, dataKits) {\n    var _this = this;\n\n    _classCallCheck(this, FirebaseMJS);\n\n    _defineProperty(this, \"initStorage\", function () {\n      if (_this._storageRef == null) // Create a root reference\n        _this._storageRef = _this._firebase.storage().ref();\n    });\n\n    _defineProperty(this, \"initDB\", function () {\n      if (_this._db == null) _this._db = _this._firebase.firestore();\n    });\n\n    _defineProperty(this, \"getOrderInfo\", function (userId, orderStatus) {\n      _this.initDB(); // if(userId)\n      //     fakeUid = userId\n      //let rtnOrderInfo_list=[]\n\n\n      var self = _this;\n      /**@param {ENUM_orderStatus} inOrderStatus */\n\n      function getQuery(inOrderStatus) {\n        switch (inOrderStatus) {\n          case ENUM_orderStatus.all:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId);\n\n          case ENUM_orderStatus.completed:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isCompleted', '==', true);\n\n          case ENUM_orderStatus.canceled:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isCanceled', '==', true);\n\n          case ENUM_orderStatus.waitForDelivery:\n            //待出貨\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isDelivery', '==', false).where('orderStatus.isPaid', '==', false).where('orderStatus.isCanceled', '==', false);\n\n          case ENUM_orderStatus.waitForPay:\n            //已出貨,尚未到貨收款項\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isDelivery', '==', true).where('orderStatus.isPaid', '==', false).where('orderStatus.isCanceled', '==', false);\n\n          default:\n            break;\n        } // switch (inOrderStatus) {\n        //     case ENUM_orderStatus.all:\n        //         return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId)\n        //     case ENUM_orderStatus.completed:\n        //         return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isCompleted', '==', true)\n        //     case ENUM_orderStatus.waitForPay:\n        //         return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', false).where('orderStatus.isCanceled', '==', false)\n        //     case ENUM_orderStatus.waitForDelivery:\n        //         return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', true).where('orderStatus.isDelivery', '==', false)\n        //     case ENUM_orderStatus.canceled:\n        //         return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isCanceled', '==', true)\n        //     default:\n        //         break;\n        // }\n\n      } //return this._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', true).get()\n\n\n      return getQuery(orderStatus).get() //.orderBy(\"fstsCreateDateTime_server\",\"desc\").get()\n      .then(function (snapshot) {\n        var rtnOrderInfo_list = snapshot.docs.map(function (item) {\n          var data = item.data();\n          return _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.OrderInfo.getOrderInfo_FromDbFormat(data);\n        }); // get all related product id\n\n        var list_productId = rtnOrderInfo_list.map(function (eachOrder) {\n          return eachOrder.getShopItems_ProdId();\n        });\n        list_productId = list_productId.flat(); //distinct list_productId\n\n        list_productId = _toConsumableArray(new Set(list_productId)); //sort\n\n        rtnOrderInfo_list.sort(function (a, b) {\n          return b.jsdtCreateDateTime_server - a.jsdtCreateDateTime_server;\n        });\n\n        var promiseAll_loadListProductInfo = _this.getArrayProductInfoFromDb_ByListProductId(list_productId);\n\n        return Promise.all([rtnOrderInfo_list, promiseAll_loadListProductInfo]);\n      }).then(function (array) {\n        var _array = _slicedToArray(array, 2),\n            orderInfo_list = _array[0],\n            list_products = _array[1];\n\n        list_products = list_products.flat();\n        var rtnOrderInfo_list = orderInfo_list.map(function (eachOrderInfo) {\n          //console.log('---------',eachOrderInfo[0])\n          eachOrderInfo.fillShopItems(list_products);\n          return eachOrderInfo; //console.log(element.orderId)\n        }); // rtnOrderInfo_list.forEach(eachOrderInfo => {\n        //     //console.log('---------',eachOrderInfo[0])\n        //     eachOrderInfo.fillShopItems(arrayDistinctProducts)\n        //     //console.log(element.orderId)\n        // });\n\n        /**@type {OrderInfo[]} */\n\n        console.log(\"LOG: ~ file: FirebaseMJS.js ~ line 371 ~ FirebaseMJS ~ .then ~ rtnOrderInfo_list\", rtnOrderInfo_list);\n        return rtnOrderInfo_list;\n      }); // .then((array) => {\n      //     let [orderInfo_list, list_productId] = array\n      //     /**@type {Array} - grouped array, ex:[ [1,3,5],[7,8,9],[13,23,54] ]*/\n      //     let listGroupProductId = FirebaseMJS.getGroupedArray_ByTimes(list_productId, 10)\n      //     // get firestore - Products in Id\n      //     let newPromise = (list_Limit_10_ProductIds) => {\n      //         return self._db.collection(FIRESTORE_COLLECTION.ProductInfo)\n      //             .where(self._firebase.firestore.FieldPath.documentId(), 'in', list_Limit_10_ProductIds) //['02d2bss3-0012','1c718och-0001'])\n      //             .get()\n      //     }\n      //     // console.log(newPromise)\n      //     let PromiseArray = []\n      //     //console.log(listGroupProductId[0])\n      //     PromiseArray.push(orderInfo_list)\n      //     //PromistArray.push(list_productId)\n      //     listGroupProductId.forEach((item) => {\n      //         PromiseArray.push(newPromise(item)) //listGroupProductId[0]))    \n      //     })\n      //     //PromistArray.push(newPromise(listGroupProductId[0]))\n      //     // PromistArray.push(newPromise(listGroupProductId[1]))\n      //     // for(let i=0;i<listGroupProductId.length;i++){\n      //     //     let list_Limit_10_ProductIds = listGroupProductId[i]\n      //     //     PromistArray.push(newPromise(list_Limit_10_ProductIds))\n      //     // }\n      //     return Promise.all(PromiseArray) //[orderInfo_list, list_productId, newPromise()])\n      // })\n      // .then((array) => {\n      //     let orderInfo_list = array.shift() // pop [0]\n      //     //let list_productId = array.splice(0, 1)\n      //     //let [orderInfo_list, list_productId, snapshot] = array\n      //     let arraySnapshot = array\n      //     let rtnOrderInfo_list = orderInfo_list\n      //     /**\n      //      * @type {ProductInfo[]} - distinct productInfo list\n      //      */\n      //     let arrayDistinctProducts = []\n      //     //collect distinct productInfo array\n      //     //arraySnapshot = arraySnapshot.flat(1)\n      //     let arrayDocs = []\n      //     arraySnapshot.forEach(snapshot => {\n      //         arrayDocs = arrayDocs.concat(snapshot.docs)\n      //     });\n      //     //arraySnapshot[0].docs, arraySnapshot[1].docs\n      //     //arrayDocs = arrayDocs.flat(1)\n      //     arrayDocs.forEach(element => {\n      //         /**@type {ProductInfo} */\n      //         let productInfo = element.data()\n      //         productInfo = Object.assign(new ProductInfo(), productInfo)\n      //         arrayDistinctProducts.push(productInfo)\n      //         //console.log(productInfo)\n      //     });\n      //     //fill ShopItems - _productInfo\n      //     //console.log('-----',rtnOrderInfo_list)\n      //     //rtnOrderInfo_list = rtnOrderInfo_list.flat(1)\n      //     rtnOrderInfo_list.forEach(eachOrderInfo => {\n      //         //console.log('---------',eachOrderInfo[0])\n      //         eachOrderInfo.fillShopItems(arrayDistinctProducts)\n      //         //console.log(element.orderId)\n      //     });\n      //     /**@type {OrderInfo[]} */\n      //     return rtnOrderInfo_list\n      // })\n    });\n\n    _defineProperty(this, \"getUser\", function () {\n      if (!_this._firebase.auth()) {\n        throw new Error('this._firebase.auth() is --->' + _this._firebase.auth());\n      }\n\n      if (_this._firebase.auth()) {\n        /**@ignore */\n        var pp = _this._firebase.auth();\n\n        if (pp) pp.currentUser.uid;\n      }\n\n      var uid = _this._firebase.auth().currentUser.uid;\n\n      _this.initDB();\n\n      return _this._db.collection(FIRESTORE_COLLECTION.Users).doc(uid).get().then(function (doc) {\n        return doc.data();\n      }); // .then((query) => {\n      //     console.log(query.docs)\n      // }\n      // )\n    });\n\n    this._firebase = firebase;\n    this._dataKits = dataKits;\n    /**\r\n     * initial-- use this.initStorageRef()\r\n     * @type {object} - this._firebase.storage().ref()\r\n     */\n\n    this._storageRef = null;\n    /**\r\n     * initial-- use this.initDb()\r\n     * @type {object} - this._firebase.firestore()\r\n     */\n\n    this._db = null;\n  }\n  /**@description initial this._firebase.storage().ref() */\n\n\n  _createClass(FirebaseMJS, [{\n    key: \"addProductInfo\",\n\n    /**\r\n     * @param {string} name \r\n     * @param {number} price\r\n     * @param {ENUM_ProductCategory} category - beef/chicken/soybean...etc\r\n     * @param {{beginEvent:function, endEvent:function}} [options] - callback functions\r\n     */\n    value: function addProductInfo(name, price, category, imgUrl, options) {\n      this.initDB();\n      var self = this;\n      var newAutoNum1 = {\n        docid: \"--AutoNum--\",\n        autoNum: 0,\n        updateDateTime: self._firebase.firestore.FieldValue.serverTimestamp()\n      };\n\n      var autoNum_DocRef = self._db.collection(FIRESTORE_COLLECTION.ProductInfo).doc(\"--AutoNum--\");\n\n      return self._db.runTransaction( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(transaction) {\n          var thisData, checkAutoNumExist, _checkAutoNumExist, nowNum, newNumber, newProdId, sNewNumber, newDocRef, prodInfo;\n\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _checkAutoNumExist = function _checkAutoNumExist3() {\n                    _checkAutoNumExist = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                      return regeneratorRuntime.wrap(function _callee$(_context) {\n                        while (1) {\n                          switch (_context.prev = _context.next) {\n                            case 0:\n                              if (!(thisData.autoNum_Doc.exists === false)) {\n                                _context.next = 3;\n                                break;\n                              }\n\n                              _context.next = 3;\n                              return autoNum_DocRef.set(newAutoNum1, {\n                                merge: true\n                              });\n\n                            case 3:\n                            case \"end\":\n                              return _context.stop();\n                          }\n                        }\n                      }, _callee);\n                    }));\n                    return _checkAutoNumExist.apply(this, arguments);\n                  };\n\n                  checkAutoNumExist = function _checkAutoNumExist2() {\n                    return _checkAutoNumExist.apply(this, arguments);\n                  };\n\n                  thisData = {\n                    autoNum_Doc: undefined\n                  }; // get autoNum_Doc\n\n                  _context2.next = 5;\n                  return transaction.get(autoNum_DocRef).then(function (autoNum_Doc) {\n                    thisData.autoNum_Doc = autoNum_Doc;\n                  });\n\n                case 5:\n                  _context2.next = 7;\n                  return checkAutoNumExist();\n\n                case 7:\n                  if (thisData.autoNum_Doc.exists === false) nowNum = newAutoNum1.autoNum;else {\n                    nowNum = thisData.autoNum_Doc.data().autoNum;\n                  }\n\n                  if (!(thisData.autoNum_Doc.exists === false)) {\n                    _context2.next = 11;\n                    break;\n                  }\n\n                  _context2.next = 11;\n                  return transaction.get(autoNum_DocRef);\n\n                case 11:\n                  // get new number and uuid\n                  newNumber = ++nowNum;\n                  transaction.update(autoNum_DocRef, {\n                    autoNum: newNumber,\n                    updateDateTime: self._firebase.firestore.FieldValue.serverTimestamp()\n                  }); // set new ProductInfo\n\n                  newProdId = Math.random().toString(36).substring(2, 5); // 36 carry bit, ignore '0.', get 8 char\n\n                  sNewNumber = newNumber.toString().padStart(4, \"0\");\n                  newProdId = \"\".concat(sNewNumber, \"-\").concat(newProdId); //let newProdId = `${sNowNum}-${getRandomId(3)}`\n                  //let newDoc = this._self._db.collection(FIRESTORE_COLLECTION.Products).doc(uuid)\n\n                  newDocRef = self._db.collection(FIRESTORE_COLLECTION.ProductInfo).doc(newProdId); // let prodInfo = {\n                  //     name: \"John\",\n                  //     autoNum: newNumber\n                  // }\n\n                  /**@type {import('../dataDefine/index.js').ProductInfo} */\n\n                  prodInfo = new _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.ProductInfo();\n                  prodInfo.productId = newProdId; // 0001-tds\n\n                  prodInfo.name = name; //\"白斬雞\"\n\n                  prodInfo.price = price; //140\n\n                  prodInfo.fstsAddDateTime_server = self._firebase.firestore.FieldValue.serverTimestamp();\n                  prodInfo.category = category;\n                  if (imgUrl) prodInfo.imgUrl = imgUrl; //prodInfo.tag = \"#\"\n                  //prodInfo.imgUrl = 'null'\n                  //prodInfo.imgFileName = 'null'\n\n                  prodInfo.autoNum = newNumber; // convert to plain object\n\n                  prodInfo = _lib_dataKits_js__WEBPACK_IMPORTED_MODULE_1__.getPlainObject(prodInfo); // prodInfo = Object.assign({}, prodInfo)\n                  // dataKits.recursiveToPlainObject(prodInfo)\n\n                  transaction.set(newDocRef, prodInfo);\n                  return _context2.abrupt(\"return\", newDocRef);\n\n                case 28:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n    /**@function - get doc.data() from FIRESTORE_COLLECTION.ProductInfo */\n\n  }, {\n    key: \"getProductInfo\",\n    value: function getProductInfo() {\n      this.initDB(); // if(userId)\n      //     fakeUid = userId\n\n      var rtnProductInfo_list = [];\n      var self = this;\n      return this._db.collection(FIRESTORE_COLLECTION.ProductInfo).get().then(function (snapshot) {\n        snapshot.forEach(function (element) {\n          var data = element.data();\n          if (data.hasOwnProperty('--AutoNum--')) return true;\n          var prodInfo = new _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.ProductInfo();\n          prodInfo = Object.assign(prodInfo, data); //prodInfo.fstsCreateDateTime_server = (prodInfo.fstsCreateDateTime_server == null) ? null : prodInfo.fstsCreateDateTime_server.toDate()\n\n          rtnProductInfo_list.push(prodInfo);\n        });\n        rtnProductInfo_list.sort(function (a, b) {\n          return b.autoNum - a.autoNum;\n        });\n        return rtnProductInfo_list;\n      });\n    } // getProducts = () => {\n    //     this.initDB();\n    //     let rtn_ProductInfo_List = []\n    //     return this._db.collection(FIRESTORE_COLLECTION.Products) //.where(\"autoNum\", \"==\", 7)\n    //         .get()\n    //         .then(function (querySnapshot) {\n    //             // let {docs} = querySnapshot\n    //             // console.log(docs[2].data())\n    //             //console.log(querySnapshot.docs[1].data())\n    //             querySnapshot.forEach(function (doc) {\n    //                 //console.log(doc.id)\n    //                 if (doc.id === '--AutoNum--')\n    //                     return true\n    //                 //console.log(111)\n    //                 // doc.data() is never undefined for query doc snapshots\n    //                 //console.log(doc.id)\n    //                 let data = doc.data()\n    //                 rtn_ProductInfo_List.push(data)\n    //                 // str += JSON.stringify(data)\n    //                 // console.log(doc.id, \" => \", doc.data());\n    //             });\n    //             //console.log(888)\n    //             return rtn_ProductInfo_List\n    //         })\n    //     // .catch(function (error) {\n    //     // });\n    // }\n\n    /**\r\n     * add OrderInfo to firestore.OrderInfo\r\n     * @param  {OrderInfo} orderInfo\r\n     */\n\n  }, {\n    key: \"addOrderInfo\",\n    value: function addOrderInfo(orderInfo, _) {\n      this.initDB();\n\n      var toDb_orderInfo = _.cloneDeep(orderInfo);\n\n      toDb_orderInfo = this._dataKits.getPlainObject(toDb_orderInfo); // if(this._dataKits.TypeOf(toDb_orderInfo) == this._dataKits.ENUM_TypeOf.objectClass)\n      //     this._dataKits.recursiveToPlainObject(toDb_orderInfo)\n\n      toDb_orderInfo.fstsCreateDateTime_server = this._firebase.firestore.FieldValue.serverTimestamp(); //clear function props\n      // let order = Object.assign({}, orderInfo);\n      // if (order.userData) {\n      //     order.userData = Object.assign({}, orderInfo.userData);\n      //     if (order.userData.userProfile)\n      //         order.userData.userProfile = Object.assign({}, orderInfo.userData.userProfile);\n      // }\n      //toDb_orderInfo.fstsCreateDateTime_server = this._firebase.firestore.FieldValue.serverTimestamp();\n      // removeFuncProp(order); //remove getShopItems_Id\n      // if (order.userData) {\n      //     removeFuncProp(order.userData);\n      //     if (order.userData.userProfile)\n      //         removeFuncProp(order.userData.userProfile);\n      // }\n\n      var autoNum_DocRef = this._db.collection(FIRESTORE_COLLECTION.OrderInfo).doc(\"--AutoNum--\");\n      /** identify the AutoNum is generated by self, not from other user.*/\n\n\n      var orderIdentityToken = Math.random().toString(36).substring(2, 7); // 36 carry bit, ignore '0.', get 8 char\n\n      var overrideAutoNum = {\n        docid: \"--AutoNum--\",\n        autoNum: this._firebase.firestore.FieldValue.increment(1),\n        updateDateTime: this._firebase.firestore.FieldValue.serverTimestamp(),\n        orderIdentityToken: orderIdentityToken // lastId:'',\n        // lastTime:firebase.firestore.FieldValue.serverTimestamp(),\n\n      }; // (node:15072) UnhandledPromiseRejectionWarning: FirebaseError: \n      // Firestore transactions require all reads to be executed before all writes.\n      //autoNumData.updateDateTime always exist in db, update first.\n\n      var self = this;\n      return autoNum_DocRef.set(overrideAutoNum, {\n        merge: true\n      }).then(function () {\n        return self._db.runTransaction( /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(transaction) {\n            var thisData, autoNumData, autoNewNumber, nowToday, preDayTime, newOrderId_obj, newDocRef;\n            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    thisData = {\n                      autoNum_Doc: undefined\n                    }; // get autoNum_Doc\n\n                    _context3.next = 3;\n                    return transaction.get(autoNum_DocRef).then(function (autoNum_Doc) {\n                      thisData.autoNum_Doc = autoNum_Doc; //return autoNum_DocRef\n                    });\n\n                  case 3:\n                    autoNumData = thisData.autoNum_Doc.data();\n\n                    if (!(autoNumData.orderIdentityToken !== orderIdentityToken)) {\n                      _context3.next = 6;\n                      break;\n                    }\n\n                    throw new Error('addOrderInfo collision occurs with other user (different orderIdentityToken).');\n\n                  case 6:\n                    autoNewNumber = autoNumData.autoNum; //updated from beginning.\n\n                    nowToday = autoNumData.updateDateTime; //updated from beginning                \n\n                    nowToday = getDate_From_Firestore_TimeStamp(nowToday); //convert format to js Date\n\n                    if (autoNumData.lastTime) preDayTime = autoNumData.lastTime;else preDayTime = autoNumData.updateDateTime; //updated from beginning\n\n                    preDayTime = getDate_From_Firestore_TimeStamp(preDayTime); //convert format to js Date\n\n                    newOrderId_obj = FirebaseMJS.getNewOrderInfoId(preDayTime, nowToday, autoNewNumber); //update lastId + lastTime\n\n                    transaction.update(autoNum_DocRef, {\n                      autoNum: newOrderId_obj.autoNum,\n                      lastId: newOrderId_obj.lastId,\n                      lastTime: nowToday //newOrderId_obj.lastTime\n\n                    });\n                    newDocRef = self._db.collection(FIRESTORE_COLLECTION.OrderInfo).doc(newOrderId_obj.lastId);\n                    toDb_orderInfo.orderId = newOrderId_obj.lastId; // let sss = this._firebase.firestore.FieldValue.serverTimestamp()\n                    // console.log('sss-->',sss)\n                    // toDb_orderInfo.fstsCreateDateTime_server = sss;\n\n                    transaction.set(newDocRef, toDb_orderInfo);\n                    return _context3.abrupt(\"return\", {\n                      newDocRef: newDocRef,\n                      newOrderId_obj: newOrderId_obj\n                    });\n\n                  case 17:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3);\n          }));\n\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }());\n      });\n    }\n    /**\r\n     * \r\n     * @param {string} orderId \r\n     * @param {ENUM_orderStatus} status  \r\n     * @param {Boolean} value \r\n     */\n\n  }, {\n    key: \"modifyOrderStatus\",\n    value: function modifyOrderStatus(orderId, status, value) {\n      this.initDB();\n      var data = {\n        orderStatus: {}\n      };\n\n      switch (status) {\n        case ENUM_orderStatus.canceled:\n          data = {\n            orderStatus: {\n              isCanceled: value\n            }\n          };\n          break;\n\n        default:\n          throw new Error('only support isCancel status currently!');\n      } //let data = {orderStatus:{isCanceled:true}}\n      //data[status] = value\n\n\n      var docRef = this._db.collection(FIRESTORE_COLLECTION.OrderInfo).doc(orderId);\n\n      return docRef.set(data, {\n        merge: true\n      }).then(function () {\n        //let msg = `modify order status [${orderId}] --> ok`\n        //console.log()\n        var isSuccess = true;\n        return isSuccess;\n      })[\"catch\"](function (err) {\n        throw err;\n      });\n    }\n    /**\r\n     * \r\n     * @param {string} userId \r\n     * @param {ENUM_orderStatus} orderStatus \r\n     * @returns {Promise<OrderInfo[]>}\r\n     */\n\n  }, {\n    key: \"getArrayProductInfoFromDb_ByListProductId\",\n    //------- group list_productId limit -- 10\n    value: function getArrayProductInfoFromDb_ByListProductId(list_productId) {\n      /**@type {Array} - grouped array, ex:[ [1,3,5],[7,8,9],[13,23,54] ]*/\n      var listGroupProductId = FirebaseMJS.getGroupedArray_ByTimes(list_productId, 10); // get firestore - Products in Id\n\n      var self = this;\n\n      var newPromise = function newPromise(list_Limit_10_ProductIds) {\n        return self._db.collection(FIRESTORE_COLLECTION.ProductInfo).where(self._firebase.firestore.FieldPath.documentId(), 'in', list_Limit_10_ProductIds) //['02d2bss3-0012','1c718och-0001'])\n        .get().then(function (snapshot) {\n          var arrayProductInfo = snapshot.docs.map(function (item) {\n            return item.data();\n          });\n          return arrayProductInfo;\n        });\n      }; // console.log(newPromise)\n\n\n      var PromiseArray = []; //console.log(listGroupProductId[0])\n      //PromiseArray.push(orderInfo_list)\n      //PromistArray.push(list_productId)\n\n      listGroupProductId.forEach(function (item) {\n        PromiseArray.push(newPromise(item)); //listGroupProductId[0]))    \n      }); //PromistArray.push(newPromise(listGroupProductId[0]))\n      // PromistArray.push(newPromise(listGroupProductId[1]))\n      // for(let i=0;i<listGroupProductId.length;i++){\n      //     let list_Limit_10_ProductIds = listGroupProductId[i]\n      //     PromistArray.push(newPromise(list_Limit_10_ProductIds))\n      // }\n\n      return Promise.all(PromiseArray);\n    } // static getArrayProducts_ByListProductId(arrayProductId){\n    //     //distinct list_productId\n    //     let arrayDistinctProductId = [...new Set(arrayProductId)]\n    //     /**@type {Array} */\n    //     let listGroupProductId = FirebaseMJS.getGroupedArray_ByTimes(list_productId, 10)\n    //     // get firestore - Products in Id\n    //     let newPromise = (list_Limit_10_ProductIds) => {\n    //         return self._db.collection(FIRESTORE_COLLECTION.ProductInfo)\n    //             .where(self._firebase.firestore.FieldPath.documentId(), 'in', list_Limit_10_ProductIds) //['02d2bss3-0012','1c718och-0001'])\n    //             .get()\n    //     }\n    //     // console.log(newPromise)\n    //     let PromistArray = []\n    //     //console.log(listGroupProductId[0])\n    //     PromistArray.push(orderInfo_list)\n    //     //PromistArray.push(list_productId)\n    //     listGroupProductId.forEach((item) => {\n    //         PromistArray.push(newPromise(item)) //listGroupProductId[0]))    \n    //     })\n    //     //PromistArray.push(newPromise(listGroupProductId[0]))\n    //     // PromistArray.push(newPromise(listGroupProductId[1]))\n    //     // for(let i=0;i<listGroupProductId.length;i++){\n    //     //     let list_Limit_10_ProductIds = listGroupProductId[i]\n    //     //     PromistArray.push(newPromise(list_Limit_10_ProductIds))\n    //     // }\n    //     return Promise.all(PromistArray)\n    // }\n    //------- group list_productId limit -- 10\n\n  }], [{\n    key: \"getGroupedArray_ByTimes\",\n    value: function getGroupedArray_ByTimes(TargetArray, eachGroupCount) {\n      var rtnGroupedArray = []; // loop times\n\n      var doTimes = Math.ceil(TargetArray.length / eachGroupCount); //4\n\n      for (var i = 0; i < doTimes; i++) {\n        var newGroup = TargetArray.splice(0, eachGroupCount);\n        rtnGroupedArray.push(newGroup);\n      }\n\n      return rtnGroupedArray;\n    }\n    /**\r\n     * @function\r\n     * @return {Promise<object>} - firestore.Users.data()\r\n     */\n\n  }, {\n    key: \"getProductInfo_GroupedItems_ByCategory\",\n\n    /**\r\n     * @param {import('lodash')} _ \r\n     * @param {ProductInfo[]} listProductInfo \r\n     * @returns {import(\"./FirebaseMJS.js\").groupedCategory[]}\r\n     */\n    value: function getProductInfo_GroupedItems_ByCategory(_, listProductInfo) {\n      var groupedData = _(listProductInfo).groupBy('category').map(function (arrayGroupedItems, category) {\n        // return ''\n        // Object.\n        var categories = {\n          category: category,\n          categoryZhTW: _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.Map_ProductCategory[category],\n          arrayGroupedItems: arrayGroupedItems,\n          ref: null\n        };\n        return categories; // return {\n        //     category,\n        //     name: _.map(arrayGroupedItems, 'name')\n        // }\n      }).value();\n\n      console.log(\"LOG: ~ file: FirebaseMJS.js ~ line 507 ~ FirebaseMJS ~ groupedData ~ groupedData\", groupedData); //console.log(d2)\n\n      return groupedData;\n    }\n    /**\r\n     * get new OrderInfo ID , check whether cross date or not.\r\n     * @param {Date} preDayTime \r\n     * @param {Date} nowTime \r\n     * @param {number} autoNewNumber \r\n     */\n\n  }, {\n    key: \"getNewOrderInfoId\",\n    value: function getNewOrderInfoId(preDayTime, nowTime, autoNewNumber) {\n      var sPreDayTime_8 = getDateString_correctTimeZone(preDayTime, 1);\n      var sNowToday_8 = getDateString_correctTimeZone(nowTime, 1);\n      var orderNumber;\n      var isCrossDate; //today is the same date with preDayTime\n\n      var newResult = {\n        lastId: '',\n        lastTime: new Date(),\n        isCrossDate: false //today is the same date with preDayTime\n\n      };\n\n      if (sPreDayTime_8 === sNowToday_8) {\n        //today is the same date with preDayTime\n        isCrossDate = false;\n        orderNumber = autoNewNumber;\n      } else {\n        //today is different date with preDayTime\n        isCrossDate = true;\n        orderNumber = 1;\n      }\n      /**\r\n       * @param {string} sDate \r\n       * @param {number} newAutoNum \r\n       */\n\n\n      var getNewID = function getNewID(sDate, newAutoNum) {\n        return \"\".concat(sDate).concat(String(newAutoNum).padStart(4, '0'));\n      }; //sNowToday_8 == correct locale timezone time\n\n\n      var lastId = getNewID(sNowToday_8, orderNumber);\n      newResult = {\n        autoNum: orderNumber,\n        lastId: lastId,\n        lastTime: nowTime,\n        isCrossDate: isCrossDate //today is the same date with preDayTime\n\n      };\n      return newResult;\n    }\n  }]);\n\n  return FirebaseMJS;\n}();\n/**\r\n * get 8 char string from date\r\n * @param {Date} inDate\r\n * @param {(1|2)} formatNo\r\n */\n\n\n\n\nfunction getDateString_correctTimeZone(inDate, formatNo) {\n  // correct timezone time -> inDate.getXXXX()\n  var yy = inDate.getFullYear();\n  var mm = inDate.getMonth() + 1;\n  var dd = inDate.getDate();\n  var MM = String(mm).padStart(2, '0');\n  var DD = String(dd).padStart(2, '0');\n\n  switch (formatNo) {\n    case 1:\n      return \"\".concat(yy).concat(MM).concat(DD);\n\n    default:\n      return '';\n  }\n}\n\nfunction getDate_From_Firestore_TimeStamp(fsTimestamp) {\n  var seconds = null;\n  if (fsTimestamp.seconds) seconds = fsTimestamp.seconds;else if (fsTimestamp._seconds) {\n    seconds = fsTimestamp._seconds;\n  }\n  if (seconds === null) return null;else return new Date(seconds * 1000);\n} // function removeFuncProp(obj) {\n//     for (let propName in obj) {\n//         if (typeof obj[propName] === 'function')\n//             delete obj[propName]\n//         //if(${typeof arry1[0][keyName]} == )\n//     }\n// }\n\nfunction Email_ResendPassword(emailAddress, inFirebase, swal, funcCloseModal) {\n  var auth = inFirebase.auth(); //var emailAddress = this.proxyUI.bindIptResentPwdEmail;\n\n  return auth.sendPasswordResetEmail(emailAddress).then(function () {\n    // Email sent.\n    swal.fire({\n      title: '提醒',\n      text: '密碼已寄出，請至信箱收信',\n      icon: 'success',\n      didOpen: function didOpen(htmlElement) {\n        $('.swal2-confirm').attr('data-testid', 'btnSwalConfirm'); //console.log(assertLog.registerSuccess(true))\n        //console.log(\"LOG: ~ file: cusModalLogin.js ~ line 311 ~ .then ~ htmlElement\", htmlElement)\n      }\n    }).then(function () {\n      //self.showModal(false)\n      if (funcCloseModal) funcCloseModal();\n    });\n  })[\"catch\"](function (error) {\n    // An error happened.\n    var errCode_ZhTW;\n    console.log(error.code);\n\n    switch (error.code) {\n      case 'auth/invalid-email':\n        errCode_ZhTW = '輸入錯誤';\n        break;\n\n      case 'auth/user-not-found':\n        errCode_ZhTW = '此Email帳號不存在';\n        break;\n\n      default:\n        errCode_ZhTW = error.code;\n        break;\n    }\n\n    swal.fire({\n      title: 'Error',\n      text: \"\".concat(errCode_ZhTW, \",\").concat(error.message),\n      icon: 'error' //confirmButtonText: 'Cool'\n\n    });\n  }); //this.showModal(false)\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9maXJlYmFzZS9GaXJlYmFzZU1KUy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2ZpcmViYXNlL0ZpcmViYXNlTUpTLmpzPzI0ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIFByb2R1Y3RJbmZvLFxyXG4gICAgT3JkZXJJbmZvLFxyXG4gICAgRU5VTV9Qcm9kdWN0Q2F0ZWdvcnksXHJcbiAgICBNYXBfUHJvZHVjdENhdGVnb3J5LFxyXG59IGZyb20gXCIuLi9kYXRhRGVmaW5lL2luZGV4LmpzXCI7XHJcbmltcG9ydCAqIGFzIGRhdGFLaXRzIGZyb20gJy4uL2xpYi9kYXRhS2l0cy5qcydcclxuLyoqQGVudW0ge3N0cmluZ30gKi9cclxuZXhwb3J0IGNvbnN0IE1JTUVfVFlQRSA9IHtcclxuICAgIGpwZzogJ2ltYWdlL2pwZWcnLFxyXG4gICAgcG5nOiAnaW1hZ2UvcG5nJyxcclxufVxyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5leHBvcnQgY29uc3QgRklSRVNUT1JFX0NPTExFQ1RJT04gPSB7XHJcbiAgICAvL1Byb2R1Y3RzOiBcIlByb2R1Y3RzXCIsXHJcbiAgICBQcm9kdWN0SW5mbzogXCJQcm9kdWN0SW5mb1wiLFxyXG4gICAgVXNlcnM6IFwiVXNlcnNcIixcclxuICAgIE9yZGVySW5mbzogXCJPcmRlckluZm9cIlxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmV4cG9ydCBjb25zdCBGSVJFU1RPUkFHRV9GT0xERVJTID0ge1xyXG4gICAgUHJvZHVjdHM6IFwiUHJvZHVjdHNcIlxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmV4cG9ydCBjb25zdCBFTlVNX29yZGVyU3RhdHVzID0ge1xyXG4gICAgYWxsOiAnYWxsJyxcclxuICAgIGNvbXBsZXRlZDogJ2NvbXBsZXRlZCcsXHJcbiAgICB3YWl0Rm9yUGF5OiAnd2FpdEZvclBheScsXHJcbiAgICB3YWl0Rm9yRGVsaXZlcnk6ICd3YWl0Rm9yRGVsaXZlcnknLFxyXG4gICAgY2FuY2VsZWQ6ICdjYW5jZWxlZCcsXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG1vZHVsZVxyXG4gKiBAY2xhc3MgXHJcbiAqIEBkZXNjcmlwdGlvbiBGaXJlYmFzZSBjbGFzc1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlyZWJhc2VNSlMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2ZpcmViYXNlfSBmaXJlYmFzZSAtIGZyb20gZmlyZWJhc2VcclxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9saWIvZGF0YUtpdHMuanMnKX0gZGF0YUtpdHNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZmlyZWJhc2UsIGRhdGFLaXRzKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZWJhc2UgPSBmaXJlYmFzZTtcclxuICAgICAgICB0aGlzLl9kYXRhS2l0cyA9IGRhdGFLaXRzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGluaXRpYWwtLSB1c2UgdGhpcy5pbml0U3RvcmFnZVJlZigpXHJcbiAgICAgICAgICogQHR5cGUge29iamVjdH0gLSB0aGlzLl9maXJlYmFzZS5zdG9yYWdlKCkucmVmKClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9zdG9yYWdlUmVmID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBpbml0aWFsLS0gdXNlIHRoaXMuaW5pdERiKClcclxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fSAtIHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZSgpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZGIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqQGRlc2NyaXB0aW9uIGluaXRpYWwgdGhpcy5fZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpICovXHJcbiAgICBpbml0U3RvcmFnZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5fc3RvcmFnZVJlZiA9PSBudWxsKVxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSByb290IHJlZmVyZW5jZVxyXG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlUmVmID0gdGhpcy5fZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpO1xyXG4gICAgfVxyXG4gICAgLyoqQGRlc2NyaXB0aW9uIGluaXRpYWwgdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlKCkqL1xyXG4gICAgaW5pdERCID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9kYiA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLl9kYiA9IHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmljZVxyXG4gICAgICogQHBhcmFtIHtFTlVNX1Byb2R1Y3RDYXRlZ29yeX0gY2F0ZWdvcnkgLSBiZWVmL2NoaWNrZW4vc295YmVhbi4uLmV0Y1xyXG4gICAgICogQHBhcmFtIHt7YmVnaW5FdmVudDpmdW5jdGlvbiwgZW5kRXZlbnQ6ZnVuY3Rpb259fSBbb3B0aW9uc10gLSBjYWxsYmFjayBmdW5jdGlvbnNcclxuICAgICAqL1xyXG4gICAgYWRkUHJvZHVjdEluZm8obmFtZSwgcHJpY2UsIGNhdGVnb3J5LCBpbWdVcmwsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIGxldCBuZXdBdXRvTnVtMSA9IHtcclxuICAgICAgICAgICAgZG9jaWQ6IFwiLS1BdXRvTnVtLS1cIixcclxuICAgICAgICAgICAgYXV0b051bTogMCxcclxuICAgICAgICAgICAgdXBkYXRlRGF0ZVRpbWU6IHNlbGYuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhdXRvTnVtX0RvY1JlZiA9IHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uUHJvZHVjdEluZm8pLmRvYyhcIi0tQXV0b051bS0tXCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fZGIucnVuVHJhbnNhY3Rpb24oYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0aGlzRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGF1dG9OdW1fRG9jOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBnZXQgYXV0b051bV9Eb2NcclxuICAgICAgICAgICAgYXdhaXQgdHJhbnNhY3Rpb24uZ2V0KGF1dG9OdW1fRG9jUmVmKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGF1dG9OdW1fRG9jKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0RhdGEuYXV0b051bV9Eb2MgPSBhdXRvTnVtX0RvY1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8tLS0tLS0gaWYgLS1BdXRvTnVtLS0gbm90IGV4aXN0LCBjcmVhdGUgbmV3IG9uZVxyXG4gICAgICAgICAgICAvLyBtdXN0IGJlIGEgZnVuY3Rpb24sIG9yIGNoZWNrQXV0b051bUV4aXN0KCkgd2lsbCBiZSBleGVjdXRlZCB0d2ljZVxyXG4gICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBjaGVja0F1dG9OdW1FeGlzdCgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzRGF0YS5hdXRvTnVtX0RvYy5leGlzdHMgPT09IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF1dG9OdW1fRG9jUmVmLnNldChuZXdBdXRvTnVtMSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgY2hlY2tBdXRvTnVtRXhpc3QoKTtcclxuICAgICAgICAgICAgLy8tLS0tLS1cclxuICAgICAgICAgICAgbGV0IG5vd051bVxyXG4gICAgICAgICAgICBpZiAodGhpc0RhdGEuYXV0b051bV9Eb2MuZXhpc3RzID09PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIG5vd051bSA9IG5ld0F1dG9OdW0xLmF1dG9OdW1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3dOdW0gPSB0aGlzRGF0YS5hdXRvTnVtX0RvYy5kYXRhKCkuYXV0b051bVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpc0RhdGEuYXV0b051bV9Eb2MuZXhpc3RzID09PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRyYW5zYWN0aW9uLmdldChhdXRvTnVtX0RvY1JlZilcclxuXHJcbiAgICAgICAgICAgIC8vIGdldCBuZXcgbnVtYmVyIGFuZCB1dWlkXHJcbiAgICAgICAgICAgIGxldCBuZXdOdW1iZXIgPSArK25vd051bVxyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi51cGRhdGUoYXV0b051bV9Eb2NSZWYsIHtcclxuICAgICAgICAgICAgICAgIGF1dG9OdW06IG5ld051bWJlcixcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGVUaW1lOiBzZWxmLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gc2V0IG5ldyBQcm9kdWN0SW5mb1xyXG4gICAgICAgICAgICBsZXQgbmV3UHJvZElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDUpIC8vIDM2IGNhcnJ5IGJpdCwgaWdub3JlICcwLicsIGdldCA4IGNoYXJcclxuICAgICAgICAgICAgbGV0IHNOZXdOdW1iZXIgPSBuZXdOdW1iZXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCBcIjBcIilcclxuICAgICAgICAgICAgbmV3UHJvZElkID0gYCR7c05ld051bWJlcn0tJHtuZXdQcm9kSWR9YFxyXG4gICAgICAgICAgICAvL2xldCBuZXdQcm9kSWQgPSBgJHtzTm93TnVtfS0ke2dldFJhbmRvbUlkKDMpfWBcclxuICAgICAgICAgICAgLy9sZXQgbmV3RG9jID0gdGhpcy5fc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0cykuZG9jKHV1aWQpXHJcbiAgICAgICAgICAgIGxldCBuZXdEb2NSZWYgPSBzZWxmLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RJbmZvKS5kb2MobmV3UHJvZElkKVxyXG4gICAgICAgICAgICAvLyBsZXQgcHJvZEluZm8gPSB7XHJcbiAgICAgICAgICAgIC8vICAgICBuYW1lOiBcIkpvaG5cIixcclxuICAgICAgICAgICAgLy8gICAgIGF1dG9OdW06IG5ld051bWJlclxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8qKkB0eXBlIHtpbXBvcnQoJy4uL2RhdGFEZWZpbmUvaW5kZXguanMnKS5Qcm9kdWN0SW5mb30gKi9cclxuICAgICAgICAgICAgbGV0IHByb2RJbmZvID0gbmV3IFByb2R1Y3RJbmZvKCk7XHJcbiAgICAgICAgICAgIHByb2RJbmZvLnByb2R1Y3RJZCA9IG5ld1Byb2RJZCAvLyAwMDAxLXRkc1xyXG4gICAgICAgICAgICBwcm9kSW5mby5uYW1lID0gbmFtZSAvL1wi55m95pas6ZueXCJcclxuICAgICAgICAgICAgcHJvZEluZm8ucHJpY2UgPSBwcmljZSAvLzE0MFxyXG4gICAgICAgICAgICBwcm9kSW5mby5mc3RzQWRkRGF0ZVRpbWVfc2VydmVyID0gc2VsZi5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClcclxuICAgICAgICAgICAgcHJvZEluZm8uY2F0ZWdvcnkgPSBjYXRlZ29yeVxyXG4gICAgICAgICAgICBpZiAoaW1nVXJsKVxyXG4gICAgICAgICAgICAgICAgcHJvZEluZm8uaW1nVXJsID0gaW1nVXJsXHJcbiAgICAgICAgICAgIC8vcHJvZEluZm8udGFnID0gXCIjXCJcclxuICAgICAgICAgICAgLy9wcm9kSW5mby5pbWdVcmwgPSAnbnVsbCdcclxuICAgICAgICAgICAgLy9wcm9kSW5mby5pbWdGaWxlTmFtZSA9ICdudWxsJ1xyXG4gICAgICAgICAgICBwcm9kSW5mby5hdXRvTnVtID0gbmV3TnVtYmVyXHJcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdG8gcGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgIHByb2RJbmZvID0gZGF0YUtpdHMuZ2V0UGxhaW5PYmplY3QocHJvZEluZm8pXHJcbiAgICAgICAgICAgIC8vIHByb2RJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvZEluZm8pXHJcbiAgICAgICAgICAgIC8vIGRhdGFLaXRzLnJlY3Vyc2l2ZVRvUGxhaW5PYmplY3QocHJvZEluZm8pXHJcblxyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5zZXQobmV3RG9jUmVmLCBwcm9kSW5mbylcclxuICAgICAgICAgICAgcmV0dXJuIG5ld0RvY1JlZlxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG4gICAgLyoqQGZ1bmN0aW9uIC0gZ2V0IGRvYy5kYXRhKCkgZnJvbSBGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0SW5mbyAqL1xyXG4gICAgZ2V0UHJvZHVjdEluZm8oKSB7XHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuXHJcbiAgICAgICAgLy8gaWYodXNlcklkKVxyXG4gICAgICAgIC8vICAgICBmYWtlVWlkID0gdXNlcklkXHJcbiAgICAgICAgbGV0IHJ0blByb2R1Y3RJbmZvX2xpc3QgPSBbXVxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RJbmZvKS5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHtcclxuICAgICAgICAgICAgICAgIHNuYXBzaG90LmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBlbGVtZW50LmRhdGEoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KCctLUF1dG9OdW0tLScpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvZEluZm8gPSBuZXcgUHJvZHVjdEluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kSW5mbyA9IE9iamVjdC5hc3NpZ24ocHJvZEluZm8sIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcHJvZEluZm8uZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlciA9IChwcm9kSW5mby5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyID09IG51bGwpID8gbnVsbCA6IHByb2RJbmZvLmZzdHNDcmVhdGVEYXRlVGltZV9zZXJ2ZXIudG9EYXRlKClcclxuICAgICAgICAgICAgICAgICAgICBydG5Qcm9kdWN0SW5mb19saXN0LnB1c2gocHJvZEluZm8pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBydG5Qcm9kdWN0SW5mb19saXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5hdXRvTnVtIC0gYS5hdXRvTnVtXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ0blByb2R1Y3RJbmZvX2xpc3Q7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvLyBnZXRQcm9kdWN0cyA9ICgpID0+IHtcclxuICAgIC8vICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgLy8gICAgIGxldCBydG5fUHJvZHVjdEluZm9fTGlzdCA9IFtdXHJcblxyXG4gICAgLy8gICAgIHJldHVybiB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RzKSAvLy53aGVyZShcImF1dG9OdW1cIiwgXCI9PVwiLCA3KVxyXG4gICAgLy8gICAgICAgICAuZ2V0KClcclxuICAgIC8vICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHtcclxuICAgIC8vICAgICAgICAgICAgIC8vIGxldCB7ZG9jc30gPSBxdWVyeVNuYXBzaG90XHJcbiAgICAvLyAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2NzWzJdLmRhdGEoKSlcclxuICAgIC8vICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocXVlcnlTbmFwc2hvdC5kb2NzWzFdLmRhdGEoKSlcclxuICAgIC8vICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkb2MuaWQpXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGRvYy5pZCA9PT0gJy0tQXV0b051bS0tJylcclxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIC8vICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKDExMSlcclxuICAgIC8vICAgICAgICAgICAgICAgICAvLyBkb2MuZGF0YSgpIGlzIG5ldmVyIHVuZGVmaW5lZCBmb3IgcXVlcnkgZG9jIHNuYXBzaG90c1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZG9jLmlkKVxyXG4gICAgLy8gICAgICAgICAgICAgICAgIGxldCBkYXRhID0gZG9jLmRhdGEoKVxyXG4gICAgLy8gICAgICAgICAgICAgICAgIHJ0bl9Qcm9kdWN0SW5mb19MaXN0LnB1c2goZGF0YSlcclxuICAgIC8vICAgICAgICAgICAgICAgICAvLyBzdHIgKz0gSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgIC8vICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2MuaWQsIFwiID0+IFwiLCBkb2MuZGF0YSgpKTtcclxuXHJcbiAgICAvLyAgICAgICAgICAgICB9KTtcclxuICAgIC8vICAgICAgICAgICAgIC8vY29uc29sZS5sb2coODg4KVxyXG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIHJ0bl9Qcm9kdWN0SW5mb19MaXN0XHJcbiAgICAvLyAgICAgICAgIH0pXHJcbiAgICAvLyAgICAgLy8gLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgLy8gICAgIC8vIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgLyoqXHJcbiAgICAgKiBhZGQgT3JkZXJJbmZvIHRvIGZpcmVzdG9yZS5PcmRlckluZm9cclxuICAgICAqIEBwYXJhbSAge09yZGVySW5mb30gb3JkZXJJbmZvXHJcbiAgICAgKi9cclxuICAgIGFkZE9yZGVySW5mbyhvcmRlckluZm8sIF8pIHtcclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgICAgIGxldCB0b0RiX29yZGVySW5mbyA9IF8uY2xvbmVEZWVwKG9yZGVySW5mbylcclxuICAgICAgICB0b0RiX29yZGVySW5mbyA9IHRoaXMuX2RhdGFLaXRzLmdldFBsYWluT2JqZWN0KHRvRGJfb3JkZXJJbmZvKVxyXG4gICAgICAgIC8vIGlmKHRoaXMuX2RhdGFLaXRzLlR5cGVPZih0b0RiX29yZGVySW5mbykgPT0gdGhpcy5fZGF0YUtpdHMuRU5VTV9UeXBlT2Yub2JqZWN0Q2xhc3MpXHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2RhdGFLaXRzLnJlY3Vyc2l2ZVRvUGxhaW5PYmplY3QodG9EYl9vcmRlckluZm8pXHJcbiAgICAgICAgdG9EYl9vcmRlckluZm8uZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlciA9IHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpO1xyXG5cclxuICAgICAgICAvL2NsZWFyIGZ1bmN0aW9uIHByb3BzXHJcbiAgICAgICAgLy8gbGV0IG9yZGVyID0gT2JqZWN0LmFzc2lnbih7fSwgb3JkZXJJbmZvKTtcclxuICAgICAgICAvLyBpZiAob3JkZXIudXNlckRhdGEpIHtcclxuXHJcbiAgICAgICAgLy8gICAgIG9yZGVyLnVzZXJEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgb3JkZXJJbmZvLnVzZXJEYXRhKTtcclxuICAgICAgICAvLyAgICAgaWYgKG9yZGVyLnVzZXJEYXRhLnVzZXJQcm9maWxlKVxyXG4gICAgICAgIC8vICAgICAgICAgb3JkZXIudXNlckRhdGEudXNlclByb2ZpbGUgPSBPYmplY3QuYXNzaWduKHt9LCBvcmRlckluZm8udXNlckRhdGEudXNlclByb2ZpbGUpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy90b0RiX29yZGVySW5mby5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyID0gdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKCk7XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZUZ1bmNQcm9wKG9yZGVyKTsgLy9yZW1vdmUgZ2V0U2hvcEl0ZW1zX0lkXHJcbiAgICAgICAgLy8gaWYgKG9yZGVyLnVzZXJEYXRhKSB7XHJcbiAgICAgICAgLy8gICAgIHJlbW92ZUZ1bmNQcm9wKG9yZGVyLnVzZXJEYXRhKTtcclxuICAgICAgICAvLyAgICAgaWYgKG9yZGVyLnVzZXJEYXRhLnVzZXJQcm9maWxlKVxyXG4gICAgICAgIC8vICAgICAgICAgcmVtb3ZlRnVuY1Byb3Aob3JkZXIudXNlckRhdGEudXNlclByb2ZpbGUpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgbGV0IGF1dG9OdW1fRG9jUmVmID0gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLmRvYyhcIi0tQXV0b051bS0tXCIpO1xyXG5cclxuICAgICAgICAvKiogaWRlbnRpZnkgdGhlIEF1dG9OdW0gaXMgZ2VuZXJhdGVkIGJ5IHNlbGYsIG5vdCBmcm9tIG90aGVyIHVzZXIuKi9cclxuICAgICAgICBsZXQgb3JkZXJJZGVudGl0eVRva2VuID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDcpIC8vIDM2IGNhcnJ5IGJpdCwgaWdub3JlICcwLicsIGdldCA4IGNoYXJcclxuICAgICAgICBsZXQgb3ZlcnJpZGVBdXRvTnVtID0ge1xyXG4gICAgICAgICAgICBkb2NpZDogXCItLUF1dG9OdW0tLVwiLFxyXG4gICAgICAgICAgICBhdXRvTnVtOiB0aGlzLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5pbmNyZW1lbnQoMSksXHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGVUaW1lOiB0aGlzLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAgICAgICAgICAgb3JkZXJJZGVudGl0eVRva2VuOiBvcmRlcklkZW50aXR5VG9rZW4sXHJcbiAgICAgICAgICAgIC8vIGxhc3RJZDonJyxcclxuICAgICAgICAgICAgLy8gbGFzdFRpbWU6ZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gKG5vZGU6MTUwNzIpIFVuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nOiBGaXJlYmFzZUVycm9yOiBcclxuICAgICAgICAvLyBGaXJlc3RvcmUgdHJhbnNhY3Rpb25zIHJlcXVpcmUgYWxsIHJlYWRzIHRvIGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgd3JpdGVzLlxyXG4gICAgICAgIC8vYXV0b051bURhdGEudXBkYXRlRGF0ZVRpbWUgYWx3YXlzIGV4aXN0IGluIGRiLCB1cGRhdGUgZmlyc3QuXHJcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzXHJcbiAgICAgICAgcmV0dXJuIGF1dG9OdW1fRG9jUmVmLnNldChvdmVycmlkZUF1dG9OdW0sIHtcclxuICAgICAgICAgICAgICAgIG1lcmdlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIucnVuVHJhbnNhY3Rpb24oYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRoaXNEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvTnVtX0RvYzogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCBhdXRvTnVtX0RvY1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYW5zYWN0aW9uLmdldChhdXRvTnVtX0RvY1JlZilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGF1dG9OdW1fRG9jKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzRGF0YS5hdXRvTnVtX0RvYyA9IGF1dG9OdW1fRG9jXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBhdXRvTnVtX0RvY1JlZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXV0b051bURhdGEgPSB0aGlzRGF0YS5hdXRvTnVtX0RvYy5kYXRhKClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXV0b051bURhdGEub3JkZXJJZGVudGl0eVRva2VuICE9PSBvcmRlcklkZW50aXR5VG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYWRkT3JkZXJJbmZvIGNvbGxpc2lvbiBvY2N1cnMgd2l0aCBvdGhlciB1c2VyIChkaWZmZXJlbnQgb3JkZXJJZGVudGl0eVRva2VuKS4nKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXV0b05ld051bWJlciA9IGF1dG9OdW1EYXRhLmF1dG9OdW0gLy91cGRhdGVkIGZyb20gYmVnaW5uaW5nLlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbm93VG9kYXkgPSBhdXRvTnVtRGF0YS51cGRhdGVEYXRlVGltZTsgLy91cGRhdGVkIGZyb20gYmVnaW5uaW5nICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG5vd1RvZGF5ID0gZ2V0RGF0ZV9Gcm9tX0ZpcmVzdG9yZV9UaW1lU3RhbXAobm93VG9kYXkpIC8vY29udmVydCBmb3JtYXQgdG8ganMgRGF0ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJlRGF5VGltZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdXRvTnVtRGF0YS5sYXN0VGltZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlRGF5VGltZSA9IGF1dG9OdW1EYXRhLmxhc3RUaW1lXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVEYXlUaW1lID0gYXV0b051bURhdGEudXBkYXRlRGF0ZVRpbWU7IC8vdXBkYXRlZCBmcm9tIGJlZ2lubmluZ1xyXG4gICAgICAgICAgICAgICAgICAgIHByZURheVRpbWUgPSBnZXREYXRlX0Zyb21fRmlyZXN0b3JlX1RpbWVTdGFtcChwcmVEYXlUaW1lKSAvL2NvbnZlcnQgZm9ybWF0IHRvIGpzIERhdGVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld09yZGVySWRfb2JqID0gRmlyZWJhc2VNSlMuZ2V0TmV3T3JkZXJJbmZvSWQocHJlRGF5VGltZSwgbm93VG9kYXksIGF1dG9OZXdOdW1iZXIpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIGxhc3RJZCArIGxhc3RUaW1lXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udXBkYXRlKGF1dG9OdW1fRG9jUmVmLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9OdW06IG5ld09yZGVySWRfb2JqLmF1dG9OdW0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJZDogbmV3T3JkZXJJZF9vYmoubGFzdElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0VGltZTogbm93VG9kYXkgLy9uZXdPcmRlcklkX29iai5sYXN0VGltZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2NSZWYgPSBzZWxmLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykuZG9jKG5ld09yZGVySWRfb2JqLmxhc3RJZClcclxuICAgICAgICAgICAgICAgICAgICB0b0RiX29yZGVySW5mby5vcmRlcklkID0gbmV3T3JkZXJJZF9vYmoubGFzdElkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgc3NzID0gdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc3NzLS0+Jyxzc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9EYl9vcmRlckluZm8uZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlciA9IHNzcztcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5zZXQobmV3RG9jUmVmLCB0b0RiX29yZGVySW5mbylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEb2NSZWYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld09yZGVySWRfb2JqXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9yZGVySWQgXHJcbiAgICAgKiBAcGFyYW0ge0VOVU1fb3JkZXJTdGF0dXN9IHN0YXR1cyAgXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlIFxyXG4gICAgICovXHJcbiAgICBtb2RpZnlPcmRlclN0YXR1cyhvcmRlcklkLCBzdGF0dXMsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgb3JkZXJTdGF0dXM6IHt9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy5jYW5jZWxlZDpcclxuICAgICAgICAgICAgICAgIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJTdGF0dXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDYW5jZWxlZDogdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ubHkgc3VwcG9ydCBpc0NhbmNlbCBzdGF0dXMgY3VycmVudGx5IScpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vbGV0IGRhdGEgPSB7b3JkZXJTdGF0dXM6e2lzQ2FuY2VsZWQ6dHJ1ZX19XHJcbiAgICAgICAgLy9kYXRhW3N0YXR1c10gPSB2YWx1ZVxyXG4gICAgICAgIGxldCBkb2NSZWYgPSB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykuZG9jKG9yZGVySWQpO1xyXG4gICAgICAgIHJldHVybiBkb2NSZWYuc2V0KGRhdGEsIHtcclxuICAgICAgICAgICAgICAgIG1lcmdlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vbGV0IG1zZyA9IGBtb2RpZnkgb3JkZXIgc3RhdHVzIFske29yZGVySWR9XSAtLT4gb2tgXHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKClcclxuICAgICAgICAgICAgICAgIGxldCBpc1N1Y2Nlc3MgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNTdWNjZXNzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCBcclxuICAgICAqIEBwYXJhbSB7RU5VTV9vcmRlclN0YXR1c30gb3JkZXJTdGF0dXMgXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPcmRlckluZm9bXT59XHJcbiAgICAgKi9cclxuICAgIGdldE9yZGVySW5mbyA9ICh1c2VySWQsIG9yZGVyU3RhdHVzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuXHJcbiAgICAgICAgLy8gaWYodXNlcklkKVxyXG4gICAgICAgIC8vICAgICBmYWtlVWlkID0gdXNlcklkXHJcbiAgICAgICAgLy9sZXQgcnRuT3JkZXJJbmZvX2xpc3Q9W11cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuXHJcbiAgICAgICAgLyoqQHBhcmFtIHtFTlVNX29yZGVyU3RhdHVzfSBpbk9yZGVyU3RhdHVzICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UXVlcnkoaW5PcmRlclN0YXR1cykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGluT3JkZXJTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy5hbGw6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uT3JkZXJJbmZvKS53aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFTlVNX29yZGVyU3RhdHVzLmNvbXBsZXRlZDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc0NvbXBsZXRlZCcsICc9PScsIHRydWUpXHJcbiAgICAgICAgICAgICAgICBjYXNlIEVOVU1fb3JkZXJTdGF0dXMuY2FuY2VsZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uT3JkZXJJbmZvKS53aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKS53aGVyZSgnb3JkZXJTdGF0dXMuaXNDYW5jZWxlZCcsICc9PScsIHRydWUpXHJcbiAgICAgICAgICAgICAgICBjYXNlIEVOVU1fb3JkZXJTdGF0dXMud2FpdEZvckRlbGl2ZXJ5Oi8v5b6F5Ye66LKoXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uT3JkZXJJbmZvKS53aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKS53aGVyZSgnb3JkZXJTdGF0dXMuaXNEZWxpdmVyeScsICc9PScsIGZhbHNlKS53aGVyZSgnb3JkZXJTdGF0dXMuaXNQYWlkJywgJz09JywgZmFsc2UpLndoZXJlKCdvcmRlclN0YXR1cy5pc0NhbmNlbGVkJywgJz09JywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICBjYXNlIEVOVU1fb3JkZXJTdGF0dXMud2FpdEZvclBheTovL+W3suWHuuiyqCzlsJrmnKrliLDosqjmlLbmrL7poIVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc0RlbGl2ZXJ5JywgJz09JywgdHJ1ZSkud2hlcmUoJ29yZGVyU3RhdHVzLmlzUGFpZCcsICc9PScsIGZhbHNlKS53aGVyZSgnb3JkZXJTdGF0dXMuaXNDYW5jZWxlZCcsICc9PScsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBzd2l0Y2ggKGluT3JkZXJTdGF0dXMpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy5hbGw6XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uT3JkZXJJbmZvKS53aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKVxyXG4gICAgICAgICAgICAvLyAgICAgY2FzZSBFTlVNX29yZGVyU3RhdHVzLmNvbXBsZXRlZDpcclxuICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc0NvbXBsZXRlZCcsICc9PScsIHRydWUpXHJcbiAgICAgICAgICAgIC8vICAgICBjYXNlIEVOVU1fb3JkZXJTdGF0dXMud2FpdEZvclBheTpcclxuICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc1BhaWQnLCAnPT0nLCBmYWxzZSkud2hlcmUoJ29yZGVyU3RhdHVzLmlzQ2FuY2VsZWQnLCAnPT0nLCBmYWxzZSlcclxuICAgICAgICAgICAgLy8gICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy53YWl0Rm9yRGVsaXZlcnk6XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uT3JkZXJJbmZvKS53aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKS53aGVyZSgnb3JkZXJTdGF0dXMuaXNQYWlkJywgJz09JywgdHJ1ZSkud2hlcmUoJ29yZGVyU3RhdHVzLmlzRGVsaXZlcnknLCAnPT0nLCBmYWxzZSlcclxuICAgICAgICAgICAgLy8gICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy5jYW5jZWxlZDpcclxuICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc0NhbmNlbGVkJywgJz09JywgdHJ1ZSlcclxuICAgICAgICAgICAgLy8gICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9yZXR1cm4gdGhpcy5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc1BhaWQnLCAnPT0nLCB0cnVlKS5nZXQoKVxyXG4gICAgICAgIHJldHVybiBnZXRRdWVyeShvcmRlclN0YXR1cykuZ2V0KCkgLy8ub3JkZXJCeShcImZzdHNDcmVhdGVEYXRlVGltZV9zZXJ2ZXJcIixcImRlc2NcIikuZ2V0KClcclxuICAgICAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHJ0bk9yZGVySW5mb19saXN0ID0gc25hcHNob3QuZG9jcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGl0ZW0uZGF0YSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9yZGVySW5mby5nZXRPcmRlckluZm9fRnJvbURiRm9ybWF0KGRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGFsbCByZWxhdGVkIHByb2R1Y3QgaWRcclxuICAgICAgICAgICAgICAgIGxldCBsaXN0X3Byb2R1Y3RJZCA9IHJ0bk9yZGVySW5mb19saXN0Lm1hcCgoZWFjaE9yZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVhY2hPcmRlci5nZXRTaG9wSXRlbXNfUHJvZElkKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgbGlzdF9wcm9kdWN0SWQgPSBsaXN0X3Byb2R1Y3RJZC5mbGF0KClcclxuICAgICAgICAgICAgICAgIC8vZGlzdGluY3QgbGlzdF9wcm9kdWN0SWRcclxuICAgICAgICAgICAgICAgIGxpc3RfcHJvZHVjdElkID0gWy4uLm5ldyBTZXQobGlzdF9wcm9kdWN0SWQpXVxyXG4gICAgICAgICAgICAgICAgLy9zb3J0XHJcbiAgICAgICAgICAgICAgICBydG5PcmRlckluZm9fbGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIuanNkdENyZWF0ZURhdGVUaW1lX3NlcnZlciAtIGEuanNkdENyZWF0ZURhdGVUaW1lX3NlcnZlclxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGxldCBwcm9taXNlQWxsX2xvYWRMaXN0UHJvZHVjdEluZm8gPSB0aGlzLmdldEFycmF5UHJvZHVjdEluZm9Gcm9tRGJfQnlMaXN0UHJvZHVjdElkKGxpc3RfcHJvZHVjdElkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbcnRuT3JkZXJJbmZvX2xpc3QsIHByb21pc2VBbGxfbG9hZExpc3RQcm9kdWN0SW5mb10pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IFtvcmRlckluZm9fbGlzdCwgbGlzdF9wcm9kdWN0c10gPSBhcnJheVxyXG4gICAgICAgICAgICAgICAgbGlzdF9wcm9kdWN0cyA9IGxpc3RfcHJvZHVjdHMuZmxhdCgpXHJcbiAgICAgICAgICAgICAgICBsZXQgcnRuT3JkZXJJbmZvX2xpc3QgPSBvcmRlckluZm9fbGlzdC5tYXAoZWFjaE9yZGVySW5mbyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnLS0tLS0tLS0tJyxlYWNoT3JkZXJJbmZvWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgIGVhY2hPcmRlckluZm8uZmlsbFNob3BJdGVtcyhsaXN0X3Byb2R1Y3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlYWNoT3JkZXJJbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlbGVtZW50Lm9yZGVySWQpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIHJ0bk9yZGVySW5mb19saXN0LmZvckVhY2goZWFjaE9yZGVySW5mbyA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZygnLS0tLS0tLS0tJyxlYWNoT3JkZXJJbmZvWzBdKVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGVhY2hPcmRlckluZm8uZmlsbFNob3BJdGVtcyhhcnJheURpc3RpbmN0UHJvZHVjdHMpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZyhlbGVtZW50Lm9yZGVySWQpXHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtPcmRlckluZm9bXX0gKi9cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTE9HOiB+IGZpbGU6IEZpcmViYXNlTUpTLmpzIH4gbGluZSAzNzEgfiBGaXJlYmFzZU1KUyB+IC50aGVuIH4gcnRuT3JkZXJJbmZvX2xpc3RcIiwgcnRuT3JkZXJJbmZvX2xpc3QpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnRuT3JkZXJJbmZvX2xpc3RcclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gLnRoZW4oKGFycmF5KSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGxldCBbb3JkZXJJbmZvX2xpc3QsIGxpc3RfcHJvZHVjdElkXSA9IGFycmF5XHJcbiAgICAgICAgLy8gICAgIC8qKkB0eXBlIHtBcnJheX0gLSBncm91cGVkIGFycmF5LCBleDpbIFsxLDMsNV0sWzcsOCw5XSxbMTMsMjMsNTRdIF0qL1xyXG4gICAgICAgIC8vICAgICBsZXQgbGlzdEdyb3VwUHJvZHVjdElkID0gRmlyZWJhc2VNSlMuZ2V0R3JvdXBlZEFycmF5X0J5VGltZXMobGlzdF9wcm9kdWN0SWQsIDEwKVxyXG4gICAgICAgIC8vICAgICAvLyBnZXQgZmlyZXN0b3JlIC0gUHJvZHVjdHMgaW4gSWRcclxuICAgICAgICAvLyAgICAgbGV0IG5ld1Byb21pc2UgPSAobGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0SW5mbylcclxuICAgICAgICAvLyAgICAgICAgICAgICAud2hlcmUoc2VsZi5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkUGF0aC5kb2N1bWVudElkKCksICdpbicsIGxpc3RfTGltaXRfMTBfUHJvZHVjdElkcykgLy9bJzAyZDJic3MzLTAwMTInLCcxYzcxOG9jaC0wMDAxJ10pXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLmdldCgpXHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2cobmV3UHJvbWlzZSlcclxuICAgICAgICAvLyAgICAgbGV0IFByb21pc2VBcnJheSA9IFtdXHJcbiAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2cobGlzdEdyb3VwUHJvZHVjdElkWzBdKVxyXG4gICAgICAgIC8vICAgICBQcm9taXNlQXJyYXkucHVzaChvcmRlckluZm9fbGlzdClcclxuICAgICAgICAvLyAgICAgLy9Qcm9taXN0QXJyYXkucHVzaChsaXN0X3Byb2R1Y3RJZClcclxuICAgICAgICAvLyAgICAgbGlzdEdyb3VwUHJvZHVjdElkLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIFByb21pc2VBcnJheS5wdXNoKG5ld1Byb21pc2UoaXRlbSkpIC8vbGlzdEdyb3VwUHJvZHVjdElkWzBdKSkgICAgXHJcbiAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgLy8gICAgIC8vUHJvbWlzdEFycmF5LnB1c2gobmV3UHJvbWlzZShsaXN0R3JvdXBQcm9kdWN0SWRbMF0pKVxyXG4gICAgICAgIC8vICAgICAvLyBQcm9taXN0QXJyYXkucHVzaChuZXdQcm9taXNlKGxpc3RHcm91cFByb2R1Y3RJZFsxXSkpXHJcbiAgICAgICAgLy8gICAgIC8vIGZvcihsZXQgaT0wO2k8bGlzdEdyb3VwUHJvZHVjdElkLmxlbmd0aDtpKyspe1xyXG4gICAgICAgIC8vICAgICAvLyAgICAgbGV0IGxpc3RfTGltaXRfMTBfUHJvZHVjdElkcyA9IGxpc3RHcm91cFByb2R1Y3RJZFtpXVxyXG4gICAgICAgIC8vICAgICAvLyAgICAgUHJvbWlzdEFycmF5LnB1c2gobmV3UHJvbWlzZShsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMpKVxyXG4gICAgICAgIC8vICAgICAvLyB9XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBQcm9taXNlLmFsbChQcm9taXNlQXJyYXkpIC8vW29yZGVySW5mb19saXN0LCBsaXN0X3Byb2R1Y3RJZCwgbmV3UHJvbWlzZSgpXSlcclxuICAgICAgICAvLyB9KVxyXG4gICAgICAgIC8vIC50aGVuKChhcnJheSkgPT4ge1xyXG5cclxuICAgICAgICAvLyAgICAgbGV0IG9yZGVySW5mb19saXN0ID0gYXJyYXkuc2hpZnQoKSAvLyBwb3AgWzBdXHJcbiAgICAgICAgLy8gICAgIC8vbGV0IGxpc3RfcHJvZHVjdElkID0gYXJyYXkuc3BsaWNlKDAsIDEpXHJcbiAgICAgICAgLy8gICAgIC8vbGV0IFtvcmRlckluZm9fbGlzdCwgbGlzdF9wcm9kdWN0SWQsIHNuYXBzaG90XSA9IGFycmF5XHJcbiAgICAgICAgLy8gICAgIGxldCBhcnJheVNuYXBzaG90ID0gYXJyYXlcclxuICAgICAgICAvLyAgICAgbGV0IHJ0bk9yZGVySW5mb19saXN0ID0gb3JkZXJJbmZvX2xpc3RcclxuICAgICAgICAvLyAgICAgLyoqXHJcbiAgICAgICAgLy8gICAgICAqIEB0eXBlIHtQcm9kdWN0SW5mb1tdfSAtIGRpc3RpbmN0IHByb2R1Y3RJbmZvIGxpc3RcclxuICAgICAgICAvLyAgICAgICovXHJcbiAgICAgICAgLy8gICAgIGxldCBhcnJheURpc3RpbmN0UHJvZHVjdHMgPSBbXVxyXG4gICAgICAgIC8vICAgICAvL2NvbGxlY3QgZGlzdGluY3QgcHJvZHVjdEluZm8gYXJyYXlcclxuICAgICAgICAvLyAgICAgLy9hcnJheVNuYXBzaG90ID0gYXJyYXlTbmFwc2hvdC5mbGF0KDEpXHJcbiAgICAgICAgLy8gICAgIGxldCBhcnJheURvY3MgPSBbXVxyXG4gICAgICAgIC8vICAgICBhcnJheVNuYXBzaG90LmZvckVhY2goc25hcHNob3QgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgYXJyYXlEb2NzID0gYXJyYXlEb2NzLmNvbmNhdChzbmFwc2hvdC5kb2NzKVxyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyAgICAgLy9hcnJheVNuYXBzaG90WzBdLmRvY3MsIGFycmF5U25hcHNob3RbMV0uZG9jc1xyXG4gICAgICAgIC8vICAgICAvL2FycmF5RG9jcyA9IGFycmF5RG9jcy5mbGF0KDEpXHJcbiAgICAgICAgLy8gICAgIGFycmF5RG9jcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgLyoqQHR5cGUge1Byb2R1Y3RJbmZvfSAqL1xyXG4gICAgICAgIC8vICAgICAgICAgbGV0IHByb2R1Y3RJbmZvID0gZWxlbWVudC5kYXRhKClcclxuICAgICAgICAvLyAgICAgICAgIHByb2R1Y3RJbmZvID0gT2JqZWN0LmFzc2lnbihuZXcgUHJvZHVjdEluZm8oKSwgcHJvZHVjdEluZm8pXHJcbiAgICAgICAgLy8gICAgICAgICBhcnJheURpc3RpbmN0UHJvZHVjdHMucHVzaChwcm9kdWN0SW5mbylcclxuICAgICAgICAvLyAgICAgICAgIC8vY29uc29sZS5sb2cocHJvZHVjdEluZm8pXHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAvL2ZpbGwgU2hvcEl0ZW1zIC0gX3Byb2R1Y3RJbmZvXHJcblxyXG4gICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKCctLS0tLScscnRuT3JkZXJJbmZvX2xpc3QpXHJcbiAgICAgICAgLy8gICAgIC8vcnRuT3JkZXJJbmZvX2xpc3QgPSBydG5PcmRlckluZm9fbGlzdC5mbGF0KDEpXHJcbiAgICAgICAgLy8gICAgIHJ0bk9yZGVySW5mb19saXN0LmZvckVhY2goZWFjaE9yZGVySW5mbyA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAvL2NvbnNvbGUubG9nKCctLS0tLS0tLS0nLGVhY2hPcmRlckluZm9bMF0pXHJcbiAgICAgICAgLy8gICAgICAgICBlYWNoT3JkZXJJbmZvLmZpbGxTaG9wSXRlbXMoYXJyYXlEaXN0aW5jdFByb2R1Y3RzKVxyXG4gICAgICAgIC8vICAgICAgICAgLy9jb25zb2xlLmxvZyhlbGVtZW50Lm9yZGVySWQpXHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAvKipAdHlwZSB7T3JkZXJJbmZvW119ICovXHJcbiAgICAgICAgLy8gICAgIHJldHVybiBydG5PcmRlckluZm9fbGlzdFxyXG5cclxuICAgICAgICAvLyB9KVxyXG5cclxuICAgIH1cclxuICAgIC8vLS0tLS0tLSBncm91cCBsaXN0X3Byb2R1Y3RJZCBsaW1pdCAtLSAxMFxyXG4gICAgZ2V0QXJyYXlQcm9kdWN0SW5mb0Zyb21EYl9CeUxpc3RQcm9kdWN0SWQobGlzdF9wcm9kdWN0SWQpIHtcclxuICAgICAgICAvKipAdHlwZSB7QXJyYXl9IC0gZ3JvdXBlZCBhcnJheSwgZXg6WyBbMSwzLDVdLFs3LDgsOV0sWzEzLDIzLDU0XSBdKi9cclxuICAgICAgICBsZXQgbGlzdEdyb3VwUHJvZHVjdElkID0gRmlyZWJhc2VNSlMuZ2V0R3JvdXBlZEFycmF5X0J5VGltZXMobGlzdF9wcm9kdWN0SWQsIDEwKVxyXG4gICAgICAgIC8vIGdldCBmaXJlc3RvcmUgLSBQcm9kdWN0cyBpbiBJZFxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIGxldCBuZXdQcm9taXNlID0gKGxpc3RfTGltaXRfMTBfUHJvZHVjdElkcykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgICAgIC53aGVyZShzZWxmLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgJ2luJywgbGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzKSAvL1snMDJkMmJzczMtMDAxMicsJzFjNzE4b2NoLTAwMDEnXSlcclxuICAgICAgICAgICAgICAgIC5nZXQoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFycmF5UHJvZHVjdEluZm8gPSBzbmFwc2hvdC5kb2NzLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5kYXRhKClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5UHJvZHVjdEluZm9cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld1Byb21pc2UpXHJcbiAgICAgICAgbGV0IFByb21pc2VBcnJheSA9IFtdXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhsaXN0R3JvdXBQcm9kdWN0SWRbMF0pXHJcbiAgICAgICAgLy9Qcm9taXNlQXJyYXkucHVzaChvcmRlckluZm9fbGlzdClcclxuICAgICAgICAvL1Byb21pc3RBcnJheS5wdXNoKGxpc3RfcHJvZHVjdElkKVxyXG4gICAgICAgIGxpc3RHcm91cFByb2R1Y3RJZC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIFByb21pc2VBcnJheS5wdXNoKG5ld1Byb21pc2UoaXRlbSkpIC8vbGlzdEdyb3VwUHJvZHVjdElkWzBdKSkgICAgXHJcbiAgICAgICAgfSlcclxuICAgICAgICAvL1Byb21pc3RBcnJheS5wdXNoKG5ld1Byb21pc2UobGlzdEdyb3VwUHJvZHVjdElkWzBdKSlcclxuICAgICAgICAvLyBQcm9taXN0QXJyYXkucHVzaChuZXdQcm9taXNlKGxpc3RHcm91cFByb2R1Y3RJZFsxXSkpXHJcbiAgICAgICAgLy8gZm9yKGxldCBpPTA7aTxsaXN0R3JvdXBQcm9kdWN0SWQubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgLy8gICAgIGxldCBsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMgPSBsaXN0R3JvdXBQcm9kdWN0SWRbaV1cclxuICAgICAgICAvLyAgICAgUHJvbWlzdEFycmF5LnB1c2gobmV3UHJvbWlzZShsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMpKVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoUHJvbWlzZUFycmF5KVxyXG4gICAgfVxyXG4gICAgLy8gc3RhdGljIGdldEFycmF5UHJvZHVjdHNfQnlMaXN0UHJvZHVjdElkKGFycmF5UHJvZHVjdElkKXtcclxuICAgIC8vICAgICAvL2Rpc3RpbmN0IGxpc3RfcHJvZHVjdElkXHJcbiAgICAvLyAgICAgbGV0IGFycmF5RGlzdGluY3RQcm9kdWN0SWQgPSBbLi4ubmV3IFNldChhcnJheVByb2R1Y3RJZCldXHJcblxyXG5cclxuICAgIC8vICAgICAvKipAdHlwZSB7QXJyYXl9ICovXHJcbiAgICAvLyAgICAgbGV0IGxpc3RHcm91cFByb2R1Y3RJZCA9IEZpcmViYXNlTUpTLmdldEdyb3VwZWRBcnJheV9CeVRpbWVzKGxpc3RfcHJvZHVjdElkLCAxMClcclxuICAgIC8vICAgICAvLyBnZXQgZmlyZXN0b3JlIC0gUHJvZHVjdHMgaW4gSWRcclxuICAgIC8vICAgICBsZXQgbmV3UHJvbWlzZSA9IChsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMpID0+IHtcclxuICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uUHJvZHVjdEluZm8pXHJcbiAgICAvLyAgICAgICAgICAgICAud2hlcmUoc2VsZi5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkUGF0aC5kb2N1bWVudElkKCksICdpbicsIGxpc3RfTGltaXRfMTBfUHJvZHVjdElkcykgLy9bJzAyZDJic3MzLTAwMTInLCcxYzcxOG9jaC0wMDAxJ10pXHJcbiAgICAvLyAgICAgICAgICAgICAuZ2V0KClcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2cobmV3UHJvbWlzZSlcclxuICAgIC8vICAgICBsZXQgUHJvbWlzdEFycmF5ID0gW11cclxuICAgIC8vICAgICAvL2NvbnNvbGUubG9nKGxpc3RHcm91cFByb2R1Y3RJZFswXSlcclxuICAgIC8vICAgICBQcm9taXN0QXJyYXkucHVzaChvcmRlckluZm9fbGlzdClcclxuICAgIC8vICAgICAvL1Byb21pc3RBcnJheS5wdXNoKGxpc3RfcHJvZHVjdElkKVxyXG4gICAgLy8gICAgIGxpc3RHcm91cFByb2R1Y3RJZC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIFByb21pc3RBcnJheS5wdXNoKG5ld1Byb21pc2UoaXRlbSkpIC8vbGlzdEdyb3VwUHJvZHVjdElkWzBdKSkgICAgXHJcbiAgICAvLyAgICAgfSlcclxuICAgIC8vICAgICAvL1Byb21pc3RBcnJheS5wdXNoKG5ld1Byb21pc2UobGlzdEdyb3VwUHJvZHVjdElkWzBdKSlcclxuICAgIC8vICAgICAvLyBQcm9taXN0QXJyYXkucHVzaChuZXdQcm9taXNlKGxpc3RHcm91cFByb2R1Y3RJZFsxXSkpXHJcbiAgICAvLyAgICAgLy8gZm9yKGxldCBpPTA7aTxsaXN0R3JvdXBQcm9kdWN0SWQubGVuZ3RoO2krKyl7XHJcbiAgICAvLyAgICAgLy8gICAgIGxldCBsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMgPSBsaXN0R3JvdXBQcm9kdWN0SWRbaV1cclxuICAgIC8vICAgICAvLyAgICAgUHJvbWlzdEFycmF5LnB1c2gobmV3UHJvbWlzZShsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMpKVxyXG4gICAgLy8gICAgIC8vIH1cclxuICAgIC8vICAgICByZXR1cm4gUHJvbWlzZS5hbGwoUHJvbWlzdEFycmF5KVxyXG5cclxuICAgIC8vIH1cclxuICAgIC8vLS0tLS0tLSBncm91cCBsaXN0X3Byb2R1Y3RJZCBsaW1pdCAtLSAxMFxyXG4gICAgc3RhdGljIGdldEdyb3VwZWRBcnJheV9CeVRpbWVzKFRhcmdldEFycmF5LCBlYWNoR3JvdXBDb3VudCkge1xyXG4gICAgICAgIGxldCBydG5Hcm91cGVkQXJyYXkgPSBbXVxyXG4gICAgICAgIC8vIGxvb3AgdGltZXNcclxuICAgICAgICBsZXQgZG9UaW1lcyA9IE1hdGguY2VpbChUYXJnZXRBcnJheS5sZW5ndGggLyBlYWNoR3JvdXBDb3VudCkgLy80XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb1RpbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IG5ld0dyb3VwID0gVGFyZ2V0QXJyYXkuc3BsaWNlKDAsIGVhY2hHcm91cENvdW50KVxyXG4gICAgICAgICAgICBydG5Hcm91cGVkQXJyYXkucHVzaChuZXdHcm91cClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJ0bkdyb3VwZWRBcnJheVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8b2JqZWN0Pn0gLSBmaXJlc3RvcmUuVXNlcnMuZGF0YSgpXHJcbiAgICAgKi9cclxuICAgIGdldFVzZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9maXJlYmFzZS5hdXRoKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aGlzLl9maXJlYmFzZS5hdXRoKCkgaXMgLS0tPicgKyB0aGlzLl9maXJlYmFzZS5hdXRoKCkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9maXJlYmFzZS5hdXRoKCkpIHtcclxuICAgICAgICAgICAgLyoqQGlnbm9yZSAqL1xyXG4gICAgICAgICAgICBsZXQgcHAgPSB0aGlzLl9maXJlYmFzZS5hdXRoKClcclxuICAgICAgICAgICAgaWYgKHBwKVxyXG4gICAgICAgICAgICAgICAgcHAuY3VycmVudFVzZXIudWlkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB1aWQgPSB0aGlzLl9maXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkXHJcblxyXG4gICAgICAgIHRoaXMuaW5pdERCKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uVXNlcnMpLmRvYyh1aWQpLmdldCgpXHJcbiAgICAgICAgICAgIC50aGVuKChkb2MpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2MuZGF0YSgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gLnRoZW4oKHF1ZXJ5KSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHF1ZXJ5LmRvY3MpXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIClcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJ2xvZGFzaCcpfSBfIFxyXG4gICAgICogQHBhcmFtIHtQcm9kdWN0SW5mb1tdfSBsaXN0UHJvZHVjdEluZm8gXHJcbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KFwiLi9GaXJlYmFzZU1KUy5qc1wiKS5ncm91cGVkQ2F0ZWdvcnlbXX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFByb2R1Y3RJbmZvX0dyb3VwZWRJdGVtc19CeUNhdGVnb3J5KF8sIGxpc3RQcm9kdWN0SW5mbykge1xyXG4gICAgICAgIGxldCBncm91cGVkRGF0YSA9IF8obGlzdFByb2R1Y3RJbmZvKS5ncm91cEJ5KCdjYXRlZ29yeScpLm1hcCgoYXJyYXlHcm91cGVkSXRlbXMsIGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiAnJ1xyXG4gICAgICAgICAgICAvLyBPYmplY3QuXHJcblxyXG4gICAgICAgICAgICBsZXQgY2F0ZWdvcmllcyA9IHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlaaFRXOiBNYXBfUHJvZHVjdENhdGVnb3J5W2NhdGVnb3J5XSxcclxuICAgICAgICAgICAgICAgIGFycmF5R3JvdXBlZEl0ZW1zLFxyXG4gICAgICAgICAgICAgICAgcmVmOiBudWxsLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjYXRlZ29yaWVzXHJcbiAgICAgICAgICAgIC8vIHJldHVybiB7XHJcbiAgICAgICAgICAgIC8vICAgICBjYXRlZ29yeSxcclxuICAgICAgICAgICAgLy8gICAgIG5hbWU6IF8ubWFwKGFycmF5R3JvdXBlZEl0ZW1zLCAnbmFtZScpXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9KS52YWx1ZSgpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJMT0c6IH4gZmlsZTogRmlyZWJhc2VNSlMuanMgfiBsaW5lIDUwNyB+IEZpcmViYXNlTUpTIH4gZ3JvdXBlZERhdGEgfiBncm91cGVkRGF0YVwiLCBncm91cGVkRGF0YSlcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGQyKVxyXG4gICAgICAgIHJldHVybiBncm91cGVkRGF0YVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXQgbmV3IE9yZGVySW5mbyBJRCAsIGNoZWNrIHdoZXRoZXIgY3Jvc3MgZGF0ZSBvciBub3QuXHJcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHByZURheVRpbWUgXHJcbiAgICAgKiBAcGFyYW0ge0RhdGV9IG5vd1RpbWUgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXV0b05ld051bWJlciBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldE5ld09yZGVySW5mb0lkKHByZURheVRpbWUsIG5vd1RpbWUsIGF1dG9OZXdOdW1iZXIpIHtcclxuICAgICAgICBsZXQgc1ByZURheVRpbWVfOCA9IGdldERhdGVTdHJpbmdfY29ycmVjdFRpbWVab25lKHByZURheVRpbWUsIDEpXHJcbiAgICAgICAgbGV0IHNOb3dUb2RheV84ID0gZ2V0RGF0ZVN0cmluZ19jb3JyZWN0VGltZVpvbmUobm93VGltZSwgMSlcclxuICAgICAgICBsZXQgb3JkZXJOdW1iZXJcclxuICAgICAgICBsZXQgaXNDcm9zc0RhdGUgLy90b2RheSBpcyB0aGUgc2FtZSBkYXRlIHdpdGggcHJlRGF5VGltZVxyXG4gICAgICAgIGxldCBuZXdSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGxhc3RJZDogJycsXHJcbiAgICAgICAgICAgIGxhc3RUaW1lOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBpc0Nyb3NzRGF0ZTogZmFsc2UsIC8vdG9kYXkgaXMgdGhlIHNhbWUgZGF0ZSB3aXRoIHByZURheVRpbWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNQcmVEYXlUaW1lXzggPT09IHNOb3dUb2RheV84KSB7XHJcbiAgICAgICAgICAgIC8vdG9kYXkgaXMgdGhlIHNhbWUgZGF0ZSB3aXRoIHByZURheVRpbWVcclxuICAgICAgICAgICAgaXNDcm9zc0RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgb3JkZXJOdW1iZXIgPSBhdXRvTmV3TnVtYmVyXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy90b2RheSBpcyBkaWZmZXJlbnQgZGF0ZSB3aXRoIHByZURheVRpbWVcclxuICAgICAgICAgICAgaXNDcm9zc0RhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBvcmRlck51bWJlciA9IDFcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHNEYXRlIFxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdBdXRvTnVtIFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxldCBnZXROZXdJRCA9IChzRGF0ZSwgbmV3QXV0b051bSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7c0RhdGV9JHtTdHJpbmcobmV3QXV0b051bSkucGFkU3RhcnQoNCwgJzAnKX1gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vc05vd1RvZGF5XzggPT0gY29ycmVjdCBsb2NhbGUgdGltZXpvbmUgdGltZVxyXG4gICAgICAgIGxldCBsYXN0SWQgPSBnZXROZXdJRChzTm93VG9kYXlfOCwgb3JkZXJOdW1iZXIpXHJcbiAgICAgICAgbmV3UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICBhdXRvTnVtOiBvcmRlck51bWJlcixcclxuICAgICAgICAgICAgbGFzdElkOiBsYXN0SWQsXHJcbiAgICAgICAgICAgIGxhc3RUaW1lOiBub3dUaW1lLFxyXG4gICAgICAgICAgICBpc0Nyb3NzRGF0ZTogaXNDcm9zc0RhdGUsIC8vdG9kYXkgaXMgdGhlIHNhbWUgZGF0ZSB3aXRoIHByZURheVRpbWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld1Jlc3VsdFxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogZ2V0IDggY2hhciBzdHJpbmcgZnJvbSBkYXRlXHJcbiAqIEBwYXJhbSB7RGF0ZX0gaW5EYXRlXHJcbiAqIEBwYXJhbSB7KDF8Mil9IGZvcm1hdE5vXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXREYXRlU3RyaW5nX2NvcnJlY3RUaW1lWm9uZShpbkRhdGUsIGZvcm1hdE5vKSB7XHJcbiAgICAvLyBjb3JyZWN0IHRpbWV6b25lIHRpbWUgLT4gaW5EYXRlLmdldFhYWFgoKVxyXG4gICAgbGV0IHl5ID0gaW5EYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBsZXQgbW0gPSBpbkRhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICBsZXQgZGQgPSBpbkRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgbGV0IE1NID0gU3RyaW5nKG1tKS5wYWRTdGFydCgyLCAnMCcpXHJcbiAgICBsZXQgREQgPSBTdHJpbmcoZGQpLnBhZFN0YXJ0KDIsICcwJylcclxuICAgIHN3aXRjaCAoZm9ybWF0Tm8pIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgIHJldHVybiBgJHt5eX0ke01NfSR7RER9YDtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gJydcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGVfRnJvbV9GaXJlc3RvcmVfVGltZVN0YW1wKGZzVGltZXN0YW1wKSB7XHJcbiAgICBsZXQgc2Vjb25kcyA9IG51bGxcclxuICAgIGlmIChmc1RpbWVzdGFtcC5zZWNvbmRzKVxyXG4gICAgICAgIHNlY29uZHMgPSBmc1RpbWVzdGFtcC5zZWNvbmRzXHJcbiAgICBlbHNlIGlmIChmc1RpbWVzdGFtcC5fc2Vjb25kcykge1xyXG4gICAgICAgIHNlY29uZHMgPSBmc1RpbWVzdGFtcC5fc2Vjb25kc1xyXG4gICAgfVxyXG4gICAgaWYgKHNlY29uZHMgPT09IG51bGwpXHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoc2Vjb25kcyAqIDEwMDApXHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIHJlbW92ZUZ1bmNQcm9wKG9iaikge1xyXG4vLyAgICAgZm9yIChsZXQgcHJvcE5hbWUgaW4gb2JqKSB7XHJcbi8vICAgICAgICAgaWYgKHR5cGVvZiBvYmpbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nKVxyXG4vLyAgICAgICAgICAgICBkZWxldGUgb2JqW3Byb3BOYW1lXVxyXG4vLyAgICAgICAgIC8vaWYoJHt0eXBlb2YgYXJyeTFbMF1ba2V5TmFtZV19ID09IClcclxuLy8gICAgIH1cclxuLy8gfVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEVtYWlsX1Jlc2VuZFBhc3N3b3JkKGVtYWlsQWRkcmVzcywgaW5GaXJlYmFzZSwgc3dhbCwgZnVuY0Nsb3NlTW9kYWwpIHtcclxuICAgIHZhciBhdXRoID0gaW5GaXJlYmFzZS5hdXRoKCk7XHJcbiAgICAvL3ZhciBlbWFpbEFkZHJlc3MgPSB0aGlzLnByb3h5VUkuYmluZElwdFJlc2VudFB3ZEVtYWlsO1xyXG4gICAgcmV0dXJuIGF1dGguc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChlbWFpbEFkZHJlc3MpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBFbWFpbCBzZW50LlxyXG4gICAgICAgICAgICBzd2FsLmZpcmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5o+Q6YaSJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAn5a+G56K85bey5a+E5Ye677yM6KuL6Iez5L+h566x5pS25L+hJyxcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlkT3BlbjogKGh0bWxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zd2FsMi1jb25maXJtJykuYXR0cignZGF0YS10ZXN0aWQnLCAnYnRuU3dhbENvbmZpcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhhc3NlcnRMb2cucmVnaXN0ZXJTdWNjZXNzKHRydWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTE9HOiB+IGZpbGU6IGN1c01vZGFsTG9naW4uanMgfiBsaW5lIDMxMSB+IC50aGVuIH4gaHRtbEVsZW1lbnRcIiwgaHRtbEVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvL3NlbGYuc2hvd01vZGFsKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmdW5jQ2xvc2VNb2RhbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY0Nsb3NlTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBBbiBlcnJvciBoYXBwZW5lZC5cclxuICAgICAgICAgICAgbGV0IGVyckNvZGVfWmhUVztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IuY29kZSlcclxuICAgICAgICAgICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRoL2ludmFsaWQtZW1haWwnOlxyXG4gICAgICAgICAgICAgICAgICAgIGVyckNvZGVfWmhUVyA9ICfovLjlhaXpjK/oqqQnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRoL3VzZXItbm90LWZvdW5kJzpcclxuICAgICAgICAgICAgICAgICAgICBlcnJDb2RlX1poVFcgPSAn5q2kRW1haWzluLPomZ/kuI3lrZjlnKgnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVyckNvZGVfWmhUVyA9IGVycm9yLmNvZGVcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2FsLmZpcmUoe1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgJHtlcnJDb2RlX1poVFd9LCR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJyxcclxuICAgICAgICAgICAgICAgIC8vY29uZmlybUJ1dHRvblRleHQ6ICdDb29sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL3RoaXMuc2hvd01vZGFsKGZhbHNlKVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBZ0JBO0FBRUE7QUFDQTtBQUNBO0FBcEJBO0FBc0JBO0FBRUE7QUFDQTtBQXpCQTtBQStUQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBWkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBamRBO0FBa2lCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBdmpCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFXQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFYQTtBQUFBO0FBQ0E7QUFVQTtBQVhBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRkE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQVRBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFvQkE7QUFHQTtBQUNBO0FBQ0E7QUF6QkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBNkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQWhFQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBb0VBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUEE7QUFXQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFGQTtBQUFBO0FBT0E7QUFFQTtBQUNBO0FBVkE7QUFXQTtBQUNBO0FBWkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQTFDQTtBQTRDQTtBQUNBO0FBRkE7QUFDQTtBQTVDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFrREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFhQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFtSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU1BO0FBQ0E7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzb0JBO0FBQ0E7QUF5b0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFSQTtBQVdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFUQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/firebase/FirebaseMJS.js\n");

/***/ }),

/***/ "./js/lib/RdQaLog.js":
/*!***************************!*\
  !*** ./js/lib/RdQaLog.js ***!
  \***************************/
/*! namespace exports */
/*! export ENUM_mdId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export assertTitle [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getTitle [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"assertTitle\": () => /* binding */ assertTitle,\n/* harmony export */   \"getTitle\": () => /* binding */ getTitle,\n/* harmony export */   \"ENUM_mdId\": () => /* binding */ ENUM_mdId,\n/* harmony export */   \"default\": () => /* binding */ RdQaLog\n/* harmony export */ });\n/* harmony import */ var _dataKits_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dataKits.js */ \"./js/lib/dataKits.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nvar assertTitle = 'assertLog:';\nfunction getTitle(mdID, arguments_callee_name) {\n  return \"\".concat(assertTitle, \"[\").concat(mdID, \"-\").concat(arguments_callee_name, \"]\");\n}\n/**@enum {string} */\n\nvar ENUM_mdId = {\n  forTest: \"forTest\",\n  T1: \"T1\",\n  index: \"index\",\n  cusModalLogin: \"cusModalLogin\",\n  cusModalUserProfile: \"cusModalUserProfile\",\n  ProductListSearch: \"ProductListSearch\",\n  ShopCart: \"ShopCart\",\n  ShopItem: \"ShopItem\",\n  Invoice: \"Invoice\",\n  ProductCard: \"ProductCard\",\n  PopInvoice: \"PopInvoice\"\n};\n\nvar RdQaLog = /*#__PURE__*/function () {\n  function RdQaLog(mdID) {\n    _classCallCheck(this, RdQaLog);\n\n    _defineProperty(this, \"mdID\", \"\");\n\n    _defineProperty(this, \"name\", \"\");\n\n    _defineProperty(this, \"log\", null);\n\n    this.mdID = mdID;\n  }\n\n  _createClass(RdQaLog, [{\n    key: \"setLogFunction\",\n\n    /**\r\n     * @function - define log function (return log message)\r\n     * @param {function} log \r\n     */\n    value: function setLogFunction(log) {\n      this.log = log; //.bind(this)\n    } // log(isSuccess){\n    //     return `${this.prefix}}${isSuccess}`\n    // }\n\n  }, {\n    key: \"_getLogArgumentNames\",\n    value: function _getLogArgumentNames() {\n      if (this.log === null) throw new Error('Please define RdQaLog.log(function) first!');\n      return (0,_dataKits_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionParameters)(this.log);\n    }\n  }, {\n    key: \"matchPattern\",\n    value: function matchPattern() {\n      if (this.log === null) throw new Error('Please define RdQaLog.log(function) first!'); //let newPrefix = this.prefix.replace(`]`,`\\\\]`).replace(`[`,`\\\\[`)\n\n      var logArgumentNames = this._getLogArgumentNames();\n\n      var logArgumentCount = logArgumentNames.length;\n      var pat_matchValue_all = \"\".concat(this._prefix_matchPattern, \"(?<matchValue>.*)\");\n      if (logArgumentCount <= 1) return pat_matchValue_all;else {\n        var pat_matchValue = \"(?<matchValue>.*)\"; // let pat_matchValue_all = \"(?<matchValue>.*)\"\n\n        for (var i = 1; i < logArgumentCount; i++) {\n          pat_matchValue = \"(?<matchValue\".concat(i + 1, \">.*)\");\n          pat_matchValue_all += \"\".concat(RdQaLog.logValueSeparator).concat(pat_matchValue);\n        }\n\n        return pat_matchValue_all;\n      }\n    }\n    /**@returns {any[]}*/\n\n  }, {\n    key: \"getMatchValues\",\n    value: function getMatchValues(content) {\n      var reg = new RegExp(this.matchPattern(), \"g\");\n      var rtn = (0,_dataKits_js__WEBPACK_IMPORTED_MODULE_0__.getMatches)(content, reg);\n      return rtn;\n    }\n  }, {\n    key: \"prefix\",\n    get: function get() {\n      return getTitle(this.mdID, this.name);\n    }\n  }, {\n    key: \"_prefix_matchPattern\",\n    get: function get() {\n      return this.prefix.replace(\"]\", \"\\\\]\").replace(\"[\", \"\\\\[\");\n    }\n    /**@prop {function} - return log message*/\n\n  }]);\n\n  return RdQaLog;\n}();\n\n_defineProperty(RdQaLog, \"logValueSeparator\", \"|||\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9saWIvUmRRYUxvZy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2xpYi9SZFFhTG9nLmpzP2VhNWUiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7Z2V0TWF0Y2hlcywgZ2V0RnVuY3Rpb25QYXJhbWV0ZXJzfSBmcm9tICcuL2RhdGFLaXRzLmpzJ1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBhc3NlcnRUaXRsZSA9ICdhc3NlcnRMb2c6J1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGl0bGUobWRJRCwgYXJndW1lbnRzX2NhbGxlZV9uYW1lKXtcclxuICAgIHJldHVybiBgJHthc3NlcnRUaXRsZX1bJHttZElEfS0ke2FyZ3VtZW50c19jYWxsZWVfbmFtZX1dYFxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmV4cG9ydCBjb25zdCBFTlVNX21kSWQgPSB7XHJcbiAgICBmb3JUZXN0OlwiZm9yVGVzdFwiLFxyXG4gICAgVDE6XCJUMVwiLFxyXG4gICAgaW5kZXg6XCJpbmRleFwiLFxyXG4gICAgY3VzTW9kYWxMb2dpbjpcImN1c01vZGFsTG9naW5cIixcclxuICAgIGN1c01vZGFsVXNlclByb2ZpbGU6XCJjdXNNb2RhbFVzZXJQcm9maWxlXCIsXHJcbiAgICBQcm9kdWN0TGlzdFNlYXJjaDpcIlByb2R1Y3RMaXN0U2VhcmNoXCIsXHJcbiAgICBTaG9wQ2FydDpcIlNob3BDYXJ0XCIsXHJcbiAgICBTaG9wSXRlbTpcIlNob3BJdGVtXCIsXHJcbiAgICBJbnZvaWNlOlwiSW52b2ljZVwiLFxyXG4gICAgUHJvZHVjdENhcmQ6XCJQcm9kdWN0Q2FyZFwiLFxyXG4gICAgUG9wSW52b2ljZTpcIlBvcEludm9pY2VcIixcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmRRYUxvZ3tcclxuICAgIGNvbnN0cnVjdG9yKG1kSUQpe1xyXG4gICAgICAgIHRoaXMubWRJRCA9IG1kSUQ7XHJcbiAgICB9XHJcbiAgICBtZElEPVwiXCJcclxuICAgIG5hbWU9XCJcIlxyXG4gICAgc3RhdGljIGxvZ1ZhbHVlU2VwYXJhdG9yID0gXCJ8fHxcIlxyXG4gICAgZ2V0IHByZWZpeCgpe1xyXG4gICAgICAgIHJldHVybiBnZXRUaXRsZSh0aGlzLm1kSUQsIHRoaXMubmFtZSk7XHJcbiAgICB9XHJcbiAgICBnZXQgX3ByZWZpeF9tYXRjaFBhdHRlcm4oKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcmVmaXgucmVwbGFjZShgXWAsYFxcXFxdYCkucmVwbGFjZShgW2AsYFxcXFxbYCk7XHJcbiAgICB9XHJcbiAgICAvKipAcHJvcCB7ZnVuY3Rpb259IC0gcmV0dXJuIGxvZyBtZXNzYWdlKi9cclxuICAgIGxvZz1udWxsO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gLSBkZWZpbmUgbG9nIGZ1bmN0aW9uIChyZXR1cm4gbG9nIG1lc3NhZ2UpXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBsb2cgXHJcbiAgICAgKi9cclxuICAgIHNldExvZ0Z1bmN0aW9uKGxvZyl7XHJcbiAgICAgICAgdGhpcy5sb2cgPSBsb2c7Ly8uYmluZCh0aGlzKVxyXG4gICAgfVxyXG4gICAgLy8gbG9nKGlzU3VjY2Vzcyl7XHJcbiAgICAvLyAgICAgcmV0dXJuIGAke3RoaXMucHJlZml4fX0ke2lzU3VjY2Vzc31gXHJcbiAgICAvLyB9XHJcbiAgICBfZ2V0TG9nQXJndW1lbnROYW1lcygpe1xyXG4gICAgICAgIGlmKHRoaXMubG9nPT09bnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIFJkUWFMb2cubG9nKGZ1bmN0aW9uKSBmaXJzdCEnKVxyXG4gICAgICAgIHJldHVybiBnZXRGdW5jdGlvblBhcmFtZXRlcnModGhpcy5sb2cpXHJcbiAgICB9XHJcbiAgICBtYXRjaFBhdHRlcm4oKXtcclxuICAgICAgICBpZih0aGlzLmxvZz09PW51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGRlZmluZSBSZFFhTG9nLmxvZyhmdW5jdGlvbikgZmlyc3QhJylcclxuICAgICAgICAvL2xldCBuZXdQcmVmaXggPSB0aGlzLnByZWZpeC5yZXBsYWNlKGBdYCxgXFxcXF1gKS5yZXBsYWNlKGBbYCxgXFxcXFtgKVxyXG4gICAgICAgIGxldCBsb2dBcmd1bWVudE5hbWVzID0gdGhpcy5fZ2V0TG9nQXJndW1lbnROYW1lcygpXHJcbiAgICAgICAgbGV0IGxvZ0FyZ3VtZW50Q291bnQgPSBsb2dBcmd1bWVudE5hbWVzLmxlbmd0aFxyXG4gICAgICAgIGxldCBwYXRfbWF0Y2hWYWx1ZV9hbGwgPSBgJHt0aGlzLl9wcmVmaXhfbWF0Y2hQYXR0ZXJufSg/PG1hdGNoVmFsdWU+LiopYFxyXG4gICAgICAgIGlmKGxvZ0FyZ3VtZW50Q291bnQ8PTEpXHJcbiAgICAgICAgICAgIHJldHVybiBwYXRfbWF0Y2hWYWx1ZV9hbGxcclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBsZXQgcGF0X21hdGNoVmFsdWUgPSBcIig/PG1hdGNoVmFsdWU+LiopXCJcclxuICAgICAgICAgICAgLy8gbGV0IHBhdF9tYXRjaFZhbHVlX2FsbCA9IFwiKD88bWF0Y2hWYWx1ZT4uKilcIlxyXG4gICAgICAgICAgICBmb3IobGV0IGk9MTtpPGxvZ0FyZ3VtZW50Q291bnQ7aSsrKXtcclxuICAgICAgICAgICAgICAgIHBhdF9tYXRjaFZhbHVlID0gYCg/PG1hdGNoVmFsdWUke2krMX0+LiopYFxyXG4gICAgICAgICAgICAgICAgcGF0X21hdGNoVmFsdWVfYWxsKz1gJHtSZFFhTG9nLmxvZ1ZhbHVlU2VwYXJhdG9yfSR7cGF0X21hdGNoVmFsdWV9YFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRfbWF0Y2hWYWx1ZV9hbGxcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipAcmV0dXJucyB7YW55W119Ki9cclxuICAgIGdldE1hdGNoVmFsdWVzKGNvbnRlbnQpe1xyXG4gICAgICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKHRoaXMubWF0Y2hQYXR0ZXJuKCksIFwiZ1wiKVxyXG4gICAgICAgIGxldCBydG4gPSBnZXRNYXRjaGVzKGNvbnRlbnQsIHJlZylcclxuICAgICAgICByZXR1cm4gcnRuXHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQS9DQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQWRBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/lib/RdQaLog.js\n");

/***/ }),

/***/ "./js/lib/dataKits.js":
/*!****************************!*\
  !*** ./js/lib/dataKits.js ***!
  \****************************/
/*! namespace exports */
/*! export ENUM_TypeOf [provided] [no usage info] [missing usage info prevents renaming] */
/*! export TypeOf [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getFunctionParameters [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getMatches [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getPlainObject [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getRandomString [provided] [no usage info] [missing usage info prevents renaming] */
/*! export recursiveToPlainObject [provided] [no usage info] [missing usage info prevents renaming] */
/*! export sleep [provided] [no usage info] [missing usage info prevents renaming] */
/*! export waitUntil [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ENUM_TypeOf\": () => /* binding */ ENUM_TypeOf,\n/* harmony export */   \"TypeOf\": () => /* binding */ TypeOf,\n/* harmony export */   \"getPlainObject\": () => /* binding */ getPlainObject,\n/* harmony export */   \"recursiveToPlainObject\": () => /* binding */ recursiveToPlainObject,\n/* harmony export */   \"getRandomString\": () => /* binding */ getRandomString,\n/* harmony export */   \"getMatches\": () => /* binding */ getMatches,\n/* harmony export */   \"getFunctionParameters\": () => /* binding */ getFunctionParameters,\n/* harmony export */   \"sleep\": () => /* binding */ sleep,\n/* harmony export */   \"waitUntil\": () => /* binding */ waitUntil\n/* harmony export */ });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar TYPE = {\n  number: Symbol('數字'),\n  string: Symbol('文字'),\n  \"boolean\": Symbol('真假'),\n  object: Symbol('純物件'),\n  array: Symbol('陣列'),\n  undefined: Symbol('未定義'),\n  \"null\": Symbol('空值'),\n  \"function\": Symbol('函數'),\n  NaN: Symbol('空數字'),\n  symbol: Symbol('標識符'),\n  error: Symbol('未找到type定義')\n};\nvar ENUM_TypeOf = {\n  array: 'array',\n  \"null\": 'null',\n  objectClass: 'objectClass',\n  objectPlain: 'objectPlain',\n  RegExp: 'RegExp',\n  Date: 'Date',\n  numberNaN: 'numberNaN',\n  \"function\": 'function',\n  number: 'number' // defaltTypes/others\n\n};\nfunction TypeOf(in_Object) {\n  if (_typeof(in_Object) === 'object') {\n    //[object Object]\n    //[object Array]\n    if (Array.isArray(in_Object)) {\n      return ENUM_TypeOf.array;\n    } else if (in_Object === null) {\n      return ENUM_TypeOf[\"null\"];\n    } else if (Object.prototype.toString.call(in_Object) === '[object Object]') {\n      //(variable1.constructor.prototype instanceof Object)//class == true, object == false\n      var objectType = in_Object.constructor.prototype instanceof Object ? ENUM_TypeOf.objectClass : ENUM_TypeOf.objectPlain;\n      return objectType; //return 'object';\n    } else if (Object.prototype.toString.call(in_Object) === '[object RegExp]') {\n      return ENUM_TypeOf.RegExp;\n    } else if (Object.prototype.toString.call(in_Object) === '[object Date]') {\n      return ENUM_TypeOf.Date;\n    } else return Object.prototype.toString.call(in_Object); //'not find type of object';\n\n  } else if (typeof in_Object === 'number') {\n    if (isNaN(in_Object)) {\n      return ENUM_TypeOf.numberNaN;\n    } else return ENUM_TypeOf.number;\n  } else if (typeof in_Object === 'function') {\n    return ENUM_TypeOf[\"function\"];\n  } else return _typeof(in_Object);\n}\n\nfunction CheckVarExist(in_Object) {\n  if (typeof in_Object === 'undefined') return false;else if (_typeof(in_Object) === ( true ? \"undefined\" : 0)) return false;else return true; //window.hasOwnProperty\n  // if (in_Object)..................\n  // 1.undefined: if the value is not defined and it's undefined\n  // 2.null: if it's null, for example, if a DOM element not exists...\n  // 3.empty string: ''\n  // 4.0: number zero\n  // 5.NaN: not a number\n  // 6.false\n  //看下圖\n  //2020-01-11-14-11-32.png\n}\n\nfunction isDate(value) {\n  switch (_typeof(value)) {\n    case 'number':\n      return true;\n\n    case 'string':\n      return !isNaN(Date.parse(value));\n\n    case 'object':\n      if (value instanceof Date) {\n        return !isNaN(value.getTime());\n      }\n\n    default:\n      return false;\n  }\n} // export {\n//     TypeOf\n// }\n//------------------------------\n// document.addEventListener('scroll', (params) => {\n//     // console.log(1)\n//     //isScrolledIntoView(elDiv)\n//     let result = isScrolledIntoView(elDiv)\n//     console.log(result)\n// })\n\n\nfunction isScrolledIntoView(el) {\n  //https://stackoverflow.com/questions/21561480/trigger-event-when-user-scroll-to-specific-element-with-jquery\n  //https://stackoverflow.com/questions/487073/how-to-check-if-element-is-visible-after-scrolling\n  // check for 75% visible\n  var percentVisible = 0.75;\n  var elemTop = el.getBoundingClientRect().top;\n  var elemBottom = el.getBoundingClientRect().bottom;\n  var elemHeight = el.getBoundingClientRect().height;\n  var overhang = elemHeight * (1 - percentVisible);\n  var isVisible = elemTop >= -overhang && elemBottom <= window.innerHeight + overhang;\n  return isVisible;\n}\n\nfunction getDateTimeFormat() {\n  var nn = new Date();\n  console.log(nn.toLocaleDateString()); // const ye = new Intl.DateTimeFormat('en', { year: 'numeric' }).format(nn)\n  // console.log(ye)\n\n  var d = new Date('2010-08-05');\n  var ye = new Intl.DateTimeFormat('en', {\n    year: 'numeric'\n  }).format(d);\n  var mo = new Intl.DateTimeFormat('en', {\n    month: '2-digit'\n  }).format(d);\n  var da = new Intl.DateTimeFormat('en', {\n    day: '2-digit'\n  }).format(d);\n  console.log(\"\".concat(da, \"-\").concat(mo, \"-\").concat(ye));\n  var options = {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit'\n  };\n  console.log(nn.toLocaleDateString('en-US', options));\n  console.log(new Intl.DateTimeFormat('en-US', {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric'\n  }).format(nn));\n}\n\nfunction converter_objectPlain(propValue) {\n  //let value = target[prop];\n  if (TypeOf(propValue) == ENUM_TypeOf.objectClass) propValue = Object.assign({}, propValue);\n}\n\nfunction objectMapValue(objValue) {\n  return Object.assign({}, objValue);\n}\n/**\r\n * \r\n * @param {object} rootNode \r\n * @returns {object} - type is objectPlain\r\n */\n\n\nfunction getPlainObject(rootNode) {\n  recursiveToPlainObject(rootNode); //process all children\n  //process rootNode then return\n\n  if (TypeOf(rootNode) == ENUM_TypeOf.objectClass) rootNode = Object.assign({}, rootNode);\n  return rootNode; //plain object\n}\nfunction recursiveToPlainObject(leafNode) {\n  //search object props\n  //let keys = Object.getOwnPropertyNames(leafNode)// leafNode prop names [Array]\n  for (var keyName in leafNode) {\n    var value = leafNode[keyName];\n\n    if (TypeOf(value) == ENUM_TypeOf.objectClass || TypeOf(value) == ENUM_TypeOf.objectPlain) {\n      recursiveToPlainObject(value); //if(converter) converter(leafNode[keyName]);\n\n      if (TypeOf(value) == ENUM_TypeOf.objectClass) leafNode[keyName] = objectMapValue(value); //Object.assign({},value)\n    } else if (TypeOf(value) == ENUM_TypeOf.array) {\n      for (var i = 0; i < value.length; i++) {\n        var item = value[i];\n\n        if (TypeOf(item) == ENUM_TypeOf.objectClass || TypeOf(item) == ENUM_TypeOf.objectPlain) {\n          recursiveToPlainObject(item); //if(converter) converter(value[i]);\n\n          if (TypeOf(item) == ENUM_TypeOf.objectClass) value[i] = objectMapValue(item); //Object.assign({},item)\n        }\n      } // value.forEach((item) => {\n      //     // else if (TypeOf(item) == ENUM_TypeOf.function) {\n      //     //     delete leafNode[keyName]\n      //     // }\n      //     //recursiveToPlainObject(item)\n      // })\n\n    } else if (TypeOf(value) == ENUM_TypeOf[\"function\"]) {\n      delete leafNode[keyName];\n    }\n  } //done leafNode tasks\n  // leafNode.HH = 555\n\n} //module.exports = TypeOf;\n// module.exports = {\n//     ENUM_TypeOf,\n//     TypeOf\n//     // getDateTimeFormat,\n//     // isScrolledIntoView,\n//     // isDate,\n//     // CheckVarExist\n// }\n\nfunction getRandomString(charCount) {\n  var uuid = Math.random().toString(36).substring(2, 2 + charCount); // 36 carry bit, ignore '0.', get 8 char\n\n  return uuid;\n}\nfunction getMatches(content, regex) {\n  var matches = [];\n  var match;\n  var iTotalMatch = 0; // af=1fdsf1\n\n  var iOnlyVar = 1; //fdsf\n\n  var displayIndex = iOnlyVar;\n\n  while (match = regex.exec(content)) {\n    matches.push(match[displayIndex]);\n  }\n\n  return matches;\n}\nfunction getFunctionParameters(func) {\n  var funcString = func.toString(); //'function cc(a1, a2) {}'\n  //console.log(\"LOG: ~ file: dataKits.js ~ line 238 ~ getFunctionParameters ~ funcString\", funcString)\n\n  var pattern = 'function.*\\\\((?<name>.[^\\\\(]*)\\\\).*'; //reg = new RegExp(\"af=1(?<name>.[^1]*)1\", \"g\")\n\n  var reg = new RegExp(pattern, 'g');\n  var matches = getMatches(funcString, reg); // possible is (p1, p2) => {...}\n\n  if (matches.length === 0) {\n    pattern = '.*\\\\((?<name>.[^\\\\(]*)\\\\).*=>.*';\n    reg = new RegExp(pattern, 'g');\n    matches = getMatches(funcString, reg);\n  }\n\n  if (matches.length === 0) return [];else {\n    var parameters = matches[0].split(',');\n    parameters = parameters.map(function (item) {\n      return item.trim();\n    });\n    return parameters;\n  }\n}\nfunction sleep(_x) {\n  return _sleep.apply(this, arguments);\n}\n/**\r\n * \r\n * @param {any} pmsMethod - (param is Promise method) return null means keep waiting...\r\n * @param {number} timeout - 5000 = 5 seconds\r\n * @param {number} interval - 500 = 0.5 seconds\r\n */\n\nfunction _sleep() {\n  _sleep = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(interval) {\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(resolve) {\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return setTimeout(function () {\n                          //console.log(`sleep(${interval})....`)\n                          resolve();\n                        }, interval);\n\n                      case 2:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x5) {\n                return _ref.apply(this, arguments);\n              };\n            }()));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _sleep.apply(this, arguments);\n}\n\nfunction waitUntil(_x2, _x3, _x4) {\n  return _waitUntil.apply(this, arguments);\n}\n\nfunction _waitUntil() {\n  _waitUntil = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(pmsMethod, timeout, interval) {\n    var times, i, result;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            console.log(\"LOG: ~ file: dataKits.js ~ line 271 ~ waitUntil ~ pmsMethod\", pmsMethod);\n            times = Math.ceil(timeout / interval);\n            i = 0;\n\n          case 3:\n            if (!(i < times)) {\n              _context3.next = 17;\n              break;\n            }\n\n            console.log('i-->', i);\n            _context3.next = 7;\n            return pmsMethod();\n\n          case 7:\n            result = _context3.sent;\n\n            if (!(result !== null)) {\n              _context3.next = 12;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", result);\n\n          case 12:\n            _context3.next = 14;\n            return sleep(interval);\n\n          case 14:\n            i++;\n            _context3.next = 3;\n            break;\n\n          case 17:\n            return _context3.abrupt(\"return\", null);\n\n          case 18:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _waitUntil.apply(this, arguments);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9saWIvZGF0YUtpdHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9saWIvZGF0YUtpdHMuanM/Y2RmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVFlQRSA9IHtcclxuICAgIG51bWJlcjogU3ltYm9sKCfmlbjlrZcnKSxcclxuICAgIHN0cmluZzogU3ltYm9sKCfmloflrZcnKSxcclxuICAgIGJvb2xlYW46IFN5bWJvbCgn55yf5YGHJyksXHJcbiAgICBvYmplY3Q6IFN5bWJvbCgn57SU54mp5Lu2JyksXHJcbiAgICBhcnJheTogU3ltYm9sKCfpmaPliJcnKSxcclxuICAgIHVuZGVmaW5lZDogU3ltYm9sKCfmnKrlrprnvqknKSxcclxuICAgIG51bGw6IFN5bWJvbCgn56m65YC8JyksXHJcbiAgICBmdW5jdGlvbjogU3ltYm9sKCflh73mlbgnKSxcclxuICAgIE5hTjogU3ltYm9sKCfnqbrmlbjlrZcnKSxcclxuICAgIHN5bWJvbDogU3ltYm9sKCfmqJnorZjnrKYnKSxcclxuICAgIGVycm9yOiBTeW1ib2woJ+acquaJvuWIsHR5cGXlrprnvqknKVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IEVOVU1fVHlwZU9mID0ge1xyXG4gICAgYXJyYXk6ICdhcnJheScsXHJcbiAgICBudWxsOiAnbnVsbCcsXHJcbiAgICBvYmplY3RDbGFzczogJ29iamVjdENsYXNzJyxcclxuICAgIG9iamVjdFBsYWluOiAnb2JqZWN0UGxhaW4nLFxyXG4gICAgUmVnRXhwOiAnUmVnRXhwJyxcclxuICAgIERhdGU6ICdEYXRlJyxcclxuICAgIG51bWJlck5hTjogJ251bWJlck5hTicsXHJcbiAgICBmdW5jdGlvbjogJ2Z1bmN0aW9uJyxcclxuICAgIG51bWJlcjogJ251bWJlcicsIC8vIGRlZmFsdFR5cGVzL290aGVyc1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBUeXBlT2YoaW5fT2JqZWN0KSB7XHJcbiAgICBpZiAodHlwZW9mIGluX09iamVjdCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAvL1tvYmplY3QgT2JqZWN0XVxyXG4gICAgICAgIC8vW29iamVjdCBBcnJheV1cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbl9PYmplY3QpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFTlVNX1R5cGVPZi5hcnJheVxyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5fT2JqZWN0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFTlVNX1R5cGVPZi5udWxsXHJcbiAgICAgICAgfSBlbHNlIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5fT2JqZWN0KSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcclxuICAgICAgICAgICAgLy8odmFyaWFibGUxLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBpbnN0YW5jZW9mIE9iamVjdCkvL2NsYXNzID09IHRydWUsIG9iamVjdCA9PSBmYWxzZVxyXG4gICAgICAgICAgICBsZXQgb2JqZWN0VHlwZSA9IChpbl9PYmplY3QuY29uc3RydWN0b3IucHJvdG90eXBlIGluc3RhbmNlb2YgT2JqZWN0KSA/XHJcbiAgICAgICAgICAgICAgICBFTlVNX1R5cGVPZi5vYmplY3RDbGFzcyA6XHJcbiAgICAgICAgICAgICAgICBFTlVNX1R5cGVPZi5vYmplY3RQbGFpbjtcclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdFR5cGU7XHJcbiAgICAgICAgICAgIC8vcmV0dXJuICdvYmplY3QnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGluX09iamVjdCkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFTlVNX1R5cGVPZi5SZWdFeHA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5fT2JqZWN0KSA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFTlVNX1R5cGVPZi5EYXRlO1xyXG4gICAgICAgIH0gZWxzZSByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGluX09iamVjdCk7IC8vJ25vdCBmaW5kIHR5cGUgb2Ygb2JqZWN0JztcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGluX09iamVjdCA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICBpZiAoaXNOYU4oaW5fT2JqZWN0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gRU5VTV9UeXBlT2YubnVtYmVyTmFOXHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBFTlVNX1R5cGVPZi5udW1iZXJcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGluX09iamVjdCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHJldHVybiBFTlVNX1R5cGVPZi5mdW5jdGlvblxyXG4gICAgfSBlbHNlXHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbl9PYmplY3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIENoZWNrVmFyRXhpc3QoaW5fT2JqZWN0KSB7XHJcbiAgICBpZiAodHlwZW9mIGluX09iamVjdCA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgZWxzZSBpZiAodHlwZW9mIGluX09iamVjdCA9PT0gdHlwZW9mIHVuZGVmaW5lZClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAvL3dpbmRvdy5oYXNPd25Qcm9wZXJ0eVxyXG4gICAgLy8gaWYgKGluX09iamVjdCkuLi4uLi4uLi4uLi4uLi4uLi5cclxuICAgIC8vIDEudW5kZWZpbmVkOiBpZiB0aGUgdmFsdWUgaXMgbm90IGRlZmluZWQgYW5kIGl0J3MgdW5kZWZpbmVkXHJcbiAgICAvLyAyLm51bGw6IGlmIGl0J3MgbnVsbCwgZm9yIGV4YW1wbGUsIGlmIGEgRE9NIGVsZW1lbnQgbm90IGV4aXN0cy4uLlxyXG4gICAgLy8gMy5lbXB0eSBzdHJpbmc6ICcnXHJcbiAgICAvLyA0LjA6IG51bWJlciB6ZXJvXHJcbiAgICAvLyA1Lk5hTjogbm90IGEgbnVtYmVyXHJcbiAgICAvLyA2LmZhbHNlXHJcbiAgICAvL+eci+S4i+WcllxyXG4gICAgLy8yMDIwLTAxLTExLTE0LTExLTMyLnBuZ1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcclxuICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XHJcbiAgICAgICAgY2FzZSAnbnVtYmVyJzpcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcclxuICAgICAgICAgICAgcmV0dXJuICFpc05hTihEYXRlLnBhcnNlKHZhbHVlKSk7XHJcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFpc05hTih2YWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLy8gZXhwb3J0IHtcclxuLy8gICAgIFR5cGVPZlxyXG4vLyB9XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAocGFyYW1zKSA9PiB7XHJcbi8vICAgICAvLyBjb25zb2xlLmxvZygxKVxyXG4vLyAgICAgLy9pc1Njcm9sbGVkSW50b1ZpZXcoZWxEaXYpXHJcbi8vICAgICBsZXQgcmVzdWx0ID0gaXNTY3JvbGxlZEludG9WaWV3KGVsRGl2KVxyXG4vLyAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4vLyB9KVxyXG5cclxuZnVuY3Rpb24gaXNTY3JvbGxlZEludG9WaWV3KGVsKSB7XHJcbiAgICAvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIxNTYxNDgwL3RyaWdnZXItZXZlbnQtd2hlbi11c2VyLXNjcm9sbC10by1zcGVjaWZpYy1lbGVtZW50LXdpdGgtanF1ZXJ5XHJcbiAgICAvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ4NzA3My9ob3ctdG8tY2hlY2staWYtZWxlbWVudC1pcy12aXNpYmxlLWFmdGVyLXNjcm9sbGluZ1xyXG4gICAgLy8gY2hlY2sgZm9yIDc1JSB2aXNpYmxlXHJcbiAgICB2YXIgcGVyY2VudFZpc2libGUgPSAwLjc1O1xyXG4gICAgdmFyIGVsZW1Ub3AgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcblxyXG4gICAgdmFyIGVsZW1Cb3R0b20gPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b207XHJcbiAgICB2YXIgZWxlbUhlaWdodCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgIHZhciBvdmVyaGFuZyA9IGVsZW1IZWlnaHQgKiAoMSAtIHBlcmNlbnRWaXNpYmxlKTtcclxuXHJcbiAgICB2YXIgaXNWaXNpYmxlID0gKGVsZW1Ub3AgPj0gLW92ZXJoYW5nKSAmJiAoZWxlbUJvdHRvbSA8PSB3aW5kb3cuaW5uZXJIZWlnaHQgKyBvdmVyaGFuZyk7XHJcbiAgICByZXR1cm4gaXNWaXNpYmxlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXREYXRlVGltZUZvcm1hdCgpIHtcclxuICAgIGxldCBubiA9IG5ldyBEYXRlKClcclxuICAgIGNvbnNvbGUubG9nKG5uLnRvTG9jYWxlRGF0ZVN0cmluZygpKVxyXG5cclxuICAgIC8vIGNvbnN0IHllID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuJywgeyB5ZWFyOiAnbnVtZXJpYycgfSkuZm9ybWF0KG5uKVxyXG4gICAgLy8gY29uc29sZS5sb2coeWUpXHJcblxyXG4gICAgY29uc3QgZCA9IG5ldyBEYXRlKCcyMDEwLTA4LTA1JylcclxuICAgIGNvbnN0IHllID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuJywge1xyXG4gICAgICAgIHllYXI6ICdudW1lcmljJ1xyXG4gICAgfSkuZm9ybWF0KGQpXHJcbiAgICBjb25zdCBtbyA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbicsIHtcclxuICAgICAgICBtb250aDogJzItZGlnaXQnXHJcbiAgICB9KS5mb3JtYXQoZClcclxuICAgIGNvbnN0IGRhID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuJywge1xyXG4gICAgICAgIGRheTogJzItZGlnaXQnXHJcbiAgICB9KS5mb3JtYXQoZClcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgJHtkYX0tJHttb30tJHt5ZX1gKVxyXG5cclxuICAgIGxldCBvcHRpb25zID0ge1xyXG4gICAgICAgIHllYXI6ICdudW1lcmljJyxcclxuICAgICAgICBtb250aDogJzItZGlnaXQnLFxyXG4gICAgICAgIGRheTogJzItZGlnaXQnLFxyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2cobm4udG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIG9wdGlvbnMpKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tVVMnLCB7XHJcbiAgICAgICAgeWVhcjogJ251bWVyaWMnLFxyXG4gICAgICAgIG1vbnRoOiAnbnVtZXJpYycsXHJcbiAgICAgICAgZGF5OiAnbnVtZXJpYydcclxuICAgIH0pLmZvcm1hdChubikpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbnZlcnRlcl9vYmplY3RQbGFpbihwcm9wVmFsdWUpIHtcclxuICAgIC8vbGV0IHZhbHVlID0gdGFyZ2V0W3Byb3BdO1xyXG4gICAgaWYgKFR5cGVPZihwcm9wVmFsdWUpID09IEVOVU1fVHlwZU9mLm9iamVjdENsYXNzKVxyXG4gICAgICAgIHByb3BWYWx1ZSA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BWYWx1ZSlcclxufVxyXG5cclxuZnVuY3Rpb24gb2JqZWN0TWFwVmFsdWUob2JqVmFsdWUpIHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBvYmpWYWx1ZSlcclxufVxyXG5cclxuLyoqXHJcbiAqIFxyXG4gKiBAcGFyYW0ge29iamVjdH0gcm9vdE5vZGUgXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IC0gdHlwZSBpcyBvYmplY3RQbGFpblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBsYWluT2JqZWN0KHJvb3ROb2RlKSB7XHJcbiAgICByZWN1cnNpdmVUb1BsYWluT2JqZWN0KHJvb3ROb2RlKSAvL3Byb2Nlc3MgYWxsIGNoaWxkcmVuXHJcbiAgICAvL3Byb2Nlc3Mgcm9vdE5vZGUgdGhlbiByZXR1cm5cclxuICAgIGlmIChUeXBlT2Yocm9vdE5vZGUpID09IEVOVU1fVHlwZU9mLm9iamVjdENsYXNzKVxyXG4gICAgICAgIHJvb3ROb2RlID0gT2JqZWN0LmFzc2lnbih7fSwgcm9vdE5vZGUpXHJcbiAgICByZXR1cm4gcm9vdE5vZGUgLy9wbGFpbiBvYmplY3RcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gcmVjdXJzaXZlVG9QbGFpbk9iamVjdChsZWFmTm9kZSkge1xyXG4gICAgLy9zZWFyY2ggb2JqZWN0IHByb3BzXHJcbiAgICAvL2xldCBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobGVhZk5vZGUpLy8gbGVhZk5vZGUgcHJvcCBuYW1lcyBbQXJyYXldXHJcbiAgICBmb3IgKGxldCBrZXlOYW1lIGluIGxlYWZOb2RlKSB7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gbGVhZk5vZGVba2V5TmFtZV1cclxuICAgICAgICBpZiAoVHlwZU9mKHZhbHVlKSA9PSBFTlVNX1R5cGVPZi5vYmplY3RDbGFzcyB8fFxyXG4gICAgICAgICAgICBUeXBlT2YodmFsdWUpID09IEVOVU1fVHlwZU9mLm9iamVjdFBsYWluKSB7XHJcbiAgICAgICAgICAgIHJlY3Vyc2l2ZVRvUGxhaW5PYmplY3QodmFsdWUpXHJcbiAgICAgICAgICAgIC8vaWYoY29udmVydGVyKSBjb252ZXJ0ZXIobGVhZk5vZGVba2V5TmFtZV0pO1xyXG4gICAgICAgICAgICBpZiAoVHlwZU9mKHZhbHVlKSA9PSBFTlVNX1R5cGVPZi5vYmplY3RDbGFzcylcclxuICAgICAgICAgICAgICAgIGxlYWZOb2RlW2tleU5hbWVdID0gb2JqZWN0TWFwVmFsdWUodmFsdWUpIC8vT2JqZWN0LmFzc2lnbih7fSx2YWx1ZSlcclxuICAgICAgICB9IGVsc2UgaWYgKFR5cGVPZih2YWx1ZSkgPT0gRU5VTV9UeXBlT2YuYXJyYXkpIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gdmFsdWVbaV1cclxuICAgICAgICAgICAgICAgIGlmIChUeXBlT2YoaXRlbSkgPT0gRU5VTV9UeXBlT2Yub2JqZWN0Q2xhc3MgfHxcclxuICAgICAgICAgICAgICAgICAgICBUeXBlT2YoaXRlbSkgPT0gRU5VTV9UeXBlT2Yub2JqZWN0UGxhaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVUb1BsYWluT2JqZWN0KGl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy9pZihjb252ZXJ0ZXIpIGNvbnZlcnRlcih2YWx1ZVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGVPZihpdGVtKSA9PSBFTlVNX1R5cGVPZi5vYmplY3RDbGFzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbaV0gPSBvYmplY3RNYXBWYWx1ZShpdGVtKSAvL09iamVjdC5hc3NpZ24oe30saXRlbSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB2YWx1ZS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAvLyAgICAgLy8gZWxzZSBpZiAoVHlwZU9mKGl0ZW0pID09IEVOVU1fVHlwZU9mLmZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAvLyAgICAgZGVsZXRlIGxlYWZOb2RlW2tleU5hbWVdXHJcbiAgICAgICAgICAgIC8vICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vICAgICAvL3JlY3Vyc2l2ZVRvUGxhaW5PYmplY3QoaXRlbSlcclxuICAgICAgICAgICAgLy8gfSlcclxuICAgICAgICB9IGVsc2UgaWYgKFR5cGVPZih2YWx1ZSkgPT0gRU5VTV9UeXBlT2YuZnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgZGVsZXRlIGxlYWZOb2RlW2tleU5hbWVdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9kb25lIGxlYWZOb2RlIHRhc2tzXHJcbiAgICAvLyBsZWFmTm9kZS5ISCA9IDU1NVxyXG59XHJcbi8vbW9kdWxlLmV4cG9ydHMgPSBUeXBlT2Y7XHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHtcclxuLy8gICAgIEVOVU1fVHlwZU9mLFxyXG4vLyAgICAgVHlwZU9mXHJcbi8vICAgICAvLyBnZXREYXRlVGltZUZvcm1hdCxcclxuLy8gICAgIC8vIGlzU2Nyb2xsZWRJbnRvVmlldyxcclxuLy8gICAgIC8vIGlzRGF0ZSxcclxuLy8gICAgIC8vIENoZWNrVmFyRXhpc3RcclxuLy8gfVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tU3RyaW5nKGNoYXJDb3VudCkge1xyXG4gICAgbGV0IHV1aWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMiArIGNoYXJDb3VudCkgLy8gMzYgY2FycnkgYml0LCBpZ25vcmUgJzAuJywgZ2V0IDggY2hhclxyXG4gICAgcmV0dXJuIHV1aWRcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF0Y2hlcyhjb250ZW50LCByZWdleCkge1xyXG4gICAgdmFyIG1hdGNoZXMgPSBbXTtcclxuICAgIHZhciBtYXRjaDtcclxuICAgIGxldCBpVG90YWxNYXRjaCA9IDAgLy8gYWY9MWZkc2YxXHJcbiAgICBsZXQgaU9ubHlWYXIgPSAxIC8vZmRzZlxyXG4gICAgbGV0IGRpc3BsYXlJbmRleCA9IGlPbmx5VmFyXHJcbiAgICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKGNvbnRlbnQpKSB7XHJcbiAgICAgICAgbWF0Y2hlcy5wdXNoKG1hdGNoW2Rpc3BsYXlJbmRleF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hdGNoZXM7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZ1bmN0aW9uUGFyYW1ldGVycyhmdW5jKSB7XHJcbiAgICBsZXQgZnVuY1N0cmluZyA9IGZ1bmMudG9TdHJpbmcoKTsvLydmdW5jdGlvbiBjYyhhMSwgYTIpIHt9J1xyXG4gICAgLy9jb25zb2xlLmxvZyhcIkxPRzogfiBmaWxlOiBkYXRhS2l0cy5qcyB+IGxpbmUgMjM4IH4gZ2V0RnVuY3Rpb25QYXJhbWV0ZXJzIH4gZnVuY1N0cmluZ1wiLCBmdW5jU3RyaW5nKVxyXG4gICAgbGV0IHBhdHRlcm4gPSAnZnVuY3Rpb24uKlxcXFwoKD88bmFtZT4uW15cXFxcKF0qKVxcXFwpLionXHJcbiAgICAvL3JlZyA9IG5ldyBSZWdFeHAoXCJhZj0xKD88bmFtZT4uW14xXSopMVwiLCBcImdcIilcclxuICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKHBhdHRlcm4sICdnJylcclxuXHJcbiAgICBsZXQgbWF0Y2hlcyA9IGdldE1hdGNoZXMoZnVuY1N0cmluZywgcmVnKVxyXG4gICAgLy8gcG9zc2libGUgaXMgKHAxLCBwMikgPT4gey4uLn1cclxuICAgIGlmKG1hdGNoZXMubGVuZ3RoPT09MCl7XHJcbiAgICAgICAgcGF0dGVybiA9ICcuKlxcXFwoKD88bmFtZT4uW15cXFxcKF0qKVxcXFwpLio9Pi4qJ1xyXG4gICAgICAgIHJlZyA9IG5ldyBSZWdFeHAocGF0dGVybiwgJ2cnKVxyXG4gICAgICAgIG1hdGNoZXMgPSBnZXRNYXRjaGVzKGZ1bmNTdHJpbmcsIHJlZylcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYobWF0Y2hlcy5sZW5ndGg9PT0wKVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIGVsc2V7XHJcbiAgICAgICAgbGV0IHBhcmFtZXRlcnMgPSBtYXRjaGVzWzBdLnNwbGl0KCcsJylcclxuICAgICAgICBwYXJhbWV0ZXJzID0gcGFyYW1ldGVycy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udHJpbSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnNcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNsZWVwKGludGVydmFsKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcclxuICAgICAgICBhd2FpdCBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgc2xlZXAoJHtpbnRlcnZhbH0pLi4uLmApXHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9LCBpbnRlcnZhbCk7XHJcbiAgICB9KVxyXG59XHJcbi8qKlxyXG4gKiBcclxuICogQHBhcmFtIHthbnl9IHBtc01ldGhvZCAtIChwYXJhbSBpcyBQcm9taXNlIG1ldGhvZCkgcmV0dXJuIG51bGwgbWVhbnMga2VlcCB3YWl0aW5nLi4uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IC0gNTAwMCA9IDUgc2Vjb25kc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gaW50ZXJ2YWwgLSA1MDAgPSAwLjUgc2Vjb25kc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRVbnRpbChwbXNNZXRob2QsIHRpbWVvdXQsIGludGVydmFsKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkxPRzogfiBmaWxlOiBkYXRhS2l0cy5qcyB+IGxpbmUgMjcxIH4gd2FpdFVudGlsIH4gcG1zTWV0aG9kXCIsIHBtc01ldGhvZClcclxuICAgIGxldCB0aW1lcyA9IE1hdGguY2VpbCh0aW1lb3V0IC8gaW50ZXJ2YWwpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltZXM7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaS0tPicsIGkpXHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBwbXNNZXRob2QoKTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy9yZXNvbHZlKHJlc3VsdClcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvL3dhaXQgNTAwXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcChpbnRlcnZhbClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL3Jlc29sdmUobnVsbCk7IC8vZmluYWxseSBub3QgZm91bmRcclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgLy8gcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jKHJlc29sdmUpID0+IHtcclxuICAgIC8vICAgICBsZXQgdGltZXMgPSBNYXRoLmNlaWwodGltZW91dCAvIGludGVydmFsKTtcclxuICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbWVzOyBpKyspIHtcclxuICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ktLT4nLCBpKVxyXG4gICAgLy8gICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgcG1zTWV0aG9kKCk7XHJcbiAgICAvLyAgICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHtcclxuICAgIC8vICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxyXG4gICAgLy8gICAgICAgICB9ZWxzZXtcclxuICAgIC8vICAgICAgICAgICAgIC8vd2FpdCA1MDBcclxuICAgIC8vICAgICAgICAgICAgIGF3YWl0IHNsZWVwKGludGVydmFsKVxyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIHJlc29sdmUobnVsbCk7IC8vZmluYWxseSBub3QgZm91bmRcclxuICAgIC8vIH0pXHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFWQTtBQVlBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFkQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7OztBQWNBO0FBQUE7QUFBQTtBQUNBOztBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/lib/dataKits.js\n");

/***/ }),

/***/ "./js/others/useComponent3.js":
/*!************************************!*\
  !*** ./js/others/useComponent3.js ***!
  \************************************/
/*! namespace exports */
/*! export useComponent [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"useComponent\": () => /* binding */ useComponent\n/* harmony export */ });\n/**\r\n * \r\n * @param {string} newTagName \r\n * @param {string} htmlPath \r\n * @param {any} compClass \r\n */\nfunction useComponent(newTagName, htmlPath, compClass) {\n  return fetch(htmlPath).then(function (res) {\n    return res.text();\n  }).then(function (text) {\n    var parser = new DOMParser();\n    var doc = parser.parseFromString(text, 'text/html');\n    var template = doc.querySelector('template');\n    if (!template) throw new Error('error: webcomponent DOM element<template> not found.');\n    var templateContent = template.content;\n    customElements.define(newTagName, compClass);\n    var ctor = customElements.get(newTagName);\n    var rtnObject = {\n      ctor: ctor,\n      templateContent: templateContent\n    };\n    return rtnObject;\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9vdGhlcnMvdXNlQ29tcG9uZW50My5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL290aGVycy91c2VDb21wb25lbnQzLmpzPzhhNmIiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8qKlxyXG4gKiBcclxuICogQHBhcmFtIHtzdHJpbmd9IG5ld1RhZ05hbWUgXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBodG1sUGF0aCBcclxuICogQHBhcmFtIHthbnl9IGNvbXBDbGFzcyBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VDb21wb25lbnQobmV3VGFnTmFtZSwgaHRtbFBhdGgsIGNvbXBDbGFzcykge1xyXG4gICAgcmV0dXJuIGZldGNoKGh0bWxQYXRoKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMudGV4dCgpXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHRleHQpID0+IHtcclxuICAgICAgICBsZXQgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG4gICAgICAgIGxldCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHRleHQsICd0ZXh0L2h0bWwnKTtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvYy5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpO1xyXG4gICAgICAgIGlmKCF0ZW1wbGF0ZSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcnJvcjogd2ViY29tcG9uZW50IERPTSBlbGVtZW50PHRlbXBsYXRlPiBub3QgZm91bmQuJylcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZUNvbnRlbnQgPSB0ZW1wbGF0ZS5jb250ZW50O1xyXG4gICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShuZXdUYWdOYW1lLCBjb21wQ2xhc3MpO1xyXG4gICAgICAgIGxldCBjdG9yID0gY3VzdG9tRWxlbWVudHMuZ2V0KG5ld1RhZ05hbWUpO1xyXG4gICAgICAgIGxldCBydG5PYmplY3QgPSB7XHJcbiAgICAgICAgICAgIGN0b3I6IGN0b3IsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlQ29udGVudDogdGVtcGxhdGVDb250ZW50XHJcbiAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBydG5PYmplY3RcclxuICAgIH0pXHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/others/useComponent3.js\n");

/***/ }),

/***/ "./js/react/actionTypes/index.js":
/*!***************************************!*\
  !*** ./js/react/actionTypes/index.js ***!
  \***************************************/
/*! namespace exports */
/*! export ADD_shopCart [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ADD_uniqueId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export CLEAR_shopCart [provided] [no usage info] [missing usage info prevents renaming] */
/*! export DECREASE_shopCart [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MODIFY_order_status [provided] [no usage info] [missing usage info prevents renaming] */
/*! export REFRESH_orderList [provided] [no usage info] [missing usage info prevents renaming] */
/*! export REFRESH_productList [provided] [no usage info] [missing usage info prevents renaming] */
/*! export REMOVE_order [provided] [no usage info] [missing usage info prevents renaming] */
/*! export SET_productList [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SET_productList\": () => /* binding */ SET_productList,\n/* harmony export */   \"REFRESH_productList\": () => /* binding */ REFRESH_productList,\n/* harmony export */   \"REFRESH_orderList\": () => /* binding */ REFRESH_orderList,\n/* harmony export */   \"REMOVE_order\": () => /* binding */ REMOVE_order,\n/* harmony export */   \"MODIFY_order_status\": () => /* binding */ MODIFY_order_status,\n/* harmony export */   \"ADD_shopCart\": () => /* binding */ ADD_shopCart,\n/* harmony export */   \"DECREASE_shopCart\": () => /* binding */ DECREASE_shopCart,\n/* harmony export */   \"CLEAR_shopCart\": () => /* binding */ CLEAR_shopCart,\n/* harmony export */   \"ADD_uniqueId\": () => /* binding */ ADD_uniqueId\n/* harmony export */ });\nvar SET_productList = \"SET_productList\";\nvar REFRESH_productList = \"REFRESH_productList\";\nvar REFRESH_orderList = \"REFRESH_orderList\";\nvar REMOVE_order = \"REMOVE_order\";\nvar MODIFY_order_status = \"MODIFY_order_status\";\nvar ADD_shopCart = \"ADD_shopCart\";\nvar DECREASE_shopCart = \"DECREASE_shopCart\";\nvar CLEAR_shopCart = \"CLEAR_shopCart\";\nvar ADD_uniqueId = \"ADD_uniqueId\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9yZWFjdC9hY3Rpb25UeXBlcy9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL3JlYWN0L2FjdGlvblR5cGVzL2luZGV4LmpzP2ZhOGIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFNFVF9wcm9kdWN0TGlzdCA9IFwiU0VUX3Byb2R1Y3RMaXN0XCI7XHJcbmV4cG9ydCBjb25zdCBSRUZSRVNIX3Byb2R1Y3RMaXN0ID0gXCJSRUZSRVNIX3Byb2R1Y3RMaXN0XCI7XHJcblxyXG5leHBvcnQgY29uc3QgUkVGUkVTSF9vcmRlckxpc3QgPSBcIlJFRlJFU0hfb3JkZXJMaXN0XCI7XHJcbmV4cG9ydCBjb25zdCBSRU1PVkVfb3JkZXIgPSBcIlJFTU9WRV9vcmRlclwiO1xyXG5leHBvcnQgY29uc3QgTU9ESUZZX29yZGVyX3N0YXR1cyA9IFwiTU9ESUZZX29yZGVyX3N0YXR1c1wiO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBBRERfc2hvcENhcnQgPSBcIkFERF9zaG9wQ2FydFwiO1xyXG5leHBvcnQgY29uc3QgREVDUkVBU0Vfc2hvcENhcnQgPSBcIkRFQ1JFQVNFX3Nob3BDYXJ0XCI7XHJcbmV4cG9ydCBjb25zdCBDTEVBUl9zaG9wQ2FydCA9IFwiQ0xFQVJfc2hvcENhcnRcIjtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgQUREX3VuaXF1ZUlkID0gXCJBRERfdW5pcXVlSWRcIjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/react/actionTypes/index.js\n");

/***/ }),

/***/ "./js/react/actions/orderList.js":
/*!***************************************!*\
  !*** ./js/react/actions/orderList.js ***!
  \***************************************/
/*! namespace exports */
/*! export Modify_orderStatus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Refresh_orderList [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Remove_order [provided] [no usage info] [missing usage info prevents renaming] */
/*! export load_orderListAsync [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"load_orderListAsync\": () => /* binding */ load_orderListAsync,\n/* harmony export */   \"Refresh_orderList\": () => /* binding */ Refresh_orderList,\n/* harmony export */   \"Remove_order\": () => /* binding */ Remove_order,\n/* harmony export */   \"Modify_orderStatus\": () => /* binding */ Modify_orderStatus\n/* harmony export */ });\n/* harmony import */ var _actionTypes_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../actionTypes/index.js */ \"./js/react/actionTypes/index.js\");\n //import * as dataDefine from '../../dataDefine/index.js'\n\nfunction load_orderListAsync(uid, orderStatus) {\n  //let db_data = dataDefine.fakeProductInfo1;\n  //return Refresh_productList(db_data)   this line is replaced to as below...\n  return function (\n  /**@type {any}*/\n  dispatch,\n  /**@type {any}*/\n  getState) {\n    window.FirebaseMJS.getOrderInfo(uid, orderStatus) //'canceled'\n    .then(function (\n    /**@type {any}*/\n    orderInfo_list) {\n      dispatch(Refresh_orderList(orderInfo_list)); //self.setState({ arrayOrderInfo: orderInfo_list });\n    });\n  };\n}\nfunction Refresh_orderList(orderList) {\n  return {\n    type: _actionTypes_index_js__WEBPACK_IMPORTED_MODULE_0__.REFRESH_orderList,\n    //productId: productId,\n    orderList: orderList //productInfo: productInfo\n\n  };\n}\nfunction Remove_order(orderId) {\n  return {\n    type: _actionTypes_index_js__WEBPACK_IMPORTED_MODULE_0__.REMOVE_order,\n    //productId: productId,\n    orderId: orderId //productInfo: productInfo\n\n  };\n}\n/**\r\n * \r\n * @param {string} orderId \r\n * @param {import('../../firebase/FirebaseMJS.js').ENUM_orderStatus} status \r\n * @param {boolean} value \r\n */\n\nfunction Modify_orderStatus(orderId, status, value) {\n  return {\n    type: _actionTypes_index_js__WEBPACK_IMPORTED_MODULE_0__.MODIFY_order_status,\n    //productId: productId,\n    orderId: orderId,\n    status: status,\n    value: value //productInfo: productInfo\n\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9yZWFjdC9hY3Rpb25zL29yZGVyTGlzdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL3JlYWN0L2FjdGlvbnMvb3JkZXJMaXN0LmpzPzY4YTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIFJFTU9WRV9vcmRlcixcclxuICAgIE1PRElGWV9vcmRlcl9zdGF0dXMsXHJcbiAgICBSRUZSRVNIX29yZGVyTGlzdCxcclxuICAgIFxyXG59IGZyb20gJy4uL2FjdGlvblR5cGVzL2luZGV4LmpzJ1xyXG4vL2ltcG9ydCAqIGFzIGRhdGFEZWZpbmUgZnJvbSAnLi4vLi4vZGF0YURlZmluZS9pbmRleC5qcydcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9hZF9vcmRlckxpc3RBc3luYyh1aWQsIG9yZGVyU3RhdHVzKSB7XHJcbiAgICBcclxuICAgIC8vbGV0IGRiX2RhdGEgPSBkYXRhRGVmaW5lLmZha2VQcm9kdWN0SW5mbzE7XHJcbiAgICBcclxuICAgIC8vcmV0dXJuIFJlZnJlc2hfcHJvZHVjdExpc3QoZGJfZGF0YSkgICB0aGlzIGxpbmUgaXMgcmVwbGFjZWQgdG8gYXMgYmVsb3cuLi5cclxuICAgIHJldHVybiAoLyoqQHR5cGUge2FueX0qL2Rpc3BhdGNoLCAvKipAdHlwZSB7YW55fSovZ2V0U3RhdGUpPT57XHJcbiAgICAgICAgd2luZG93LkZpcmViYXNlTUpTLmdldE9yZGVySW5mbyh1aWQsIG9yZGVyU3RhdHVzKS8vJ2NhbmNlbGVkJ1xyXG4gICAgICAgICAgICAudGhlbigoLyoqQHR5cGUge2FueX0qL29yZGVySW5mb19saXN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRpc3BhdGNoKFJlZnJlc2hfb3JkZXJMaXN0KG9yZGVySW5mb19saXN0KSk7XHJcbiAgICAgICAgICAgICAgICAvL3NlbGYuc2V0U3RhdGUoeyBhcnJheU9yZGVySW5mbzogb3JkZXJJbmZvX2xpc3QgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBSZWZyZXNoX29yZGVyTGlzdChvcmRlckxpc3QpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogUkVGUkVTSF9vcmRlckxpc3QsXHJcbiAgICAgICAgLy9wcm9kdWN0SWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICBvcmRlckxpc3Q6IG9yZGVyTGlzdCxcclxuICAgICAgICAvL3Byb2R1Y3RJbmZvOiBwcm9kdWN0SW5mb1xyXG4gICAgfTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gUmVtb3ZlX29yZGVyKG9yZGVySWQpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogUkVNT1ZFX29yZGVyLFxyXG4gICAgICAgIC8vcHJvZHVjdElkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgb3JkZXJJZDogb3JkZXJJZCxcclxuICAgICAgICAvL3Byb2R1Y3RJbmZvOiBwcm9kdWN0SW5mb1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmRlcklkIFxyXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vZmlyZWJhc2UvRmlyZWJhc2VNSlMuanMnKS5FTlVNX29yZGVyU3RhdHVzfSBzdGF0dXMgXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gTW9kaWZ5X29yZGVyU3RhdHVzKG9yZGVySWQsIHN0YXR1cywgdmFsdWUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogTU9ESUZZX29yZGVyX3N0YXR1cyxcclxuICAgICAgICAvL3Byb2R1Y3RJZDogcHJvZHVjdElkLFxyXG4gICAgICAgIG9yZGVySWQ6IG9yZGVySWQsXHJcbiAgICAgICAgc3RhdHVzOnN0YXR1cyxcclxuICAgICAgICB2YWx1ZTp2YWx1ZSxcclxuICAgICAgICAvL3Byb2R1Y3RJbmZvOiBwcm9kdWN0SW5mb1xyXG4gICAgfTtcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBUUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/react/actions/orderList.js\n");

/***/ }),

/***/ "./pages/index/index.assertLog.js":
/*!****************************************!*\
  !*** ./pages/index/index.assertLog.js ***!
  \****************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\n/* harmony import */ var _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../js/lib/RdQaLog.js */ \"./js/lib/RdQaLog.js\");\n\nvar mdID = _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_0__.ENUM_mdId.index;\nvar displayLoginName = new _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_0__.default(mdID);\ndisplayLoginName.setLogFunction(function (loginName) {\n  return \"\".concat(displayLoginName.prefix).concat(loginName);\n});\nvar loginSuccess = new _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_0__.default(mdID);\nloginSuccess.setLogFunction(function (isSuccess) {\n  return \"\".concat(loginSuccess.prefix).concat(isSuccess);\n}); //---------------Export\n\nvar ExportRdQA = {\n  loginSuccess: loginSuccess,\n  displayLoginName: displayLoginName\n}; //fill name\n\nfor (var keyname in ExportRdQA) {\n  ExportRdQA[keyname].name = keyname;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ExportRdQA);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC9pbmRleC5hc3NlcnRMb2cuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9pbmRleC9pbmRleC5hc3NlcnRMb2cuanM/Yzk5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW1wb3J0IFJkUWFMb2cse0VOVU1fbWRJZH0gZnJvbSAnLi4vLi4vanMvbGliL1JkUWFMb2cuanMnXHJcbmxldCBtZElEID0gRU5VTV9tZElkLmluZGV4XHJcblxyXG5sZXQgZGlzcGxheUxvZ2luTmFtZSA9IG5ldyBSZFFhTG9nKG1kSUQpO1xyXG5kaXNwbGF5TG9naW5OYW1lLnNldExvZ0Z1bmN0aW9uKChsb2dpbk5hbWUpID0+IHtcclxuICAgIHJldHVybiBgJHtkaXNwbGF5TG9naW5OYW1lLnByZWZpeH0ke2xvZ2luTmFtZX1gXHJcbn0pXHJcblxyXG5sZXQgbG9naW5TdWNjZXNzID0gbmV3IFJkUWFMb2cobWRJRCk7XHJcbmxvZ2luU3VjY2Vzcy5zZXRMb2dGdW5jdGlvbigoaXNTdWNjZXNzKSA9PiB7XHJcbiAgICByZXR1cm4gYCR7bG9naW5TdWNjZXNzLnByZWZpeH0ke2lzU3VjY2Vzc31gXHJcbn0pXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLUV4cG9ydFxyXG5sZXQgRXhwb3J0UmRRQSA9IHtcclxuICAgIGxvZ2luU3VjY2VzcyxcclxuICAgIGRpc3BsYXlMb2dpbk5hbWUsXHJcbn1cclxuLy9maWxsIG5hbWVcclxuZm9yKGxldCBrZXluYW1lIGluIEV4cG9ydFJkUUEpe1xyXG4gICAgRXhwb3J0UmRRQVtrZXluYW1lXS5uYW1lID0ga2V5bmFtZVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IEV4cG9ydFJkUUFcclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/index/index.assertLog.js\n");

/***/ }),

/***/ "./pages/index/index.js":
/*!******************************!*\
  !*** ./pages/index/index.js ***!
  \******************************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var smoothscroll_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! smoothscroll-polyfill */ \"../node_modules/smoothscroll-polyfill/dist/smoothscroll.js\");\n/* harmony import */ var smoothscroll_polyfill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(smoothscroll_polyfill__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bootstrap */ \"../node_modules/bootstrap/dist/js/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index.css */ \"./pages/index/index.css\");\n/* harmony import */ var _js_react_actions_orderList_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../js/react/actions/orderList.js */ \"./js/react/actions/orderList.js\");\n/* harmony import */ var _js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../js/firebase/FirebaseMJS.js */ \"./js/firebase/FirebaseMJS.js\");\n/* harmony import */ var _indexESM_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./indexESM.js */ \"./pages/index/indexESM.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash */ \"../node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _index_assertLog_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index.assertLog.js */ \"./pages/index/index.assertLog.js\");\n/* harmony import */ var _js_lib_dataKits_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../js/lib/dataKits.js */ \"./js/lib/dataKits.js\");\n/* harmony import */ var _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../js/dataDefine/index.js */ \"./js/dataDefine/index.js\");\n/* harmony import */ var _js_others_useComponent3_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../js/others/useComponent3.js */ \"./js/others/useComponent3.js\");\n/* harmony import */ var _webcomponents_cusModalLogin3_cusModalLogin_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../webcomponents/cusModalLogin3/cusModalLogin.js */ \"./webcomponents/cusModalLogin3/cusModalLogin.js\");\n/* harmony import */ var _webcomponents_cusModalUserProfile3_cusModalUserProfile_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../webcomponents/cusModalUserProfile3/cusModalUserProfile.js */ \"./webcomponents/cusModalUserProfile3/cusModalUserProfile.js\");\n/* harmony import */ var _webcomponents_cusFullPageScroll_fullPageScroll_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../webcomponents/cusFullPageScroll/fullPageScroll.js */ \"./webcomponents/cusFullPageScroll/fullPageScroll.js\");\n/* harmony import */ var _webcomponents_cusModalUserProfile3_cusModalUserProfile_css__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../webcomponents/cusModalUserProfile3/cusModalUserProfile.css */ \"./webcomponents/cusModalUserProfile3/cusModalUserProfile.css\");\n/* harmony import */ var _webcomponents_cusModalLogin3_cusModalLogin_css__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../webcomponents/cusModalLogin3/cusModalLogin.css */ \"./webcomponents/cusModalLogin3/cusModalLogin.css\");\n/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! sweetalert2 */ \"../node_modules/sweetalert2/dist/sweetalert2.all.js\");\n/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _js_firebase_Firebase__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../js/firebase/Firebase */ \"./js/firebase/Firebase.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n//@ts-check\n\n\n //import 'popper.js'\n// import 'bootstrap/dist/css/bootstrap.min.css';\n\n\n //import indexEsm from './index.esm.js'\n\n\n\n\n\n // import firebase from \"firebase/app\";\n// import \"firebase/auth\"\n// import 'firebase/firestore'\n//import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faUser,\n//     faShoppingCart\n// } from \"@fortawesome/fontawesome-free-solid\";\n// import index_css from './index.css'\n\n\n\n\n\n\n\n\n\n__webpack_require__(/*! @babel/polyfill */ \"../node_modules/@babel/polyfill/lib/index.js\"); //for async await syntax\n//const Swal = require('sweetalert2')\n\n\n\n //fontawesome.library.add([faUser,faShoppingCart]);\n//require(\"html-loader!./webpack_html/img_html.html\");\n\nwindow.Swal = (sweetalert2__WEBPACK_IMPORTED_MODULE_17___default());\nwindow.$ = $;\nwindow._ = (lodash__WEBPACK_IMPORTED_MODULE_7___default()); //console.log('lodash--',_)\n// kick off the polyfill!\n\nsmoothscroll_polyfill__WEBPACK_IMPORTED_MODULE_0___default().polyfill();\n\nvar firebaseConfig = __webpack_require__(/*! ../../projectConfig/firebaseProj.config.json */ \"./projectConfig/firebaseProj.config.json\");\n\nvar firebase = __webpack_require__(/*! firebase/app */ \"../node_modules/firebase/app/dist/index.cjs.js\");\n\n__webpack_require__(/*! firebase/auth */ \"../node_modules/firebase/auth/dist/index.esm.js\");\n\n__webpack_require__(/*! firebase/firestore */ \"../node_modules/firebase/firestore/dist/index.esm.js\");\n\nfirebase.initializeApp(firebaseConfig); // To apply the default browser preference instead of explicitly setting it.\n\nfirebase.auth().useDeviceLanguage();\nvar liLogin = document.querySelector('#liLogin');\nvar liUserDropdown = document.querySelector('#liUserDropdown');\nvar aMyOrder = document.querySelector('#aMyOrder');\nvar aMyProfile = document.querySelector('#aMyProfile');\nvar aLogout = document.querySelector('#aLogout');\nvar spanDisplayEmail = document.querySelector('#spanDisplayEmail');\nvar aOpenModalShopcart = document.querySelector('#aOpenModalShopcart');\nvar liOpenModalShopcart = document.querySelector('#liOpenModalShopcart');\nwindow.firebase = firebase;\n/**@enum {string} */\n\nvar ENUM_static_scroll_href_Id = {\n  history: 'history',\n  news: 'news',\n  qanda: 'qanda',\n  contactus: 'contactus' //page-react\n\n}; // const ENUM_reactSwitchPage = {\n//     ProductListSearch: 'ProductListSearch',\n//     ViewOrders: 'ViewOrders',\n// }\n//var //---pure data\n\nvar proxyMainPageUI = {\n  /**@type {boolean} */\n  isReactPage: false,\n  //.history|'news'|'qanda'|'contactus\n\n  /**@type {ENUM_static_scroll_href_Id} */\n  scrollToHrefId: ENUM_static_scroll_href_Id.history,\n  // /**@type {ENUM_reactSwitchPage} */\n  // reactSwitchPage: ENUM_reactSwitchPage.ProductListSearch,\n\n  /**@type {number} */\n  shopItemCount: 0,\n\n  /**@type {cusFullPageScroll}} */\n  cusFullPageScroll: null,\n\n  /**@type {cusModalLogin} */\n  cusModalLogin: null,\n\n  /**@type {cusModalUserProfile}} */\n  cusModalUserProfile: null\n};\nwindow.app = {\n  /**\r\n   * @callback pushUrlFunc\r\n   * @param {string} url - ...\r\n   */\n  pushUrl: function pushUrl(url) {\n    /* history.push(?) */\n  },\n  viewSize: function viewSize() {\n    return $('#sizer').find('div:visible').data('size');\n  },\n  setShopItemCount: function setShopItemCount(itemCount) {\n    proxyMainPageUI.shopItemCount = itemCount;\n  },\n  navbar1: document.querySelector('#navbar1'),\n  openModalShopCart: null,\n  userData: null,\n  history: null,\n  store: null,\n  switchIndexPage: switchIndexPage,\n  pageViewOrders: null,\n  arrayGroupedCategories: null,\n  arrayProductInfo: null\n};\nwindow.app = new Proxy(window.app, {\n  get: function get(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop) {\n    return target[prop];\n  },\n  set: function set(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop, value) {\n    switch (prop) {\n      case 'userData':\n        if (value === null) {\n          console.log('window.app.userData -->', value);\n          proxyUserMenuDropdown.isLogin = false;\n          proxyUserMenuDropdown.loginName = '';\n        } else {\n          console.log('window.app.userData -->', value); //navbarCollapse();\n\n          var newUserData = value; //target[prop];\n\n          proxyUserMenuDropdown.isLogin = true;\n          proxyUserMenuDropdown.loginName = newUserData.email;\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    target[prop] = value;\n    return true;\n  }\n});\nwindow.addEventListener('click', function (evt) {\n  //console.log('click wwwwww')\n  navbarCollapse();\n}); // let divMenu = document.querySelector('#divMenu')\n// divMenu.addEventListener('click',(evt) => {\n//     evt.stopPropagation()\n//     //console.log('click divMenu')\n// })\n\nfunction switchIndexPage(enum_switchIndexPage) {\n  switch (enum_switchIndexPage) {\n    case _indexESM_js__WEBPACK_IMPORTED_MODULE_6__.ENUM_switchIndexPage.ProductListSearch:\n      proxyMainPageUI.isReactPage = true; //proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ProductListSearch;\n\n      window.app.pushUrl('/ProductListSearch'); //ProductListSearch\n\n      setTimeout(function () {\n        window.scrollTo({\n          top: 0,\n          left: 0,\n          behavior: 'auto' //'smooth'\n\n        });\n      }, 500); //0的話有可能無法滑到最頂端，看運氣\n\n      break;\n\n    case _indexESM_js__WEBPACK_IMPORTED_MODULE_6__.ENUM_switchIndexPage.ViewOrders:\n      proxyMainPageUI.isReactPage = true; //console.log('arrayOrderInfo-->', window.app.pageViewOrders)//.state.arrayOrderInfo\n\n      if (window.app.pageViewOrders && window.app.pageViewOrders.state.arrayOrderInfo.length === 0) {\n        var store = window.app.store;\n        var uid = window.app.userData.uid;\n        store.dispatch((0,_js_react_actions_orderList_js__WEBPACK_IMPORTED_MODULE_4__.load_orderListAsync)(uid, _js_firebase_Firebase__WEBPACK_IMPORTED_MODULE_18__.ENUM_orderStatus.all));\n      } //window.app.pageViewOrders.queryOrderStatus(ENUM_orderStatus.all);\n      //queryOrderStatus\n      //proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ViewOrders;\n\n\n      window.app.pushUrl('/ViewOrders'); //ProductListSearch\n\n      setTimeout(function () {\n        window.scrollTo({\n          top: 0,\n          left: 0,\n          behavior: 'auto' //'smooth'\n\n        });\n      }, 500); //0的話有可能無法滑到最頂端，看運氣\n\n      break;\n\n    default:\n      break;\n  }\n\n  proxyMainPageUI.isReactPage = true; //ENUM_switchIndexPage\n} //-------------Proxy\n//---pure data\n\n\nvar proxyUserMenuDropdown = {\n  /** user dropdown menu, display login button / user dropdown menu */\n  isLogin: false,\n\n  /** user dropdown menu, display email account name */\n  loginName: \"\"\n}; //mvvm observeble pattern\n\nproxyUserMenuDropdown = new Proxy(proxyUserMenuDropdown, {\n  get: function get(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop) {\n    return target[prop];\n  },\n  set: function set(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop, value) {\n    switch (prop) {\n      case \"isLogin\":\n        if (value == true) {\n          //remove class displayNone\n          liLogin.classList.add('displayNone');\n          liUserDropdown.classList.remove('displayNone');\n        } else {\n          //add class displayNone\n          liLogin.classList.remove('displayNone');\n          liUserDropdown.classList.add('displayNone');\n        }\n\n        console.log(_index_assertLog_js__WEBPACK_IMPORTED_MODULE_8__.default.loginSuccess.log(value));\n        break;\n\n      case \"loginName\":\n        spanDisplayEmail.textContent = value;\n        console.log(_index_assertLog_js__WEBPACK_IMPORTED_MODULE_8__.default.displayLoginName.log(value));\n        break;\n\n      default:\n        break;\n    }\n\n    target[prop] = value;\n    return true;\n  }\n}); //test mvvm data binding\n// let aTestLogin = document.querySelector('#aTestLogin');\n// let aTestLogout = document.querySelector('#aTestLogout');\n// aTestLogin.addEventListener('click', (e) => {\n//     proxyUserMenuDropdown.isLogin = true;\n//     proxyUserMenuDropdown.loginName = \"John\"\n// })\n// aTestLogout.addEventListener('click', (e) => {\n//     proxyUserMenuDropdown.isLogin = false;\n// })\n//------------firebase onAuthChanged\n// tset case 1: no authUser (not signin)\n// tset case 2: has authUser -- UI display name change\n// tset case 3: (has authUser, has window.app.userData) -- sync emailVerified_auth\n// tset case 4: (has authUser, no window.app.userData) -- getDbUser\n// tset case 5: (has authUser, no window.app.userData, has DbUser) -- window.app.userData = dbUser; + sync emailVerified_auth;\n// tset case 6: (has authUser, no window.app.userData, no DbUser) -- userInfo = authUser; + window.app.userData = userInfo(已同時 sync emailVerified_auth);\n\nfirebase.auth().onAuthStateChanged(function (\n/**@type {any}*/\nauthUser) {\n  var db = firebase.firestore(); //functions....\n\n  /**\r\n   * save partial fields of UserInfo to firestore.collection('Users')\r\n   * @param {any} userInfo \r\n   */\n\n  function SetUserData(userInfo) {\n    // let type = \n    return db.collection(_js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_5__.FIRESTORE_COLLECTION.Users).doc(userInfo.uid).set(userInfo, {\n      merge: true\n    });\n  }\n  /**\r\n   * save UserInfo.emailVerified to firestore.collection('Users')\r\n   * @param {boolean} emailVerified_FromAuth auth-user's emailVerified prop value\r\n   * @param {string} uid auth-user's uid\r\n   */\n\n\n  function syncEmailVerified_ToDB(emailVerified_FromAuth, uid) {\n    var userInfo = {\n      uid: uid,\n      emailVerified: emailVerified_FromAuth\n    };\n    return SetUserData(userInfo);\n  } //-----------------\n\n\n  if (authUser) {\n    // User is signed in.\n    proxyUserMenuDropdown.isLogin = true;\n    proxyUserMenuDropdown.loginName = authUser.email; // let uid = authUser.uid\n    // let emailVerified = authUser.emailVerified\n\n    var uid = authUser.uid,\n        emailVerified_auth = authUser.emailVerified;\n    console.log(\"LOG:: authUser\", authUser);\n    console.log(\"LOG:: uid\", uid); //----window.app.userData exist\n\n    if (window.app.userData) {\n      var emailVerified_db = window.app.userData.emailVerified; //sync auth emailVerified to DB\n\n      if (emailVerified_auth != emailVerified_db) syncEmailVerified_ToDB(emailVerified_auth, uid);\n    } //----window.app.userData not exist!\n\n\n    if (!window.app.userData) {\n      var getDbUser = function getDbUser(\n      /**@type {string} */\n      uid) {\n        return db.collection(_js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_5__.FIRESTORE_COLLECTION.Users).doc(uid).get().then(function (\n        /**@type {any}*/\n        querySnapshot) {\n          if (querySnapshot.exists === false) return null;else return querySnapshot.data(); // let dbUser = {\n          //     exists: querySnapshot.exists,\n          //     doc: querySnapshot.data()\n          // }\n          // return dbUser\n        });\n      };\n      /**\r\n       * \r\n       * @param {any} authUser \r\n       */\n\n\n      var getUserInfo = function getUserInfo(authUser) {\n        var userInfo = new _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_10__.UserData(); // let dispalyName = null;\n        // if (authUser.dispalyName === undefined)\n        //     dispalyName = null;\n        // else\n        //     dispalyName = authUser.dispalyName;\n        // }\n\n        userInfo.dispalyName = authUser.dispalyName ? authUser.dispalyName : null;\n        userInfo.email = authUser.email;\n        userInfo.emailVerified = authUser.emailVerified;\n        userInfo.phoneNumber = authUser.phoneNumber;\n        userInfo.photoURL = authUser.photoURL;\n        userInfo.uid = authUser.uid;\n        userInfo.listProviderId = _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_10__.UserData.getListProviderId_ByAuthUserProviderData(authUser.providerData); //providerId: auto get by self. //authUser.providerData[0].providerId,   \n\n        return userInfo;\n      }; // start load db user info --> ready to set window.app.userData\n\n\n      console.log('load user data from firestore...');\n      getDbUser(uid).then(function (\n      /**@type {any}*/\n      dbUser) {\n        // db user exist\n        if (dbUser) {\n          window.app.userData = Object.assign(new _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_10__.UserData(), dbUser);\n          var _emailVerified_db = dbUser.emailVerified; //sync auth emailVerified to DB\n\n          if (emailVerified_auth != _emailVerified_db) syncEmailVerified_ToDB(emailVerified_auth, uid);\n        } //not exist\n        else {\n            //get info from authUser\n            var userInfo = getUserInfo(authUser);\n            window.app.userData = userInfo; //save info to db (First time)\n\n            var userData_fs = (0,_js_lib_dataKits_js__WEBPACK_IMPORTED_MODULE_9__.getPlainObject)(userInfo);\n            SetUserData(userData_fs); // return true //new user\n          }\n      })[\"catch\"](function (\n      /**@type {any}*/\n      err) {\n        console.error('onAuthStateChanged, get userData failed. ', err.code, err.message);\n      });\n    }\n  } else {\n    // No user is signed in.\n    proxyUserMenuDropdown.isLogin = false;\n    proxyUserMenuDropdown.loginName = null;\n    console.log('No user is signed in...');\n  }\n}); //firebase.analytics();\n// console.log(firebase)\n// let db = firebase.firestore();\n// db.collection(\"Products\")//.where(\"autoNum\", \"==\", 7)\n//     .get()\n//     .then(function (querySnapshot) {\n//     })\n//     .catch((err) => {\n//     })\n// console.log(__dirname)\n//mvvm observeble pattern\n\nvar pageStatic = $('#page-static');\nvar pageReact = $('#page-react'); //let navbar1 = document.querySelector('#navbar1');\n//let navbar_height = window.app.navbar1.offsetHeight + 5\n\nproxyMainPageUI = new Proxy(proxyMainPageUI, {\n  get: function get(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop) {\n    return target[prop];\n  },\n  set: function set(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop, value) {\n    switch (prop) {\n      case \"isReactPage\":\n        if (value == true) {\n          pageStatic.hide();\n          pageReact.fadeIn(500);\n        } else {\n          pageStatic.fadeIn(500);\n          pageReact.hide();\n        }\n\n        break;\n\n      case \"scrollToHrefId\":\n        target.cusFullPageScroll.scrollToElem('#' + value);\n        break;\n\n      case \"shopItemCount\":\n        //$('.fa-shopping-cart').attr(\"data-count\", value)\n        var numberBadges = document.querySelectorAll('.numberBadge');\n        numberBadges.forEach(function (element) {\n          element.textContent = value;\n        });\n        break;\n      // case \"reactSwitchPage\":\n      //     switch (value) {\n      //         case ENUM_reactSwitchPage.ProductListSearch:\n      //             window.app.pushUrl('/ProductListSearch'); //ProductListSearch\n      //             setTimeout(() => {\n      //                 window.scrollTo({\n      //                     top: 0,\n      //                     left: 0,\n      //                     behavior: 'auto' //'smooth'\n      //                 });\n      //             }, 10); //0的話有可能無法滑到最頂端，看運氣\n      //             break;\n      //         case ENUM_reactSwitchPage.ViewOrders:\n      //             window.app.pushUrl('/ViewOrders'); //ProductListSearch\n      //             setTimeout(() => {\n      //                 window.scrollTo({\n      //                     top: 0,\n      //                     left: 0,\n      //                     behavior: 'auto' //'smooth'\n      //                 });\n      //             }, 10); //0的話有可能無法滑到最頂端，看運氣\n      //             break;\n      //         default:\n      //             break;\n      //     }\n      //     break;\n\n      default:\n        break;\n    }\n\n    target[prop] = value;\n    return true;\n  }\n}); //------------ load webcomponents\n\nvar newTagName = \"cus-full-page-scroll\";\nvar pathHtml_fullPageScroll = '../../webcomponents/cusFullPageScroll/fullPageScroll.htm';\nif (!proxyMainPageUI.cusFullPageScroll) (0,_js_others_useComponent3_js__WEBPACK_IMPORTED_MODULE_11__.useComponent)(newTagName, pathHtml_fullPageScroll, _webcomponents_cusFullPageScroll_fullPageScroll_js__WEBPACK_IMPORTED_MODULE_14__.default).then(function (htmlFile) {\n  var newComponent = new htmlFile.ctor(htmlFile.templateContent);\n  proxyMainPageUI.cusFullPageScroll = newComponent;\n  pageStatic.append(newComponent); //newComponent.scrollToElem('#news')\n}); //---------------------Constructor()-> setFirebase(firebase) - > Auth().getRedirectResult()\n\nnewTagName = \"cus-modal-login\"; //let login_Element = document.querySelector(newTagName);\n\nif (!proxyMainPageUI.cusModalLogin) {\n  (0,_js_others_useComponent3_js__WEBPACK_IMPORTED_MODULE_11__.useComponent)(newTagName, '../../webcomponents/cusModalLogin3/cusModalLogin.htm', _webcomponents_cusModalLogin3_cusModalLogin_js__WEBPACK_IMPORTED_MODULE_12__.default).then(function (htmlFile) {\n    var plugins = {\n      Swal: (sweetalert2__WEBPACK_IMPORTED_MODULE_17___default()),\n      Email_ResendPassword: _js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_5__.Email_ResendPassword\n    }; //class-instance APPEAR!!  you can set template now~~~\n\n    /**@type {cusModalLogin} */\n\n    var newComponent = new htmlFile.ctor(htmlFile.templateContent, plugins); // if (WebpackDefinePlugin.devMode) {\n    //     newComponent.proxyUI.bindIptSigninEmail = 'ice4kimo@yahoo.com.tw'\n    //     newComponent.proxyUI.bindIptSigninPWD = '11111111'\n    //     newComponent.proxyUI.bindIptRegisterEmail = 'ice4kimo@yahoo.com.tw'\n    //     newComponent.proxyUI.bindIptRegisterPWD1 = '11111111'\n    //     newComponent.proxyUI.bindIptRegisterPWD2 = '11111111'\n    //     newComponent.proxyUI.bindIptResentPwdEmail = 'ice4kimo@yahoo.com.tw'\n    // }\n\n    proxyMainPageUI.cusModalLogin = newComponent;\n    /**@type {any} */\n\n    var node = newComponent;\n    document.body.appendChild(node);\n  });\n} //------------------- aMyProfile\n\n\nvar pathHtml_userProfile = '../../webcomponents/cusModalUserProfile3/cusModalUserProfile.htm';\naMyProfile.addEventListener('click', function (e) {\n  e.preventDefault();\n  navbarCollapse();\n  var newTagName = \"cus-modal-user-profile\"; //let login_Element = document.querySelector(newTagName);\n\n  if (proxyMainPageUI.cusModalUserProfile) proxyMainPageUI.cusModalUserProfile.showModal(true);else {\n    (0,_js_others_useComponent3_js__WEBPACK_IMPORTED_MODULE_11__.useComponent)(newTagName, pathHtml_userProfile, _webcomponents_cusModalUserProfile3_cusModalUserProfile_js__WEBPACK_IMPORTED_MODULE_13__.default).then(function (compUI) {\n      var plugins = {\n        Swal: (sweetalert2__WEBPACK_IMPORTED_MODULE_17___default()),\n        Email_ResendPassword: _js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_5__.Email_ResendPassword\n      };\n      var newComponent = new compUI.ctor(compUI.templateContent, plugins);\n      proxyMainPageUI.cusModalUserProfile = newComponent; // newComponent.setDataDefine({\n      //     UserData: UserData\n      // });\n\n      document.body.appendChild(newComponent);\n      var uid = firebase.auth().currentUser.uid;\n      newComponent.loadDbProfile(uid);\n      newComponent.showModal(true); //UI control\n\n      newComponent.proxyUI.isEmailVerified = firebase.auth().currentUser.emailVerified;\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }\n}); // get 5 navbar items\n\nvar all_MenuHref = document.querySelectorAll('a[href]'); // ----------- add button click event\n//     <a href=\"#history\" class=\"nav-link\">老店歷史</a>\n//     <a href=\"#news\" class=\"nav-link\">最新消息</a>\n//     <a href=\"#page-react\" class=\"nav-link\" id=\"aOrderProducts\">產品訂購</a>\n//     <a href=\"#qanda\" class=\"nav-link\">常見問題(購物)</a>\n//     <a href=\"#contactus\" class=\"nav-link\">聯絡我們</a>\n\nvar array_MenuHrefs = _toConsumableArray(all_MenuHref).filter(function (item) {\n  var href = item.getAttribute('href');\n  return href !== \"#\"; // 總共有5個\n});\n\nfunction navbarCollapse() {\n  $('.navbar-collapse').collapse('hide'); // $('.navbar-nav>li>a').on('click', function(){\n  //     $('.navbar-collapse').collapse('hide');\n  // });\n} // add nav item click event\n// e.preventDefault()->ignore default scroll behavior, need to change react page?\n\n\narray_MenuHrefs.forEach(function (element) {\n  var href = element.getAttribute('href');\n\n  switch (href) {\n    case '#page-react':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        navbarCollapse(); //proxyMainPageUI.isReactPage = true;\n        //proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ProductListSearch;\n\n        window.app.switchIndexPage(_indexESM_js__WEBPACK_IMPORTED_MODULE_6__.ENUM_switchIndexPage.ProductListSearch);\n      });\n      break;\n\n    case '#history':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        navbarCollapse();\n        proxyMainPageUI.isReactPage = false;\n        proxyMainPageUI.scrollToHrefId = ENUM_static_scroll_href_Id.history;\n      });\n      break;\n\n    case '#news':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        navbarCollapse();\n        proxyMainPageUI.isReactPage = false;\n        proxyMainPageUI.scrollToHrefId = ENUM_static_scroll_href_Id.news;\n      });\n      break;\n\n    case '#qanda':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        navbarCollapse();\n        proxyMainPageUI.isReactPage = false;\n        proxyMainPageUI.scrollToHrefId = ENUM_static_scroll_href_Id.qanda;\n      });\n      break;\n\n    case '#contactus':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        navbarCollapse();\n        proxyMainPageUI.isReactPage = false;\n        proxyMainPageUI.scrollToHrefId = ENUM_static_scroll_href_Id.contactus;\n      });\n      break;\n\n    default:\n      break;\n  }\n}); //------------------- liLogin\n\nliLogin.addEventListener('click', function (e) {\n  e.preventDefault();\n  proxyMainPageUI.cusModalLogin.showModal(true);\n}); //------------------- aLogout\n\naLogout.addEventListener('click', function (e) {\n  e.preventDefault();\n  navbarCollapse();\n  firebase.auth().signOut().then(function () {\n    // Sign-out successful.\n    window.app.userData = null;\n    window.app.switchIndexPage(_indexESM_js__WEBPACK_IMPORTED_MODULE_6__.ENUM_switchIndexPage.ProductListSearch);\n    proxyMainPageUI.isReactPage = false;\n  })[\"catch\"](function (\n  /**@type {any}*/\n  error) {// An error happened.\n  });\n}); //------------------- aMyOrder\n\naMyOrder.addEventListener('click', function (e) {\n  e.preventDefault();\n  navbarCollapse();\n  window.app.switchIndexPage(_indexESM_js__WEBPACK_IMPORTED_MODULE_6__.ENUM_switchIndexPage.ViewOrders); // proxyMainPageUI.isReactPage = true\n  // proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ViewOrders\n  //window.app.pushUrl('/ViewOrders'); //ProductListSearch\n});\n\nfunction openShopCart() {\n  var state = window.app.store.getState();\n  var shopItemList = state.shopCart.shopItemList; //console.log(shopItemList.length)\n\n  if (shopItemList.length > 0) {\n    window.app.switchIndexPage(_indexESM_js__WEBPACK_IMPORTED_MODULE_6__.ENUM_switchIndexPage.ProductListSearch); // proxyMainPageUI.isReactPage = true\n    // proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ProductListSearch;\n\n    setTimeout(function () {\n      if (window.app.openModalShopCart) window.app.openModalShopCart();\n    }, 100);\n  } else {\n    window.Swal.fire({\n      title: '提醒',\n      text: '購物車內沒有物品，請先選購',\n      icon: 'warning'\n    });\n  }\n}\n\naOpenModalShopcart.addEventListener('click', openShopCart);\nliOpenModalShopcart.addEventListener('click', function () {\n  proxyMainPageUI.isReactPage = true;\n  window.app.switchIndexPage(_indexESM_js__WEBPACK_IMPORTED_MODULE_6__.ENUM_switchIndexPage.ProductListSearch);\n}); //-------------\n\n$(function () {\n  //pageStatic.hide();\n  //pageReact.hide();\n  proxyMainPageUI.isReactPage = false; //trigger - shop cart count = 0\n  //let aa = countAllItems_Price()\n\n  window.app.setShopItemCount(0);\n}); // $(document).ready(function () {\n//     //pageStatic.hide();\n//     //pageReact.hide();\n//     proxyMainPageUI.isReactPage = false;\n// })//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2luZGV4L2luZGV4LmpzPzgwMzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy9AdHMtY2hlY2tcclxuaW1wb3J0IHNtb290aHNjcm9sbCBmcm9tICdzbW9vdGhzY3JvbGwtcG9seWZpbGwnO1xyXG5pbXBvcnQgJ2pxdWVyeSdcclxuaW1wb3J0ICdib290c3RyYXAnXHJcbi8vaW1wb3J0ICdwb3BwZXIuanMnXHJcbi8vIGltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzJztcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCB7bG9hZF9vcmRlckxpc3RBc3luY30gZnJvbSAnLi4vLi4vanMvcmVhY3QvYWN0aW9ucy9vcmRlckxpc3QuanMnXHJcblxyXG4vL2ltcG9ydCBpbmRleEVzbSBmcm9tICcuL2luZGV4LmVzbS5qcydcclxuaW1wb3J0IEZpcmViYXNlTUpTLCB7XHJcbiAgICAvL3N5bmNFbWFpbFZlcmlmaWVkX1RvREIsXHJcbiAgICBFbWFpbF9SZXNlbmRQYXNzd29yZCxcclxuICAgIEZJUkVTVE9SRV9DT0xMRUNUSU9OXHJcbn0gZnJvbSAnLi4vLi4vanMvZmlyZWJhc2UvRmlyZWJhc2VNSlMuanMnXHJcbmltcG9ydCB7XHJcbiAgICBFTlVNX3N3aXRjaEluZGV4UGFnZVxyXG59IGZyb20gJy4vaW5kZXhFU00uanMnXHJcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCdcclxuaW1wb3J0IGFzc2VydExvZyBmcm9tICcuL2luZGV4LmFzc2VydExvZy5qcydcclxuaW1wb3J0IHtcclxuICAgIGdldFBsYWluT2JqZWN0XHJcbn0gZnJvbSAnLi4vLi4vanMvbGliL2RhdGFLaXRzLmpzJ1xyXG4vLyBpbXBvcnQgZmlyZWJhc2UgZnJvbSBcImZpcmViYXNlL2FwcFwiO1xyXG4vLyBpbXBvcnQgXCJmaXJlYmFzZS9hdXRoXCJcclxuLy8gaW1wb3J0ICdmaXJlYmFzZS9maXJlc3RvcmUnXHJcblxyXG4vL2ltcG9ydCBmb250YXdlc29tZSBmcm9tIFwiQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lXCI7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgICBmYVVzZXIsXHJcbi8vICAgICBmYVNob3BwaW5nQ2FydFxyXG4vLyB9IGZyb20gXCJAZm9ydGF3ZXNvbWUvZm9udGF3ZXNvbWUtZnJlZS1zb2xpZFwiO1xyXG4vLyBpbXBvcnQgaW5kZXhfY3NzIGZyb20gJy4vaW5kZXguY3NzJ1xyXG5pbXBvcnQge1xyXG4gICAgVXNlckRhdGFcclxufSBmcm9tICcuLi8uLi9qcy9kYXRhRGVmaW5lL2luZGV4LmpzJ1xyXG5pbXBvcnQge1xyXG4gICAgdXNlQ29tcG9uZW50XHJcbn0gZnJvbSAnLi4vLi4vanMvb3RoZXJzL3VzZUNvbXBvbmVudDMuanMnXHJcblxyXG5pbXBvcnQgY3VzTW9kYWxMb2dpbiBmcm9tICcuLi8uLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uanMnXHJcbmltcG9ydCBjdXNNb2RhbFVzZXJQcm9maWxlIGZyb20gJy4uLy4uL3dlYmNvbXBvbmVudHMvY3VzTW9kYWxVc2VyUHJvZmlsZTMvY3VzTW9kYWxVc2VyUHJvZmlsZS5qcydcclxuaW1wb3J0IGN1c0Z1bGxQYWdlU2Nyb2xsIGZyb20gJy4uLy4uL3dlYmNvbXBvbmVudHMvY3VzRnVsbFBhZ2VTY3JvbGwvZnVsbFBhZ2VTY3JvbGwuanMnXHJcblxyXG5pbXBvcnQgJy4uLy4uL3dlYmNvbXBvbmVudHMvY3VzTW9kYWxVc2VyUHJvZmlsZTMvY3VzTW9kYWxVc2VyUHJvZmlsZS5jc3MnXHJcbmltcG9ydCAnLi4vLi4vd2ViY29tcG9uZW50cy9jdXNNb2RhbExvZ2luMy9jdXNNb2RhbExvZ2luLmNzcydcclxucmVxdWlyZSgnQGJhYmVsL3BvbHlmaWxsJykgLy9mb3IgYXN5bmMgYXdhaXQgc3ludGF4XHJcblxyXG4vL2NvbnN0IFN3YWwgPSByZXF1aXJlKCdzd2VldGFsZXJ0MicpXHJcbmltcG9ydCBTd2FsIGZyb20gJ3N3ZWV0YWxlcnQyJ1xyXG5pbXBvcnQgeyBFTlVNX29yZGVyU3RhdHVzIH0gZnJvbSAnLi4vLi4vanMvZmlyZWJhc2UvRmlyZWJhc2UnO1xyXG5cclxuLy9mb250YXdlc29tZS5saWJyYXJ5LmFkZChbZmFVc2VyLGZhU2hvcHBpbmdDYXJ0XSk7XHJcblxyXG4vL3JlcXVpcmUoXCJodG1sLWxvYWRlciEuL3dlYnBhY2tfaHRtbC9pbWdfaHRtbC5odG1sXCIpO1xyXG53aW5kb3cuU3dhbCA9IFN3YWw7XHJcbndpbmRvdy4kID0gJFxyXG53aW5kb3cuXyA9IF9cclxuLy9jb25zb2xlLmxvZygnbG9kYXNoLS0nLF8pXHJcblxyXG4vLyBraWNrIG9mZiB0aGUgcG9seWZpbGwhXHJcbnNtb290aHNjcm9sbC5wb2x5ZmlsbCgpO1xyXG5cclxubGV0IGZpcmViYXNlQ29uZmlnID0gcmVxdWlyZSgnLi4vLi4vcHJvamVjdENvbmZpZy9maXJlYmFzZVByb2ouY29uZmlnLmpzb24nKVxyXG5sZXQgZmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZS9hcHAnKTtcclxucmVxdWlyZSgnZmlyZWJhc2UvYXV0aCcpXHJcbnJlcXVpcmUoJ2ZpcmViYXNlL2ZpcmVzdG9yZScpXHJcbmZpcmViYXNlLmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cclxuLy8gVG8gYXBwbHkgdGhlIGRlZmF1bHQgYnJvd3NlciBwcmVmZXJlbmNlIGluc3RlYWQgb2YgZXhwbGljaXRseSBzZXR0aW5nIGl0LlxyXG5maXJlYmFzZS5hdXRoKCkudXNlRGV2aWNlTGFuZ3VhZ2UoKTtcclxuXHJcbmxldCBsaUxvZ2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpTG9naW4nKTtcclxubGV0IGxpVXNlckRyb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpVXNlckRyb3Bkb3duJyk7XHJcbmxldCBhTXlPcmRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhTXlPcmRlcicpO1xyXG5sZXQgYU15UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhTXlQcm9maWxlJyk7XHJcblxyXG5sZXQgYUxvZ291dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhTG9nb3V0Jyk7XHJcbmxldCBzcGFuRGlzcGxheUVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NwYW5EaXNwbGF5RW1haWwnKTtcclxubGV0IGFPcGVuTW9kYWxTaG9wY2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhT3Blbk1vZGFsU2hvcGNhcnQnKTtcclxubGV0IGxpT3Blbk1vZGFsU2hvcGNhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlPcGVuTW9kYWxTaG9wY2FydCcpO1xyXG5cclxud2luZG93LmZpcmViYXNlID0gZmlyZWJhc2VcclxuXHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmNvbnN0IEVOVU1fc3RhdGljX3Njcm9sbF9ocmVmX0lkID0ge1xyXG4gICAgaGlzdG9yeTogJ2hpc3RvcnknLFxyXG4gICAgbmV3czogJ25ld3MnLFxyXG4gICAgcWFuZGE6ICdxYW5kYScsXHJcbiAgICBjb250YWN0dXM6ICdjb250YWN0dXMnLFxyXG4gICAgLy9wYWdlLXJlYWN0XHJcbn1cclxuXHJcbi8vIGNvbnN0IEVOVU1fcmVhY3RTd2l0Y2hQYWdlID0ge1xyXG4vLyAgICAgUHJvZHVjdExpc3RTZWFyY2g6ICdQcm9kdWN0TGlzdFNlYXJjaCcsXHJcbi8vICAgICBWaWV3T3JkZXJzOiAnVmlld09yZGVycycsXHJcbi8vIH1cclxuXHJcblxyXG4vL3ZhciAvLy0tLXB1cmUgZGF0YVxyXG52YXIgcHJveHlNYWluUGFnZVVJID0ge1xyXG4gICAgLyoqQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICBpc1JlYWN0UGFnZTogZmFsc2UsXHJcbiAgICAvLy5oaXN0b3J5fCduZXdzJ3wncWFuZGEnfCdjb250YWN0dXNcclxuICAgIC8qKkB0eXBlIHtFTlVNX3N0YXRpY19zY3JvbGxfaHJlZl9JZH0gKi9cclxuICAgIHNjcm9sbFRvSHJlZklkOiBFTlVNX3N0YXRpY19zY3JvbGxfaHJlZl9JZC5oaXN0b3J5LFxyXG4gICAgLy8gLyoqQHR5cGUge0VOVU1fcmVhY3RTd2l0Y2hQYWdlfSAqL1xyXG4gICAgLy8gcmVhY3RTd2l0Y2hQYWdlOiBFTlVNX3JlYWN0U3dpdGNoUGFnZS5Qcm9kdWN0TGlzdFNlYXJjaCxcclxuICAgIC8qKkB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICBzaG9wSXRlbUNvdW50OiAwLFxyXG4gICAgLyoqQHR5cGUge2N1c0Z1bGxQYWdlU2Nyb2xsfX0gKi9cclxuICAgIGN1c0Z1bGxQYWdlU2Nyb2xsOiBudWxsLFxyXG4gICAgLyoqQHR5cGUge2N1c01vZGFsTG9naW59ICovXHJcbiAgICBjdXNNb2RhbExvZ2luOiBudWxsLFxyXG4gICAgLyoqQHR5cGUge2N1c01vZGFsVXNlclByb2ZpbGV9fSAqL1xyXG4gICAgY3VzTW9kYWxVc2VyUHJvZmlsZTogbnVsbCxcclxufVxyXG5cclxuXHJcbndpbmRvdy5hcHAgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBjYWxsYmFjayBwdXNoVXJsRnVuY1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIC4uLlxyXG4gICAgICovXHJcbiAgICBwdXNoVXJsOiAodXJsKSA9PiB7XHJcbiAgICAgICAgLyogaGlzdG9yeS5wdXNoKD8pICovXHJcbiAgICB9LFxyXG4gICAgdmlld1NpemU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJCgnI3NpemVyJykuZmluZCgnZGl2OnZpc2libGUnKS5kYXRhKCdzaXplJyk7XHJcbiAgICB9LFxyXG4gICAgc2V0U2hvcEl0ZW1Db3VudDogZnVuY3Rpb24gKGl0ZW1Db3VudCkge1xyXG4gICAgICAgIHByb3h5TWFpblBhZ2VVSS5zaG9wSXRlbUNvdW50ID0gaXRlbUNvdW50O1xyXG4gICAgfSxcclxuICAgIG5hdmJhcjE6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYXZiYXIxJyksXHJcbiAgICBvcGVuTW9kYWxTaG9wQ2FydDogbnVsbCxcclxuICAgIHVzZXJEYXRhOiBudWxsLFxyXG4gICAgaGlzdG9yeTogbnVsbCxcclxuICAgIHN0b3JlOm51bGwsXHJcbiAgICBzd2l0Y2hJbmRleFBhZ2U6IHN3aXRjaEluZGV4UGFnZSxcclxuICAgIHBhZ2VWaWV3T3JkZXJzOm51bGwsXHJcbiAgICBhcnJheUdyb3VwZWRDYXRlZ29yaWVzOiBudWxsLFxyXG4gICAgYXJyYXlQcm9kdWN0SW5mbzogbnVsbCxcclxufVxyXG53aW5kb3cuYXBwID0gbmV3IFByb3h5KHdpbmRvdy5hcHAsIHtcclxuICAgIGdldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3ApIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3AsIHZhbHVlKXtcclxuICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuICAgICAgICAgICAgY2FzZSAndXNlckRhdGEnOlxyXG4gICAgICAgICAgICAgICAgaWYodmFsdWU9PT1udWxsKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LmFwcC51c2VyRGF0YSAtLT4nLCB2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICBwcm94eVVzZXJNZW51RHJvcGRvd24uaXNMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3h5VXNlck1lbnVEcm9wZG93bi5sb2dpbk5hbWUgPSAnJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LmFwcC51c2VyRGF0YSAtLT4nLCB2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAvL25hdmJhckNvbGxhcHNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1VzZXJEYXRhID0gdmFsdWU7Ly90YXJnZXRbcHJvcF07XHJcbiAgICAgICAgICAgICAgICAgICAgcHJveHlVc2VyTWVudURyb3Bkb3duLmlzTG9naW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3h5VXNlck1lbnVEcm9wZG93bi5sb2dpbk5hbWUgPSBuZXdVc2VyRGF0YS5lbWFpbFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdPXZhbHVlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59KVxyXG4gICAgXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChldnQpID0+IHtcclxuICAgIC8vY29uc29sZS5sb2coJ2NsaWNrIHd3d3d3dycpXHJcbiAgICBuYXZiYXJDb2xsYXBzZSgpO1xyXG59KVxyXG4vLyBsZXQgZGl2TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkaXZNZW51JylcclxuLy8gZGl2TWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGV2dCkgPT4ge1xyXG4vLyAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXHJcbi8vICAgICAvL2NvbnNvbGUubG9nKCdjbGljayBkaXZNZW51JylcclxuLy8gfSlcclxuXHJcbmZ1bmN0aW9uIHN3aXRjaEluZGV4UGFnZShlbnVtX3N3aXRjaEluZGV4UGFnZSkge1xyXG4gICAgc3dpdGNoIChlbnVtX3N3aXRjaEluZGV4UGFnZSkge1xyXG4gICAgICAgIGNhc2UgRU5VTV9zd2l0Y2hJbmRleFBhZ2UuUHJvZHVjdExpc3RTZWFyY2g6XHJcbiAgICAgICAgICAgIHByb3h5TWFpblBhZ2VVSS5pc1JlYWN0UGFnZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vcHJveHlNYWluUGFnZVVJLnJlYWN0U3dpdGNoUGFnZSA9IEVOVU1fcmVhY3RTd2l0Y2hQYWdlLlByb2R1Y3RMaXN0U2VhcmNoO1xyXG4gICAgICAgICAgICB3aW5kb3cuYXBwLnB1c2hVcmwoJy9Qcm9kdWN0TGlzdFNlYXJjaCcpOyAvL1Byb2R1Y3RMaXN0U2VhcmNoXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ2F1dG8nIC8vJ3Ntb290aCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCA1MDApOyAvLzDnmoToqbHmnInlj6/og73nhKHms5Xmu5HliLDmnIDpoILnq6/vvIznnIvpgYvmsKNcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFTlVNX3N3aXRjaEluZGV4UGFnZS5WaWV3T3JkZXJzOlxyXG4gICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuaXNSZWFjdFBhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnYXJyYXlPcmRlckluZm8tLT4nLCB3aW5kb3cuYXBwLnBhZ2VWaWV3T3JkZXJzKS8vLnN0YXRlLmFycmF5T3JkZXJJbmZvXHJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5hcHAucGFnZVZpZXdPcmRlcnMgJiYgd2luZG93LmFwcC5wYWdlVmlld09yZGVycy5zdGF0ZS5hcnJheU9yZGVySW5mby5sZW5ndGg9PT0wKXtcclxuICAgICAgICAgICAgICAgIGxldCBzdG9yZSA9IHdpbmRvdy5hcHAuc3RvcmU7XHJcbiAgICAgICAgICAgICAgICBsZXQgdWlkID0gd2luZG93LmFwcC51c2VyRGF0YS51aWRcclxuICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKGxvYWRfb3JkZXJMaXN0QXN5bmModWlkLCBFTlVNX29yZGVyU3RhdHVzLmFsbCkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy93aW5kb3cuYXBwLnBhZ2VWaWV3T3JkZXJzLnF1ZXJ5T3JkZXJTdGF0dXMoRU5VTV9vcmRlclN0YXR1cy5hbGwpO1xyXG5cclxuICAgICAgICAgICAgLy9xdWVyeU9yZGVyU3RhdHVzXHJcblxyXG5cclxuICAgICAgICAgICAgLy9wcm94eU1haW5QYWdlVUkucmVhY3RTd2l0Y2hQYWdlID0gRU5VTV9yZWFjdFN3aXRjaFBhZ2UuVmlld09yZGVycztcclxuICAgICAgICAgICAgd2luZG93LmFwcC5wdXNoVXJsKCcvVmlld09yZGVycycpOyAvL1Byb2R1Y3RMaXN0U2VhcmNoXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ2F1dG8nIC8vJ3Ntb290aCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCA1MDApOyAvLzDnmoToqbHmnInlj6/og73nhKHms5Xmu5HliLDmnIDpoILnq6/vvIznnIvpgYvmsKNcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gdHJ1ZTtcclxuICAgIC8vRU5VTV9zd2l0Y2hJbmRleFBhZ2VcclxufVxyXG4vLy0tLS0tLS0tLS0tLS1Qcm94eVxyXG4vLy0tLXB1cmUgZGF0YVxyXG5sZXQgcHJveHlVc2VyTWVudURyb3Bkb3duID0ge1xyXG4gICAgLyoqIHVzZXIgZHJvcGRvd24gbWVudSwgZGlzcGxheSBsb2dpbiBidXR0b24gLyB1c2VyIGRyb3Bkb3duIG1lbnUgKi9cclxuICAgIGlzTG9naW46IGZhbHNlLFxyXG4gICAgLyoqIHVzZXIgZHJvcGRvd24gbWVudSwgZGlzcGxheSBlbWFpbCBhY2NvdW50IG5hbWUgKi9cclxuICAgIGxvZ2luTmFtZTogXCJcIixcclxufVxyXG4vL212dm0gb2JzZXJ2ZWJsZSBwYXR0ZXJuXHJcbnByb3h5VXNlck1lbnVEcm9wZG93biA9IG5ldyBQcm94eShwcm94eVVzZXJNZW51RHJvcGRvd24sIHtcclxuICAgIGdldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3ApIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJpc0xvZ2luXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIGNsYXNzIGRpc3BsYXlOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgbGlMb2dpbi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpXHJcbiAgICAgICAgICAgICAgICAgICAgbGlVc2VyRHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheU5vbmUnKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2FkZCBjbGFzcyBkaXNwbGF5Tm9uZVxyXG4gICAgICAgICAgICAgICAgICAgIGxpTG9naW4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheU5vbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpVXNlckRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFzc2VydExvZy5sb2dpblN1Y2Nlc3MubG9nKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibG9naW5OYW1lXCI6XHJcbiAgICAgICAgICAgICAgICBzcGFuRGlzcGxheUVtYWlsLnRleHRDb250ZW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhc3NlcnRMb2cuZGlzcGxheUxvZ2luTmFtZS5sb2codmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0pXHJcblxyXG4vL3Rlc3QgbXZ2bSBkYXRhIGJpbmRpbmdcclxuLy8gbGV0IGFUZXN0TG9naW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYVRlc3RMb2dpbicpO1xyXG4vLyBsZXQgYVRlc3RMb2dvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYVRlc3RMb2dvdXQnKTtcclxuLy8gYVRlc3RMb2dpbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbi8vICAgICBwcm94eVVzZXJNZW51RHJvcGRvd24uaXNMb2dpbiA9IHRydWU7XHJcbi8vICAgICBwcm94eVVzZXJNZW51RHJvcGRvd24ubG9naW5OYW1lID0gXCJKb2huXCJcclxuLy8gfSlcclxuLy8gYVRlc3RMb2dvdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4vLyAgICAgcHJveHlVc2VyTWVudURyb3Bkb3duLmlzTG9naW4gPSBmYWxzZTtcclxuLy8gfSlcclxuXHJcbi8vLS0tLS0tLS0tLS0tZmlyZWJhc2Ugb25BdXRoQ2hhbmdlZFxyXG4vLyB0c2V0IGNhc2UgMTogbm8gYXV0aFVzZXIgKG5vdCBzaWduaW4pXHJcbi8vIHRzZXQgY2FzZSAyOiBoYXMgYXV0aFVzZXIgLS0gVUkgZGlzcGxheSBuYW1lIGNoYW5nZVxyXG4vLyB0c2V0IGNhc2UgMzogKGhhcyBhdXRoVXNlciwgaGFzIHdpbmRvdy5hcHAudXNlckRhdGEpIC0tIHN5bmMgZW1haWxWZXJpZmllZF9hdXRoXHJcbi8vIHRzZXQgY2FzZSA0OiAoaGFzIGF1dGhVc2VyLCBubyB3aW5kb3cuYXBwLnVzZXJEYXRhKSAtLSBnZXREYlVzZXJcclxuLy8gdHNldCBjYXNlIDU6IChoYXMgYXV0aFVzZXIsIG5vIHdpbmRvdy5hcHAudXNlckRhdGEsIGhhcyBEYlVzZXIpIC0tIHdpbmRvdy5hcHAudXNlckRhdGEgPSBkYlVzZXI7ICsgc3luYyBlbWFpbFZlcmlmaWVkX2F1dGg7XHJcbi8vIHRzZXQgY2FzZSA2OiAoaGFzIGF1dGhVc2VyLCBubyB3aW5kb3cuYXBwLnVzZXJEYXRhLCBubyBEYlVzZXIpIC0tIHVzZXJJbmZvID0gYXV0aFVzZXI7ICsgd2luZG93LmFwcC51c2VyRGF0YSA9IHVzZXJJbmZvKOW3suWQjOaZgiBzeW5jIGVtYWlsVmVyaWZpZWRfYXV0aCk7XHJcbmZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSovIGF1dGhVc2VyKSB7XHJcbiAgICBsZXQgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTtcclxuICAgIC8vZnVuY3Rpb25zLi4uLlxyXG4gICAgLyoqXHJcbiAgICAgKiBzYXZlIHBhcnRpYWwgZmllbGRzIG9mIFVzZXJJbmZvIHRvIGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdVc2VycycpXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gdXNlckluZm8gXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFNldFVzZXJEYXRhKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgLy8gbGV0IHR5cGUgPSBcclxuICAgICAgICByZXR1cm4gZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Vc2VycykuZG9jKHVzZXJJbmZvLnVpZCkuc2V0KHVzZXJJbmZvLCB7XHJcbiAgICAgICAgICAgIG1lcmdlOiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogc2F2ZSBVc2VySW5mby5lbWFpbFZlcmlmaWVkIHRvIGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdVc2VycycpXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVtYWlsVmVyaWZpZWRfRnJvbUF1dGggYXV0aC11c2VyJ3MgZW1haWxWZXJpZmllZCBwcm9wIHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdWlkIGF1dGgtdXNlcidzIHVpZFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzeW5jRW1haWxWZXJpZmllZF9Ub0RCKGVtYWlsVmVyaWZpZWRfRnJvbUF1dGgsIHVpZCkge1xyXG4gICAgICAgIGxldCB1c2VySW5mbyA9IHtcclxuICAgICAgICAgICAgdWlkOiB1aWQsXHJcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IGVtYWlsVmVyaWZpZWRfRnJvbUF1dGhcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFNldFVzZXJEYXRhKHVzZXJJbmZvKVxyXG4gICAgfVxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgaWYgKGF1dGhVc2VyKSB7XHJcbiAgICAgICAgLy8gVXNlciBpcyBzaWduZWQgaW4uXHJcblxyXG4gICAgICAgIHByb3h5VXNlck1lbnVEcm9wZG93bi5pc0xvZ2luID0gdHJ1ZTtcclxuICAgICAgICBwcm94eVVzZXJNZW51RHJvcGRvd24ubG9naW5OYW1lID0gYXV0aFVzZXIuZW1haWxcclxuXHJcbiAgICAgICAgLy8gbGV0IHVpZCA9IGF1dGhVc2VyLnVpZFxyXG4gICAgICAgIC8vIGxldCBlbWFpbFZlcmlmaWVkID0gYXV0aFVzZXIuZW1haWxWZXJpZmllZFxyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHVpZCxcclxuICAgICAgICAgICAgZW1haWxWZXJpZmllZDogZW1haWxWZXJpZmllZF9hdXRoXHJcbiAgICAgICAgfSA9IGF1dGhVc2VyXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJMT0c6OiBhdXRoVXNlclwiLCBhdXRoVXNlcilcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkxPRzo6IHVpZFwiLCB1aWQpXHJcblxyXG4gICAgICAgIC8vLS0tLXdpbmRvdy5hcHAudXNlckRhdGEgZXhpc3RcclxuICAgICAgICBpZiAod2luZG93LmFwcC51c2VyRGF0YSkge1xyXG4gICAgICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDogZW1haWxWZXJpZmllZF9kYlxyXG4gICAgICAgICAgICB9ID0gd2luZG93LmFwcC51c2VyRGF0YVxyXG4gICAgICAgICAgICAvL3N5bmMgYXV0aCBlbWFpbFZlcmlmaWVkIHRvIERCXHJcbiAgICAgICAgICAgIGlmIChlbWFpbFZlcmlmaWVkX2F1dGggIT0gZW1haWxWZXJpZmllZF9kYilcclxuICAgICAgICAgICAgICAgIHN5bmNFbWFpbFZlcmlmaWVkX1RvREIoZW1haWxWZXJpZmllZF9hdXRoLCB1aWQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vLS0tLXdpbmRvdy5hcHAudXNlckRhdGEgbm90IGV4aXN0IVxyXG4gICAgICAgIGlmICghd2luZG93LmFwcC51c2VyRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZCB1c2VyIGRhdGEgZnJvbSBmaXJlc3RvcmUuLi4nKVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RGJVc2VyKCAvKipAdHlwZSB7c3RyaW5nfSAqLyB1aWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlVzZXJzKS5kb2ModWlkKS5nZXQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCggLyoqQHR5cGUge2FueX0qLyBxdWVyeVNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVNuYXBzaG90LmV4aXN0cyA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5U25hcHNob3QuZGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGRiVXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGV4aXN0czogcXVlcnlTbmFwc2hvdC5leGlzdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBkb2M6IHF1ZXJ5U25hcHNob3QuZGF0YSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGRiVXNlclxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2FueX0gYXV0aFVzZXIgXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRVc2VySW5mbyhhdXRoVXNlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHVzZXJJbmZvID0gbmV3IFVzZXJEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgZGlzcGFseU5hbWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKGF1dGhVc2VyLmRpc3BhbHlOYW1lID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZGlzcGFseU5hbWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8gZWxzZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGRpc3BhbHlOYW1lID0gYXV0aFVzZXIuZGlzcGFseU5hbWU7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5kaXNwYWx5TmFtZSA9IChhdXRoVXNlci5kaXNwYWx5TmFtZSkgPyBhdXRoVXNlci5kaXNwYWx5TmFtZSA6IG51bGxcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvLmVtYWlsID0gYXV0aFVzZXIuZW1haWw7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5lbWFpbFZlcmlmaWVkID0gYXV0aFVzZXIuZW1haWxWZXJpZmllZDtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvLnBob25lTnVtYmVyID0gYXV0aFVzZXIucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5waG90b1VSTCA9IGF1dGhVc2VyLnBob3RvVVJMO1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8udWlkID0gYXV0aFVzZXIudWlkO1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8ubGlzdFByb3ZpZGVySWQgPSBVc2VyRGF0YS5nZXRMaXN0UHJvdmlkZXJJZF9CeUF1dGhVc2VyUHJvdmlkZXJEYXRhKGF1dGhVc2VyLnByb3ZpZGVyRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvL3Byb3ZpZGVySWQ6IGF1dG8gZ2V0IGJ5IHNlbGYuIC8vYXV0aFVzZXIucHJvdmlkZXJEYXRhWzBdLnByb3ZpZGVySWQsICAgXHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJJbmZvXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gc3RhcnQgbG9hZCBkYiB1c2VyIGluZm8gLS0+IHJlYWR5IHRvIHNldCB3aW5kb3cuYXBwLnVzZXJEYXRhXHJcbiAgICAgICAgICAgIGdldERiVXNlcih1aWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoIC8qKkB0eXBlIHthbnl9Ki8gZGJVc2VyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGIgdXNlciBleGlzdFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYlVzZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFwcC51c2VyRGF0YSA9IE9iamVjdC5hc3NpZ24obmV3IFVzZXJEYXRhKCksIGRiVXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbWFpbFZlcmlmaWVkX2RiID0gZGJVc2VyLmVtYWlsVmVyaWZpZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zeW5jIGF1dGggZW1haWxWZXJpZmllZCB0byBEQlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW1haWxWZXJpZmllZF9hdXRoICE9IGVtYWlsVmVyaWZpZWRfZGIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW5jRW1haWxWZXJpZmllZF9Ub0RCKGVtYWlsVmVyaWZpZWRfYXV0aCwgdWlkKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gLy9ub3QgZXhpc3RcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9nZXQgaW5mbyBmcm9tIGF1dGhVc2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1c2VySW5mbyA9IGdldFVzZXJJbmZvKGF1dGhVc2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFwcC51c2VyRGF0YSA9IHVzZXJJbmZvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NhdmUgaW5mbyB0byBkYiAoRmlyc3QgdGltZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJEYXRhX2ZzID0gZ2V0UGxhaW5PYmplY3QodXNlckluZm8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldFVzZXJEYXRhKHVzZXJEYXRhX2ZzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRydWUgLy9uZXcgdXNlclxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCggLyoqQHR5cGUge2FueX0qLyBlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdvbkF1dGhTdGF0ZUNoYW5nZWQsIGdldCB1c2VyRGF0YSBmYWlsZWQuICcsIGVyci5jb2RlLCBlcnIubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIE5vIHVzZXIgaXMgc2lnbmVkIGluLlxyXG4gICAgICAgIHByb3h5VXNlck1lbnVEcm9wZG93bi5pc0xvZ2luID0gZmFsc2U7XHJcbiAgICAgICAgcHJveHlVc2VyTWVudURyb3Bkb3duLmxvZ2luTmFtZSA9IG51bGxcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gdXNlciBpcyBzaWduZWQgaW4uLi4nKVxyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG4vL2ZpcmViYXNlLmFuYWx5dGljcygpO1xyXG4vLyBjb25zb2xlLmxvZyhmaXJlYmFzZSlcclxuXHJcbi8vIGxldCBkYiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpO1xyXG5cclxuLy8gZGIuY29sbGVjdGlvbihcIlByb2R1Y3RzXCIpLy8ud2hlcmUoXCJhdXRvTnVtXCIsIFwiPT1cIiwgNylcclxuLy8gICAgIC5nZXQoKVxyXG4vLyAgICAgLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHtcclxuLy8gICAgIH0pXHJcbi8vICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG5cclxuLy8gICAgIH0pXHJcbi8vIGNvbnNvbGUubG9nKF9fZGlybmFtZSlcclxuXHJcblxyXG5cclxuLy9tdnZtIG9ic2VydmVibGUgcGF0dGVyblxyXG5cclxubGV0IHBhZ2VTdGF0aWMgPSAkKCcjcGFnZS1zdGF0aWMnKVxyXG5sZXQgcGFnZVJlYWN0ID0gJCgnI3BhZ2UtcmVhY3QnKVxyXG4vL2xldCBuYXZiYXIxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdmJhcjEnKTtcclxuLy9sZXQgbmF2YmFyX2hlaWdodCA9IHdpbmRvdy5hcHAubmF2YmFyMS5vZmZzZXRIZWlnaHQgKyA1XHJcbnByb3h5TWFpblBhZ2VVSSA9IG5ldyBQcm94eShwcm94eU1haW5QYWdlVUksIHtcclxuICAgIGdldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3ApIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJpc1JlYWN0UGFnZVwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU3RhdGljLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VSZWFjdC5mYWRlSW4oNTAwKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU3RhdGljLmZhZGVJbig1MDApXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVJlYWN0LmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxUb0hyZWZJZFwiOlxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmN1c0Z1bGxQYWdlU2Nyb2xsLnNjcm9sbFRvRWxlbSgnIycgKyB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic2hvcEl0ZW1Db3VudFwiOlxyXG4gICAgICAgICAgICAgICAgLy8kKCcuZmEtc2hvcHBpbmctY2FydCcpLmF0dHIoXCJkYXRhLWNvdW50XCIsIHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgbGV0IG51bWJlckJhZGdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5udW1iZXJCYWRnZScpXHJcbiAgICAgICAgICAgICAgICBudW1iZXJCYWRnZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gY2FzZSBcInJlYWN0U3dpdGNoUGFnZVwiOlxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY2FzZSBFTlVNX3JlYWN0U3dpdGNoUGFnZS5Qcm9kdWN0TGlzdFNlYXJjaDpcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHdpbmRvdy5hcHAucHVzaFVybCgnL1Byb2R1Y3RMaXN0U2VhcmNoJyk7IC8vUHJvZHVjdExpc3RTZWFyY2hcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdhdXRvJyAvLydzbW9vdGgnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9LCAxMCk7IC8vMOeahOipseacieWPr+iDveeEoeazlea7keWIsOacgOmgguerr++8jOeci+mBi+awo1xyXG5cclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjYXNlIEVOVU1fcmVhY3RTd2l0Y2hQYWdlLlZpZXdPcmRlcnM6XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB3aW5kb3cuYXBwLnB1c2hVcmwoJy9WaWV3T3JkZXJzJyk7IC8vUHJvZHVjdExpc3RTZWFyY2hcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdhdXRvJyAvLydzbW9vdGgnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9LCAxMCk7IC8vMOeahOipseacieWPr+iDveeEoeazlea7keWIsOacgOmgguerr++8jOeci+mBi+awo1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0pXHJcblxyXG5cclxuLy8tLS0tLS0tLS0tLS0gbG9hZCB3ZWJjb21wb25lbnRzXHJcbmxldCBuZXdUYWdOYW1lID0gXCJjdXMtZnVsbC1wYWdlLXNjcm9sbFwiO1xyXG5sZXQgcGF0aEh0bWxfZnVsbFBhZ2VTY3JvbGwgPSAnLi4vLi4vd2ViY29tcG9uZW50cy9jdXNGdWxsUGFnZVNjcm9sbC9mdWxsUGFnZVNjcm9sbC5odG0nO1xyXG5pZiAoIXByb3h5TWFpblBhZ2VVSS5jdXNGdWxsUGFnZVNjcm9sbClcclxuICAgIHVzZUNvbXBvbmVudChuZXdUYWdOYW1lLCBwYXRoSHRtbF9mdWxsUGFnZVNjcm9sbCwgY3VzRnVsbFBhZ2VTY3JvbGwpXHJcbiAgICAudGhlbigoaHRtbEZpbGUpID0+IHtcclxuICAgICAgICBsZXQgbmV3Q29tcG9uZW50ID0gbmV3IGh0bWxGaWxlLmN0b3IoaHRtbEZpbGUudGVtcGxhdGVDb250ZW50KTtcclxuICAgICAgICBwcm94eU1haW5QYWdlVUkuY3VzRnVsbFBhZ2VTY3JvbGwgPSBuZXdDb21wb25lbnRcclxuICAgICAgICBwYWdlU3RhdGljLmFwcGVuZChuZXdDb21wb25lbnQpXHJcbiAgICAgICAgLy9uZXdDb21wb25lbnQuc2Nyb2xsVG9FbGVtKCcjbmV3cycpXHJcbiAgICB9KVxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLUNvbnN0cnVjdG9yKCktPiBzZXRGaXJlYmFzZShmaXJlYmFzZSkgLSA+IEF1dGgoKS5nZXRSZWRpcmVjdFJlc3VsdCgpXHJcbm5ld1RhZ05hbWUgPSBcImN1cy1tb2RhbC1sb2dpblwiO1xyXG4vL2xldCBsb2dpbl9FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuZXdUYWdOYW1lKTtcclxuaWYgKCFwcm94eU1haW5QYWdlVUkuY3VzTW9kYWxMb2dpbikge1xyXG4gICAgdXNlQ29tcG9uZW50KG5ld1RhZ05hbWUsICcuLi8uLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uaHRtJywgY3VzTW9kYWxMb2dpbilcclxuICAgICAgICAudGhlbigoaHRtbEZpbGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IHBsdWdpbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBTd2FsLFxyXG4gICAgICAgICAgICAgICAgRW1haWxfUmVzZW5kUGFzc3dvcmRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2NsYXNzLWluc3RhbmNlIEFQUEVBUiEhICB5b3UgY2FuIHNldCB0ZW1wbGF0ZSBub3d+fn5cclxuICAgICAgICAgICAgLyoqQHR5cGUge2N1c01vZGFsTG9naW59ICovXHJcbiAgICAgICAgICAgIGxldCBuZXdDb21wb25lbnQgPSBuZXcgaHRtbEZpbGUuY3RvcihodG1sRmlsZS50ZW1wbGF0ZUNvbnRlbnQsIHBsdWdpbnMpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgKFdlYnBhY2tEZWZpbmVQbHVnaW4uZGV2TW9kZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgbmV3Q29tcG9uZW50LnByb3h5VUkuYmluZElwdFNpZ25pbkVtYWlsID0gJ2ljZTRraW1vQHlhaG9vLmNvbS50dydcclxuICAgICAgICAgICAgLy8gICAgIG5ld0NvbXBvbmVudC5wcm94eVVJLmJpbmRJcHRTaWduaW5QV0QgPSAnMTExMTExMTEnXHJcbiAgICAgICAgICAgIC8vICAgICBuZXdDb21wb25lbnQucHJveHlVSS5iaW5kSXB0UmVnaXN0ZXJFbWFpbCA9ICdpY2U0a2ltb0B5YWhvby5jb20udHcnXHJcbiAgICAgICAgICAgIC8vICAgICBuZXdDb21wb25lbnQucHJveHlVSS5iaW5kSXB0UmVnaXN0ZXJQV0QxID0gJzExMTExMTExJ1xyXG4gICAgICAgICAgICAvLyAgICAgbmV3Q29tcG9uZW50LnByb3h5VUkuYmluZElwdFJlZ2lzdGVyUFdEMiA9ICcxMTExMTExMSdcclxuICAgICAgICAgICAgLy8gICAgIG5ld0NvbXBvbmVudC5wcm94eVVJLmJpbmRJcHRSZXNlbnRQd2RFbWFpbCA9ICdpY2U0a2ltb0B5YWhvby5jb20udHcnXHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcblxyXG4gICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuY3VzTW9kYWxMb2dpbiA9IG5ld0NvbXBvbmVudFxyXG4gICAgICAgICAgICAvKipAdHlwZSB7YW55fSAqL1xyXG4gICAgICAgICAgICBsZXQgbm9kZSA9IG5ld0NvbXBvbmVudFxyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vZGUpXHJcbiAgICAgICAgfSlcclxufVxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0gYU15UHJvZmlsZVxyXG5sZXQgcGF0aEh0bWxfdXNlclByb2ZpbGUgPSAnLi4vLi4vd2ViY29tcG9uZW50cy9jdXNNb2RhbFVzZXJQcm9maWxlMy9jdXNNb2RhbFVzZXJQcm9maWxlLmh0bSc7XHJcbmFNeVByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbmF2YmFyQ29sbGFwc2UoKTtcclxuICAgIGxldCBuZXdUYWdOYW1lID0gXCJjdXMtbW9kYWwtdXNlci1wcm9maWxlXCI7XHJcbiAgICAvL2xldCBsb2dpbl9FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuZXdUYWdOYW1lKTtcclxuICAgIGlmIChwcm94eU1haW5QYWdlVUkuY3VzTW9kYWxVc2VyUHJvZmlsZSlcclxuICAgICAgICBwcm94eU1haW5QYWdlVUkuY3VzTW9kYWxVc2VyUHJvZmlsZS5zaG93TW9kYWwodHJ1ZSlcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHVzZUNvbXBvbmVudChuZXdUYWdOYW1lLCBwYXRoSHRtbF91c2VyUHJvZmlsZSwgY3VzTW9kYWxVc2VyUHJvZmlsZSlcclxuICAgICAgICAgICAgLnRoZW4oKGNvbXBVSSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBsdWdpbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgU3dhbCxcclxuICAgICAgICAgICAgICAgICAgICBFbWFpbF9SZXNlbmRQYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBuZXdDb21wb25lbnQgPSBuZXcgY29tcFVJLmN0b3IoY29tcFVJLnRlbXBsYXRlQ29udGVudCwgcGx1Z2lucyk7XHJcbiAgICAgICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuY3VzTW9kYWxVc2VyUHJvZmlsZSA9IG5ld0NvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgLy8gbmV3Q29tcG9uZW50LnNldERhdGFEZWZpbmUoe1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIFVzZXJEYXRhOiBVc2VyRGF0YVxyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5ld0NvbXBvbmVudClcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdWlkID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZFxyXG4gICAgICAgICAgICAgICAgbmV3Q29tcG9uZW50LmxvYWREYlByb2ZpbGUodWlkKTtcclxuICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93TW9kYWwodHJ1ZSlcclxuICAgICAgICAgICAgICAgIC8vVUkgY29udHJvbFxyXG4gICAgICAgICAgICAgICAgbmV3Q29tcG9uZW50LnByb3h5VUkuaXNFbWFpbFZlcmlmaWVkID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBnZXQgNSBuYXZiYXIgaXRlbXNcclxubGV0IGFsbF9NZW51SHJlZiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZl0nKVxyXG4vLyAtLS0tLS0tLS0tLSBhZGQgYnV0dG9uIGNsaWNrIGV2ZW50XHJcbi8vICAgICA8YSBocmVmPVwiI2hpc3RvcnlcIiBjbGFzcz1cIm5hdi1saW5rXCI+6ICB5bqX5q235Y+yPC9hPlxyXG4vLyAgICAgPGEgaHJlZj1cIiNuZXdzXCIgY2xhc3M9XCJuYXYtbGlua1wiPuacgOaWsOa2iOaBrzwvYT5cclxuLy8gICAgIDxhIGhyZWY9XCIjcGFnZS1yZWFjdFwiIGNsYXNzPVwibmF2LWxpbmtcIiBpZD1cImFPcmRlclByb2R1Y3RzXCI+55Si5ZOB6KiC6LO8PC9hPlxyXG4vLyAgICAgPGEgaHJlZj1cIiNxYW5kYVwiIGNsYXNzPVwibmF2LWxpbmtcIj7luLjopovllY/poYwo6LO854mpKTwvYT5cclxuLy8gICAgIDxhIGhyZWY9XCIjY29udGFjdHVzXCIgY2xhc3M9XCJuYXYtbGlua1wiPuiBr+e1oeaIkeWAkTwvYT5cclxubGV0IGFycmF5X01lbnVIcmVmcyA9IFsuLi5hbGxfTWVudUhyZWZdLmZpbHRlcigoaXRlbSkgPT4ge1xyXG4gICAgbGV0IGhyZWYgPSBpdGVtLmdldEF0dHJpYnV0ZSgnaHJlZicpXHJcbiAgICByZXR1cm4gaHJlZiAhPT0gXCIjXCIgLy8g57i95YWx5pyJNeWAi1xyXG59KVxyXG5cclxuZnVuY3Rpb24gbmF2YmFyQ29sbGFwc2UoKSB7XHJcbiAgICAkKCcubmF2YmFyLWNvbGxhcHNlJykuY29sbGFwc2UoJ2hpZGUnKTtcclxuICAgIC8vICQoJy5uYXZiYXItbmF2PmxpPmEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgLy8gICAgICQoJy5uYXZiYXItY29sbGFwc2UnKS5jb2xsYXBzZSgnaGlkZScpO1xyXG4gICAgLy8gfSk7XHJcbn1cclxuLy8gYWRkIG5hdiBpdGVtIGNsaWNrIGV2ZW50XHJcbi8vIGUucHJldmVudERlZmF1bHQoKS0+aWdub3JlIGRlZmF1bHQgc2Nyb2xsIGJlaGF2aW9yLCBuZWVkIHRvIGNoYW5nZSByZWFjdCBwYWdlP1xyXG5hcnJheV9NZW51SHJlZnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgbGV0IGhyZWYgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpXHJcbiAgICBzd2l0Y2ggKGhyZWYpIHtcclxuICAgICAgICBjYXNlICcjcGFnZS1yZWFjdCc6XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgICAgICBuYXZiYXJDb2xsYXBzZSgpO1xyXG4gICAgICAgICAgICAgICAgLy9wcm94eU1haW5QYWdlVUkuaXNSZWFjdFBhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy9wcm94eU1haW5QYWdlVUkucmVhY3RTd2l0Y2hQYWdlID0gRU5VTV9yZWFjdFN3aXRjaFBhZ2UuUHJvZHVjdExpc3RTZWFyY2g7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hcHAuc3dpdGNoSW5kZXhQYWdlKEVOVU1fc3dpdGNoSW5kZXhQYWdlLlByb2R1Y3RMaXN0U2VhcmNoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnI2hpc3RvcnknOlxyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgbmF2YmFyQ29sbGFwc2UoKTtcclxuICAgICAgICAgICAgICAgIHByb3h5TWFpblBhZ2VVSS5pc1JlYWN0UGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcHJveHlNYWluUGFnZVVJLnNjcm9sbFRvSHJlZklkID0gRU5VTV9zdGF0aWNfc2Nyb2xsX2hyZWZfSWQuaGlzdG9yeVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnI25ld3MnOlxyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgbmF2YmFyQ29sbGFwc2UoKTtcclxuICAgICAgICAgICAgICAgIHByb3h5TWFpblBhZ2VVSS5pc1JlYWN0UGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcHJveHlNYWluUGFnZVVJLnNjcm9sbFRvSHJlZklkID0gRU5VTV9zdGF0aWNfc2Nyb2xsX2hyZWZfSWQubmV3c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnI3FhbmRhJzpcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgIG5hdmJhckNvbGxhcHNlKCk7XHJcbiAgICAgICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuaXNSZWFjdFBhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHByb3h5TWFpblBhZ2VVSS5zY3JvbGxUb0hyZWZJZCA9IEVOVU1fc3RhdGljX3Njcm9sbF9ocmVmX0lkLnFhbmRhXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICcjY29udGFjdHVzJzpcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgIG5hdmJhckNvbGxhcHNlKCk7XHJcbiAgICAgICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuaXNSZWFjdFBhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHByb3h5TWFpblBhZ2VVSS5zY3JvbGxUb0hyZWZJZCA9IEVOVU1fc3RhdGljX3Njcm9sbF9ocmVmX0lkLmNvbnRhY3R1c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tIGxpTG9naW5cclxubGlMb2dpbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgIHByb3h5TWFpblBhZ2VVSS5jdXNNb2RhbExvZ2luLnNob3dNb2RhbCh0cnVlKVxyXG59KTtcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tIGFMb2dvdXRcclxuYUxvZ291dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgIG5hdmJhckNvbGxhcHNlKCk7XHJcbiAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFNpZ24tb3V0IHN1Y2Nlc3NmdWwuXHJcbiAgICAgICAgd2luZG93LmFwcC51c2VyRGF0YSA9IG51bGw7XHJcbiAgICAgICAgd2luZG93LmFwcC5zd2l0Y2hJbmRleFBhZ2UoRU5VTV9zd2l0Y2hJbmRleFBhZ2UuUHJvZHVjdExpc3RTZWFyY2gpO1xyXG4gICAgICAgIHByb3h5TWFpblBhZ2VVSS5pc1JlYWN0UGFnZSA9IGZhbHNlO1xyXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSovIGVycm9yKSB7XHJcbiAgICAgICAgLy8gQW4gZXJyb3IgaGFwcGVuZWQuXHJcbiAgICB9KTtcclxufSlcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tIGFNeU9yZGVyXHJcbmFNeU9yZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgbmF2YmFyQ29sbGFwc2UoKTtcclxuICAgIHdpbmRvdy5hcHAuc3dpdGNoSW5kZXhQYWdlKEVOVU1fc3dpdGNoSW5kZXhQYWdlLlZpZXdPcmRlcnMpO1xyXG4gICAgLy8gcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gdHJ1ZVxyXG4gICAgLy8gcHJveHlNYWluUGFnZVVJLnJlYWN0U3dpdGNoUGFnZSA9IEVOVU1fcmVhY3RTd2l0Y2hQYWdlLlZpZXdPcmRlcnNcclxuICAgIC8vd2luZG93LmFwcC5wdXNoVXJsKCcvVmlld09yZGVycycpOyAvL1Byb2R1Y3RMaXN0U2VhcmNoXHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIG9wZW5TaG9wQ2FydCgpIHtcclxuICAgIGxldCBzdGF0ZSA9IHdpbmRvdy5hcHAuc3RvcmUuZ2V0U3RhdGUoKVxyXG4gICAgbGV0IHtzaG9wSXRlbUxpc3R9ID0gc3RhdGUuc2hvcENhcnRcclxuICAgIC8vY29uc29sZS5sb2coc2hvcEl0ZW1MaXN0Lmxlbmd0aClcclxuICAgIGlmKHNob3BJdGVtTGlzdC5sZW5ndGg+MCl7XHJcbiAgICAgICAgd2luZG93LmFwcC5zd2l0Y2hJbmRleFBhZ2UoRU5VTV9zd2l0Y2hJbmRleFBhZ2UuUHJvZHVjdExpc3RTZWFyY2gpXHJcbiAgICAgICAgLy8gcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gdHJ1ZVxyXG4gICAgICAgIC8vIHByb3h5TWFpblBhZ2VVSS5yZWFjdFN3aXRjaFBhZ2UgPSBFTlVNX3JlYWN0U3dpdGNoUGFnZS5Qcm9kdWN0TGlzdFNlYXJjaDtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5hcHAub3Blbk1vZGFsU2hvcENhcnQpXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXBwLm9wZW5Nb2RhbFNob3BDYXJ0KCk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgd2luZG93LlN3YWwuZmlyZSh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn5o+Q6YaSJyxcclxuICAgICAgICAgICAgdGV4dDogJ+izvOeJqei7iuWFp+aykuacieeJqeWTge+8jOiri+WFiOmBuOizvCcsXHJcbiAgICAgICAgICAgIGljb246ICd3YXJuaW5nJyxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgXHJcbn1cclxuYU9wZW5Nb2RhbFNob3BjYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblNob3BDYXJ0KVxyXG5saU9wZW5Nb2RhbFNob3BjYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gdHJ1ZTtcclxuICAgIHdpbmRvdy5hcHAuc3dpdGNoSW5kZXhQYWdlKEVOVU1fc3dpdGNoSW5kZXhQYWdlLlByb2R1Y3RMaXN0U2VhcmNoKVxyXG59KVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgLy9wYWdlU3RhdGljLmhpZGUoKTtcclxuICAgIC8vcGFnZVJlYWN0LmhpZGUoKTtcclxuICAgIHByb3h5TWFpblBhZ2VVSS5pc1JlYWN0UGFnZSA9IGZhbHNlO1xyXG4gICAgLy90cmlnZ2VyIC0gc2hvcCBjYXJ0IGNvdW50ID0gMFxyXG4gICAgLy9sZXQgYWEgPSBjb3VudEFsbEl0ZW1zX1ByaWNlKClcclxuICAgIHdpbmRvdy5hcHAuc2V0U2hvcEl0ZW1Db3VudCgwKVxyXG4gICAgXHJcbn0pXHJcbi8vICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuLy8gICAgIC8vcGFnZVN0YXRpYy5oaWRlKCk7XHJcbi8vICAgICAvL3BhZ2VSZWFjdC5oaWRlKCk7XHJcbi8vICAgICBwcm94eU1haW5QYWdlVUkuaXNSZWFjdFBhZ2UgPSBmYWxzZTtcclxuLy8gfSkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBU0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWZBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0QkE7QUF3QkE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQUNBO0FBa0JBO0FBQ0E7QUFDQTtBQTFCQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUF6Q0E7QUFDQTtBQTBDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFsQkE7QUFDQTtBQW1CQTtBQUNBO0FBQ0E7QUEzQkE7QUErQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFSQTtBQUFBO0FBWUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkJBO0FBdUJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBekNBO0FBeUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWhEQTtBQUNBO0FBaURBO0FBQ0E7QUFDQTtBQXpEQTtBQUNBO0FBNkRBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQTVDQTtBQThDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/index/index.js\n");

/***/ }),

/***/ "./pages/index/indexESM.js":
/*!*********************************!*\
  !*** ./pages/index/indexESM.js ***!
  \*********************************/
/*! namespace exports */
/*! export ENUM_switchIndexPage [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ENUM_switchIndexPage\": () => /* binding */ ENUM_switchIndexPage\n/* harmony export */ });\n/**@enum {string} */\nvar ENUM_switchIndexPage = {\n  ProductListSearch: 'ProductListSearch',\n  ViewOrders: 'ViewOrders'\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC9pbmRleEVTTS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2luZGV4L2luZGV4RVNNLmpzPzlmNGIiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5leHBvcnQgY29uc3QgRU5VTV9zd2l0Y2hJbmRleFBhZ2UgPSB7XHJcbiAgICBQcm9kdWN0TGlzdFNlYXJjaDogJ1Byb2R1Y3RMaXN0U2VhcmNoJyxcclxuICAgIFZpZXdPcmRlcnM6ICdWaWV3T3JkZXJzJyxcclxufSJdLCJtYXBwaW5ncyI6Ijs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index/indexESM.js\n");

/***/ }),

/***/ "./webcomponents/cusFullPageScroll/fullPageScroll.js":
/*!***********************************************************!*\
  !*** ./webcomponents/cusFullPageScroll/fullPageScroll.js ***!
  \***********************************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ _default\n/* harmony export */ });\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar _default = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(_default, _HTMLElement);\n\n  var _super = _createSuper(_default);\n\n  /**\r\n   * \r\n   * @param {HTMLElement} templateContent \r\n   */\n  function _default(templateContent) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _super.call(this);\n    if (!templateContent) throw new Error('Argument dose not exist.');\n\n    _this.appendChild(templateContent);\n\n    return _this;\n  }\n  /**\r\n   * \r\n   * @param {string} targetEle \r\n   */\n\n\n  _createClass(_default, [{\n    key: \"scrollToElem\",\n    value: function scrollToElem(targetEle) {\n      var ele = this.querySelector(targetEle);\n      ele.scrollIntoView();\n    }\n  }]);\n\n  return _default;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c0Z1bGxQYWdlU2Nyb2xsL2Z1bGxQYWdlU2Nyb2xsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd2ViY29tcG9uZW50cy9jdXNGdWxsUGFnZVNjcm9sbC9mdWxsUGFnZVNjcm9sbC5qcz9jZjk2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgSFRNTEVsZW1lbnR7XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVDb250ZW50IFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZUNvbnRlbnQpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgaWYoIXRlbXBsYXRlQ29udGVudClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FyZ3VtZW50IGRvc2Ugbm90IGV4aXN0LicpO1xyXG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGVtcGxhdGVDb250ZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0RWxlIFxyXG4gICAgICovXHJcbiAgICBzY3JvbGxUb0VsZW0odGFyZ2V0RWxlKXtcclxuICAgICAgICBsZXQgZWxlID0gdGhpcy5xdWVyeVNlbGVjdG9yKHRhcmdldEVsZSk7XHJcbiAgICAgICAgZWxlLnNjcm9sbEludG9WaWV3KCk7XHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFsQkE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./webcomponents/cusFullPageScroll/fullPageScroll.js\n");

/***/ }),

/***/ "./webcomponents/cusModalLogin3/cusModalLogin.assertLog.js":
/*!*****************************************************************!*\
  !*** ./webcomponents/cusModalLogin3/cusModalLogin.assertLog.js ***!
  \*****************************************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\n/* harmony import */ var _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../js/lib/RdQaLog.js */ \"./js/lib/RdQaLog.js\");\n\nvar mdID = _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_0__.ENUM_mdId.cusModalLogin;\nvar duplicatedRegisterAccount = new _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_0__.default(mdID);\nduplicatedRegisterAccount.setLogFunction(function (isDuplicated) {\n  return \"\".concat(duplicatedRegisterAccount.prefix).concat(isDuplicated);\n});\nvar registerSuccess = new _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_0__.default(mdID);\nregisterSuccess.setLogFunction(function (isSuccess) {\n  return \"\".concat(registerSuccess.prefix).concat(isSuccess);\n}); //---------------Export\n\nvar ExportRdQA = {\n  duplicatedRegisterAccount: duplicatedRegisterAccount,\n  registerSuccess: registerSuccess\n}; //fill name\n\nfor (var keyname in ExportRdQA) {\n  ExportRdQA[keyname].name = keyname;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ExportRdQA);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uYXNzZXJ0TG9nLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd2ViY29tcG9uZW50cy9jdXNNb2RhbExvZ2luMy9jdXNNb2RhbExvZ2luLmFzc2VydExvZy5qcz8wNWY1Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgUmRRYUxvZyx7RU5VTV9tZElkfSBmcm9tICcuLi8uLi9qcy9saWIvUmRRYUxvZy5qcydcclxubGV0IG1kSUQgPSBFTlVNX21kSWQuY3VzTW9kYWxMb2dpblxyXG5cclxubGV0IGR1cGxpY2F0ZWRSZWdpc3RlckFjY291bnQgPSBuZXcgUmRRYUxvZyhtZElEKTtcclxuZHVwbGljYXRlZFJlZ2lzdGVyQWNjb3VudC5zZXRMb2dGdW5jdGlvbigoaXNEdXBsaWNhdGVkKSA9PiB7XHJcbiAgICByZXR1cm4gYCR7ZHVwbGljYXRlZFJlZ2lzdGVyQWNjb3VudC5wcmVmaXh9JHtpc0R1cGxpY2F0ZWR9YFxyXG59KVxyXG5cclxubGV0IHJlZ2lzdGVyU3VjY2VzcyA9IG5ldyBSZFFhTG9nKG1kSUQpO1xyXG5yZWdpc3RlclN1Y2Nlc3Muc2V0TG9nRnVuY3Rpb24oKGlzU3VjY2VzcykgPT4ge1xyXG4gICAgcmV0dXJuIGAke3JlZ2lzdGVyU3VjY2Vzcy5wcmVmaXh9JHtpc1N1Y2Nlc3N9YFxyXG59KVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS1FeHBvcnRcclxubGV0IEV4cG9ydFJkUUEgPSB7XHJcbiAgICBkdXBsaWNhdGVkUmVnaXN0ZXJBY2NvdW50LFxyXG4gICAgcmVnaXN0ZXJTdWNjZXNzLFxyXG59XHJcbi8vZmlsbCBuYW1lXHJcbmZvcihsZXQga2V5bmFtZSBpbiBFeHBvcnRSZFFBKXtcclxuICAgIEV4cG9ydFJkUUFba2V5bmFtZV0ubmFtZSA9IGtleW5hbWVcclxufVxyXG5leHBvcnQgZGVmYXVsdCBFeHBvcnRSZFFBIl0sIm1hcHBpbmdzIjoiOzs7OztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./webcomponents/cusModalLogin3/cusModalLogin.assertLog.js\n");

/***/ }),

/***/ "./webcomponents/cusModalLogin3/cusModalLogin.js":
/*!*******************************************************!*\
  !*** ./webcomponents/cusModalLogin3/cusModalLogin.js ***!
  \*******************************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ cusModalLogin\n/* harmony export */ });\n/* harmony import */ var _cusModalLogin_assertLog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cusModalLogin.assertLog.js */ \"./webcomponents/cusModalLogin3/cusModalLogin.assertLog.js\");\n/* harmony import */ var _js_lib_RdQaLog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../js/lib/RdQaLog.js */ \"./js/lib/RdQaLog.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n //const {duplicatedRegisterAccount, registerSuccess } = assertLog\n//@ts-check\n\n/**@enum {string} */\n\nvar ENUM_switchPage = {\n  radioSignin: \"radioSignin\",\n  radioSignup: \"radioSignup\",\n  radioForgetPwd: \"radioForgetPwd\"\n};\n\nvar cusModalLogin = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(cusModalLogin, _HTMLElement);\n\n  var _super = _createSuper(cusModalLogin);\n\n  /**\r\n   * @param {HTMLElement} templateContent \r\n   * @param {import(\"./cusModalLogin\").plugins} plugins \r\n   */\n  function cusModalLogin(templateContent, plugins) {\n    var _this;\n\n    _classCallCheck(this, cusModalLogin);\n\n    _this = _super.call(this);\n    /** {Swal , Email_ResendPassword(...)} */\n\n    _this.plugins = plugins; // assign firebase\n\n    _this.firebase = null;\n    _this.db = null;\n    if (window.firebase) _this.setFirebase(window.firebase); // initial templateContent\n\n    if (templateContent) _this.appendTemplate(templateContent);\n    _this.proxyUI = {\n      bindIptSigninEmail: '',\n      bindIptSigninPWD: '',\n      bindCkboxSigninKeepIn: false,\n      bindIptRegisterEmail: '',\n      bindIptRegisterPWD1: '',\n      bindIptRegisterPWD2: '',\n      bindIptResentPwdEmail: '',\n      switchPage: ENUM_switchPage.radioSignin\n    };\n\n    var self = _assertThisInitialized(_this);\n\n    _this.proxyUI = new Proxy(_this.proxyUI, {\n      /**@param {string} prop */\n      get: function get(target, prop) {\n        /**@type {HTMLInputElement} */\n        var elem = self.querySelector(\"[\".concat(prop, \"]\"));\n        if (prop === \"bindCkboxSigninKeepIn\") return elem.checked;else return elem.value;\n      },\n\n      /**@param {string} prop */\n      set: function set(target, prop, value) {\n        /**@type {HTMLInputElement} */\n        var elem;\n\n        switch (prop) {\n          //================ switchPage\n          case 'switchPage':\n            switch (value) {\n              case ENUM_switchPage.radioSignin:\n                /**@type {HTMLInputElement} */\n                elem = self.querySelector('.modal-header .radioSignin');\n                elem.checked = true;\n                /**@type {HTMLInputElement} */\n\n                var ckboxSignIn = self.querySelector('.modal-body .ckboxSignIn');\n                ckboxSignIn.checked = true;\n                break;\n\n              case ENUM_switchPage.radioSignup:\n                /**@type {HTMLInputElement} */\n                elem = self.querySelector('.modal-header .radioSignup');\n                elem.checked = true;\n                /**@type {HTMLInputElement} */\n\n                var ckboxSignUp = self.querySelector('.modal-body .ckboxSignUp');\n                ckboxSignUp.checked = true;\n                break;\n\n              case ENUM_switchPage.radioForgetPwd:\n                /**@type {HTMLInputElement} */\n                elem = self.querySelector('.modal-header .radioForgetPwd');\n                elem.checked = true;\n                /**@type {HTMLInputElement} */\n\n                var ckboxForgetPwdHtm = self.querySelector('.modal-body .ckboxForgetPwdHtm');\n                ckboxForgetPwdHtm.checked = true;\n                break;\n\n              default:\n                break;\n            }\n\n            break;\n          //================ other bindXXXXX props\n\n          default:\n            elem = self.querySelector(\"[\".concat(prop, \"]\"));\n            if (prop === \"bindCkboxSigninKeepIn\") elem.checked = value;else elem.value = value;\n            break;\n        }\n\n        return true;\n      }\n    });\n    return _this;\n  }\n  /**\r\n   * @function - append DOM UI\r\n   * @param {HTMLElement} templateContent \r\n   */\n\n\n  _createClass(cusModalLogin, [{\n    key: \"appendTemplate\",\n    value: function appendTemplate(templateContent) {\n      var _this2 = this;\n\n      this.appendChild(templateContent);\n      var self = this; //===== GOOGLE LOGIN\n\n      this.btnGoogleSignin = this.querySelector('.signInHtm .btnGoogleSignin');\n      this.btnGoogleSignin.addEventListener('click', this.Google_Register_Login.bind(this)); //===== EMAIL LOGIN -- form onSubmit\n\n      this.btnEmailSignin = this.querySelector('.signInHtm .btnEmailSignin');\n      this.btnEmailSignin.addEventListener('click', function (e) {//begin html input check\n        //don't write code here, but write code on onSubmit of Form (formSignInHtm).\n      });\n      var formSignInHtm = this.querySelector('.signInHtm');\n      formSignInHtm.addEventListener('submit', function (e) {\n        e.preventDefault(); //already pass form input valid check\n\n        _this2.Email_Login();\n\n        return false;\n      }); //===== EMAIL REGISTER\n\n      var signUpHtm = this.querySelector('.signUpHtm');\n      signUpHtm.addEventListener('submit', function (e) {\n        e.preventDefault(); //console.log(5555)\n\n        self.Email_Register();\n      });\n      this.btnEmailRegister = this.querySelector('.signUpHtm .btnEmailSignin');\n      this.btnEmailRegister.addEventListener('click', function (e) {//submit to Form ('.signUpHtm')\n      }); //===== EMAIL RESEND PASSWORD -- form onSubmit\n\n      var forgetPwdHtm = this.querySelector('.forgetPwdHtm');\n      forgetPwdHtm.addEventListener('submit', function (e) {\n        e.preventDefault();\n        var emailAddress = self.proxyUI.bindIptResentPwdEmail; //already pass form input valid check\n        // extends from baseComponent.js\n\n        self.Email_ResendPassword(emailAddress); //return false\n      }); // Go back to Login Page\n\n      var leftArrow = this.querySelector('.modal-header .leftArrow');\n      leftArrow.addEventListener('click', function (e) {\n        self.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n      }); // Goto Signup Page\n\n      var divSignupHtm = this.querySelector('.modal-body .divSignupHtm');\n      divSignupHtm.addEventListener('click', function (e) {\n        self.proxyUI.switchPage = ENUM_switchPage.radioSignup;\n      }); // Goto ForgetPWD page\n\n      var divForgetPassword = this.querySelector('.modal-body .divForgetPassword');\n      divForgetPassword.addEventListener('click', function (e) {\n        self.proxyUI.switchPage = ENUM_switchPage.radioForgetPwd;\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} htmlElement \r\n     */\n\n  }, {\n    key: \"appendTestArea\",\n    value: function appendTestArea(htmlElement) {\n      var testArea = this.querySelector('[testArea]');\n      testArea.appendChild(htmlElement); //console.log(aa)\n    }\n  }, {\n    key: \"setFirebase\",\n    value: function setFirebase(\n    /**@type {import('firebase')}}*/\n    inFirebase) {\n      // console.log(inFirebase)\n      this.firebase = inFirebase;\n      this.db = this.firebase.firestore();\n      this.setAuth_getRedirectResult();\n    }\n    /**\r\n     * @function - when google signin, page will redirect URL, clear all js, and starts again from here.\r\n     */\n\n  }, {\n    key: \"setAuth_getRedirectResult\",\n    value: function setAuth_getRedirectResult() {\n      var self = this;\n      this.firebase.auth().getRedirectResult().then(function (\n      /**@type {any}*/\n      result) {\n        if (result.credential) {\n          // This gives you a Google Access Token. You can use it to access the Google API.\n          var token = result.credential.accessToken; // ...\n        } // The signed-in user info.\n\n\n        var user = result.user;\n\n        if (user) {\n          //self.checkDB_User(user)\n          // hide self element\n          self.showModal(false);\n        }\n      })[\"catch\"](function (\n      /**@type {any}*/\n      error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message; // The email of the user's account used.\n\n        var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n        var credential = error.credential; // ...\n      });\n    }\n  }, {\n    key: \"clearAllInputs\",\n    value: function clearAllInputs() {\n      this.proxyUI.bindIptSigninEmail = '';\n      this.proxyUI.bindIptSigninPWD = '';\n      this.proxyUI.bindIptRegisterEmail = '';\n      this.proxyUI.bindIptRegisterPWD1 = '';\n      this.proxyUI.bindIptRegisterPWD2 = '';\n      this.proxyUI.bindIptResentPwdEmail = '';\n    }\n    /**\r\n     * @function - show modal self\r\n     * @param {boolean} isShow \r\n     */\n\n  }, {\n    key: \"showModal\",\n    value: function showModal(isShow) {\n      /**@type {HTMLInputElement} */\n      var iptEmail = this.querySelector(\".modal .signInHtm input[type='email']\");\n      $('#modalLogin').on('shown.bs.modal', function () {\n        iptEmail.focus();\n      });\n      var options = {\n        show: isShow,\n        focus: true,\n        keyboard: true\n      };\n      var strShow = null;\n      this.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n      this.clearAllInputs();\n\n      if (isShow == true) {\n        if (true) {// this.proxyUI.bindIptSigninEmail = 'ice4kimo@yahoo.com.tw'\n          // this.proxyUI.bindIptSigninPWD = '11111111'\n          // this.proxyUI.bindIptRegisterEmail = 'ice4kimo@yahoo.com.tw'\n          // this.proxyUI.bindIptRegisterPWD1 = '11111111'\n          // this.proxyUI.bindIptRegisterPWD2 = '11111111'\n          // this.proxyUI.bindIptResentPwdEmail = 'ice4kimo@yahoo.com.tw'\n        }\n\n        strShow = 'show';\n      } else {\n        strShow = 'hide';\n      }\n\n      $('#modalLogin').modal(strShow);\n    } // extends from baseComponent.js\n\n    /**\r\n     * @param {string} emailAddress \r\n     */\n\n  }, {\n    key: \"Email_ResendPassword\",\n    value: function Email_ResendPassword(emailAddress) {\n      var self = this;\n      return this.plugins.Email_ResendPassword(emailAddress, this.firebase, self.plugins.Swal, function () {\n        self.showModal(false);\n        self.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n      });\n    } // Email_ResendPassword(emailAddress) {\n    //     let self = this\n    //     return this.plugins.Email_ResendPassword(\n    //         emailAddress,\n    //         window.firebase,\n    //         self.plugins.Swal,\n    //         () => {\n    //             self.showModal(false)\n    //             self.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n    //         }\n    //     );\n    // }\n\n  }, {\n    key: \"Email_Register\",\n    value: function Email_Register() {\n      //ice4kimo@yahoo.com.tw\n      var email = this.proxyUI.bindIptRegisterEmail;\n      var password = this.proxyUI.bindIptRegisterPWD1;\n      var persistence = this.getPersistence(this.proxyUI.bindCkboxSigninKeepIn);\n      var self = this;\n      this.firebase.auth().setPersistence(persistence).then(function () {\n        return self.firebase.auth().createUserWithEmailAndPassword(email, password);\n      }) // .then(() => {\n      //     let user = this.firebase.auth().currentUser;\n      //     if (user) // ice4kimo@yahoo.com.tw  11111111\n      //         return this.checkDB_User(user); //newUser = true\n      //     else\n      //         return false //oldUser = false\n      // })\n      .then(function () {\n        var user = self.firebase.auth().currentUser;\n        return user.sendEmailVerification(); // no return\n        //send verification email\n      }).then(function () {\n        return self.plugins.Swal.fire({\n          title: '提醒',\n          text: \"認證信已寄出，請至信箱收信，並點選確認連結\",\n          icon: 'success',\n          didOpen: function didOpen(htmlElement) {\n            $('.swal2-confirm').attr('data-testid', 'btnSwalConfirm');\n            console.log(_cusModalLogin_assertLog_js__WEBPACK_IMPORTED_MODULE_0__.default.registerSuccess.log(true)); //console.log(\"LOG: ~ file: cusModalLogin.js ~ line 311 ~ .then ~ htmlElement\", htmlElement)\n          } //confirmButtonText: 'Cool'\n\n        });\n      }).then(function (e) {\n        if (e.isConfirmed === true) {\n          //window.app.switchIndexPage(ENUM_switchIndexPage.ViewOrders)\n          self.showModal(false);\n        }\n      })[\"catch\"](function (\n      /**@type {any} */\n      error) {\n        // Handle Errors here.\n        var errZhTw = getErrorMessageZHTW(error.code, error.message);\n        self.plugins.Swal.fire({\n          title: '注意',\n          text: \"\".concat(errZhTw.errCodeZHTW, \",\").concat(errZhTw.errMessageZHTW),\n          icon: 'warning',\n          didOpen: function didOpen(htmlElement) {\n            $('.swal2-confirm').attr('data-testid', 'btnSwalConfirm');\n            console.log(_cusModalLogin_assertLog_js__WEBPACK_IMPORTED_MODULE_0__.default.duplicatedRegisterAccount.log(true)); //console.log(\"LOG: ~ file: cusModalLogin.js ~ line 311 ~ .then ~ htmlElement\", htmlElement)\n          } //confirmButtonText: 'Cool'\n\n        }); //auth/email-already-in-use The email address is already in use by another account.\n        // ...\n      });\n    }\n    /**\r\n     * this.firebase.auth().setPersistence(persistence)\r\n     * @param {boolean} isCkboxSigninKeepIn proxyUI.bindCkboxSigninKeepIn\r\n     * @returns {string} firebase.auth.Auth.Persistence.LOCAL...etc\r\n     */\n\n  }, {\n    key: \"getPersistence\",\n    value: function getPersistence(isCkboxSigninKeepIn) {\n      var persistence;\n      if (isCkboxSigninKeepIn) persistence = this.firebase.auth.Auth.Persistence.LOCAL;else persistence = this.firebase.auth.Auth.Persistence.NONE;\n      return persistence;\n    }\n  }, {\n    key: \"Email_Login\",\n    value: function Email_Login() {\n      var _this3 = this;\n\n      var email = this.proxyUI.bindIptSigninEmail;\n      var password = this.proxyUI.bindIptSigninPWD;\n      var persistence = this.getPersistence(this.proxyUI.bindCkboxSigninKeepIn);\n      var self = this;\n      this.firebase.auth().setPersistence(persistence).then(function () {\n        self.showModal(false);\n        return _this3.firebase.auth().signInWithEmailAndPassword(email, password);\n      }).then(function () {})[\"catch\"](function (\n      /**@type {any} */\n      error) {\n        // Handle Errors here.\n        var errZhTw = getErrorMessageZHTW(error.code, error.message);\n        self.plugins.Swal.fire({\n          title: '注意',\n          text: \"\".concat(errZhTw.errCodeZHTW, \",\").concat(errZhTw.errMessageZHTW),\n          icon: 'warning' //confirmButtonText: 'Cool'\n\n        }); // ...\n      });\n    }\n  }, {\n    key: \"Google_Register_Login\",\n    value: function Google_Register_Login(\n    /**@type {any} */\n    e) {\n      var _this4 = this;\n\n      var self = this;\n      var provider = new this.firebase.auth.GoogleAuthProvider();\n      var persistence = this.getPersistence(this.proxyUI.bindCkboxSigninKeepIn);\n      this.firebase.auth().setPersistence(persistence).then(function () {\n        return _this4.firebase.auth().signInWithRedirect(provider);\n      })[\"catch\"](function (\n      /**@type {any} */\n      error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log('error-->', errorMessage); // ...\n      });\n      return;\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {//updateStyle(this);\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {}\n  }, {\n    key: \"adoptedCallback\",\n    value: function adoptedCallback() {}\n    /**\r\n     * \r\n     * @param {*} name \r\n     * @param {*} oldValue \r\n     * @param {*} newValue \r\n     */\n\n  }, {\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(name, oldValue, newValue) {//updateStyle(this);\n    }\n  }]);\n\n  return cusModalLogin;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n/**\r\n * @function - get chinese error message\r\n * @param {string} errCode \r\n * @param {string} errMessage \r\n */\n\n\n\n\nfunction getErrorMessageZHTW(errCode, errMessage) {\n  console.log(\"LOG:: cusModalLogin -> getErrorMessageZHTW -> errCode\", errCode);\n  var errCodeZHTW;\n  var errMessageZHTW = errMessage;\n\n  switch (errCode) {\n    case 'auth/user-not-found':\n      errCodeZHTW = \"這個Email帳號不存在\";\n      errMessageZHTW = \"請先註冊帳號或是用google登入\";\n      break;\n\n    case 'auth/wrong-password':\n      errCodeZHTW = '密碼錯誤';\n      break;\n\n    case 'auth/email-already-in-use':\n      errCodeZHTW = '這個帳號已被註冊';\n      break;\n\n    default:\n      errCodeZHTW = errCode;\n      errMessageZHTW = errMessage;\n      break;\n  }\n\n  return {\n    errCodeZHTW: errCodeZHTW,\n    errMessageZHTW: errMessageZHTW\n  }; // auth/invalid-phone-number, TOO_SHORT\n  // auth/invalid-phone-number, TOO_LONG        \n  // auth/invalid-verification-code, The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.        \n  // auth/provider-already-linked, User can only be linked to one identity for the given provider.\n  // case 'auth/missing-phone-number':\n  // case 'auth/too-many-requests':\n  //address bug\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uanM/ODdjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0TG9nIGZyb20gJy4vY3VzTW9kYWxMb2dpbi5hc3NlcnRMb2cuanMnXHJcbmltcG9ydCBSZFFhTG9nIGZyb20gJy4uLy4uL2pzL2xpYi9SZFFhTG9nLmpzJ1xyXG4vL2NvbnN0IHtkdXBsaWNhdGVkUmVnaXN0ZXJBY2NvdW50LCByZWdpc3RlclN1Y2Nlc3MgfSA9IGFzc2VydExvZ1xyXG5cclxuLy9AdHMtY2hlY2tcclxuLyoqQGVudW0ge3N0cmluZ30gKi9cclxuY29uc3QgRU5VTV9zd2l0Y2hQYWdlID0ge1xyXG4gICAgcmFkaW9TaWduaW46IFwicmFkaW9TaWduaW5cIixcclxuICAgIHJhZGlvU2lnbnVwOiBcInJhZGlvU2lnbnVwXCIsXHJcbiAgICByYWRpb0ZvcmdldFB3ZDogXCJyYWRpb0ZvcmdldFB3ZFwiXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGN1c01vZGFsTG9naW4gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRlbXBsYXRlQ29udGVudCBcclxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jdXNNb2RhbExvZ2luXCIpLnBsdWdpbnN9IHBsdWdpbnMgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlQ29udGVudCwgcGx1Z2lucykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgLyoqIHtTd2FsICwgRW1haWxfUmVzZW5kUGFzc3dvcmQoLi4uKX0gKi9cclxuICAgICAgICB0aGlzLnBsdWdpbnMgPSBwbHVnaW5zO1xyXG5cclxuICAgICAgICAvLyBhc3NpZ24gZmlyZWJhc2VcclxuICAgICAgICB0aGlzLmZpcmViYXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRiID0gbnVsbFxyXG5cclxuICAgICAgICBpZiAod2luZG93LmZpcmViYXNlKVxyXG4gICAgICAgICAgICB0aGlzLnNldEZpcmViYXNlKHdpbmRvdy5maXJlYmFzZSlcclxuXHJcbiAgICAgICAgLy8gaW5pdGlhbCB0ZW1wbGF0ZUNvbnRlbnRcclxuICAgICAgICBpZiAodGVtcGxhdGVDb250ZW50KVxyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZFRlbXBsYXRlKHRlbXBsYXRlQ29udGVudCk7XHJcblxyXG4gICAgICAgIHRoaXMucHJveHlVSSA9IHtcclxuICAgICAgICAgICAgYmluZElwdFNpZ25pbkVtYWlsOiAnJyxcclxuICAgICAgICAgICAgYmluZElwdFNpZ25pblBXRDogJycsXHJcbiAgICAgICAgICAgIGJpbmRDa2JveFNpZ25pbktlZXBJbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGJpbmRJcHRSZWdpc3RlckVtYWlsOiAnJyxcclxuICAgICAgICAgICAgYmluZElwdFJlZ2lzdGVyUFdEMTogJycsXHJcbiAgICAgICAgICAgIGJpbmRJcHRSZWdpc3RlclBXRDI6ICcnLFxyXG4gICAgICAgICAgICBiaW5kSXB0UmVzZW50UHdkRW1haWw6ICcnLFxyXG4gICAgICAgICAgICBzd2l0Y2hQYWdlOiBFTlVNX3N3aXRjaFBhZ2UucmFkaW9TaWduaW5cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucHJveHlVSSA9IG5ldyBQcm94eSh0aGlzLnByb3h5VUksIHtcclxuICAgICAgICAgICAgLyoqQHBhcmFtIHtzdHJpbmd9IHByb3AgKi9cclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgIGxldCBlbGVtID0gc2VsZi5xdWVyeVNlbGVjdG9yKGBbJHtwcm9wfV1gKVxyXG4gICAgICAgICAgICAgICAgaWYgKHByb3AgPT09IFwiYmluZENrYm94U2lnbmluS2VlcEluXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uY2hlY2tlZFxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLnZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipAcGFyYW0ge3N0cmluZ30gcHJvcCAqL1xyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgIGxldCBlbGVtO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy89PT09PT09PT09PT09PT09IHN3aXRjaFBhZ2VcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzd2l0Y2hQYWdlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX3N3aXRjaFBhZ2UucmFkaW9TaWduaW46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9IHNlbGYucXVlcnlTZWxlY3RvcignLm1vZGFsLWhlYWRlciAucmFkaW9TaWduaW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBja2JveFNpZ25JbiA9IHNlbGYucXVlcnlTZWxlY3RvcignLm1vZGFsLWJvZHkgLmNrYm94U2lnbkluJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2tib3hTaWduSW4uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVOVU1fc3dpdGNoUGFnZS5yYWRpb1NpZ251cDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gc2VsZi5xdWVyeVNlbGVjdG9yKCcubW9kYWwtaGVhZGVyIC5yYWRpb1NpZ251cCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNrYm94U2lnblVwID0gc2VsZi5xdWVyeVNlbGVjdG9yKCcubW9kYWwtYm9keSAuY2tib3hTaWduVXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBja2JveFNpZ25VcC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9zd2l0Y2hQYWdlLnJhZGlvRm9yZ2V0UHdkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0gPSBzZWxmLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1oZWFkZXIgLnJhZGlvRm9yZ2V0UHdkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2tib3hGb3JnZXRQd2RIdG0gPSBzZWxmLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1ib2R5IC5ja2JveEZvcmdldFB3ZEh0bScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNrYm94Rm9yZ2V0UHdkSHRtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy89PT09PT09PT09PT09PT09IG90aGVyIGJpbmRYWFhYWCBwcm9wc1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0gPSBzZWxmLnF1ZXJ5U2VsZWN0b3IoYFske3Byb3B9XWApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBcImJpbmRDa2JveFNpZ25pbktlZXBJblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5jaGVja2VkID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gLSBhcHBlbmQgRE9NIFVJXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0ZW1wbGF0ZUNvbnRlbnQgXHJcbiAgICAgKi9cclxuICAgIGFwcGVuZFRlbXBsYXRlKHRlbXBsYXRlQ29udGVudCkge1xyXG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGVtcGxhdGVDb250ZW50KVxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcblxyXG4gICAgICAgIC8vPT09PT0gR09PR0xFIExPR0lOXHJcbiAgICAgICAgdGhpcy5idG5Hb29nbGVTaWduaW4gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5zaWduSW5IdG0gLmJ0bkdvb2dsZVNpZ25pbicpXHJcbiAgICAgICAgdGhpcy5idG5Hb29nbGVTaWduaW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLkdvb2dsZV9SZWdpc3Rlcl9Mb2dpbi5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvLz09PT09IEVNQUlMIExPR0lOIC0tIGZvcm0gb25TdWJtaXRcclxuICAgICAgICB0aGlzLmJ0bkVtYWlsU2lnbmluID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcuc2lnbkluSHRtIC5idG5FbWFpbFNpZ25pbicpXHJcbiAgICAgICAgdGhpcy5idG5FbWFpbFNpZ25pbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vYmVnaW4gaHRtbCBpbnB1dCBjaGVja1xyXG4gICAgICAgICAgICAvL2Rvbid0IHdyaXRlIGNvZGUgaGVyZSwgYnV0IHdyaXRlIGNvZGUgb24gb25TdWJtaXQgb2YgRm9ybSAoZm9ybVNpZ25Jbkh0bSkuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IGZvcm1TaWduSW5IdG0gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5zaWduSW5IdG0nKTtcclxuICAgICAgICBmb3JtU2lnbkluSHRtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAvL2FscmVhZHkgcGFzcyBmb3JtIGlucHV0IHZhbGlkIGNoZWNrXHJcbiAgICAgICAgICAgIHRoaXMuRW1haWxfTG9naW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLz09PT09IEVNQUlMIFJFR0lTVEVSXHJcbiAgICAgICAgbGV0IHNpZ25VcEh0bSA9IHRoaXMucXVlcnlTZWxlY3RvcignLnNpZ25VcEh0bScpO1xyXG4gICAgICAgIHNpZ25VcEh0bS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyg1NTU1KVxyXG4gICAgICAgICAgICBzZWxmLkVtYWlsX1JlZ2lzdGVyKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLmJ0bkVtYWlsUmVnaXN0ZXIgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5zaWduVXBIdG0gLmJ0bkVtYWlsU2lnbmluJylcclxuICAgICAgICB0aGlzLmJ0bkVtYWlsUmVnaXN0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAvL3N1Ym1pdCB0byBGb3JtICgnLnNpZ25VcEh0bScpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy89PT09PSBFTUFJTCBSRVNFTkQgUEFTU1dPUkQgLS0gZm9ybSBvblN1Ym1pdFxyXG4gICAgICAgIGxldCBmb3JnZXRQd2RIdG0gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5mb3JnZXRQd2RIdG0nKTtcclxuICAgICAgICBmb3JnZXRQd2RIdG0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgIHZhciBlbWFpbEFkZHJlc3MgPSBzZWxmLnByb3h5VUkuYmluZElwdFJlc2VudFB3ZEVtYWlsO1xyXG4gICAgICAgICAgICAvL2FscmVhZHkgcGFzcyBmb3JtIGlucHV0IHZhbGlkIGNoZWNrXHJcbiAgICAgICAgICAgIC8vIGV4dGVuZHMgZnJvbSBiYXNlQ29tcG9uZW50LmpzXHJcbiAgICAgICAgICAgIHNlbGYuRW1haWxfUmVzZW5kUGFzc3dvcmQoZW1haWxBZGRyZXNzKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2VcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8gR28gYmFjayB0byBMb2dpbiBQYWdlXHJcbiAgICAgICAgbGV0IGxlZnRBcnJvdyA9IHRoaXMucXVlcnlTZWxlY3RvcignLm1vZGFsLWhlYWRlciAubGVmdEFycm93JylcclxuICAgICAgICBsZWZ0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBzZWxmLnByb3h5VUkuc3dpdGNoUGFnZSA9IEVOVU1fc3dpdGNoUGFnZS5yYWRpb1NpZ25pbjtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIEdvdG8gU2lnbnVwIFBhZ2VcclxuICAgICAgICBsZXQgZGl2U2lnbnVwSHRtID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcubW9kYWwtYm9keSAuZGl2U2lnbnVwSHRtJylcclxuICAgICAgICBkaXZTaWdudXBIdG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBzZWxmLnByb3h5VUkuc3dpdGNoUGFnZSA9IEVOVU1fc3dpdGNoUGFnZS5yYWRpb1NpZ251cDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIEdvdG8gRm9yZ2V0UFdEIHBhZ2VcclxuICAgICAgICBsZXQgZGl2Rm9yZ2V0UGFzc3dvcmQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1ib2R5IC5kaXZGb3JnZXRQYXNzd29yZCcpXHJcbiAgICAgICAgZGl2Rm9yZ2V0UGFzc3dvcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBzZWxmLnByb3h5VUkuc3dpdGNoUGFnZSA9IEVOVU1fc3dpdGNoUGFnZS5yYWRpb0ZvcmdldFB3ZDtcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gaHRtbEVsZW1lbnQgXHJcbiAgICAgKi9cclxuICAgIGFwcGVuZFRlc3RBcmVhKGh0bWxFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IHRlc3RBcmVhID0gdGhpcy5xdWVyeVNlbGVjdG9yKCdbdGVzdEFyZWFdJyk7XHJcbiAgICAgICAgdGVzdEFyZWEuYXBwZW5kQ2hpbGQoaHRtbEVsZW1lbnQpXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhhYSlcclxuICAgIH1cclxuXHJcbiAgICBzZXRGaXJlYmFzZSggLyoqQHR5cGUge2ltcG9ydCgnZmlyZWJhc2UnKX19Ki8gaW5GaXJlYmFzZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGluRmlyZWJhc2UpXHJcbiAgICAgICAgdGhpcy5maXJlYmFzZSA9IGluRmlyZWJhc2U7XHJcbiAgICAgICAgdGhpcy5kYiA9IHRoaXMuZmlyZWJhc2UuZmlyZXN0b3JlKCk7XHJcbiAgICAgICAgdGhpcy5zZXRBdXRoX2dldFJlZGlyZWN0UmVzdWx0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiAtIHdoZW4gZ29vZ2xlIHNpZ25pbiwgcGFnZSB3aWxsIHJlZGlyZWN0IFVSTCwgY2xlYXIgYWxsIGpzLCBhbmQgc3RhcnRzIGFnYWluIGZyb20gaGVyZS5cclxuICAgICAqL1xyXG4gICAgc2V0QXV0aF9nZXRSZWRpcmVjdFJlc3VsdCgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgICAgICB0aGlzLmZpcmViYXNlLmF1dGgoKS5nZXRSZWRpcmVjdFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSovIHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0LmNyZWRlbnRpYWwpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi4gWW91IGNhbiB1c2UgaXQgdG8gYWNjZXNzIHRoZSBHb29nbGUgQVBJLlxyXG4gICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0LmNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgICAgICAvLyAuLi5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICAgICAgICAgICAgbGV0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vc2VsZi5jaGVja0RCX1VzZXIodXNlcilcclxuICAgICAgICAgICAgICAgIC8vIGhpZGUgc2VsZiBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dNb2RhbChmYWxzZSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoIC8qKkB0eXBlIHthbnl9Ki8gZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLlxyXG4gICAgICAgICAgICB2YXIgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcclxuICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIC8vIFRoZSBlbWFpbCBvZiB0aGUgdXNlcidzIGFjY291bnQgdXNlZC5cclxuICAgICAgICAgICAgdmFyIGVtYWlsID0gZXJyb3IuZW1haWw7XHJcbiAgICAgICAgICAgIC8vIFRoZSBmaXJlYmFzZS5hdXRoLkF1dGhDcmVkZW50aWFsIHR5cGUgdGhhdCB3YXMgdXNlZC5cclxuICAgICAgICAgICAgdmFyIGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAvLyAuLi5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsZWFyQWxsSW5wdXRzKCkge1xyXG4gICAgICAgIHRoaXMucHJveHlVSS5iaW5kSXB0U2lnbmluRW1haWwgPSAnJztcclxuICAgICAgICB0aGlzLnByb3h5VUkuYmluZElwdFNpZ25pblBXRCA9ICcnO1xyXG4gICAgICAgIHRoaXMucHJveHlVSS5iaW5kSXB0UmVnaXN0ZXJFbWFpbCA9ICcnO1xyXG4gICAgICAgIHRoaXMucHJveHlVSS5iaW5kSXB0UmVnaXN0ZXJQV0QxID0gJyc7XHJcbiAgICAgICAgdGhpcy5wcm94eVVJLmJpbmRJcHRSZWdpc3RlclBXRDIgPSAnJztcclxuICAgICAgICB0aGlzLnByb3h5VUkuYmluZElwdFJlc2VudFB3ZEVtYWlsID0gJyc7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiAtIHNob3cgbW9kYWwgc2VsZlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc1Nob3cgXHJcbiAgICAgKi9cclxuICAgIHNob3dNb2RhbChpc1Nob3cpIHtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICBsZXQgaXB0RW1haWwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwgLnNpZ25Jbkh0bSBpbnB1dFt0eXBlPSdlbWFpbCddXCIpO1xyXG4gICAgICAgICQoJyNtb2RhbExvZ2luJykub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpcHRFbWFpbC5mb2N1cygpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHNob3c6IGlzU2hvdyxcclxuICAgICAgICAgICAgZm9jdXM6IHRydWUsXHJcbiAgICAgICAgICAgIGtleWJvYXJkOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzdHJTaG93ID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnByb3h5VUkuc3dpdGNoUGFnZSA9IEVOVU1fc3dpdGNoUGFnZS5yYWRpb1NpZ25pbjtcclxuICAgICAgICB0aGlzLmNsZWFyQWxsSW5wdXRzKCk7XHJcbiAgICAgICAgaWYgKGlzU2hvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgV2VicGFja0RlZmluZVBsdWdpbiAhPT0gJ3VuZGVmaW5lZCcgJiYgV2VicGFja0RlZmluZVBsdWdpbi5kZXZNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnByb3h5VUkuYmluZElwdFNpZ25pbkVtYWlsID0gJ2ljZTRraW1vQHlhaG9vLmNvbS50dydcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucHJveHlVSS5iaW5kSXB0U2lnbmluUFdEID0gJzExMTExMTExJ1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5wcm94eVVJLmJpbmRJcHRSZWdpc3RlckVtYWlsID0gJ2ljZTRraW1vQHlhaG9vLmNvbS50dydcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucHJveHlVSS5iaW5kSXB0UmVnaXN0ZXJQV0QxID0gJzExMTExMTExJ1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5wcm94eVVJLmJpbmRJcHRSZWdpc3RlclBXRDIgPSAnMTExMTExMTEnXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnByb3h5VUkuYmluZElwdFJlc2VudFB3ZEVtYWlsID0gJ2ljZTRraW1vQHlhaG9vLmNvbS50dydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdHJTaG93ID0gJ3Nob3cnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBzdHJTaG93ID0gJ2hpZGUnO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICQoJyNtb2RhbExvZ2luJykubW9kYWwoc3RyU2hvdylcclxuXHJcbiAgICB9XHJcbiAgICAvLyBleHRlbmRzIGZyb20gYmFzZUNvbXBvbmVudC5qc1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWxBZGRyZXNzIFxyXG4gICAgICovXHJcbiAgICBFbWFpbF9SZXNlbmRQYXNzd29yZChlbWFpbEFkZHJlc3MpIHtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICByZXR1cm4gdGhpcy5wbHVnaW5zLkVtYWlsX1Jlc2VuZFBhc3N3b3JkKFxyXG4gICAgICAgICAgICBlbWFpbEFkZHJlc3MsXHJcbiAgICAgICAgICAgIHRoaXMuZmlyZWJhc2UsXHJcbiAgICAgICAgICAgIHNlbGYucGx1Z2lucy5Td2FsLFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dNb2RhbChmYWxzZSlcclxuICAgICAgICAgICAgICAgIHNlbGYucHJveHlVSS5zd2l0Y2hQYWdlID0gRU5VTV9zd2l0Y2hQYWdlLnJhZGlvU2lnbmluO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFbWFpbF9SZXNlbmRQYXNzd29yZChlbWFpbEFkZHJlc3MpIHtcclxuICAgIC8vICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgIC8vICAgICByZXR1cm4gdGhpcy5wbHVnaW5zLkVtYWlsX1Jlc2VuZFBhc3N3b3JkKFxyXG4gICAgLy8gICAgICAgICBlbWFpbEFkZHJlc3MsXHJcbiAgICAvLyAgICAgICAgIHdpbmRvdy5maXJlYmFzZSxcclxuICAgIC8vICAgICAgICAgc2VsZi5wbHVnaW5zLlN3YWwsXHJcbiAgICAvLyAgICAgICAgICgpID0+IHtcclxuICAgIC8vICAgICAgICAgICAgIHNlbGYuc2hvd01vZGFsKGZhbHNlKVxyXG4gICAgLy8gICAgICAgICAgICAgc2VsZi5wcm94eVVJLnN3aXRjaFBhZ2UgPSBFTlVNX3N3aXRjaFBhZ2UucmFkaW9TaWduaW47XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICApO1xyXG4gICAgLy8gfVxyXG4gICAgRW1haWxfUmVnaXN0ZXIoKSB7XHJcbiAgICAgICAgLy9pY2U0a2ltb0B5YWhvby5jb20udHdcclxuICAgICAgICBsZXQgZW1haWwgPSB0aGlzLnByb3h5VUkuYmluZElwdFJlZ2lzdGVyRW1haWw7XHJcbiAgICAgICAgbGV0IHBhc3N3b3JkID0gdGhpcy5wcm94eVVJLmJpbmRJcHRSZWdpc3RlclBXRDE7XHJcbiAgICAgICAgbGV0IHBlcnNpc3RlbmNlID0gdGhpcy5nZXRQZXJzaXN0ZW5jZSh0aGlzLnByb3h5VUkuYmluZENrYm94U2lnbmluS2VlcEluKVxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2UuYXV0aCgpLnNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5maXJlYmFzZS5hdXRoKCkuY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IHVzZXIgPSB0aGlzLmZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjtcclxuICAgICAgICAgICAgLy8gICAgIGlmICh1c2VyKSAvLyBpY2U0a2ltb0B5YWhvby5jb20udHcgIDExMTExMTExXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tEQl9Vc2VyKHVzZXIpOyAvL25ld1VzZXIgPSB0cnVlXHJcbiAgICAgICAgICAgIC8vICAgICBlbHNlXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIGZhbHNlIC8vb2xkVXNlciA9IGZhbHNlXHJcbiAgICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB1c2VyID0gc2VsZi5maXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlci5zZW5kRW1haWxWZXJpZmljYXRpb24oKSAvLyBubyByZXR1cm5cclxuICAgICAgICAgICAgICAgIC8vc2VuZCB2ZXJpZmljYXRpb24gZW1haWxcclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBsdWdpbnMuU3dhbC5maXJlKHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aPkOmGkicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCLoqo3orYnkv6Hlt7Llr4Tlh7rvvIzoq4voh7Pkv6HnrrHmlLbkv6HvvIzkuKbpu57pgbjnorroqo3pgKPntZBcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlkT3BlbjogKGh0bWxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zd2FsMi1jb25maXJtJykuYXR0cignZGF0YS10ZXN0aWQnLCAnYnRuU3dhbENvbmZpcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXNzZXJ0TG9nLnJlZ2lzdGVyU3VjY2Vzcy5sb2codHJ1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJMT0c6IH4gZmlsZTogY3VzTW9kYWxMb2dpbi5qcyB+IGxpbmUgMzExIH4gLnRoZW4gfiBodG1sRWxlbWVudFwiLCBodG1sRWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25maXJtQnV0dG9uVGV4dDogJ0Nvb2wnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuaXNDb25maXJtZWQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3dpbmRvdy5hcHAuc3dpdGNoSW5kZXhQYWdlKEVOVU1fc3dpdGNoSW5kZXhQYWdlLlZpZXdPcmRlcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93TW9kYWwoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoIC8qKkB0eXBlIHthbnl9ICovIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgRXJyb3JzIGhlcmUuXHJcbiAgICAgICAgICAgICAgICBsZXQgZXJyWmhUdyA9IGdldEVycm9yTWVzc2FnZVpIVFcoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIHNlbGYucGx1Z2lucy5Td2FsLmZpcmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5rOo5oSPJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtlcnJaaFR3LmVyckNvZGVaSFRXfSwke2VyclpoVHcuZXJyTWVzc2FnZVpIVFd9YCxcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnd2FybmluZycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlkT3BlbjogKGh0bWxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zd2FsMi1jb25maXJtJykuYXR0cignZGF0YS10ZXN0aWQnLCAnYnRuU3dhbENvbmZpcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXNzZXJ0TG9nLmR1cGxpY2F0ZWRSZWdpc3RlckFjY291bnQubG9nKHRydWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTE9HOiB+IGZpbGU6IGN1c01vZGFsTG9naW4uanMgfiBsaW5lIDMxMSB+IC50aGVuIH4gaHRtbEVsZW1lbnRcIiwgaHRtbEVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uZmlybUJ1dHRvblRleHQ6ICdDb29sJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vYXV0aC9lbWFpbC1hbHJlYWR5LWluLXVzZSBUaGUgZW1haWwgYWRkcmVzcyBpcyBhbHJlYWR5IGluIHVzZSBieSBhbm90aGVyIGFjY291bnQuXHJcbiAgICAgICAgICAgICAgICAvLyAuLi5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHRoaXMuZmlyZWJhc2UuYXV0aCgpLnNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc0NrYm94U2lnbmluS2VlcEluIHByb3h5VUkuYmluZENrYm94U2lnbmluS2VlcEluXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBmaXJlYmFzZS5hdXRoLkF1dGguUGVyc2lzdGVuY2UuTE9DQUwuLi5ldGNcclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc2lzdGVuY2UoaXNDa2JveFNpZ25pbktlZXBJbikge1xyXG4gICAgICAgIGxldCBwZXJzaXN0ZW5jZTtcclxuICAgICAgICBpZiAoaXNDa2JveFNpZ25pbktlZXBJbilcclxuICAgICAgICAgICAgcGVyc2lzdGVuY2UgPSB0aGlzLmZpcmViYXNlLmF1dGguQXV0aC5QZXJzaXN0ZW5jZS5MT0NBTFxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcGVyc2lzdGVuY2UgPSB0aGlzLmZpcmViYXNlLmF1dGguQXV0aC5QZXJzaXN0ZW5jZS5OT05FXHJcbiAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlXHJcbiAgICB9XHJcbiAgICBFbWFpbF9Mb2dpbigpIHtcclxuICAgICAgICBsZXQgZW1haWwgPSB0aGlzLnByb3h5VUkuYmluZElwdFNpZ25pbkVtYWlsO1xyXG4gICAgICAgIGxldCBwYXNzd29yZCA9IHRoaXMucHJveHlVSS5iaW5kSXB0U2lnbmluUFdEO1xyXG4gICAgICAgIGxldCBwZXJzaXN0ZW5jZSA9IHRoaXMuZ2V0UGVyc2lzdGVuY2UodGhpcy5wcm94eVVJLmJpbmRDa2JveFNpZ25pbktlZXBJbilcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICB0aGlzLmZpcmViYXNlLmF1dGgoKS5zZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93TW9kYWwoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLlxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBlcnJaaFR3ID0gZ2V0RXJyb3JNZXNzYWdlWkhUVyhlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKVxyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYucGx1Z2lucy5Td2FsLmZpcmUoe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+azqOaEjycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYCR7ZXJyWmhUdy5lcnJDb2RlWkhUV30sJHtlcnJaaFR3LmVyck1lc3NhZ2VaSFRXfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uZmlybUJ1dHRvblRleHQ6ICdDb29sJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbiAgICBHb29nbGVfUmVnaXN0ZXJfTG9naW4oIC8qKkB0eXBlIHthbnl9ICovIGUpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IHRoaXMuZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICAgICAgICBsZXQgcGVyc2lzdGVuY2UgPSB0aGlzLmdldFBlcnNpc3RlbmNlKHRoaXMucHJveHlVSS5iaW5kQ2tib3hTaWduaW5LZWVwSW4pXHJcbiAgICAgICAgdGhpcy5maXJlYmFzZS5hdXRoKCkuc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoUmVkaXJlY3QocHJvdmlkZXIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLlxyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvci0tPicsIGVycm9yTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIC8vdXBkYXRlU3R5bGUodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7fVxyXG5cclxuICAgIGFkb3B0ZWRDYWxsYmFjaygpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Kn0gbmFtZSBcclxuICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgXHJcbiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbHVlIFxyXG4gICAgICovXHJcbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgLy91cGRhdGVTdHlsZSh0aGlzKTtcclxuICAgIH1cclxuXHJcbn1cclxuLyoqXHJcbiAqIEBmdW5jdGlvbiAtIGdldCBjaGluZXNlIGVycm9yIG1lc3NhZ2VcclxuICogQHBhcmFtIHtzdHJpbmd9IGVyckNvZGUgXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBlcnJNZXNzYWdlIFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlWkhUVyhlcnJDb2RlLCBlcnJNZXNzYWdlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkxPRzo6IGN1c01vZGFsTG9naW4gLT4gZ2V0RXJyb3JNZXNzYWdlWkhUVyAtPiBlcnJDb2RlXCIsIGVyckNvZGUpXHJcbiAgICBsZXQgZXJyQ29kZVpIVFc7XHJcbiAgICBsZXQgZXJyTWVzc2FnZVpIVFcgPSBlcnJNZXNzYWdlO1xyXG4gICAgc3dpdGNoIChlcnJDb2RlKSB7XHJcbiAgICAgICAgY2FzZSAnYXV0aC91c2VyLW5vdC1mb3VuZCc6XHJcbiAgICAgICAgICAgIGVyckNvZGVaSFRXID0gXCLpgJnlgItFbWFpbOW4s+iZn+S4jeWtmOWcqFwiXHJcbiAgICAgICAgICAgIGVyck1lc3NhZ2VaSFRXID0gXCLoq4vlhYjoqLvlhorluLPomZ/miJbmmK/nlKhnb29nbGXnmbvlhaVcIlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdhdXRoL3dyb25nLXBhc3N3b3JkJzpcclxuICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSAn5a+G56K86Yyv6KqkJ1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdhdXRoL2VtYWlsLWFscmVhZHktaW4tdXNlJzpcclxuICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSAn6YCZ5YCL5biz6Jmf5bey6KKr6Ki75YaKJ1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBlcnJDb2RlWkhUVyA9IGVyckNvZGU7XHJcbiAgICAgICAgICAgIGVyck1lc3NhZ2VaSFRXID0gZXJyTWVzc2FnZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGVyckNvZGVaSFRXLFxyXG4gICAgICAgIGVyck1lc3NhZ2VaSFRXXHJcbiAgICB9XHJcbiAgICAvLyBhdXRoL2ludmFsaWQtcGhvbmUtbnVtYmVyLCBUT09fU0hPUlRcclxuICAgIC8vIGF1dGgvaW52YWxpZC1waG9uZS1udW1iZXIsIFRPT19MT05HICAgICAgICBcclxuICAgIC8vIGF1dGgvaW52YWxpZC12ZXJpZmljYXRpb24tY29kZSwgVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzIGludmFsaWQuIFBsZWFzZSByZXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNtcyBhbmQgYmUgc3VyZSB1c2UgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLiAgICAgICAgXHJcbiAgICAvLyBhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkLCBVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci5cclxuICAgIC8vIGNhc2UgJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInOlxyXG4gICAgLy8gY2FzZSAnYXV0aC90b28tbWFueS1yZXF1ZXN0cyc6XHJcblxyXG4gICAgLy9hZGRyZXNzIGJ1Z1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQTFCQTtBQUNBO0FBMkJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBdkNBO0FBQ0E7QUF5Q0E7QUFDQTtBQXpEQTtBQTNCQTtBQXVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVRBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFUQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFFQTs7OztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUVBOzs7QUFFQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFFQTs7OztBQWphQTtBQW9hQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFhQTtBQUNBO0FBd2FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFkQTtBQUNBO0FBZUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./webcomponents/cusModalLogin3/cusModalLogin.js\n");

/***/ }),

/***/ "./webcomponents/cusModalUserProfile3/cusModalUserProfile.js":
/*!*******************************************************************!*\
  !*** ./webcomponents/cusModalUserProfile3/cusModalUserProfile.js ***!
  \*******************************************************************/
/*! namespace exports */
/*! export ENUM_LoginMethod [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ENUM_PhoneStatus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ENUM_PhoneStatus\": () => /* binding */ ENUM_PhoneStatus,\n/* harmony export */   \"ENUM_LoginMethod\": () => /* binding */ ENUM_LoginMethod,\n/* harmony export */   \"default\": () => /* binding */ cusModalUserProfile\n/* harmony export */ });\n/* harmony import */ var _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../js/dataDefine/index.js */ \"./js/dataDefine/index.js\");\n/* harmony import */ var _js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../js/firebase/FirebaseMJS.js */ \"./js/firebase/FirebaseMJS.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//@ts-check\n\n\n/**@class */\n\nvar ProxyFormData = function ProxyFormData() {\n  _classCallCheck(this, ProxyFormData);\n\n  _defineProperty(this, \"iptAccount\", \"\");\n\n  _defineProperty(this, \"iptEmail\", \"\");\n\n  _defineProperty(this, \"iptName\", \"\");\n\n  _defineProperty(this, \"iptPhone\", \"\");\n\n  _defineProperty(this, \"iptAddress\", \"\");\n\n  _defineProperty(this, \"userData\", null);\n};\n/**@enum {string}*/\n\n\n_defineProperty(ProxyFormData, \"userProfileConverter\", {\n  toFirestore: function toFirestore(\n  /**@type {ProxyFormData} */\n  proxyFormData) {\n    return {\n      // only write back key-userProfile\n      userProfile: {\n        //sendEmail: proxyFormData.iptEmail,\n        name: proxyFormData.iptName,\n        //phoneNumber: proxyFormData.iptPhone,\n        address: proxyFormData.iptAddress // address1: proxyFormData.iptAddress1,\n        // address2: proxyFormData.iptAddress2,\n        // address3: proxyFormData.iptAddress3,\n        //selectAddress: proxyFormData.selectAddress,\n\n      }\n    };\n  },\n  fromFirestore: function fromFirestore(\n  /**@type {any}} */\n  snapshot,\n  /**@type {any}}*/\n  options) {\n    var data = snapshot.data(options);\n    var proxyFormData = new ProxyFormData();\n    proxyFormData.userData = Object.assign(new _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.UserData(), data); //load email + phone + userProfile\n\n    proxyFormData.iptEmail = data.email;\n    proxyFormData.iptPhone = defaultValue.iptPhone;\n    if (data.phoneNumber) proxyFormData.iptPhone = data.phoneNumber;\n\n    if (data.userProfile) {\n      //proxyFormData.iptEmail = data.userProfile.sendEmail\n      proxyFormData.iptName = data.userProfile.name; //proxyFormData.iptPhone = data.userProfile.phoneNumber\n\n      proxyFormData.iptAddress = data.userProfile.address; // proxyFormData.iptAddress1 = data.userProfile.address1\n      // proxyFormData.iptAddress2 = data.userProfile.address2\n      // proxyFormData.iptAddress3 = data.userProfile.address3\n      // proxyFormData.selectAddress = data.userProfile.selectAddress\n    }\n\n    return proxyFormData;\n  }\n});\n\nvar ENUM_PhoneStatus = {\n  noPhoneNubmer: \"noPhoneNubmer\",\n  inputPhoneFailed: \"inputPhoneFailed\",\n  inputVerifyCode: \"inputVerifyCode\",\n  verifyFailed: \"verifyFailed\",\n  verifiedOK: \"verifiedOK\"\n};\n/**@enum {string}*/\n\nvar ENUM_LoginMethod = {\n  google: \"google\",\n  email: \"email\"\n};\nvar defaultValue = {\n  iptPhone: '+886',\n  iptPhoneVerifyCode: ''\n};\n\nvar cusModalUserProfile = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(cusModalUserProfile, _HTMLElement);\n\n  var _super = _createSuper(cusModalUserProfile);\n\n  /**\r\n   * \r\n   * @param {HTMLElement} templateContent \r\n   * @param {import('../cusModalLogin3/cusModalLogin.js').plugins} plugins \r\n   */\n  function cusModalUserProfile(templateContent, plugins) {\n    var _this;\n\n    _classCallCheck(this, cusModalUserProfile);\n\n    _this = _super.call(this);\n    /** {Swal , Email_ResendPassword(...)} */\n\n    _this.plugins = plugins; //this.plugins.Email_ResendPassword()\n    // assign firebase\n\n    _this.firebase = null;\n    _this.db = null;\n    if (firebase) _this.setFirebase(firebase);\n    if (!templateContent) throw new Error('error, arg - templateContent not defined!');\n    /**@typedef {sweetalert2} Swal */\n\n    if (!Swal) throw new Error('error, please implement sweetalert2 first!');\n\n    _this.appendTemplate(templateContent);\n\n    var proxyUI = {\n      /**@prop {ENUM_PhoneStatus}*/\n      enumPhoneStatus: ENUM_PhoneStatus.noPhoneNubmer,\n\n      /**@prop {ENUM_LoginMethod}*/\n      enumLoginMethod: ENUM_LoginMethod.google,\n      divInputPhoneFailed_Text: '輸入電話失敗',\n      divVerifyFailed_Text: '驗證失敗',\n      divAccount_Show: false,\n      isEmailVerified: true,\n      isAccountOfGoogle: true //not show btnResendPassword\n\n    };\n\n    var self = _assertThisInitialized(_this);\n\n    _this.proxyUI = new Proxy(proxyUI, {\n      get: function get(\n      /**@type {any}*/\n      target, prop) {\n        return target[prop];\n      },\n      set: function set(\n      /**@type {any}*/\n      target, prop, value) {\n        switch (prop) {\n          case 'enumPhoneStatus':\n            switch (value) {\n              case ENUM_PhoneStatus.noPhoneNubmer:\n                self.iptPhone.setDisabled(false);\n                self.btnVerifyNumber.setShow(true);\n                self.btnVerifyNumber.setDisabled(false);\n                self.btnDeleteNumber.setShow(false);\n                self.divInputPhoneFailed.setShow(false); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(false);\n                self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode; // self.iptPhoneVerifyCode.setDisabled(true)\n                // self.btnSendVerifyCode.setDisabled(true)\n                //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(false);\n                break;\n\n              case ENUM_PhoneStatus.inputPhoneFailed:\n                self.iptPhone.setDisabled(false);\n                self.btnVerifyNumber.setShow(true);\n                self.btnVerifyNumber.setDisabled(false);\n                self.btnDeleteNumber.setShow(false);\n                self.divInputPhoneFailed.setShow(true); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(false);\n                self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode; // self.iptPhoneVerifyCode.setDisabled(true)\n                // self.btnSendVerifyCode.setDisabled(true)\n                //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(false);\n                break;\n\n              case ENUM_PhoneStatus.inputVerifyCode:\n                self.iptPhone.setDisabled(true);\n                self.btnVerifyNumber.setShow(true);\n                self.btnVerifyNumber.setDisabled(true);\n                self.btnDeleteNumber.setShow(false);\n                self.divInputPhoneFailed.setShow(false); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(true);\n                self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode;\n                self.iptPhoneVerifyCode.setDisabled(false);\n                self.btnSendVerifyCode.setDisabled(false); //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(false);\n                break;\n\n              case ENUM_PhoneStatus.verifyFailed:\n                self.iptPhone.setDisabled(true);\n                self.btnVerifyNumber.setShow(true);\n                self.btnVerifyNumber.setDisabled(true);\n                self.btnDeleteNumber.setShow(false);\n                self.divInputPhoneFailed.setShow(false); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(true); //self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode\n\n                self.iptPhoneVerifyCode.setDisabled(false);\n                self.btnSendVerifyCode.setDisabled(false); //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(true);\n                break;\n\n              case ENUM_PhoneStatus.verifiedOK:\n                self.iptPhone.setDisabled(true);\n                self.btnVerifyNumber.setShow(false); //self.btnVerifyNumber.setDisabled(true)\n\n                self.btnDeleteNumber.setShow(true);\n                self.divInputPhoneFailed.setShow(false); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(false);\n                self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode; // self.iptPhoneVerifyCode.setDisabled(true)\n                // self.btnSendVerifyCode.setDisabled(true)\n                //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(false);\n                break;\n\n              default:\n                break;\n            }\n\n            break;\n\n          case 'enumLoginMethod':\n            /**@type {HTMLElement} */\n            var iFaEnvelope = self.querySelector('#iFaEnvelope');\n            /**@type {HTMLElement} */\n\n            var iFaGoogle = self.querySelector('#iFaGoogle');\n\n            switch (value) {\n              case ENUM_LoginMethod.google:\n                iFaEnvelope.classList.add('d-none');\n                iFaGoogle.classList.remove('d-none');\n                break;\n\n              case ENUM_LoginMethod.email:\n                iFaEnvelope.classList.remove('d-none');\n                iFaGoogle.classList.add('d-none');\n                break;\n\n              default:\n                break;\n            }\n\n            break;\n\n          case \"divInputPhoneFailed_Text\":\n            self.divInputPhoneFailed.innerHTML = value; //document.querySelector()\n\n            break;\n\n          case \"divVerifyFailed_Text\":\n            self.divVerifyFailed.innerHTML = value;\n            break;\n\n          case 'isEmailVerified':\n            /**@type {HTMLInputElement} */\n            var uiCkboxEmailVerified = self.querySelector('#uiCkboxEmailVerified');\n            uiCkboxEmailVerified.checked = value;\n            break;\n\n          case 'isAccountOfGoogle':\n            /**@type {HTMLInputElement} */\n            var uiCkboxIsAccountOfGoogle = self.querySelector('#uiCkboxIsAccountOfGoogle');\n            uiCkboxIsAccountOfGoogle.checked = value;\n            break;\n\n          case 'divAccount_Show':\n            var divAccount = self.querySelector('#formUserProfile #divAccount');\n            if (value === false) divAccount.classList.add('d-none');else divAccount.classList.remove('d-none');\n            break;\n          // ...\n\n          default:\n            /**@type {string} - UI input value */\n            target[prop] = value;\n            break;\n        }\n\n        target[prop] = value;\n        return true;\n      }\n    });\n    _this.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.verifiedOK;\n    return _this;\n  }\n\n  _createClass(cusModalUserProfile, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      var _this2 = this;\n\n      //-----------Phone Verify renderRecaptcha\n      this.recaptchaVerifier = null;\n      this.verificationId = null; //this.renderRecaptcha('btnSendVerifyCode')\n\n      this.renderRecaptcha('btnVerifyNumber');\n      var self = this;\n      var authUser = this.firebase.auth().currentUser; //set emailVerified UI -- warning icon + btnResendVerify show\n\n      this.proxyUI.isEmailVerified = authUser.emailVerified; //check if google account\n\n      /**@type {any[]}} */\n\n      var findGoogleProvider = authUser.providerData.filter(function (\n      /**@type {any}*/\n      item) {\n        return item.providerId === 'google.com';\n      });\n      this.proxyUI.isAccountOfGoogle = findGoogleProvider.length > 0 ? this.proxyUI.isAccountOfGoogle = true : this.proxyUI.isAccountOfGoogle = false;\n      this.btnSendVerifyCode.addEventListener('click', function (e) {\n        e.preventDefault();\n        console.log(_this2.verificationId);\n        var sVerifyCode = self.iptPhoneVerifyCode.value;\n\n        var credential_phone = _this2.firebase.auth.PhoneAuthProvider.credential(_this2.verificationId, sVerifyCode);\n\n        authUser.linkWithCredential(credential_phone).then(function (\n        /**@type {any}*/\n        e) {\n          self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.verifiedOK;\n          self.saveUserData({\n            phoneNumber: authUser.phoneNumber\n          });\n          self.proxyFormData.iptPhone = authUser.phoneNumber;\n        })[\"catch\"](function (\n        /**@type {any}*/\n        error) {\n          var _self$getErrorMessage = self.getErrorMessageZHTW(error.code, error.message),\n              errCodeZHTW = _self$getErrorMessage.errCodeZHTW,\n              errMessageZHTW = _self$getErrorMessage.errMessageZHTW;\n\n          self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.verifyFailed;\n          self.proxyUI.divVerifyFailed_Text = \"\".concat(errCodeZHTW, \", \").concat(errMessageZHTW);\n        });\n      });\n      this.btnDeleteNumber.addEventListener('click', function (e) {\n        var self = _this2;\n        console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> authUser\", authUser);\n        authUser.unlink('phone').then(function () {\n          // Auth provider unlinked from account\n          // ...\n          console.log('unlink phone OK!');\n          self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.noPhoneNubmer;\n          console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> authUser\", authUser);\n          self.saveUserData({\n            phoneNumber: null\n          });\n          self.proxyFormData.iptPhone = defaultValue.iptPhone;\n        })[\"catch\"](function (\n        /**@type {any}*/\n        error) {\n          console.log(\"error -- LOG:: cusModalUserProfile -> connectedCallback -> error\", error); // An error happened\n          // ...\n        });\n      }); // setTimeout(() => {\n      //     this.renderRecaptcha('btnSendVerifyCode')\n      // }, 2000);\n\n      var btnResendEmailVerify = this.querySelector('#btnResendEmailVerify');\n      btnResendEmailVerify.addEventListener('click', function (e) {\n        var self = _this2;\n        authUser.sendEmailVerification().then(function () {\n          // Email sent.\n          self.plugins.Swal.fire('Email認證信已寄出', '請到信箱收信，並按下確認連結', 'success');\n        })[\"catch\"](function (\n        /**@type {any}*/\n        error) {\n          // An error happened.\n          self.plugins.Swal.fire('發生錯誤', \"\".concat(error.code, \",\").concat(error.message), 'error');\n          console.log(error);\n        });\n      });\n      this.btnResendPassword = this.querySelector('#btnResendPassword');\n      this.btnResendPassword.addEventListener('click', function () {\n        var self = _this2;\n        var emailAddress = _this2.proxyFormData.iptEmail;\n\n        _this2.plugins.Email_ResendPassword(emailAddress, _this2.firebase, _this2.plugins.Swal, function () {\n          self.showModal(false); //self.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n        });\n      }); // let btnModifyPassword = this.querySelector('#btnModifyPassword');\n      // btnModifyPassword.addEventListener('click', (e) => {\n      //     let self = this\n      //     let html = `\n      //     <form id=\"formModifyPassword\">\n      //         <div>\n      //             <span class=\"titleWhite\">輸入舊密碼</span>\n      //             <input id=\"swal-input1\" type=\"password\" class=\"swal2-input inputCheckValid\" placeholder=\"英文字母或數字，至少8位數\" pattern=\"^[0-9a-zA-Z]{8,}$\" required autocomplete=\"current-password\">\n      //             <span></span>\n      //         </div>\n      //         <div>\n      //             <span class=\"titleWhite\">輸入新密碼</span>\n      //             <input id=\"swal-input2\" type=\"password\" class=\"swal2-input inputCheckValid\" placeholder=\"英文字母或數字，至少8位數\" pattern=\"^[0-9a-zA-Z]{8,}$\" required>\n      //             <span></span>\n      //         </div>\n      //         <div>\n      //             <span class=\"titleWhite\">再次輸入新密碼</span>\n      //             <input id=\"swal-input3\" type=\"password\" class=\"swal2-input inputCheckValid\" placeholder=\"英文字母或數字，至少8位數\" pattern=\"^[0-9a-zA-Z]{8,}$\" required>\n      //             <span></span>\n      //         </div>\n      //         <button id=\"btnValid\" class=\"b-displayNone\">Check Form Valid</button>\n      //     </form>\n      //     `;\n      //     // html= '<input id=\"swal-input1\" class=\"swal2-input\">' +\n      //     //     '<input id=\"swal-input2\" class=\"swal2-input\">',\n      //     Swal.fire({\n      //             title: '修改密碼',\n      //             html: html,\n      //             customClass: {\n      //                 confirmButton: 'swalbtn'\n      //             },\n      //             // inputAttributes: {\n      //             //     maxlength: 10,\n      //             //     autocapitalize: 'off',\n      //             //     autocorrect: 'on'\n      //             // },\n      //             focusConfirm: false,\n      //             preConfirm: (e) => {\n      //                 console.log('---------preConfirm-----------')\n      //                 console.log('---------HTML5 validation-----------')\n      //                 let btnValid = document.querySelector('#btnValid')\n      //                 btnValid.click();\n      //                 let ipt1 = document.querySelector('#formModifyPassword #swal-input1')\n      //                 let ipt2 = document.querySelector('#formModifyPassword #swal-input2')\n      //                 let ipt3 = document.querySelector('#formModifyPassword #swal-input3')\n      //                 let isHTML5Valid = true;\n      //                 if (ipt1.checkValidity() === false ||\n      //                     ipt2.checkValidity() === false ||\n      //                     ipt3.checkValidity() === false) {\n      //                     Swal.showValidationMessage('');\n      //                     return false\n      //                 }\n      //                 //-------other check\n      //                 console.log('---------other check-----------')\n      //                 if (ipt2.value !== ipt3.value) {\n      //                     Swal.showValidationMessage('兩次輸入的新密碼必須一致');\n      //                 }\n      //                 // let form = document.querySelector('#formModifyPassword')\n      //                 // console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> form\", form)\n      //                 // let aa = document.querySelector('#formModifyPassword #swal-input1').checkValidity();\n      //                 // console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> aa\", aa)\n      //                 //Swal.showValidationMessage(''); //stop confirm process\n      //                 return [\n      //                     ipt1.value,\n      //                     ipt2.value,\n      //                     ipt3.value\n      //                 ]\n      //             },\n      //             // onOpen:function(e){\n      //             //     console.log('-------open------------')\n      //             // },\n      //             didRender: function (e) {\n      //                 //-------- only for html5 form validation\n      //                 let formModifyPassword = document.querySelector('#formModifyPassword');\n      //                 formModifyPassword.addEventListener('submit', (e) => {\n      //                     e.preventDefault()\n      //                 })\n      //             },\n      //             showCancelButton: true,\n      //             // inputValidator: (value) => {\n      //             //     return 111\n      //             //     console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> value\", value)\n      //             //     if (!value) {\n      //             //         return 'You need to write something!'\n      //             //     }\n      //             // }\n      //         })\n      //         .then((result) => {\n      //             console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> result\", result)\n      //         })\n      // })\n    }\n    /**\r\n     * @param {string} buttonID \r\n     */\n\n  }, {\n    key: \"renderRecaptcha\",\n    value: function renderRecaptcha(buttonID) {\n      var self = this; // [START appVerifier]\n\n      window.recaptchaVerifier = new this.firebase.auth.RecaptchaVerifier(buttonID, {\n        'size': 'invisible',\n        'callback': function callback(\n        /**@type {any}*/\n        response) {\n          // reCAPTCHA solved, allow signInWithPhoneNumber.\n          //window.signingIn = true;\n          //updateSignInButtonUI();\n          //var phoneNumber = getPhoneNumberFromUserInput();\n          var appVerifier = window.recaptchaVerifier;\n          var sPhoneNumber = self.iptPhone.value; //document.querySelector('#iptPhone').textContent;\n\n          self.firebase.auth().signInWithPhoneNumber(sPhoneNumber, appVerifier).then(function (\n          /**@type {any}*/\n          confirmationResult) {\n            //window.confirmationResult = confirmationResult;\n            self.verificationId = confirmationResult.verificationId;\n            self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.inputVerifyCode;\n          })[\"catch\"](function (\n          /**@type {any}*/\n          error) {\n            self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.inputPhoneFailed;\n            self.proxyUI.divInputPhoneFailed_Text = \"\".concat(error.code, \", \").concat(error.message); // Error; SMS not sent\n\n            console.error('Error during signInWithPhoneNumber', error); // window.alert('Error during signInWithPhoneNumber:\\n\\n' +\n            //     error.code + '\\n\\n' + error.message);\n            //window.signingIn = false;\n            // updateSignInFormUI();\n            // updateSignInButtonUI();\n          });\n        }\n      }); // [END appVerifier]\n      // button start working\n\n      window.recaptchaVerifier.render().then(function (widgetId) {\n        var recaptchaWidgetId = widgetId; //updateSignInButtonUI();\n      })[\"catch\"](function (error) {});\n    } // onInputChange(e) {\n    //     let thisElement = e.target;\n    //     this.proxyFormData[e.target.id] = e.target.value;\n    //     // console.log(e.target.id)\n    //     // console.log(this.proxyFormData[e.target.id])\n    // }\n\n    /**\r\n     * \r\n     * @param {HTMLElement} templateContent \r\n     */\n\n  }, {\n    key: \"appendTemplate\",\n    value: function appendTemplate(templateContent) {\n      // const shadowRoot = this.attachShadow({mode: 'open'});\n      // shadowRoot.appendChild(templateContent)\n      this.appendChild(templateContent); //------------------\n\n      /**@type {HTMLInputElement} */\n\n      this.iptAccount = this.querySelector('#iptAccount');\n      this.iptAccount.addEventListener('input', this.onInputChange.bind(this));\n      /**@type {HTMLInputElement} */\n\n      this.iptEmail = this.querySelector('#iptEmail');\n      this.iptEmail.addEventListener('input', this.onInputChange.bind(this));\n      /**@type {HTMLInputElement} */\n\n      this.iptName = this.querySelector('#iptName');\n      this.iptName.addEventListener('input', this.onInputChange.bind(this)); // this.iptPhone = this.querySelector('#iptPhone');\n      // this.iptPhone.addEventListener('input', this.onInputChange.bind(this));\n\n      /**@type {HTMLInputElement} */\n\n      this.iptAddress = this.querySelector('#iptAddress');\n      this.iptAddress.addEventListener('input', this.onInputChange.bind(this)); //======== Phone Number Verify=========\n\n      /**@type {HTMLInputElement} */\n\n      this.iptPhone = this.querySelector('#iptPhone');\n      /**@type {HTMLElement} */\n\n      this.btnVerifyNumber = this.querySelector('#btnVerifyNumber');\n      /**@type {HTMLElement} */\n\n      this.btnDeleteNumber = this.querySelector('#btnDeleteNumber');\n      /**@type {HTMLElement} */\n\n      this.divInputPhoneFailed = this.querySelector('#divInputPhoneFailed');\n      /**@type {HTMLElement} */\n\n      this.divVerifyCode = this.querySelector('#divVerifyCode');\n      /**@type {HTMLInputElement} */\n\n      this.iptPhoneVerifyCode = this.querySelector('#iptPhoneVerifyCode');\n      /**@type {HTMLElement} */\n\n      this.btnSendVerifyCode = this.querySelector('#btnSendVerifyCode');\n      /**@type {HTMLElement} */\n\n      this.divVerifyFailed = this.querySelector('#divVerifyFailed');\n      /**\r\n       * @this {HTMLElement | HTMLInputElement}\r\n       * @param {boolean} value \r\n       */\n\n      function setDisabled(value) {\n        if (value) this.setAttribute('disabled', '');else this.removeAttribute('disabled');\n      }\n      /**\r\n       * @this {HTMLElement | HTMLInputElement}\r\n       * @param {boolean} value \r\n       */\n\n\n      function setShow(value) {\n        if (value) this.classList.remove('d-none');else this.classList.add('d-none');\n      }\n\n      var arrayElements_isDisable = this.querySelectorAll('[isDisable]');\n      var arrayElements_isShow = this.querySelectorAll('[isShow]'); // arrayElements_isDisable = arrayElements_isDisable.map((item) => {\n      //     item.setDisabled = setDisabled\n      //     return item\n      // })\n\n      arrayElements_isDisable.forEach(function (item) {\n        item.setDisabled = setDisabled;\n      });\n      arrayElements_isShow.forEach(function (item) {\n        item.setShow = setShow;\n      }); //this.iptPhone.setDisabled(true)\n      // this.divVerifyFailed.setShow(true)\n\n      /**@type {HTMLElement} */\n\n      this.formUserProfile = this.querySelector('#formUserProfile');\n      this.formUserProfile.addEventListener('submit', this.onFormSubmit.bind(this));\n      var proxyFormData = new ProxyFormData(); // let proxyFormData = {\n      //     iptAccount: \"\",\n      //     iptName: \"\",\n      //     iptEmail: \"\",\n      //     iptPhone: \"\",\n      //     iptAddress1: \"\",\n      //     iptAddress2: \"\",\n      //     iptAddress3: \"\",\n      // }\n\n      /**@type {any}}*/\n\n      var self = this;\n      this.proxyFormData = new Proxy(proxyFormData, {\n        get: function get(\n        /**@type {any}*/\n        target, prop) {\n          return target[prop];\n        },\n        set: function set(\n        /**@type {any}*/\n        target, prop, value) {\n          switch (prop) {\n            default:\n              /**@type {string} - UI input value */\n              if (self[prop]) //userData === undefined\n                self[prop].value = value;\n              break;\n          }\n\n          target[prop] = value; //console.log(target, prop, value)\n\n          return true;\n        }\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} htmlElement \r\n     */\n\n  }, {\n    key: \"appendTestArea\",\n    value: function appendTestArea(htmlElement) {\n      var testArea = document.querySelector('[testArea]');\n      testArea.appendChild(htmlElement); //console.log(aa)\n    }\n  }, {\n    key: \"showTestUI\",\n    value: function showTestUI() {\n      var uiCkboxEmailVerified = this.querySelector('#uiCkboxEmailVerified');\n      uiCkboxEmailVerified.classList.remove('b-displayNone');\n    }\n    /**\r\n     * \r\n     * @param {firebase} inFirebase \r\n     */\n\n  }, {\n    key: \"setFirebase\",\n    value: function setFirebase(inFirebase) {\n      // console.log(inFirebase)\n      this.firebase = inFirebase;\n      this.db = this.firebase.firestore(); //this.setAuth_getRedirectResult();\n    }\n    /**\r\n     * @function - save partial of userData to firestore\r\n     * @param {any} userData \r\n     */\n\n  }, {\n    key: \"saveUserData\",\n    value: function saveUserData(userData) {\n      var uid = this.proxyFormData.iptAccount;\n      this.db.collection(_js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_1__.FIRESTORE_COLLECTION.Users).doc(uid).set(userData, {\n        merge: true\n      });\n    }\n    /**\r\n     * \r\n     * @param {boolean} isShow \r\n     */\n\n  }, {\n    key: \"showModal\",\n    value: function showModal(isShow) {\n      //let modalLogin2 = document.querySelector('#modalLogin2');\n      //console.log(modalLogin2)\n      //modalLogin2.assign();\n      var options = {\n        show: isShow,\n        focus: true,\n        keyboard: true\n      };\n      var strShow = null;\n      if (isShow == true) strShow = 'show';else strShow = 'hide';\n      $('#modalProfile').modal(strShow); //console.log($('#modalLogin'))\n    }\n  }, {\n    key: \"onFormSubmit\",\n    value: function onFormSubmit(\n    /**@type {any}*/\n    e) {\n      e.preventDefault();\n      var uid = this.proxyFormData.iptAccount;\n      this.db.collection(_js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_1__.FIRESTORE_COLLECTION.Users).doc(uid).withConverter(ProxyFormData.userProfileConverter).set(_objectSpread({}, this.proxyFormData), {\n        merge: true\n      });\n      this.showModal(false);\n    }\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(\n    /**@type {any}*/\n    e) {\n      var thisElement = e.target;\n      this.proxyFormData[e.target.id] = e.target.value; // console.log(e.target.id)\n      // console.log(this.proxyFormData[e.target.id])\n    } // } //-----------------------------------------\n\n    /**\r\n     * \r\n     * @param {string} uid \r\n     */\n\n  }, {\n    key: \"loadDbProfile\",\n    value: function loadDbProfile(uid) {\n      var self = this;\n      var authUser = this.firebase.auth().currentUser;\n      this.proxyFormData.iptAccount = uid; // 畫面UI資料以auth()為準\n\n      if (authUser) {\n        console.log(\"LOG:: cusModalUserProfile -> loadDbProfile -> authUser\", authUser);\n        this.proxyFormData.iptAccount = uid;\n        this.proxyFormData.iptEmail = authUser.email;\n        this.proxyFormData.iptPhone = authUser.phoneNumber; //==== phone status\n\n        this.proxyUI.enumPhoneStatus = authUser.phoneNumber ? ENUM_PhoneStatus.verifiedOK : ENUM_PhoneStatus.noPhoneNubmer; //==== signin provider type\n\n        var listProviderId = _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.UserData.getListProviderId_ByAuthUserProviderData(authUser.providerData);\n        var fakeUser = new _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.UserData();\n        fakeUser.listProviderId = listProviderId;\n        var providerId = fakeUser.providerId;\n        this.proxyUI.enumLoginMethod = providerId === _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.UserData.ENUM_ProviderType.google ? ENUM_LoginMethod.google : ENUM_LoginMethod.email; // /**@type {Array} */\n        // let findGoogleProvider = authUser.providerData.filter((item) => {\n        //     return item.providerId === 'google.com' // google.com password\n        // })\n        // if (findGoogleProvider.length > 0)\n        //     this.proxyUI.enumLoginMethod = ENUM_LoginMethod.google;\n        // else\n        //     this.proxyUI.enumLoginMethod = ENUM_LoginMethod.email;\n      } //newAA.proxyFormData.iptAccount = 'RZN9NipaymMkYA8Pr4a8Tg5gvz13'\n      //var self = this.firebase\n\n\n      this.db.collection(_js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_1__.FIRESTORE_COLLECTION.Users).doc(uid).withConverter(ProxyFormData.userProfileConverter).get().then(function (\n      /**@type {any}*/\n      e) {\n        var userInfo = e.data();\n\n        if (userInfo) {\n          self.proxyFormData.iptName = userInfo.iptName;\n          self.proxyFormData.iptAddress = userInfo.iptAddress;\n        }\n      });\n    }\n    /**\r\n     * \r\n     * @param {string} errCode \r\n     * @param {string} errMessage \r\n     */\n\n  }, {\n    key: \"getErrorMessageZHTW\",\n    value: function getErrorMessageZHTW(errCode, errMessage) {\n      console.log(\"LOG:: cusModalUserProfile -> getErrorMessageZHTW -> errCode\", errCode);\n      var errCodeZHTW;\n      var errMessageZHTW = errMessage;\n\n      switch (errCode) {\n        case 'auth/invalid-phone-number':\n          errCodeZHTW = '電話號碼格式錯誤';\n          break;\n\n        case 'auth/invalid-verification-code':\n          errCodeZHTW = '驗證碼輸入錯誤';\n          break;\n\n        case 'auth/provider-already-linked':\n          errCodeZHTW = '此電話號碼已存在';\n          break;\n\n        case 'auth/credential-already-in-use':\n          errCodeZHTW = '此電話號碼已被使用';\n          break;\n\n        case 'auth/missing-phone-number':\n          errCodeZHTW = errCode;\n          break;\n\n        case 'auth/too-many-requests':\n          errCodeZHTW = errCode;\n          break;\n\n        default:\n          errCodeZHTW = errCode;\n          errMessageZHTW = errMessage;\n          break;\n      }\n\n      return {\n        errCodeZHTW: errCodeZHTW,\n        errMessageZHTW: errMessageZHTW\n      }; // auth/invalid-phone-number, TOO_SHORT\n      // auth/invalid-phone-number, TOO_LONG        \n      // auth/invalid-verification-code, The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.        \n      // auth/provider-already-linked, User can only be linked to one identity for the given provider.\n      // case 'auth/missing-phone-number':\n      // case 'auth/too-many-requests':\n      //address bug\n    }\n  }]);\n\n  return cusModalUserProfile;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsVXNlclByb2ZpbGUzL2N1c01vZGFsVXNlclByb2ZpbGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJjb21wb25lbnRzL2N1c01vZGFsVXNlclByb2ZpbGUzL2N1c01vZGFsVXNlclByb2ZpbGUuanM/MjQwOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvL0B0cy1jaGVja1xyXG5cclxuaW1wb3J0IHsgVXNlckRhdGEgfSBmcm9tICcuLi8uLi9qcy9kYXRhRGVmaW5lL2luZGV4LmpzJ1xyXG5pbXBvcnQge0ZJUkVTVE9SRV9DT0xMRUNUSU9OfSBmcm9tICcuLi8uLi9qcy9maXJlYmFzZS9GaXJlYmFzZU1KUy5qcydcclxuXHJcbi8qKkBjbGFzcyAqL1xyXG5jbGFzcyBQcm94eUZvcm1EYXRhIHtcclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBpcHRBY2NvdW50ID0gXCJcIlxyXG4gICAgLyoqQHByb3Age3N0cmluZ30gKi9cclxuICAgIGlwdEVtYWlsID0gXCJcIlxyXG4gICAgLyoqQHByb3Age3N0cmluZ30gKi9cclxuICAgIGlwdE5hbWUgPSBcIlwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgaXB0UGhvbmUgPSBcIlwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgaXB0QWRkcmVzcyA9IFwiXCJcclxuICAgIC8qKkB0eXBlIHtpbXBvcnQoJy4uLy4uL2pzL2RhdGFEZWZpbmUvaW5kZXguanMnKS5Vc2VyRGF0YX0gKi9cclxuICAgIHVzZXJEYXRhID0gbnVsbC8ve31cclxuICAgIHN0YXRpYyB1c2VyUHJvZmlsZUNvbnZlcnRlciA9IHtcclxuICAgICAgICB0b0ZpcmVzdG9yZTogZnVuY3Rpb24gKC8qKkB0eXBlIHtQcm94eUZvcm1EYXRhfSAqLyBwcm94eUZvcm1EYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHdyaXRlIGJhY2sga2V5LXVzZXJQcm9maWxlXHJcbiAgICAgICAgICAgICAgICB1c2VyUHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc2VuZEVtYWlsOiBwcm94eUZvcm1EYXRhLmlwdEVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb3h5Rm9ybURhdGEuaXB0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAvL3Bob25lTnVtYmVyOiBwcm94eUZvcm1EYXRhLmlwdFBob25lLFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHByb3h5Rm9ybURhdGEuaXB0QWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGRyZXNzMTogcHJveHlGb3JtRGF0YS5pcHRBZGRyZXNzMSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGRyZXNzMjogcHJveHlGb3JtRGF0YS5pcHRBZGRyZXNzMixcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGRyZXNzMzogcHJveHlGb3JtRGF0YS5pcHRBZGRyZXNzMyxcclxuICAgICAgICAgICAgICAgICAgICAvL3NlbGVjdEFkZHJlc3M6IHByb3h5Rm9ybURhdGEuc2VsZWN0QWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnJvbUZpcmVzdG9yZTogZnVuY3Rpb24gKC8qKkB0eXBlIHthbnl9fSAqL3NuYXBzaG90LCAvKipAdHlwZSB7YW55fX0qL29wdGlvbnMpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBzbmFwc2hvdC5kYXRhKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHByb3h5Rm9ybURhdGEgPSBuZXcgUHJveHlGb3JtRGF0YSgpO1xyXG4gICAgICAgICAgICBwcm94eUZvcm1EYXRhLnVzZXJEYXRhID0gT2JqZWN0LmFzc2lnbihuZXcgVXNlckRhdGEoKSxkYXRhKVxyXG4gICAgICAgICAgICAvL2xvYWQgZW1haWwgKyBwaG9uZSArIHVzZXJQcm9maWxlXHJcbiAgICAgICAgICAgIHByb3h5Rm9ybURhdGEuaXB0RW1haWwgPSBkYXRhLmVtYWlsO1xyXG4gICAgICAgICAgICBwcm94eUZvcm1EYXRhLmlwdFBob25lID0gZGVmYXVsdFZhbHVlLmlwdFBob25lXHJcbiAgICAgICAgICAgIGlmIChkYXRhLnBob25lTnVtYmVyKVxyXG4gICAgICAgICAgICAgICAgcHJveHlGb3JtRGF0YS5pcHRQaG9uZSA9IGRhdGEucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnVzZXJQcm9maWxlKSB7XHJcbiAgICAgICAgICAgICAgICAvL3Byb3h5Rm9ybURhdGEuaXB0RW1haWwgPSBkYXRhLnVzZXJQcm9maWxlLnNlbmRFbWFpbFxyXG4gICAgICAgICAgICAgICAgcHJveHlGb3JtRGF0YS5pcHROYW1lID0gZGF0YS51c2VyUHJvZmlsZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAvL3Byb3h5Rm9ybURhdGEuaXB0UGhvbmUgPSBkYXRhLnVzZXJQcm9maWxlLnBob25lTnVtYmVyXHJcbiAgICAgICAgICAgICAgICBwcm94eUZvcm1EYXRhLmlwdEFkZHJlc3MgPSBkYXRhLnVzZXJQcm9maWxlLmFkZHJlc3NcclxuICAgICAgICAgICAgICAgIC8vIHByb3h5Rm9ybURhdGEuaXB0QWRkcmVzczEgPSBkYXRhLnVzZXJQcm9maWxlLmFkZHJlc3MxXHJcbiAgICAgICAgICAgICAgICAvLyBwcm94eUZvcm1EYXRhLmlwdEFkZHJlc3MyID0gZGF0YS51c2VyUHJvZmlsZS5hZGRyZXNzMlxyXG4gICAgICAgICAgICAgICAgLy8gcHJveHlGb3JtRGF0YS5pcHRBZGRyZXNzMyA9IGRhdGEudXNlclByb2ZpbGUuYWRkcmVzczNcclxuICAgICAgICAgICAgICAgIC8vIHByb3h5Rm9ybURhdGEuc2VsZWN0QWRkcmVzcyA9IGRhdGEudXNlclByb2ZpbGUuc2VsZWN0QWRkcmVzc1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJveHlGb3JtRGF0YVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipAZW51bSB7c3RyaW5nfSovXHJcbmV4cG9ydCBjb25zdCBFTlVNX1Bob25lU3RhdHVzID0ge1xyXG4gICAgbm9QaG9uZU51Ym1lcjogXCJub1Bob25lTnVibWVyXCIsXHJcbiAgICBpbnB1dFBob25lRmFpbGVkOiBcImlucHV0UGhvbmVGYWlsZWRcIixcclxuICAgIGlucHV0VmVyaWZ5Q29kZTogXCJpbnB1dFZlcmlmeUNvZGVcIixcclxuICAgIHZlcmlmeUZhaWxlZDogXCJ2ZXJpZnlGYWlsZWRcIixcclxuICAgIHZlcmlmaWVkT0s6IFwidmVyaWZpZWRPS1wiLFxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9Ki9cclxuZXhwb3J0IGNvbnN0IEVOVU1fTG9naW5NZXRob2QgPSB7XHJcbiAgICBnb29nbGU6IFwiZ29vZ2xlXCIsXHJcbiAgICBlbWFpbDogXCJlbWFpbFwiXHJcbn1cclxuY29uc3QgZGVmYXVsdFZhbHVlID0ge1xyXG4gICAgaXB0UGhvbmU6ICcrODg2JyxcclxuICAgIGlwdFBob25lVmVyaWZ5Q29kZTogJycsXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGN1c01vZGFsVXNlclByb2ZpbGUgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVDb250ZW50IFxyXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uanMnKS5wbHVnaW5zfSBwbHVnaW5zIFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZUNvbnRlbnQsIHBsdWdpbnMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIC8qKiB7U3dhbCAsIEVtYWlsX1Jlc2VuZFBhc3N3b3JkKC4uLil9ICovXHJcbiAgICAgICAgdGhpcy5wbHVnaW5zID0gcGx1Z2luc1xyXG4gICAgICAgIC8vdGhpcy5wbHVnaW5zLkVtYWlsX1Jlc2VuZFBhc3N3b3JkKClcclxuICAgICAgICBcclxuICAgICAgICAvLyBhc3NpZ24gZmlyZWJhc2VcclxuICAgICAgICB0aGlzLmZpcmViYXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRiID0gbnVsbFxyXG4gICAgICAgIGlmIChmaXJlYmFzZSlcclxuICAgICAgICAgICAgdGhpcy5zZXRGaXJlYmFzZShmaXJlYmFzZSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZUNvbnRlbnQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXJyb3IsIGFyZyAtIHRlbXBsYXRlQ29udGVudCBub3QgZGVmaW5lZCEnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKkB0eXBlZGVmIHtzd2VldGFsZXJ0Mn0gU3dhbCAqL1xyXG4gICAgICAgIGlmICghU3dhbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcnJvciwgcGxlYXNlIGltcGxlbWVudCBzd2VldGFsZXJ0MiBmaXJzdCEnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYXBwZW5kVGVtcGxhdGUodGVtcGxhdGVDb250ZW50KTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcHJveHlVSSA9IHtcclxuICAgICAgICAgICAgLyoqQHByb3Age0VOVU1fUGhvbmVTdGF0dXN9Ki9cclxuICAgICAgICAgICAgZW51bVBob25lU3RhdHVzOiBFTlVNX1Bob25lU3RhdHVzLm5vUGhvbmVOdWJtZXIsXHJcbiAgICAgICAgICAgIC8qKkBwcm9wIHtFTlVNX0xvZ2luTWV0aG9kfSovXHJcbiAgICAgICAgICAgIGVudW1Mb2dpbk1ldGhvZDogRU5VTV9Mb2dpbk1ldGhvZC5nb29nbGUsXHJcbiAgICAgICAgICAgIGRpdklucHV0UGhvbmVGYWlsZWRfVGV4dDogJ+i8uOWFpembu+ipseWkseaVlycsXHJcbiAgICAgICAgICAgIGRpdlZlcmlmeUZhaWxlZF9UZXh0OiAn6amX6K2J5aSx5pWXJyxcclxuICAgICAgICAgICAgZGl2QWNjb3VudF9TaG93OiBmYWxzZSxcclxuICAgICAgICAgICAgaXNFbWFpbFZlcmlmaWVkOiB0cnVlLFxyXG4gICAgICAgICAgICBpc0FjY291bnRPZkdvb2dsZTogdHJ1ZSwgLy9ub3Qgc2hvdyBidG5SZXNlbmRQYXNzd29yZFxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICB0aGlzLnByb3h5VUkgPSBuZXcgUHJveHkocHJveHlVSSwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgvKipAdHlwZSB7YW55fSovIHRhcmdldCwgcHJvcCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgvKipAdHlwZSB7YW55fSovdGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW51bVBob25lU3RhdHVzJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX1Bob25lU3RhdHVzLm5vUGhvbmVOdWJtZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZS5zZXREaXNhYmxlZChmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJ0blZlcmlmeU51bWJlci5zZXRTaG93KHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5WZXJpZnlOdW1iZXIuc2V0RGlzYWJsZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5EZWxldGVOdW1iZXIuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdklucHV0UGhvbmVGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlDb2RlLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWUgPSBkZWZhdWx0VmFsdWUuaXB0UGhvbmVWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUuc2V0RGlzYWJsZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmJ0blNlbmRWZXJpZnlDb2RlLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5RmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9QaG9uZVN0YXR1cy5pbnB1dFBob25lRmFpbGVkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXB0UGhvbmUuc2V0RGlzYWJsZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5WZXJpZnlOdW1iZXIuc2V0U2hvdyh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuVmVyaWZ5TnVtYmVyLnNldERpc2FibGVkKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuRGVsZXRlTnVtYmVyLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZJbnB1dFBob25lRmFpbGVkLnNldFNob3codHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlDb2RlLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWUgPSBkZWZhdWx0VmFsdWUuaXB0UGhvbmVWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUuc2V0RGlzYWJsZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmJ0blNlbmRWZXJpZnlDb2RlLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5RmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9QaG9uZVN0YXR1cy5pbnB1dFZlcmlmeUNvZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZS5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuVmVyaWZ5TnVtYmVyLnNldFNob3codHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJ0blZlcmlmeU51bWJlci5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuRGVsZXRlTnVtYmVyLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZJbnB1dFBob25lRmFpbGVkLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5Q29kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGl2VmVyaWZ5Q29kZS5zZXRTaG93KHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWUgPSBkZWZhdWx0VmFsdWUuaXB0UGhvbmVWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUuc2V0RGlzYWJsZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5TZW5kVmVyaWZ5Q29kZS5zZXREaXNhYmxlZChmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlGYWlsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdlZlcmlmeUZhaWxlZC5zZXRTaG93KGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX1Bob25lU3RhdHVzLnZlcmlmeUZhaWxlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlwdFBob25lLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5WZXJpZnlOdW1iZXIuc2V0U2hvdyh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuVmVyaWZ5TnVtYmVyLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5EZWxldGVOdW1iZXIuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdklucHV0UGhvbmVGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlDb2RlLnNldFNob3codHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NlbGYuaXB0UGhvbmVWZXJpZnlDb2RlLnZhbHVlID0gZGVmYXVsdFZhbHVlLmlwdFBob25lVmVyaWZ5Q29kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXB0UGhvbmVWZXJpZnlDb2RlLnNldERpc2FibGVkKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuU2VuZFZlcmlmeUNvZGUuc2V0RGlzYWJsZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5RmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlGYWlsZWQuc2V0U2hvdyh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX1Bob25lU3RhdHVzLnZlcmlmaWVkT0s6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZS5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuVmVyaWZ5TnVtYmVyLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zZWxmLmJ0blZlcmlmeU51bWJlci5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuRGVsZXRlTnVtYmVyLnNldFNob3codHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdklucHV0UGhvbmVGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlDb2RlLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWUgPSBkZWZhdWx0VmFsdWUuaXB0UGhvbmVWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUuc2V0RGlzYWJsZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmJ0blNlbmRWZXJpZnlDb2RlLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5RmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudW1Mb2dpbk1ldGhvZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlGYUVudmVsb3BlID0gc2VsZi5xdWVyeVNlbGVjdG9yKCcjaUZhRW52ZWxvcGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge0hUTUxFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaUZhR29vZ2xlID0gc2VsZi5xdWVyeVNlbGVjdG9yKCcjaUZhR29vZ2xlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9Mb2dpbk1ldGhvZC5nb29nbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaUZhRW52ZWxvcGUuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaUZhR29vZ2xlLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX0xvZ2luTWV0aG9kLmVtYWlsOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlGYUVudmVsb3BlLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlGYUdvb2dsZS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRpdklucHV0UGhvbmVGYWlsZWRfVGV4dFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdklucHV0UGhvbmVGYWlsZWQuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkaXZWZXJpZnlGYWlsZWRfVGV4dFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdlZlcmlmeUZhaWxlZC5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaXNFbWFpbFZlcmlmaWVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1aUNrYm94RW1haWxWZXJpZmllZCA9IHNlbGYucXVlcnlTZWxlY3RvcignI3VpQ2tib3hFbWFpbFZlcmlmaWVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpQ2tib3hFbWFpbFZlcmlmaWVkLmNoZWNrZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaXNBY2NvdW50T2ZHb29nbGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVpQ2tib3hJc0FjY291bnRPZkdvb2dsZSA9IHNlbGYucXVlcnlTZWxlY3RvcignI3VpQ2tib3hJc0FjY291bnRPZkdvb2dsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1aUNrYm94SXNBY2NvdW50T2ZHb29nbGUuY2hlY2tlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkaXZBY2NvdW50X1Nob3cnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGl2QWNjb3VudCA9IHNlbGYucXVlcnlTZWxlY3RvcignI2Zvcm1Vc2VyUHJvZmlsZSAjZGl2QWNjb3VudCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZBY2NvdW50LmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdkFjY291bnQuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtzdHJpbmd9IC0gVUkgaW5wdXQgdmFsdWUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5wcm94eVVJLmVudW1QaG9uZVN0YXR1cyA9IEVOVU1fUGhvbmVTdGF0dXMudmVyaWZpZWRPSztcclxuXHJcbiAgICB9XHJcbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLy0tLS0tLS0tLS0tUGhvbmUgVmVyaWZ5IHJlbmRlclJlY2FwdGNoYVxyXG4gICAgICAgIHRoaXMucmVjYXB0Y2hhVmVyaWZpZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudmVyaWZpY2F0aW9uSWQgPSBudWxsO1xyXG4gICAgICAgIC8vdGhpcy5yZW5kZXJSZWNhcHRjaGEoJ2J0blNlbmRWZXJpZnlDb2RlJylcclxuICAgICAgICB0aGlzLnJlbmRlclJlY2FwdGNoYSgnYnRuVmVyaWZ5TnVtYmVyJylcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICBsZXQgYXV0aFVzZXIgPSB0aGlzLmZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlclxyXG4gICAgICAgIC8vc2V0IGVtYWlsVmVyaWZpZWQgVUkgLS0gd2FybmluZyBpY29uICsgYnRuUmVzZW5kVmVyaWZ5IHNob3dcclxuICAgICAgICB0aGlzLnByb3h5VUkuaXNFbWFpbFZlcmlmaWVkID0gYXV0aFVzZXIuZW1haWxWZXJpZmllZDtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgLy9jaGVjayBpZiBnb29nbGUgYWNjb3VudFxyXG4gICAgICAgIC8qKkB0eXBlIHthbnlbXX19ICovXHJcbiAgICAgICAgbGV0IGZpbmRHb29nbGVQcm92aWRlciA9IGF1dGhVc2VyLnByb3ZpZGVyRGF0YS5maWx0ZXIoKC8qKkB0eXBlIHthbnl9Ki9pdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnByb3ZpZGVySWQ9PT0nZ29vZ2xlLmNvbSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMucHJveHlVSS5pc0FjY291bnRPZkdvb2dsZSA9IChmaW5kR29vZ2xlUHJvdmlkZXIubGVuZ3RoPjApP3RoaXMucHJveHlVSS5pc0FjY291bnRPZkdvb2dsZSA9IHRydWU6dGhpcy5wcm94eVVJLmlzQWNjb3VudE9mR29vZ2xlID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5idG5TZW5kVmVyaWZ5Q29kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy52ZXJpZmljYXRpb25JZClcclxuICAgICAgICAgICAgbGV0IHNWZXJpZnlDb2RlID0gc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWVcclxuICAgICAgICAgICAgbGV0IGNyZWRlbnRpYWxfcGhvbmUgPSB0aGlzLmZpcmViYXNlLmF1dGguUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh0aGlzLnZlcmlmaWNhdGlvbklkLCBzVmVyaWZ5Q29kZSk7XHJcbiAgICAgICAgICAgIGF1dGhVc2VyLmxpbmtXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsX3Bob25lKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKC8qKkB0eXBlIHthbnl9Ki9lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eVVJLmVudW1QaG9uZVN0YXR1cyA9IEVOVU1fUGhvbmVTdGF0dXMudmVyaWZpZWRPSztcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNhdmVVc2VyRGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBhdXRoVXNlci5waG9uZU51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eUZvcm1EYXRhLmlwdFBob25lID0gYXV0aFVzZXIucGhvbmVOdW1iZXJcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKC8qKkB0eXBlIHthbnl9Ki9lcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyckNvZGVaSFRXLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJNZXNzYWdlWkhUV1xyXG4gICAgICAgICAgICAgICAgICAgIH0gPSBzZWxmLmdldEVycm9yTWVzc2FnZVpIVFcoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByb3h5VUkuZW51bVBob25lU3RhdHVzID0gRU5VTV9QaG9uZVN0YXR1cy52ZXJpZnlGYWlsZWRcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByb3h5VUkuZGl2VmVyaWZ5RmFpbGVkX1RleHQgPSBgJHtlcnJDb2RlWkhUV30sICR7ZXJyTWVzc2FnZVpIVFd9YFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuYnRuRGVsZXRlTnVtYmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTE9HOjogY3VzTW9kYWxVc2VyUHJvZmlsZSAtPiBjb25uZWN0ZWRDYWxsYmFjayAtPiBhdXRoVXNlclwiLCBhdXRoVXNlcilcclxuICAgICAgICAgICAgYXV0aFVzZXIudW5saW5rKCdwaG9uZScpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXV0aCBwcm92aWRlciB1bmxpbmtlZCBmcm9tIGFjY291bnRcclxuICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VubGluayBwaG9uZSBPSyEnKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5wcm94eVVJLmVudW1QaG9uZVN0YXR1cyA9IEVOVU1fUGhvbmVTdGF0dXMubm9QaG9uZU51Ym1lclxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMT0c6OiBjdXNNb2RhbFVzZXJQcm9maWxlIC0+IGNvbm5lY3RlZENhbGxiYWNrIC0+IGF1dGhVc2VyXCIsIGF1dGhVc2VyKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5zYXZlVXNlckRhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBudWxsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgc2VsZi5wcm94eUZvcm1EYXRhLmlwdFBob25lID0gZGVmYXVsdFZhbHVlLmlwdFBob25lXHJcblxyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoLyoqQHR5cGUge2FueX0qL2Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIC0tIExPRzo6IGN1c01vZGFsVXNlclByb2ZpbGUgLT4gY29ubmVjdGVkQ2FsbGJhY2sgLT4gZXJyb3JcIiwgZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAvLyBBbiBlcnJvciBoYXBwZW5lZFxyXG4gICAgICAgICAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucmVuZGVyUmVjYXB0Y2hhKCdidG5TZW5kVmVyaWZ5Q29kZScpXHJcbiAgICAgICAgLy8gfSwgMjAwMCk7XHJcbiAgICAgICAgbGV0IGJ0blJlc2VuZEVtYWlsVmVyaWZ5ID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjYnRuUmVzZW5kRW1haWxWZXJpZnknKTtcclxuICAgICAgICBidG5SZXNlbmRFbWFpbFZlcmlmeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgICAgICBhdXRoVXNlci5zZW5kRW1haWxWZXJpZmljYXRpb24oKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIEVtYWlsIHNlbnQuXHJcbiAgICAgICAgICAgICAgICBzZWxmLnBsdWdpbnMuU3dhbC5maXJlKCdFbWFpbOiqjeitieS/oeW3suWvhOWHuicsICfoq4vliLDkv6HnrrHmlLbkv6HvvIzkuKbmjInkuIvnorroqo3pgKPntZAnLCAnc3VjY2VzcycpXHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgvKipAdHlwZSB7YW55fSovZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFuIGVycm9yIGhhcHBlbmVkLlxyXG4gICAgICAgICAgICAgICAgc2VsZi5wbHVnaW5zLlN3YWwuZmlyZSgn55m855Sf6Yyv6KqkJywgYCR7ZXJyb3IuY29kZX0sJHtlcnJvci5tZXNzYWdlfWAsICdlcnJvcicpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLmJ0blJlc2VuZFBhc3N3b3JkID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjYnRuUmVzZW5kUGFzc3dvcmQnKTtcclxuICAgICAgICB0aGlzLmJ0blJlc2VuZFBhc3N3b3JkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICAgICAgbGV0IGVtYWlsQWRkcmVzcyA9IHRoaXMucHJveHlGb3JtRGF0YS5pcHRFbWFpbDtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW5zLkVtYWlsX1Jlc2VuZFBhc3N3b3JkKFxyXG4gICAgICAgICAgICAgICAgZW1haWxBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5maXJlYmFzZSxcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2lucy5Td2FsLFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd01vZGFsKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vc2VsZi5wcm94eVVJLnN3aXRjaFBhZ2UgPSBFTlVNX3N3aXRjaFBhZ2UucmFkaW9TaWduaW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gbGV0IGJ0bk1vZGlmeVBhc3N3b3JkID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjYnRuTW9kaWZ5UGFzc3dvcmQnKTtcclxuICAgICAgICAvLyBidG5Nb2RpZnlQYXNzd29yZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIC8vICAgICBsZXQgaHRtbCA9IGBcclxuICAgICAgICAvLyAgICAgPGZvcm0gaWQ9XCJmb3JtTW9kaWZ5UGFzc3dvcmRcIj5cclxuICAgICAgICAvLyAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aXRsZVdoaXRlXCI+6Ly45YWl6IiK5a+G56K8PC9zcGFuPlxyXG4gICAgICAgIC8vICAgICAgICAgICAgIDxpbnB1dCBpZD1cInN3YWwtaW5wdXQxXCIgdHlwZT1cInBhc3N3b3JkXCIgY2xhc3M9XCJzd2FsMi1pbnB1dCBpbnB1dENoZWNrVmFsaWRcIiBwbGFjZWhvbGRlcj1cIuiLseaWh+Wtl+avjeaIluaVuOWtl++8jOiHs+WwkTjkvY3mlbhcIiBwYXR0ZXJuPVwiXlswLTlhLXpBLVpdezgsfSRcIiByZXF1aXJlZCBhdXRvY29tcGxldGU9XCJjdXJyZW50LXBhc3N3b3JkXCI+XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxyXG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgLy8gICAgICAgICA8ZGl2PlxyXG4gICAgICAgIC8vICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGl0bGVXaGl0ZVwiPui8uOWFpeaWsOWvhueivDwvc3Bhbj5cclxuICAgICAgICAvLyAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJzd2FsLWlucHV0MlwiIHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwic3dhbDItaW5wdXQgaW5wdXRDaGVja1ZhbGlkXCIgcGxhY2Vob2xkZXI9XCLoi7HmloflrZfmr43miJbmlbjlrZfvvIzoh7PlsJE45L2N5pW4XCIgcGF0dGVybj1cIl5bMC05YS16QS1aXXs4LH0kXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxyXG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgLy8gICAgICAgICA8ZGl2PlxyXG4gICAgICAgIC8vICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGl0bGVXaGl0ZVwiPuWGjeasoei8uOWFpeaWsOWvhueivDwvc3Bhbj5cclxuICAgICAgICAvLyAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJzd2FsLWlucHV0M1wiIHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwic3dhbDItaW5wdXQgaW5wdXRDaGVja1ZhbGlkXCIgcGxhY2Vob2xkZXI9XCLoi7HmloflrZfmr43miJbmlbjlrZfvvIzoh7PlsJE45L2N5pW4XCIgcGF0dGVybj1cIl5bMC05YS16QS1aXXs4LH0kXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxyXG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgLy8gICAgICAgICA8YnV0dG9uIGlkPVwiYnRuVmFsaWRcIiBjbGFzcz1cImItZGlzcGxheU5vbmVcIj5DaGVjayBGb3JtIFZhbGlkPC9idXR0b24+XHJcbiAgICAgICAgLy8gICAgIDwvZm9ybT5cclxuICAgICAgICAvLyAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gICAgIC8vIGh0bWw9ICc8aW5wdXQgaWQ9XCJzd2FsLWlucHV0MVwiIGNsYXNzPVwic3dhbDItaW5wdXRcIj4nICtcclxuICAgICAgICAvLyAgICAgLy8gICAgICc8aW5wdXQgaWQ9XCJzd2FsLWlucHV0MlwiIGNsYXNzPVwic3dhbDItaW5wdXRcIj4nLFxyXG4gICAgICAgIC8vICAgICBTd2FsLmZpcmUoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRpdGxlOiAn5L+u5pS55a+G56K8JyxcclxuICAgICAgICAvLyAgICAgICAgICAgICBodG1sOiBodG1sLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGN1c3RvbUNsYXNzOiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b246ICdzd2FsYnRuJ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gaW5wdXRBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gICAgIG1heGxlbmd0aDogMTAsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gICAgIGF1dG9jYXBpdGFsaXplOiAnb2ZmJyxcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyAgICAgYXV0b2NvcnJlY3Q6ICdvbidcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcHJlQ29uZmlybTogKGUpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLXByZUNvbmZpcm0tLS0tLS0tLS0tLScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS1IVE1MNSB2YWxpZGF0aW9uLS0tLS0tLS0tLS0nKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBsZXQgYnRuVmFsaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuVmFsaWQnKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBidG5WYWxpZC5jbGljaygpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgbGV0IGlwdDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybU1vZGlmeVBhc3N3b3JkICNzd2FsLWlucHV0MScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGxldCBpcHQyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm1Nb2RpZnlQYXNzd29yZCAjc3dhbC1pbnB1dDInKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBsZXQgaXB0MyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtTW9kaWZ5UGFzc3dvcmQgI3N3YWwtaW5wdXQzJylcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgbGV0IGlzSFRNTDVWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChpcHQxLmNoZWNrVmFsaWRpdHkoKSA9PT0gZmFsc2UgfHxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGlwdDIuY2hlY2tWYWxpZGl0eSgpID09PSBmYWxzZSB8fFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgaXB0My5jaGVja1ZhbGlkaXR5KCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBTd2FsLnNob3dWYWxpZGF0aW9uTWVzc2FnZSgnJyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAvLy0tLS0tLS1vdGhlciBjaGVja1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tb3RoZXIgY2hlY2stLS0tLS0tLS0tLScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChpcHQyLnZhbHVlICE9PSBpcHQzLnZhbHVlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBTd2FsLnNob3dWYWxpZGF0aW9uTWVzc2FnZSgn5YWp5qyh6Ly45YWl55qE5paw5a+G56K85b+F6aCI5LiA6Ie0Jyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gbGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybU1vZGlmeVBhc3N3b3JkJylcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJMT0c6OiBjdXNNb2RhbFVzZXJQcm9maWxlIC0+IGNvbm5lY3RlZENhbGxiYWNrIC0+IGZvcm1cIiwgZm9ybSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gbGV0IGFhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm1Nb2RpZnlQYXNzd29yZCAjc3dhbC1pbnB1dDEnKS5jaGVja1ZhbGlkaXR5KCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiTE9HOjogY3VzTW9kYWxVc2VyUHJvZmlsZSAtPiBjb25uZWN0ZWRDYWxsYmFjayAtPiBhYVwiLCBhYSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy9Td2FsLnNob3dWYWxpZGF0aW9uTWVzc2FnZSgnJyk7IC8vc3RvcCBjb25maXJtIHByb2Nlc3NcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGlwdDEudmFsdWUsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpcHQyLnZhbHVlLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgaXB0My52YWx1ZVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfSxcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyBvbk9wZW46ZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCctLS0tLS0tb3Blbi0tLS0tLS0tLS0tLScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBkaWRSZW5kZXI6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0gb25seSBmb3IgaHRtbDUgZm9ybSB2YWxpZGF0aW9uXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGxldCBmb3JtTW9kaWZ5UGFzc3dvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybU1vZGlmeVBhc3N3b3JkJyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGZvcm1Nb2RpZnlQYXNzd29yZC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vIGlucHV0VmFsaWRhdG9yOiAodmFsdWUpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIDExMVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkxPRzo6IGN1c01vZGFsVXNlclByb2ZpbGUgLT4gY29ubmVjdGVkQ2FsbGJhY2sgLT4gdmFsdWVcIiwgdmFsdWUpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiAnWW91IG5lZWQgdG8gd3JpdGUgc29tZXRoaW5nISdcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAvLyAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJMT0c6OiBjdXNNb2RhbFVzZXJQcm9maWxlIC0+IGNvbm5lY3RlZENhbGxiYWNrIC0+IHJlc3VsdFwiLCByZXN1bHQpXHJcblxyXG4gICAgICAgIC8vICAgICAgICAgfSlcclxuICAgICAgICAvLyB9KVxyXG5cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJ1dHRvbklEIFxyXG4gICAgICovXHJcbiAgICByZW5kZXJSZWNhcHRjaGEoYnV0dG9uSUQpIHtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICAvLyBbU1RBUlQgYXBwVmVyaWZpZXJdXHJcbiAgICAgICAgd2luZG93LnJlY2FwdGNoYVZlcmlmaWVyID0gbmV3IHRoaXMuZmlyZWJhc2UuYXV0aC5SZWNhcHRjaGFWZXJpZmllcihidXR0b25JRCwge1xyXG4gICAgICAgICAgICAnc2l6ZSc6ICdpbnZpc2libGUnLFxyXG4gICAgICAgICAgICAnY2FsbGJhY2snOiBmdW5jdGlvbiAoLyoqQHR5cGUge2FueX0qL3Jlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIHJlQ0FQVENIQSBzb2x2ZWQsIGFsbG93IHNpZ25JbldpdGhQaG9uZU51bWJlci5cclxuICAgICAgICAgICAgICAgIC8vd2luZG93LnNpZ25pbmdJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvL3VwZGF0ZVNpZ25JbkJ1dHRvblVJKCk7XHJcbiAgICAgICAgICAgICAgICAvL3ZhciBwaG9uZU51bWJlciA9IGdldFBob25lTnVtYmVyRnJvbVVzZXJJbnB1dCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFwcFZlcmlmaWVyID0gd2luZG93LnJlY2FwdGNoYVZlcmlmaWVyO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNQaG9uZU51bWJlciA9IHNlbGYuaXB0UGhvbmUudmFsdWU7IC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lwdFBob25lJykudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoUGhvbmVOdW1iZXIoc1Bob25lTnVtYmVyLCBhcHBWZXJpZmllcilcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoLyoqQHR5cGUge2FueX0qL2NvbmZpcm1hdGlvblJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy93aW5kb3cuY29uZmlybWF0aW9uUmVzdWx0ID0gY29uZmlybWF0aW9uUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnZlcmlmaWNhdGlvbklkID0gY29uZmlybWF0aW9uUmVzdWx0LnZlcmlmaWNhdGlvbklkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJveHlVSS5lbnVtUGhvbmVTdGF0dXMgPSBFTlVNX1Bob25lU3RhdHVzLmlucHV0VmVyaWZ5Q29kZTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoLyoqQHR5cGUge2FueX0qL2Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJveHlVSS5lbnVtUGhvbmVTdGF0dXMgPSBFTlVNX1Bob25lU3RhdHVzLmlucHV0UGhvbmVGYWlsZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJveHlVSS5kaXZJbnB1dFBob25lRmFpbGVkX1RleHQgPSBgJHtlcnJvci5jb2RlfSwgJHtlcnJvci5tZXNzYWdlfWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXJyb3I7IFNNUyBub3Qgc2VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgc2lnbkluV2l0aFBob25lTnVtYmVyJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuYWxlcnQoJ0Vycm9yIGR1cmluZyBzaWduSW5XaXRoUGhvbmVOdW1iZXI6XFxuXFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBlcnJvci5jb2RlICsgJ1xcblxcbicgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy93aW5kb3cuc2lnbmluZ0luID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZVNpZ25JbkZvcm1VSSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGVTaWduSW5CdXR0b25VSSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gW0VORCBhcHBWZXJpZmllcl1cclxuICAgICAgICAvLyBidXR0b24gc3RhcnQgd29ya2luZ1xyXG4gICAgICAgIHdpbmRvdy5yZWNhcHRjaGFWZXJpZmllci5yZW5kZXIoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAod2lkZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZWNhcHRjaGFXaWRnZXRJZCA9IHdpZGdldElkO1xyXG4gICAgICAgICAgICAgICAgLy91cGRhdGVTaWduSW5CdXR0b25VSSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7XHJcbiAgICB9XHJcbiAgICAvLyBvbklucHV0Q2hhbmdlKGUpIHtcclxuICAgIC8vICAgICBsZXQgdGhpc0VsZW1lbnQgPSBlLnRhcmdldDtcclxuICAgIC8vICAgICB0aGlzLnByb3h5Rm9ybURhdGFbZS50YXJnZXQuaWRdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQuaWQpXHJcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm94eUZvcm1EYXRhW2UudGFyZ2V0LmlkXSlcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVDb250ZW50IFxyXG4gICAgICovXHJcbiAgICBhcHBlbmRUZW1wbGF0ZSh0ZW1wbGF0ZUNvbnRlbnQpIHtcclxuICAgICAgICAvLyBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pO1xyXG4gICAgICAgIC8vIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGVDb250ZW50KVxyXG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGVtcGxhdGVDb250ZW50KVxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLyoqQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovXHJcbiAgICAgICAgdGhpcy5pcHRBY2NvdW50ID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjaXB0QWNjb3VudCcpO1xyXG4gICAgICAgIHRoaXMuaXB0QWNjb3VudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25JbnB1dENoYW5nZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmlwdEVtYWlsID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjaXB0RW1haWwnKTtcclxuICAgICAgICB0aGlzLmlwdEVtYWlsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5vbklucHV0Q2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgIHRoaXMuaXB0TmFtZSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2lwdE5hbWUnKTtcclxuICAgICAgICB0aGlzLmlwdE5hbWUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLm9uSW5wdXRDaGFuZ2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLy8gdGhpcy5pcHRQaG9uZSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2lwdFBob25lJyk7XHJcbiAgICAgICAgLy8gdGhpcy5pcHRQaG9uZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25JbnB1dENoYW5nZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmlwdEFkZHJlc3MgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNpcHRBZGRyZXNzJyk7XHJcbiAgICAgICAgdGhpcy5pcHRBZGRyZXNzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5vbklucHV0Q2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vPT09PT09PT0gUGhvbmUgTnVtYmVyIFZlcmlmeT09PT09PT09PVxyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgIHRoaXMuaXB0UGhvbmUgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNpcHRQaG9uZScpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmJ0blZlcmlmeU51bWJlciA9IHRoaXMucXVlcnlTZWxlY3RvcignI2J0blZlcmlmeU51bWJlcicpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmJ0bkRlbGV0ZU51bWJlciA9IHRoaXMucXVlcnlTZWxlY3RvcignI2J0bkRlbGV0ZU51bWJlcicpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmRpdklucHV0UGhvbmVGYWlsZWQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNkaXZJbnB1dFBob25lRmFpbGVkJyk7XHJcbiAgICAgICAgLyoqQHR5cGUge0hUTUxFbGVtZW50fSAqL1xyXG4gICAgICAgIHRoaXMuZGl2VmVyaWZ5Q29kZSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2RpdlZlcmlmeUNvZGUnKTtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmlwdFBob25lVmVyaWZ5Q29kZSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2lwdFBob25lVmVyaWZ5Q29kZScpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmJ0blNlbmRWZXJpZnlDb2RlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjYnRuU2VuZFZlcmlmeUNvZGUnKTtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTEVsZW1lbnR9ICovXHJcbiAgICAgICAgdGhpcy5kaXZWZXJpZnlGYWlsZWQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNkaXZWZXJpZnlGYWlsZWQnKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHRoaXMge0hUTUxFbGVtZW50IHwgSFRNTElucHV0RWxlbWVudH1cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlIFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldERpc2FibGVkKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdGhpcyB7SFRNTEVsZW1lbnQgfCBIVE1MSW5wdXRFbGVtZW50fVxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0U2hvdyh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGFycmF5RWxlbWVudHNfaXNEaXNhYmxlID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdbaXNEaXNhYmxlXScpO1xyXG4gICAgICAgIGxldCBhcnJheUVsZW1lbnRzX2lzU2hvdyA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnW2lzU2hvd10nKTtcclxuICAgICAgICAvLyBhcnJheUVsZW1lbnRzX2lzRGlzYWJsZSA9IGFycmF5RWxlbWVudHNfaXNEaXNhYmxlLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIC8vICAgICBpdGVtLnNldERpc2FibGVkID0gc2V0RGlzYWJsZWRcclxuICAgICAgICAvLyAgICAgcmV0dXJuIGl0ZW1cclxuICAgICAgICAvLyB9KVxyXG4gICAgICAgIGFycmF5RWxlbWVudHNfaXNEaXNhYmxlLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaXRlbS5zZXREaXNhYmxlZCA9IHNldERpc2FibGVkXHJcbiAgICAgICAgfSlcclxuICAgICAgICBhcnJheUVsZW1lbnRzX2lzU2hvdy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0U2hvdyA9IHNldFNob3dcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vdGhpcy5pcHRQaG9uZS5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgIC8vIHRoaXMuZGl2VmVyaWZ5RmFpbGVkLnNldFNob3codHJ1ZSlcclxuXHJcbiAgICAgICAgLyoqQHR5cGUge0hUTUxFbGVtZW50fSAqL1xyXG4gICAgICAgIHRoaXMuZm9ybVVzZXJQcm9maWxlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjZm9ybVVzZXJQcm9maWxlJyk7XHJcbiAgICAgICAgdGhpcy5mb3JtVXNlclByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5vbkZvcm1TdWJtaXQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGxldCBwcm94eUZvcm1EYXRhID0gbmV3IFByb3h5Rm9ybURhdGEoKTtcclxuICAgICAgICAvLyBsZXQgcHJveHlGb3JtRGF0YSA9IHtcclxuICAgICAgICAvLyAgICAgaXB0QWNjb3VudDogXCJcIixcclxuICAgICAgICAvLyAgICAgaXB0TmFtZTogXCJcIixcclxuICAgICAgICAvLyAgICAgaXB0RW1haWw6IFwiXCIsXHJcbiAgICAgICAgLy8gICAgIGlwdFBob25lOiBcIlwiLFxyXG4gICAgICAgIC8vICAgICBpcHRBZGRyZXNzMTogXCJcIixcclxuICAgICAgICAvLyAgICAgaXB0QWRkcmVzczI6IFwiXCIsXHJcbiAgICAgICAgLy8gICAgIGlwdEFkZHJlc3MzOiBcIlwiLFxyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLyoqQHR5cGUge2FueX19Ki9cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICB0aGlzLnByb3h5Rm9ybURhdGEgPSBuZXcgUHJveHkocHJveHlGb3JtRGF0YSwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgvKipAdHlwZSB7YW55fSovdGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKC8qKkB0eXBlIHthbnl9Ki90YXJnZXQsIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge3N0cmluZ30gLSBVSSBpbnB1dCB2YWx1ZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZltwcm9wXSkgLy91c2VyRGF0YSA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmW3Byb3BdLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGFyZ2V0LCBwcm9wLCB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBodG1sRWxlbWVudCBcclxuICAgICAqL1xyXG4gICAgYXBwZW5kVGVzdEFyZWEoaHRtbEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgdGVzdEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbdGVzdEFyZWFdJyk7XHJcbiAgICAgICAgdGVzdEFyZWEuYXBwZW5kQ2hpbGQoaHRtbEVsZW1lbnQpXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhhYSlcclxuICAgIH1cclxuICAgIHNob3dUZXN0VUkoKSB7XHJcbiAgICAgICAgbGV0IHVpQ2tib3hFbWFpbFZlcmlmaWVkID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjdWlDa2JveEVtYWlsVmVyaWZpZWQnKTtcclxuICAgICAgICB1aUNrYm94RW1haWxWZXJpZmllZC5jbGFzc0xpc3QucmVtb3ZlKCdiLWRpc3BsYXlOb25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7ZmlyZWJhc2V9IGluRmlyZWJhc2UgXHJcbiAgICAgKi9cclxuICAgIHNldEZpcmViYXNlKGluRmlyZWJhc2UpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbkZpcmViYXNlKVxyXG4gICAgICAgIHRoaXMuZmlyZWJhc2UgPSBpbkZpcmViYXNlO1xyXG4gICAgICAgIHRoaXMuZGIgPSB0aGlzLmZpcmViYXNlLmZpcmVzdG9yZSgpO1xyXG4gICAgICAgIC8vdGhpcy5zZXRBdXRoX2dldFJlZGlyZWN0UmVzdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gLSBzYXZlIHBhcnRpYWwgb2YgdXNlckRhdGEgdG8gZmlyZXN0b3JlXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gdXNlckRhdGEgXHJcbiAgICAgKi9cclxuICAgIHNhdmVVc2VyRGF0YSh1c2VyRGF0YSkge1xyXG4gICAgICAgIGxldCB1aWQgPSB0aGlzLnByb3h5Rm9ybURhdGEuaXB0QWNjb3VudFxyXG4gICAgICAgIHRoaXMuZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Vc2VycykuZG9jKHVpZCkuc2V0KHVzZXJEYXRhLCB7XHJcbiAgICAgICAgICAgIG1lcmdlOiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzU2hvdyBcclxuICAgICAqL1xyXG4gICAgc2hvd01vZGFsKGlzU2hvdykge1xyXG4gICAgICAgIC8vbGV0IG1vZGFsTG9naW4yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsTG9naW4yJyk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhtb2RhbExvZ2luMilcclxuICAgICAgICAvL21vZGFsTG9naW4yLmFzc2lnbigpO1xyXG5cclxuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgc2hvdzogaXNTaG93LFxyXG4gICAgICAgICAgICBmb2N1czogdHJ1ZSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHN0clNob3cgPSBudWxsO1xyXG4gICAgICAgIGlmIChpc1Nob3cgPT0gdHJ1ZSlcclxuICAgICAgICAgICAgc3RyU2hvdyA9ICdzaG93JztcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHN0clNob3cgPSAnaGlkZSdcclxuICAgICAgICAkKCcjbW9kYWxQcm9maWxlJykubW9kYWwoc3RyU2hvdylcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCQoJyNtb2RhbExvZ2luJykpXHJcbiAgICB9XHJcbiAgICBvbkZvcm1TdWJtaXQoLyoqQHR5cGUge2FueX0qL2UpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGxldCB1aWQgPSB0aGlzLnByb3h5Rm9ybURhdGEuaXB0QWNjb3VudFxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Vc2VycykuZG9jKHVpZCkud2l0aENvbnZlcnRlcihQcm94eUZvcm1EYXRhLnVzZXJQcm9maWxlQ29udmVydGVyKS5zZXQoe1xyXG4gICAgICAgICAgICAuLi50aGlzLnByb3h5Rm9ybURhdGFcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG1lcmdlOiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnNob3dNb2RhbChmYWxzZSlcclxuICAgIH1cclxuICAgIG9uSW5wdXRDaGFuZ2UoLyoqQHR5cGUge2FueX0qL2UpIHtcclxuICAgICAgICBsZXQgdGhpc0VsZW1lbnQgPSBlLnRhcmdldDtcclxuICAgICAgICB0aGlzLnByb3h5Rm9ybURhdGFbZS50YXJnZXQuaWRdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQuaWQpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm94eUZvcm1EYXRhW2UudGFyZ2V0LmlkXSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gfSAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVpZCBcclxuICAgICAqL1xyXG4gICAgbG9hZERiUHJvZmlsZSh1aWQpIHtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICBsZXQgYXV0aFVzZXIgPSB0aGlzLmZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlclxyXG4gICAgICAgIHRoaXMucHJveHlGb3JtRGF0YS5pcHRBY2NvdW50ID0gdWlkXHJcbiAgICAgICAgLy8g55Wr6Z2iVUnos4fmlpnku6VhdXRoKCnngrrmupZcclxuICAgICAgICBpZiAoYXV0aFVzZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJMT0c6OiBjdXNNb2RhbFVzZXJQcm9maWxlIC0+IGxvYWREYlByb2ZpbGUgLT4gYXV0aFVzZXJcIiwgYXV0aFVzZXIpXHJcbiAgICAgICAgICAgIHRoaXMucHJveHlGb3JtRGF0YS5pcHRBY2NvdW50ID0gdWlkO1xyXG4gICAgICAgICAgICB0aGlzLnByb3h5Rm9ybURhdGEuaXB0RW1haWwgPSBhdXRoVXNlci5lbWFpbDtcclxuICAgICAgICAgICAgdGhpcy5wcm94eUZvcm1EYXRhLmlwdFBob25lID0gYXV0aFVzZXIucGhvbmVOdW1iZXJcclxuICAgICAgICAgICAgLy89PT09IHBob25lIHN0YXR1c1xyXG4gICAgICAgICAgICB0aGlzLnByb3h5VUkuZW51bVBob25lU3RhdHVzID0gKGF1dGhVc2VyLnBob25lTnVtYmVyKSA/IEVOVU1fUGhvbmVTdGF0dXMudmVyaWZpZWRPSyA6IEVOVU1fUGhvbmVTdGF0dXMubm9QaG9uZU51Ym1lcjtcclxuICAgICAgICAgICAgLy89PT09IHNpZ25pbiBwcm92aWRlciB0eXBlXHJcbiAgICAgICAgICAgIGxldCBsaXN0UHJvdmlkZXJJZCA9IFVzZXJEYXRhLmdldExpc3RQcm92aWRlcklkX0J5QXV0aFVzZXJQcm92aWRlckRhdGEoYXV0aFVzZXIucHJvdmlkZXJEYXRhKTtcclxuICAgICAgICAgICAgbGV0IGZha2VVc2VyID0gbmV3IFVzZXJEYXRhKCk7XHJcbiAgICAgICAgICAgIGZha2VVc2VyLmxpc3RQcm92aWRlcklkID0gbGlzdFByb3ZpZGVySWQ7XHJcbiAgICAgICAgICAgIGxldCBwcm92aWRlcklkID0gZmFrZVVzZXIucHJvdmlkZXJJZDtcclxuICAgICAgICAgICAgdGhpcy5wcm94eVVJLmVudW1Mb2dpbk1ldGhvZCA9IChwcm92aWRlcklkID09PSBVc2VyRGF0YS5FTlVNX1Byb3ZpZGVyVHlwZS5nb29nbGUpP0VOVU1fTG9naW5NZXRob2QuZ29vZ2xlOkVOVU1fTG9naW5NZXRob2QuZW1haWw7XHJcbiAgICAgICAgICAgIC8vIC8qKkB0eXBlIHtBcnJheX0gKi9cclxuICAgICAgICAgICAgLy8gbGV0IGZpbmRHb29nbGVQcm92aWRlciA9IGF1dGhVc2VyLnByb3ZpZGVyRGF0YS5maWx0ZXIoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiBpdGVtLnByb3ZpZGVySWQgPT09ICdnb29nbGUuY29tJyAvLyBnb29nbGUuY29tIHBhc3N3b3JkXHJcbiAgICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgIC8vIGlmIChmaW5kR29vZ2xlUHJvdmlkZXIubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMucHJveHlVSS5lbnVtTG9naW5NZXRob2QgPSBFTlVNX0xvZ2luTWV0aG9kLmdvb2dsZTtcclxuICAgICAgICAgICAgLy8gZWxzZVxyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5wcm94eVVJLmVudW1Mb2dpbk1ldGhvZCA9IEVOVU1fTG9naW5NZXRob2QuZW1haWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL25ld0FBLnByb3h5Rm9ybURhdGEuaXB0QWNjb3VudCA9ICdSWk45TmlwYXltTWtZQThQcjRhOFRnNWd2ejEzJ1xyXG5cclxuICAgICAgICAvL3ZhciBzZWxmID0gdGhpcy5maXJlYmFzZVxyXG4gICAgICAgIHRoaXMuZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Vc2VycykuZG9jKHVpZCkud2l0aENvbnZlcnRlcihQcm94eUZvcm1EYXRhLnVzZXJQcm9maWxlQ29udmVydGVyKS5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbigoLyoqQHR5cGUge2FueX0qL2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB1c2VySW5mbyA9IGUuZGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eUZvcm1EYXRhLmlwdE5hbWUgPSB1c2VySW5mby5pcHROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eUZvcm1EYXRhLmlwdEFkZHJlc3MgPSB1c2VySW5mby5pcHRBZGRyZXNzXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJDb2RlIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVyck1lc3NhZ2UgXHJcbiAgICAgKi9cclxuICAgIGdldEVycm9yTWVzc2FnZVpIVFcoZXJyQ29kZSwgZXJyTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTE9HOjogY3VzTW9kYWxVc2VyUHJvZmlsZSAtPiBnZXRFcnJvck1lc3NhZ2VaSFRXIC0+IGVyckNvZGVcIiwgZXJyQ29kZSlcclxuICAgICAgICBsZXQgZXJyQ29kZVpIVFc7XHJcbiAgICAgICAgbGV0IGVyck1lc3NhZ2VaSFRXID0gZXJyTWVzc2FnZTtcclxuICAgICAgICBzd2l0Y2ggKGVyckNvZGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnYXV0aC9pbnZhbGlkLXBob25lLW51bWJlcic6XHJcbiAgICAgICAgICAgICAgICBlcnJDb2RlWkhUVyA9ICfpm7voqbHomZ/norzmoLzlvI/pjK/oqqQnXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlJzpcclxuICAgICAgICAgICAgICAgIGVyckNvZGVaSFRXID0gJ+mpl+itieeivOi8uOWFpemMr+iqpCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkJzpcclxuICAgICAgICAgICAgICAgIGVyckNvZGVaSFRXID0gJ+atpOmbu+ipseiZn+eivOW3suWtmOWcqCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhdXRoL2NyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2UnOlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSAn5q2k6Zu76Kmx6Jmf56K85bey6KKr5L2/55SoJ1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInOlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSBlcnJDb2RlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2F1dGgvdG9vLW1hbnktcmVxdWVzdHMnOlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSBlcnJDb2RlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBlcnJDb2RlWkhUVyA9IGVyckNvZGU7XHJcbiAgICAgICAgICAgICAgICBlcnJNZXNzYWdlWkhUVyA9IGVyck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZXJyQ29kZVpIVFcsXHJcbiAgICAgICAgICAgIGVyck1lc3NhZ2VaSFRXXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGF1dGgvaW52YWxpZC1waG9uZS1udW1iZXIsIFRPT19TSE9SVFxyXG4gICAgICAgIC8vIGF1dGgvaW52YWxpZC1waG9uZS1udW1iZXIsIFRPT19MT05HICAgICAgICBcclxuICAgICAgICAvLyBhdXRoL2ludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGUsIFRoZSBTTVMgdmVyaWZpY2F0aW9uIGNvZGUgdXNlZCB0byBjcmVhdGUgdGhlIHBob25lIGF1dGggY3JlZGVudGlhbCBpcyBpbnZhbGlkLiBQbGVhc2UgcmVzZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSBzbXMgYW5kIGJlIHN1cmUgdXNlIHRoZSB2ZXJpZmljYXRpb24gY29kZSBwcm92aWRlZCBieSB0aGUgdXNlci4gICAgICAgIFxyXG4gICAgICAgIC8vIGF1dGgvcHJvdmlkZXItYWxyZWFkeS1saW5rZWQsIFVzZXIgY2FuIG9ubHkgYmUgbGlua2VkIHRvIG9uZSBpZGVudGl0eSBmb3IgdGhlIGdpdmVuIHByb3ZpZGVyLlxyXG4gICAgICAgIC8vIGNhc2UgJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInOlxyXG4gICAgICAgIC8vIGNhc2UgJ2F1dGgvdG9vLW1hbnktcmVxdWVzdHMnOlxyXG5cclxuICAgICAgICAvL2FkZHJlc3MgYnVnXHJcbiAgICB9XHJcblxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQTJDQTtBQUNBO0FBQ0E7QUF6REE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFGQTtBQWFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUFDQTtBQTBDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFDQTtBQVVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBeEVBO0FBQ0E7QUF5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFWQTtBQUNBO0FBV0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBNUhBO0FBQ0E7QUE4SEE7QUFDQTtBQUNBO0FBdElBO0FBd0lBO0FBektBO0FBMktBO0FBQ0E7OztBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0JBO0FBOEJBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBbEJBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFJQTtBQUVBOzs7O0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBREE7QUFHQTtBQUNBOzs7O0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUF0QkE7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBanNCQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./webcomponents/cusModalUserProfile3/cusModalUserProfile.js\n");

/***/ }),

/***/ "./pages/index/index.css":
/*!*******************************!*\
  !*** ./pages/index/index.css ***!
  \*******************************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC9pbmRleC5jc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9pbmRleC9pbmRleC5jc3M/MjJmYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibWFwcGluZ3MiOiI7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index/index.css\n");

/***/ }),

/***/ "./webcomponents/cusModalLogin3/cusModalLogin.css":
/*!********************************************************!*\
  !*** ./webcomponents/cusModalLogin3/cusModalLogin.css ***!
  \********************************************************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd2ViY29tcG9uZW50cy9jdXNNb2RhbExvZ2luMy9jdXNNb2RhbExvZ2luLmNzcz8wZDZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJtYXBwaW5ncyI6IjtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./webcomponents/cusModalLogin3/cusModalLogin.css\n");

/***/ }),

/***/ "./webcomponents/cusModalUserProfile3/cusModalUserProfile.css":
/*!********************************************************************!*\
  !*** ./webcomponents/cusModalUserProfile3/cusModalUserProfile.css ***!
  \********************************************************************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsVXNlclByb2ZpbGUzL2N1c01vZGFsVXNlclByb2ZpbGUuY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd2ViY29tcG9uZW50cy9jdXNNb2RhbFVzZXJQcm9maWxlMy9jdXNNb2RhbFVzZXJQcm9maWxlLmNzcz84YzBhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJtYXBwaW5ncyI6IjtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./webcomponents/cusModalUserProfile3/cusModalUserProfile.css\n");

/***/ }),

/***/ "./projectConfig/firebaseProj.config.json":
/*!************************************************!*\
  !*** ./projectConfig/firebaseProj.config.json ***!
  \************************************************/
/*! default exports */
/*! export apiKey [provided] [no usage info] [missing usage info prevents renaming] */
/*! export appId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export authDomain [provided] [no usage info] [missing usage info prevents renaming] */
/*! export databaseURL [provided] [no usage info] [missing usage info prevents renaming] */
/*! export measurementId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export messagingSenderId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export projectId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export storageBucket [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: module */
/***/ ((module) => {

"use strict";
module.exports = JSON.parse("{\"apiKey\":\"AIzaSyAkKicYbDRQacOaN5uxceuBrfcT_8qukJw\",\"authDomain\":\"ming2-dad1d.firebaseapp.com\",\"databaseURL\":\"https://ming2-dad1d.firebaseio.com\",\"projectId\":\"ming2-dad1d\",\"storageBucket\":\"ming2-dad1d.appspot.com\",\"messagingSenderId\":\"892998272030\",\"appId\":\"1:892998272030:web:b9906ea10ebcef222a1a0f\",\"measurementId\":\"G-4R4YVH2JLX\"}");

/***/ })

},
0,[["./pages/index/index.js","runtime","vendors-node_modules_jquery_dist_jquery_js-node_modules_lodash_lodash_js-node_modules_sweetal-57bcc4","vendors-node_modules_babel_polyfill_lib_index_js-node_modules_bootstrap_dist_js_bootstrap_js--8b5564"]]]);