/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["index"],{

/***/ "./js/dataDefine/index.js":
/*!********************************!*\
  !*** ./js/dataDefine/index.js ***!
  \********************************/
/*! namespace exports */
/*! export ENUM_ProductCategory [provided] [no usage info] [missing usage info prevents renaming] */
/*! export LogType [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Map_ProductCategory [provided] [no usage info] [missing usage info prevents renaming] */
/*! export OrderInfo [provided] [no usage info] [missing usage info prevents renaming] */
/*! export OrderLog [provided] [no usage info] [missing usage info prevents renaming] */
/*! export OrderStatus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ProductInfo [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ShopItemInfo [provided] [no usage info] [missing usage info prevents renaming] */
/*! export UserData [provided] [no usage info] [missing usage info prevents renaming] */
/*! export UserProfile [provided] [no usage info] [missing usage info prevents renaming] */
/*! export fakeProductInfo1 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export fakeProductInfo2 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export fakeProductInfo3 [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ShopItemInfo\": () => /* binding */ ShopItemInfo,\n/* harmony export */   \"ENUM_ProductCategory\": () => /* binding */ ENUM_ProductCategory,\n/* harmony export */   \"Map_ProductCategory\": () => /* binding */ Map_ProductCategory,\n/* harmony export */   \"ProductInfo\": () => /* binding */ ProductInfo,\n/* harmony export */   \"OrderStatus\": () => /* binding */ OrderStatus,\n/* harmony export */   \"OrderLog\": () => /* binding */ OrderLog,\n/* harmony export */   \"LogType\": () => /* binding */ LogType,\n/* harmony export */   \"OrderInfo\": () => /* binding */ OrderInfo,\n/* harmony export */   \"UserData\": () => /* binding */ UserData,\n/* harmony export */   \"UserProfile\": () => /* binding */ UserProfile,\n/* harmony export */   \"fakeProductInfo1\": () => /* binding */ fakeProductInfo1,\n/* harmony export */   \"fakeProductInfo2\": () => /* binding */ fakeProductInfo2,\n/* harmony export */   \"fakeProductInfo3\": () => /* binding */ fakeProductInfo3\n/* harmony export */ });\n/* harmony import */ var _firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../firebase/FirebaseMJS.js */ \"./js/firebase/FirebaseMJS.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//@ts-check\n//Inside of settings.json, add the following:{ \"javascript.implicitProjectConfig.checkJs\": true }\n\n/**\r\n * @class\r\n * @desc ming1 project ShopItem.jsx\r\n */\n\nvar ShopItemInfo = /*#__PURE__*/function () {\n  function ShopItemInfo() {\n    _classCallCheck(this, ShopItemInfo);\n\n    _defineProperty(this, \"_productInfo\", void 0);\n\n    _defineProperty(this, \"productId\", 'XXXXXXXXXXXXX');\n\n    _defineProperty(this, \"amount\", 0);\n\n    _defineProperty(this, \"price\", 0);\n  }\n\n  _createClass(ShopItemInfo, [{\n    key: \"fill_ProductInfo_ByProductArray\",\n\n    /**\r\n     * fill _productInfo - from given product list\r\n     * @param {ProductInfo[]} arrayProducts \r\n     */\n    value: function fill_ProductInfo_ByProductArray(arrayProducts) {\n      var _this = this;\n\n      if (arrayProducts.length === 0) {\n        this.productInfo = null;\n        return;\n      } // console.log(this.productId)\n      //console.log(arrayProducts)\n\n\n      var findProductInfo = arrayProducts.find(function (item) {\n        return item.productId === _this.productId;\n      }); //console.log('find---', findProductInfo)\n      //if result not found, force to clear this._productInfo\n\n      this.productInfo = null;\n      if (findProductInfo) this.productInfo = findProductInfo; //console.log(this._productInfo)\n    }\n    /**@type {ProductInfo} - set this ShopItem's ProductInfo*/\n\n  }, {\n    key: \"productName\",\n    //productInfo\n\n    /**@property {string}*/\n    get: function get() {\n      if (!this._productInfo) return '';\n      return this._productInfo.name;\n    }\n  }, {\n    key: \"productInfo\",\n    set: function set(value) {\n      this._productInfo = value;\n\n      if (value) {\n        this.productId = value.productId;\n        this.price = value.price;\n      }\n    }\n    /**@type {(ProductInfo|null|undefined)} - return this ShopItem's ProductInfo*/\n    ,\n    get: function get() {\n      return this._productInfo;\n    }\n  }]);\n\n  return ShopItemInfo;\n}();\n/**@enum {string} */\n\nvar ENUM_ProductCategory = {\n  // soybean:\"soybean\",\n  // duck:\"duck\",\n  // chicken:\"chicken\",\n  // beef:\"beef\",\n  // pork:\"pork\",\n  // others:\"others\",\n  mainCourse: \"mainCourse\",\n  meats: \"meats\",\n  soups: \"soups\",\n  stirFired: \"stirFired\",\n  coldPlates: \"coldPlates\"\n};\nvar Map_ProductCategory = {\n  // soybean:\"豆類\",\n  // duck:\"鴨肉類\",\n  // chicken:\"雞肉類\",\n  // beef:\"牛肉類\",\n  // pork:\"豬肉類\",\n  // others:\"其他類別\",\n\n  /**@type {string} */\n  mainCourse: \"主菜\",\n\n  /**@type {string} */\n  meats: \"肉類\",\n\n  /**@type {string} */\n  soups: \"湯\",\n\n  /**@type {string} */\n  stirFired: \"快炒\",\n\n  /**@type {string} */\n  coldPlates: \"冷盤\"\n};\n/**\r\n * @class\r\n * @description firestore.Products/ProductList.jsx/ProductCard.jsx\r\n * */\n\nvar ProductInfo = function ProductInfo() {\n  _classCallCheck(this, ProductInfo);\n\n  _defineProperty(this, \"productId\", \"null\");\n\n  _defineProperty(this, \"name\", \"null\");\n\n  _defineProperty(this, \"price\", 0);\n\n  _defineProperty(this, \"fstsAddDateTime_server\", null);\n\n  _defineProperty(this, \"category\", \"null\");\n\n  _defineProperty(this, \"tag\", \"#\");\n\n  _defineProperty(this, \"imgUrl\", \"./\");\n\n  _defineProperty(this, \"imgFileName\", \"default.png\");\n\n  _defineProperty(this, \"autoNum\", null);\n\n  _defineProperty(this, \"isActived\", false);\n};\n/**\r\n * @class\r\n * @description OrderInfo.OrderStatus\r\n */\n\nvar OrderStatus = function OrderStatus() {\n  _classCallCheck(this, OrderStatus);\n\n  _defineProperty(this, \"isPaid\", false);\n\n  _defineProperty(this, \"isCompleted\", false);\n\n  _defineProperty(this, \"isCanceled\", false);\n\n  _defineProperty(this, \"isDelivery\", false);\n};\n/**\r\n * @class\r\n * @description - OrderInfo.OrderLog by LogType\r\n */\n\nvar OrderLog = function OrderLog() {\n  _classCallCheck(this, OrderLog);\n\n  _defineProperty(this, \"fstsLogDateTime_server\", null);\n\n  _defineProperty(this, \"logType\", '');\n\n  _defineProperty(this, \"remarks\", '');\n};\n/**\r\n * @enum {string}\r\n * @desc firestore.OrderInfo.LogType\r\n * */\n\nvar LogType = {\n  NewOrder: \"NewOrder\",\n  PaidMoney: \"PaidMoney\",\n  CancelOrder: \"CancelOrder\",\n  DeliveryOrder: \"DeliveryOrder\",\n  CompleteOrder: \"CompleteOrder\"\n};\n/** \r\n * @class\r\n * @description - from firestore.OrderInfo \r\n */\n\nvar OrderInfo = /*#__PURE__*/function () {\n  function OrderInfo() {\n    _classCallCheck(this, OrderInfo);\n\n    _defineProperty(this, \"userId\", \"xxxxxxx\");\n\n    _defineProperty(this, \"fstsCreateDateTime_server\", null);\n\n    _defineProperty(this, \"orderId\", \"XXXXXXXX\");\n\n    _defineProperty(this, \"orderAddress\", 'XXXXXX');\n\n    _defineProperty(this, \"shopItemList\", []);\n\n    _defineProperty(this, \"getShopItems_ProdId\", function () {\n      var list_productId = this.shopItemList.map(function (item) {\n        return item.productId;\n      });\n      return list_productId; //console.log(arr)\n      //console.log(this.shopItemList)\n    });\n\n    _defineProperty(this, \"totalPrice\", 0);\n\n    _defineProperty(this, \"orderStatus\", {\n      isPaid: false,\n      isCompleted: false,\n      isCanceled: false,\n      isDelivery: false\n    });\n\n    _defineProperty(this, \"orderLog\", []);\n\n    _defineProperty(this, \"userData\", new UserData());\n  }\n\n  _createClass(OrderInfo, [{\n    key: \"fillShopItems\",\n\n    /**\r\n     * fill shopItem detail information\r\n     * @param {ProductInfo[]} arrayProductInfo - distinct product list\r\n     */\n    value: function fillShopItems(arrayProductInfo) {\n      var _this2 = this;\n\n      //console.log(arrayProductInfo)\n      //console.log(this.shopItemList)\n      this.totalPrice = 0;\n      this.shopItemList = this.shopItemList.map(function (item) {\n        // convert to ShopItemInfo()\n        var shopiteminfo = item;\n\n        if (item instanceof ShopItemInfo == false) {\n          shopiteminfo = Object.assign(new ShopItemInfo(), item);\n        } // fill shopiteminfo._productInfo\n\n\n        shopiteminfo.fill_ProductInfo_ByProductArray(arrayProductInfo); // count OrderInfo.totalPrice\n\n        _this2.totalPrice += shopiteminfo.amount * shopiteminfo.price; //console.log(shopiteminfo)\n\n        return shopiteminfo;\n      }); //console.log(this.shopItemList)\n    }\n    /**@type {number} */\n\n  }, {\n    key: \"convertDbFields\",\n    // {\n    //     \"dispalyName\": null,\n    //     \"emailVerified\": true,\n    //     \"userProfile\": {\n    //         \"name\": \"HH\",\n    //         \"address\": \"台北市萬華區寧波街11號XXXXXXXXXX\"\n    //     },\n    //     \"phoneNumber\": \"+886926923281\",\n    //     \"uid\": \"s5hWIA4pdQN8NGjBmPekJoOodBi2\",\n    //     \"photoURL\": \"https://lh3.googleusercontent.com/a-/AOh14GgufKuvpe34oq9gzvV9CppvPhWjISRrNeF4wbdOkw=s96-c\",\n    //     \"providerId\": \"google.com\",\n    //     \"email\": \"tristan829@gmail.com\"\n    // }\n    value: function convertDbFields() {\n      if (!this.fstsCreateDateTime_server.toDate) {\n        var toDate2 = function toDate2() {\n          return (0,_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_0__.getDate_From_Firestore_TimeStamp)(this);\n        };\n\n        this.fstsCreateDateTime_server.toDate = toDate2;\n      }\n    }\n  }, {\n    key: \"jsdtCreateDateTime_server\",\n\n    /**@type {?Date} - server time conver to client js datetime*/\n    get: function get() {\n      return this.fstsCreateDateTime_server == null ? null : this.fstsCreateDateTime_server.toDate();\n    }\n    /**@property {string} */\n\n  }, {\n    key: \"sCreateDateTime\",\n    get: function get() {\n      return getDisplayTime(this.jsdtCreateDateTime_server);\n    }\n    /**@property {string} */\n\n  }, {\n    key: \"sOrderStatus\",\n    get: function get() {\n      var rtnStatus = \"訂單成立,尚未付款\";\n      if (this.orderStatus.isPaid === true) rtnStatus = \"已付款\";\n      if (this.orderStatus.isDelivery === true) rtnStatus = \"已寄出\";\n      if (this.orderStatus.isCanceled === true) rtnStatus = \"已取消\";\n      if (this.orderStatus.isCompleted === true) rtnStatus = \"訂單完成(已送達)\"; // orderStatus = {\n      //     isPaid: false,\n      //     isCompleted: false,\n      //     isCanceled: false,\n      //     isDelivery: false\n      // }\n\n      return rtnStatus;\n    }\n    /**@type {string} */\n\n  }, {\n    key: \"orderProductName\",\n\n    /**@property {string} - first shop product name with /.... */\n    get: function get() {\n      if (this.shopItemList.length == 0) return '';\n      var shopItem_0 = this.shopItemList[0];\n      if (this.shopItemList.length >= 2) return \"\".concat(shopItem_0.productName, \" / .....\");else return \"\".concat(shopItem_0.productName);\n    }\n    /**\r\n     * get listProductId\r\n     * @returns {string[]}\r\n     */\n\n  }], [{\n    key: \"getOrderInfo_FromDbFormat\",\n    value: function getOrderInfo_FromDbFormat(db_orderInfo) {\n      var newOrderInfo = new OrderInfo();\n      newOrderInfo = Object.assign(newOrderInfo, db_orderInfo);\n      newOrderInfo.convertDbFields();\n      return newOrderInfo;\n    }\n  }]);\n\n  return OrderInfo;\n}();\n/**@class \r\n * @desc firestore.Users\r\n*/\n\nvar UserData = /*#__PURE__*/function () {\n  function UserData() {\n    _classCallCheck(this, UserData);\n\n    _defineProperty(this, \"dispalyName\", null);\n\n    _defineProperty(this, \"emailVerified\", false);\n\n    _defineProperty(this, \"userProfile\", new UserProfile());\n\n    _defineProperty(this, \"phoneNumber\", \"\");\n\n    _defineProperty(this, \"uid\", \"\");\n\n    _defineProperty(this, \"photoURL\", \"\");\n\n    _defineProperty(this, \"email\", \"\");\n\n    _defineProperty(this, \"listProviderId\", []);\n  }\n\n  _createClass(UserData, [{\n    key: \"providerId\",\n\n    /**@prop {string} */\n    //providerId= \"\"\n    get: function get() {\n      if (this.listProviderId.length === 0) return null; //find google providerId\n\n      var findGoogle = this.listProviderId.find(function (item) {\n        if (item === UserData.ENUM_ProviderType.google) //'google.com')\n          return true; // return 'google.com'\n      });\n      if (findGoogle) // type string\n        return UserData.ENUM_ProviderType.google; //'google.com'\n      else //undefined\n        return UserData.ENUM_ProviderType.password; //'password'\n    },\n    set: function set(value) {\n      this.listProviderId = [value];\n    }\n    /**@prop {string} */\n\n  }], [{\n    key: \"getListProviderId_ByAuthUserProviderData\",\n    value: function getListProviderId_ByAuthUserProviderData(AuthUserProviderData) {\n      var arrayData = AuthUserProviderData;\n      var listProviderId = arrayData.map(function (item) {\n        return item.providerId;\n      });\n      return listProviderId;\n    }\n    /**@prop {string[]} */\n\n  }]);\n\n  return UserData;\n}();\n/**\r\n * @class\r\n * @desc firestore.Users.userProfile\r\n */\n\n_defineProperty(UserData, \"ENUM_ProviderType\", {\n  google: \"google.com\",\n  password: \"password\"\n});\n\nvar UserProfile = function UserProfile() {\n  _classCallCheck(this, UserProfile);\n\n  _defineProperty(this, \"uid\", \"XXXXXXX\");\n\n  _defineProperty(this, \"sendEmail\", \"XXXXXXX\");\n\n  _defineProperty(this, \"name\", \"XXXXXXX\");\n\n  _defineProperty(this, \"phoneNumber\", \"XXXXXXX\");\n\n  _defineProperty(this, \"address\", \"XXXXXXX\");\n} // /**@type {string} */\n// address1 = \"XXXXXXX\"\n// /**@type {string} */\n// address2 = \"XXXXXXX\"\n// /**@type {string} */\n// address3 = \"XXXXXXX\"\n// /**@type {(1|2|3)} */\n// addressSelectNo = 1\n\n/**@function */\n// getSelectedAddress() {\n//     let propName = `address${this.addressSelectNo}`\n//     return this[propName]\n// }\n;\n/**\r\n * @typedef {Object} GlobalFlag\r\n * @prop {boolean} [__myFlag__]\r\n * @prop {firebase} [firebase]\r\n * @prop {import('../firebase/FirebaseMJS.js').default} [Firebase]\r\n * @prop {object} [app]\r\n * @typedef {Window & GlobalFlag} ExtendedWindow\r\n */\n\nvar fakeProductInfo1 = new ProductInfo();\nfakeProductInfo1.productId = \"ajnck\";\nfakeProductInfo1.name = \"胖老爹美式炸雞,胖老爹美式炸雞,胖老爹美式炸雞,胖老爹美式炸雞\";\nfakeProductInfo1.price = 140;\nfakeProductInfo1.imgFileName = \"白斬雞.jpg\"; //fakeProductInfo1.imgUrl = \"images/四季豆-d83dcdceb072b6cb1e7eb3cff1d5c656.jpg\"\n\nvar fakeProductInfo2 = new ProductInfo();\nfakeProductInfo2.productId = \"okdsf\";\nfakeProductInfo2.name = \"蔥爆牛肉\";\nfakeProductInfo2.price = 550;\nfakeProductInfo2.imgFileName = \"蔥爆牛肉.jpg\"; //fakeProductInfo2.imgUrl = \"images/四季豆-d83dcdceb072b6cb1e7eb3cff1d5c656.jpg\"\n\nvar fakeProductInfo3 = new ProductInfo();\nfakeProductInfo3.productId = \"fdsafe\";\nfakeProductInfo3.name = \"蔥爆牛肉222\";\nfakeProductInfo3.price = 220;\nfakeProductInfo3.imgFileName = \"四季豆.jpg\"; //fakeProductInfo3.imgUrl = \"images/蔥爆牛肉-c5015d40ca191cbb33002457f64a7cf7.jpg\"\n\n\n/**\r\n * \r\n * @param {?Date} inDate \r\n * @returns {string}\r\n */\n\nfunction getDisplayTime(inDate) {\n  if (!inDate) return 'noTime';else return \"\".concat(inDate.getFullYear(), \"/\").concat(inDate.getMonth() + 1, \"/\").concat(inDate.getDate(), \" \").concat(inDate.getHours(), \":\").concat(inDate.getMinutes(), \":\").concat(inDate.getSeconds());\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9kYXRhRGVmaW5lL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvZGF0YURlZmluZS9pbmRleC5qcz8zZWE2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vQHRzLWNoZWNrXHJcbi8vSW5zaWRlIG9mIHNldHRpbmdzLmpzb24sIGFkZCB0aGUgZm9sbG93aW5nOnsgXCJqYXZhc2NyaXB0LmltcGxpY2l0UHJvamVjdENvbmZpZy5jaGVja0pzXCI6IHRydWUgfVxyXG5cclxuaW1wb3J0IEZpcmViYXNlTUpTLCB7Z2V0RGF0ZV9Gcm9tX0ZpcmVzdG9yZV9UaW1lU3RhbXB9IGZyb20gJy4uL2ZpcmViYXNlL0ZpcmViYXNlTUpTLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3NcclxuICogQGRlc2MgbWluZzEgcHJvamVjdCBTaG9wSXRlbS5qc3hcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTaG9wSXRlbUluZm8ge1xyXG4gICAgLyoqQHR5cGUgeyhQcm9kdWN0SW5mb3xudWxsfHVuZGVmaW5lZCl9ICovXHJcbiAgICBfcHJvZHVjdEluZm87XHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgcHJvZHVjdElkID0gJ1hYWFhYWFhYWFhYWFgnXHJcbiAgICAvL3Byb2R1Y3RJbmZvPXtwcm9kdWN0SWQ6J21tbW1tbW1tbW0nfVxyXG4gICAgLyoqQHR5cGUge251bWJlcn0gKi9cclxuICAgIGFtb3VudCA9IDBcclxuICAgIC8qKkB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICBwcmljZSA9IDBcclxuICAgIC8vcHJvZHVjdEluZm9cclxuICAgIC8qKkBwcm9wZXJ0eSB7c3RyaW5nfSovXHJcbiAgICBnZXQgcHJvZHVjdE5hbWUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9wcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgcmV0dXJuICcnXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2R1Y3RJbmZvLm5hbWVcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZmlsbCBfcHJvZHVjdEluZm8gLSBmcm9tIGdpdmVuIHByb2R1Y3QgbGlzdFxyXG4gICAgICogQHBhcmFtIHtQcm9kdWN0SW5mb1tdfSBhcnJheVByb2R1Y3RzIFxyXG4gICAgICovXHJcbiAgICBmaWxsX1Byb2R1Y3RJbmZvX0J5UHJvZHVjdEFycmF5KGFycmF5UHJvZHVjdHMpIHtcclxuICAgICAgICBpZiAoYXJyYXlQcm9kdWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0SW5mbyA9IG51bGxcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RJZClcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGFycmF5UHJvZHVjdHMpXHJcbiAgICAgICAgbGV0IGZpbmRQcm9kdWN0SW5mbyA9IGFycmF5UHJvZHVjdHMuZmluZCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5wcm9kdWN0SWQgPT09IHRoaXMucHJvZHVjdElkXHJcbiAgICAgICAgfSlcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdmaW5kLS0tJywgZmluZFByb2R1Y3RJbmZvKVxyXG4gICAgICAgIC8vaWYgcmVzdWx0IG5vdCBmb3VuZCwgZm9yY2UgdG8gY2xlYXIgdGhpcy5fcHJvZHVjdEluZm9cclxuICAgICAgICB0aGlzLnByb2R1Y3RJbmZvID0gbnVsbFxyXG4gICAgICAgIGlmIChmaW5kUHJvZHVjdEluZm8pXHJcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdEluZm8gPSBmaW5kUHJvZHVjdEluZm9cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLl9wcm9kdWN0SW5mbylcclxuICAgIH1cclxuICAgIC8qKkB0eXBlIHtQcm9kdWN0SW5mb30gLSBzZXQgdGhpcyBTaG9wSXRlbSdzIFByb2R1Y3RJbmZvKi9cclxuICAgIHNldCBwcm9kdWN0SW5mbyh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3Byb2R1Y3RJbmZvID0gdmFsdWVcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0SWQgPSB2YWx1ZS5wcm9kdWN0SWRcclxuICAgICAgICAgICAgdGhpcy5wcmljZSA9IHZhbHVlLnByaWNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIC8qKkB0eXBlIHsoUHJvZHVjdEluZm98bnVsbHx1bmRlZmluZWQpfSAtIHJldHVybiB0aGlzIFNob3BJdGVtJ3MgUHJvZHVjdEluZm8qL1xyXG4gICAgZ2V0IHByb2R1Y3RJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9kdWN0SW5mb1xyXG4gICAgfVxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmV4cG9ydCBjb25zdCBFTlVNX1Byb2R1Y3RDYXRlZ29yeSA9IHtcclxuICAgIC8vIHNveWJlYW46XCJzb3liZWFuXCIsXHJcbiAgICAvLyBkdWNrOlwiZHVja1wiLFxyXG4gICAgLy8gY2hpY2tlbjpcImNoaWNrZW5cIixcclxuICAgIC8vIGJlZWY6XCJiZWVmXCIsXHJcbiAgICAvLyBwb3JrOlwicG9ya1wiLFxyXG4gICAgLy8gb3RoZXJzOlwib3RoZXJzXCIsXHJcblxyXG4gICAgbWFpbkNvdXJzZTpcIm1haW5Db3Vyc2VcIixcclxuICAgIG1lYXRzOlwibWVhdHNcIixcclxuICAgIHNvdXBzOlwic291cHNcIixcclxuICAgIHN0aXJGaXJlZDpcInN0aXJGaXJlZFwiLFxyXG4gICAgY29sZFBsYXRlczpcImNvbGRQbGF0ZXNcIlxyXG59XHJcbmV4cG9ydCBjb25zdCBNYXBfUHJvZHVjdENhdGVnb3J5ID0ge1xyXG4gICAgLy8gc295YmVhbjpcIuixhumhnlwiLFxyXG4gICAgLy8gZHVjazpcIum0qOiCiemhnlwiLFxyXG4gICAgLy8gY2hpY2tlbjpcIumbnuiCiemhnlwiLFxyXG4gICAgLy8gYmVlZjpcIueJm+iCiemhnlwiLFxyXG4gICAgLy8gcG9yazpcIuixrOiCiemhnlwiLFxyXG4gICAgLy8gb3RoZXJzOlwi5YW25LuW6aGe5YilXCIsXHJcblxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIG1haW5Db3Vyc2U6XCLkuLvoj5xcIixcclxuICAgIC8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICBtZWF0czpcIuiCiemhnlwiLFxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIHNvdXBzOlwi5rmvXCIsXHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgc3RpckZpcmVkOlwi5b+r54KSXCIsXHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgY29sZFBsYXRlczpcIuWGt+ebpFwiXHJcbn1cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKiBAZGVzY3JpcHRpb24gZmlyZXN0b3JlLlByb2R1Y3RzL1Byb2R1Y3RMaXN0LmpzeC9Qcm9kdWN0Q2FyZC5qc3hcclxuICogKi9cclxuZXhwb3J0IGNsYXNzIFByb2R1Y3RJbmZvIHtcclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBwcm9kdWN0SWQgPSBcIm51bGxcIiAvL2FhYWFhLTFcclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBuYW1lID0gXCJudWxsXCIgLy9cIueZveaWrOmbnlwiXHJcbiAgICAvKipAcHJvcCB7bnVtYmVyfSAqL1xyXG4gICAgcHJpY2UgPSAwIC8vMTQwXHJcbiAgICAvKipAcHJvcCB7P2ZpcmViYXNlLmZpcmVzdG9yZS5UaW1lc3RhbXB9ICovXHJcbiAgICBmc3RzQWRkRGF0ZVRpbWVfc2VydmVyID0gbnVsbFxyXG5cclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBjYXRlZ29yeSA9IFwibnVsbFwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgdGFnID0gXCIjXCJcclxuXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgaW1nVXJsID0gXCIuL1wiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgaW1nRmlsZU5hbWUgPSBcImRlZmF1bHQucG5nXCIgLy/nmb3mlqzpm54uanBnXHJcbiAgICAvKipAcHJvcCB7P251bWJlcn0gKi9cclxuICAgIGF1dG9OdW0gPSBudWxsXHJcbiAgICAvKipAcHJvcCB7P2Jvb2xlYW59IC0gaW4gdXNlIG9yIG5vdCAqL1xyXG4gICAgaXNBY3RpdmVkID0gZmFsc2VcclxufVxyXG5cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKiBAZGVzY3JpcHRpb24gT3JkZXJJbmZvLk9yZGVyU3RhdHVzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT3JkZXJTdGF0dXMge1xyXG4gICAgLyoqQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICBpc1BhaWQgPSBmYWxzZTtcclxuICAgIC8qKkB0eXBlIHtib29sZWFufSAqL1xyXG4gICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgIC8qKkB0eXBlIHtib29sZWFufSAqL1xyXG4gICAgaXNDYW5jZWxlZCA9IGZhbHNlO1xyXG4gICAgLyoqQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICBpc0RlbGl2ZXJ5ID0gZmFsc2U7XHJcbn1cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKiBAZGVzY3JpcHRpb24gLSBPcmRlckluZm8uT3JkZXJMb2cgYnkgTG9nVHlwZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9yZGVyTG9nIHtcclxuICAgIC8qKkB0eXBlIHs/ZmlyZWJhc2UuZmlyZXN0b3JlLlRpbWVzdGFtcH0gKi9cclxuICAgIGZzdHNMb2dEYXRlVGltZV9zZXJ2ZXIgPSBudWxsXHJcbiAgICAvKipAdHlwZSB7TG9nVHlwZX0gKi9cclxuICAgIGxvZ1R5cGUgPSAnJ1xyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIHJlbWFya3MgPSAnJ1xyXG59XHJcblxyXG4vKipcclxuICogQGVudW0ge3N0cmluZ31cclxuICogQGRlc2MgZmlyZXN0b3JlLk9yZGVySW5mby5Mb2dUeXBlXHJcbiAqICovXHJcbmV4cG9ydCBjb25zdCBMb2dUeXBlID0ge1xyXG4gICAgTmV3T3JkZXI6IFwiTmV3T3JkZXJcIixcclxuICAgIFBhaWRNb25leTogXCJQYWlkTW9uZXlcIixcclxuICAgIENhbmNlbE9yZGVyOiBcIkNhbmNlbE9yZGVyXCIsXHJcbiAgICBEZWxpdmVyeU9yZGVyOiBcIkRlbGl2ZXJ5T3JkZXJcIixcclxuICAgIENvbXBsZXRlT3JkZXI6IFwiQ29tcGxldGVPcmRlclwiXHJcbn1cclxuXHJcbi8qKiBcclxuICogQGNsYXNzXHJcbiAqIEBkZXNjcmlwdGlvbiAtIGZyb20gZmlyZXN0b3JlLk9yZGVySW5mbyBcclxuICovZXhwb3J0IGNsYXNzIE9yZGVySW5mbyB7XHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAtIGZpcmVzdG9yZS5Vc2Vycy51aWQqL1xyXG4gICAgdXNlcklkID0gXCJ4eHh4eHh4XCJcclxuICAgIC8qKkB0eXBlIHsoP2ZpcmViYXNlLmZpcmVzdG9yZS5UaW1lc3RhbXApfSAtIG9yZGVyIGNyZWF0ZSBkYXRldGltZSBmcm9tIGZpcmVzdG9yZSovXHJcbiAgICBmc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyID0gbnVsbFxyXG4gICAgLyoqQHR5cGUgez9EYXRlfSAtIHNlcnZlciB0aW1lIGNvbnZlciB0byBjbGllbnQganMgZGF0ZXRpbWUqLyBcclxuICAgIGdldCBqc2R0Q3JlYXRlRGF0ZVRpbWVfc2VydmVyKCl7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZzdHNDcmVhdGVEYXRlVGltZV9zZXJ2ZXIgPT0gbnVsbCkgPyBudWxsIDogdGhpcy5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyLnRvRGF0ZSgpOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICAvKipAcHJvcGVydHkge3N0cmluZ30gKi9cclxuICAgIGdldCBzQ3JlYXRlRGF0ZVRpbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldERpc3BsYXlUaW1lKHRoaXMuanNkdENyZWF0ZURhdGVUaW1lX3NlcnZlcilcclxuICAgIH1cclxuICAgIC8qKkBwcm9wZXJ0eSB7c3RyaW5nfSAqL1xyXG4gICAgZ2V0IHNPcmRlclN0YXR1cygpIHtcclxuICAgICAgICBsZXQgcnRuU3RhdHVzID0gXCLoqILllq7miJDnq4ss5bCa5pyq5LuY5qy+XCJcclxuICAgICAgICBpZiAodGhpcy5vcmRlclN0YXR1cy5pc1BhaWQgPT09IHRydWUpXHJcbiAgICAgICAgICAgIHJ0blN0YXR1cyA9IFwi5bey5LuY5qy+XCJcclxuICAgICAgICBpZiAodGhpcy5vcmRlclN0YXR1cy5pc0RlbGl2ZXJ5ID09PSB0cnVlKVxyXG4gICAgICAgICAgICBydG5TdGF0dXMgPSBcIuW3suWvhOWHulwiXHJcbiAgICAgICAgaWYgKHRoaXMub3JkZXJTdGF0dXMuaXNDYW5jZWxlZCA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgcnRuU3RhdHVzID0gXCLlt7Llj5bmtohcIlxyXG4gICAgICAgIGlmICh0aGlzLm9yZGVyU3RhdHVzLmlzQ29tcGxldGVkID09PSB0cnVlKVxyXG4gICAgICAgICAgICBydG5TdGF0dXMgPSBcIuioguWWruWujOaIkCjlt7LpgIHpgZQpXCJcclxuICAgICAgICAvLyBvcmRlclN0YXR1cyA9IHtcclxuICAgICAgICAvLyAgICAgaXNQYWlkOiBmYWxzZSxcclxuICAgICAgICAvLyAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxyXG4gICAgICAgIC8vICAgICBpc0NhbmNlbGVkOiBmYWxzZSxcclxuICAgICAgICAvLyAgICAgaXNEZWxpdmVyeTogZmFsc2VcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcmV0dXJuIHJ0blN0YXR1c1xyXG4gICAgfVxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIG9yZGVySWQgPSBcIlhYWFhYWFhYXCIgLy8gb2RrZS0yMDIwMDcxNy0wMDAxXHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgb3JkZXJBZGRyZXNzID0gJ1hYWFhYWCdcclxuICAgIC8qKkB0eXBlIHtTaG9wSXRlbUluZm9bXX0gKi9cclxuICAgIHNob3BJdGVtTGlzdCA9IFtdXHJcbiAgICAvKipAcHJvcGVydHkge3N0cmluZ30gLSBmaXJzdCBzaG9wIHByb2R1Y3QgbmFtZSB3aXRoIC8uLi4uICovXHJcbiAgICBnZXQgb3JkZXJQcm9kdWN0TmFtZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG9wSXRlbUxpc3QubGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgIHJldHVybiAnJ1xyXG4gICAgICAgIGxldCBzaG9wSXRlbV8wID0gdGhpcy5zaG9wSXRlbUxpc3RbMF1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvcEl0ZW1MaXN0Lmxlbmd0aCA+PSAyKVxyXG4gICAgICAgICAgICByZXR1cm4gYCR7c2hvcEl0ZW1fMC5wcm9kdWN0TmFtZX0gLyAuLi4uLmBcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBgJHtzaG9wSXRlbV8wLnByb2R1Y3ROYW1lfWBcclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGdldCBsaXN0UHJvZHVjdElkXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119XHJcbiAgICAgKi9cclxuICAgIGdldFNob3BJdGVtc19Qcm9kSWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGxpc3RfcHJvZHVjdElkID0gdGhpcy5zaG9wSXRlbUxpc3QubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnByb2R1Y3RJZFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGxpc3RfcHJvZHVjdElkXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhhcnIpXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNob3BJdGVtTGlzdClcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZmlsbCBzaG9wSXRlbSBkZXRhaWwgaW5mb3JtYXRpb25cclxuICAgICAqIEBwYXJhbSB7UHJvZHVjdEluZm9bXX0gYXJyYXlQcm9kdWN0SW5mbyAtIGRpc3RpbmN0IHByb2R1Y3QgbGlzdFxyXG4gICAgICovXHJcbiAgICBmaWxsU2hvcEl0ZW1zKGFycmF5UHJvZHVjdEluZm8pIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGFycmF5UHJvZHVjdEluZm8pXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNob3BJdGVtTGlzdClcclxuICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwO1xyXG4gICAgICAgIHRoaXMuc2hvcEl0ZW1MaXN0ID0gdGhpcy5zaG9wSXRlbUxpc3QubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdG8gU2hvcEl0ZW1JbmZvKClcclxuICAgICAgICAgICAgbGV0IHNob3BpdGVtaW5mbyA9IGl0ZW1cclxuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBTaG9wSXRlbUluZm8gPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHNob3BpdGVtaW5mbyA9IE9iamVjdC5hc3NpZ24obmV3IFNob3BJdGVtSW5mbygpLCBpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBmaWxsIHNob3BpdGVtaW5mby5fcHJvZHVjdEluZm9cclxuICAgICAgICAgICAgc2hvcGl0ZW1pbmZvLmZpbGxfUHJvZHVjdEluZm9fQnlQcm9kdWN0QXJyYXkoYXJyYXlQcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgLy8gY291bnQgT3JkZXJJbmZvLnRvdGFsUHJpY2VcclxuICAgICAgICAgICAgdGhpcy50b3RhbFByaWNlICs9IChzaG9waXRlbWluZm8uYW1vdW50ICogc2hvcGl0ZW1pbmZvLnByaWNlKVxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNob3BpdGVtaW5mbylcclxuICAgICAgICAgICAgcmV0dXJuIHNob3BpdGVtaW5mb1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNob3BJdGVtTGlzdClcclxuICAgIH1cclxuICAgIC8qKkB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICB0b3RhbFByaWNlID0gMFxyXG4gICAgLyoqQHR5cGUge09yZGVyU3RhdHVzfSAqL1xyXG4gICAgb3JkZXJTdGF0dXMgPSB7XHJcbiAgICAgICAgaXNQYWlkOiBmYWxzZSxcclxuICAgICAgICBpc0NvbXBsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgaXNDYW5jZWxlZDogZmFsc2UsXHJcbiAgICAgICAgaXNEZWxpdmVyeTogZmFsc2VcclxuICAgIH1cclxuICAgIC8qKkB0eXBlIHtPcmRlckxvZ1tdfSAqL1xyXG4gICAgb3JkZXJMb2cgPSBbXVxyXG4gICAgLy8ge1xyXG4gICAgLy8gICAgIGZzdHNMb2dEYXRlVGltZV9zZXJ2ZXI6IG51bGwsXHJcbiAgICAvLyAgICAgbG9nVHlwZTogJycsXHJcbiAgICAvLyAgICAgcmVtYXJrczogJydcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipAcHJvcCB7VXNlckRhdGF9ICovXHJcbiAgICB1c2VyRGF0YSA9IG5ldyBVc2VyRGF0YSgpO1xyXG4gICAgLy8ge1xyXG4gICAgLy8gICAgIFwiZGlzcGFseU5hbWVcIjogbnVsbCxcclxuICAgIC8vICAgICBcImVtYWlsVmVyaWZpZWRcIjogdHJ1ZSxcclxuICAgIC8vICAgICBcInVzZXJQcm9maWxlXCI6IHtcclxuICAgIC8vICAgICAgICAgXCJuYW1lXCI6IFwiSEhcIixcclxuICAgIC8vICAgICAgICAgXCJhZGRyZXNzXCI6IFwi5Y+w5YyX5biC6JCs6I+v5Y2A5a+n5rOi6KGXMTHomZ9YWFhYWFhYWFhYXCJcclxuICAgIC8vICAgICB9LFxyXG4gICAgLy8gICAgIFwicGhvbmVOdW1iZXJcIjogXCIrODg2OTI2OTIzMjgxXCIsXHJcbiAgICAvLyAgICAgXCJ1aWRcIjogXCJzNWhXSUE0cGRRTjhOR2pCbVBla0pvT29kQmkyXCIsXHJcbiAgICAvLyAgICAgXCJwaG90b1VSTFwiOiBcImh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hLS9BT2gxNEdndWZLdXZwZTM0b3E5Z3p2VjlDcHB2UGhXaklTUnJOZUY0d2JkT2t3PXM5Ni1jXCIsXHJcbiAgICAvLyAgICAgXCJwcm92aWRlcklkXCI6IFwiZ29vZ2xlLmNvbVwiLFxyXG4gICAgLy8gICAgIFwiZW1haWxcIjogXCJ0cmlzdGFuODI5QGdtYWlsLmNvbVwiXHJcbiAgICAvLyB9XHJcblxyXG4gICAgXHJcbiAgICBjb252ZXJ0RGJGaWVsZHMoKXtcclxuICAgICAgICBpZighdGhpcy5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyLnRvRGF0ZSl7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvRGF0ZTIoKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXREYXRlX0Zyb21fRmlyZXN0b3JlX1RpbWVTdGFtcCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyLnRvRGF0ZSA9IHRvRGF0ZTI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldE9yZGVySW5mb19Gcm9tRGJGb3JtYXQoZGJfb3JkZXJJbmZvKXtcclxuICAgICAgICBsZXQgbmV3T3JkZXJJbmZvID0gbmV3IE9yZGVySW5mbygpO1xyXG4gICAgICAgIG5ld09yZGVySW5mbyA9IE9iamVjdC5hc3NpZ24obmV3T3JkZXJJbmZvLCBkYl9vcmRlckluZm8pXHJcbiAgICAgICAgbmV3T3JkZXJJbmZvLmNvbnZlcnREYkZpZWxkcygpO1xyXG4gICAgICAgIHJldHVybiBuZXdPcmRlckluZm9cclxuICAgIH1cclxufVxyXG4vKipAY2xhc3MgXHJcbiAqIEBkZXNjIGZpcmVzdG9yZS5Vc2Vyc1xyXG4qL1xyXG5leHBvcnQgY2xhc3MgVXNlckRhdGF7XHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgZGlzcGFseU5hbWU9IG51bGxcclxuICAgIC8qKkBwcm9wIHtib29sZWFufSAqL1xyXG4gICAgZW1haWxWZXJpZmllZD0gZmFsc2VcclxuICAgIC8qKkBwcm9wIHtVc2VyUHJvZmlsZX0gKi9cclxuICAgIHVzZXJQcm9maWxlPSBuZXcgVXNlclByb2ZpbGUoKTtcclxuICAgIC8vIHtcclxuICAgIC8vICAgICBuYW1lOiBcIkhIXCIsXHJcbiAgICAvLyAgICAgYWRkcmVzczogXCLlj7DljJfluILokKzoj6/ljYDlr6fms6LooZcxMeiZn1hYWFhYWFhYWFhcIlxyXG4gICAgLy8gfVxyXG4gICAgLyoqQHByb3Age3N0cmluZ30gKi9cclxuICAgIHBob25lTnVtYmVyPSBcIlwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgdWlkPSBcIlwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgcGhvdG9VUkw9IFwiXCJcclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICAvL3Byb3ZpZGVySWQ9IFwiXCJcclxuICAgIGdldCBwcm92aWRlcklkKCkge1xyXG4gICAgICAgIGlmKHRoaXMubGlzdFByb3ZpZGVySWQubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAvL2ZpbmQgZ29vZ2xlIHByb3ZpZGVySWRcclxuICAgICAgICBsZXQgZmluZEdvb2dsZSA9IHRoaXMubGlzdFByb3ZpZGVySWQuZmluZCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBpZihpdGVtID09PSBVc2VyRGF0YS5FTlVNX1Byb3ZpZGVyVHlwZS5nb29nbGUpLy8nZ29vZ2xlLmNvbScpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZSAvLyByZXR1cm4gJ2dvb2dsZS5jb20nXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZihmaW5kR29vZ2xlKS8vIHR5cGUgc3RyaW5nXHJcbiAgICAgICAgICAgIHJldHVybiBVc2VyRGF0YS5FTlVNX1Byb3ZpZGVyVHlwZS5nb29nbGUvLydnb29nbGUuY29tJ1xyXG4gICAgICAgIGVsc2UvL3VuZGVmaW5lZFxyXG4gICAgICAgICAgICByZXR1cm4gVXNlckRhdGEuRU5VTV9Qcm92aWRlclR5cGUucGFzc3dvcmQvLydwYXNzd29yZCdcclxuICAgIH1cclxuICAgIHNldCBwcm92aWRlcklkKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5saXN0UHJvdmlkZXJJZCA9IFt2YWx1ZV1cclxuICAgIH1cclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBlbWFpbD0gXCJcIlxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IEF1dGhVc2VyUHJvdmlkZXJEYXRhIFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRU5VTV9Qcm92aWRlclR5cGU9e1xyXG4gICAgICAgIGdvb2dsZTpcImdvb2dsZS5jb21cIixcclxuICAgICAgICBwYXNzd29yZDpcInBhc3N3b3JkXCJcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXRMaXN0UHJvdmlkZXJJZF9CeUF1dGhVc2VyUHJvdmlkZXJEYXRhKEF1dGhVc2VyUHJvdmlkZXJEYXRhKXtcclxuICAgICAgICBsZXQgYXJyYXlEYXRhID0gQXV0aFVzZXJQcm92aWRlckRhdGE7XHJcbiAgICAgICAgbGV0IGxpc3RQcm92aWRlcklkID0gYXJyYXlEYXRhLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5wcm92aWRlcklkO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGxpc3RQcm92aWRlcklkO1xyXG4gICAgfVxyXG4gICAgLyoqQHByb3Age3N0cmluZ1tdfSAqL1xyXG4gICAgbGlzdFByb3ZpZGVySWQgPSBbXVxyXG4gICAgXHJcbn1cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKiBAZGVzYyBmaXJlc3RvcmUuVXNlcnMudXNlclByb2ZpbGVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVc2VyUHJvZmlsZSB7XHJcbiAgICAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgdWlkID0gXCJYWFhYWFhYXCJcclxuICAgIC8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICBzZW5kRW1haWwgPSBcIlhYWFhYWFhcIlxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIG5hbWUgPSBcIlhYWFhYWFhcIlxyXG4gICAgLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIHBob25lTnVtYmVyID0gXCJYWFhYWFhYXCJcclxuICAgIC8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICBhZGRyZXNzID0gXCJYWFhYWFhYXCJcclxuICAgIC8vIC8qKkB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICAvLyBhZGRyZXNzMSA9IFwiWFhYWFhYWFwiXHJcbiAgICAvLyAvKipAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgLy8gYWRkcmVzczIgPSBcIlhYWFhYWFhcIlxyXG4gICAgLy8gLyoqQHR5cGUge3N0cmluZ30gKi9cclxuICAgIC8vIGFkZHJlc3MzID0gXCJYWFhYWFhYXCJcclxuICAgIC8vIC8qKkB0eXBlIHsoMXwyfDMpfSAqL1xyXG4gICAgLy8gYWRkcmVzc1NlbGVjdE5vID0gMVxyXG4gICAgLyoqQGZ1bmN0aW9uICovXHJcbiAgICAvLyBnZXRTZWxlY3RlZEFkZHJlc3MoKSB7XHJcbiAgICAvLyAgICAgbGV0IHByb3BOYW1lID0gYGFkZHJlc3Mke3RoaXMuYWRkcmVzc1NlbGVjdE5vfWBcclxuICAgIC8vICAgICByZXR1cm4gdGhpc1twcm9wTmFtZV1cclxuICAgIC8vIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEdsb2JhbEZsYWdcclxuICogQHByb3Age2Jvb2xlYW59IFtfX215RmxhZ19fXVxyXG4gKiBAcHJvcCB7ZmlyZWJhc2V9IFtmaXJlYmFzZV1cclxuICogQHByb3Age2ltcG9ydCgnLi4vZmlyZWJhc2UvRmlyZWJhc2VNSlMuanMnKS5kZWZhdWx0fSBbRmlyZWJhc2VdXHJcbiAqIEBwcm9wIHtvYmplY3R9IFthcHBdXHJcbiAqIEB0eXBlZGVmIHtXaW5kb3cgJiBHbG9iYWxGbGFnfSBFeHRlbmRlZFdpbmRvd1xyXG4gKi9cclxuXHJcbmNvbnN0IGZha2VQcm9kdWN0SW5mbzEgPSBuZXcgUHJvZHVjdEluZm8oKVxyXG5mYWtlUHJvZHVjdEluZm8xLnByb2R1Y3RJZCA9IFwiYWpuY2tcIlxyXG5mYWtlUHJvZHVjdEluZm8xLm5hbWUgPSBcIuiDluiAgeeIuee+juW8j+eCuOmbnizog5bogIHniLnnvo7lvI/ngrjpm54s6IOW6ICB54i5576O5byP54K46ZueLOiDluiAgeeIuee+juW8j+eCuOmbnlwiXHJcbmZha2VQcm9kdWN0SW5mbzEucHJpY2UgPSAxNDBcclxuZmFrZVByb2R1Y3RJbmZvMS5pbWdGaWxlTmFtZSA9IFwi55m95pas6ZueLmpwZ1wiXHJcbi8vZmFrZVByb2R1Y3RJbmZvMS5pbWdVcmwgPSBcImltYWdlcy/lm5vlraPosYYtZDgzZGNkY2ViMDcyYjZjYjFlN2ViM2NmZjFkNWM2NTYuanBnXCJcclxuY29uc3QgZmFrZVByb2R1Y3RJbmZvMiA9IG5ldyBQcm9kdWN0SW5mbygpXHJcbmZha2VQcm9kdWN0SW5mbzIucHJvZHVjdElkID0gXCJva2RzZlwiXHJcbmZha2VQcm9kdWN0SW5mbzIubmFtZSA9IFwi6JSl54iG54mb6IKJXCJcclxuZmFrZVByb2R1Y3RJbmZvMi5wcmljZSA9IDU1MFxyXG5mYWtlUHJvZHVjdEluZm8yLmltZ0ZpbGVOYW1lID0gXCLolKXniIbniZvogokuanBnXCJcclxuLy9mYWtlUHJvZHVjdEluZm8yLmltZ1VybCA9IFwiaW1hZ2VzL+Wbm+Wto+ixhi1kODNkY2RjZWIwNzJiNmNiMWU3ZWIzY2ZmMWQ1YzY1Ni5qcGdcIlxyXG5jb25zdCBmYWtlUHJvZHVjdEluZm8zID0gbmV3IFByb2R1Y3RJbmZvKClcclxuZmFrZVByb2R1Y3RJbmZvMy5wcm9kdWN0SWQgPSBcImZkc2FmZVwiXHJcbmZha2VQcm9kdWN0SW5mbzMubmFtZSA9IFwi6JSl54iG54mb6IKJMjIyXCJcclxuZmFrZVByb2R1Y3RJbmZvMy5wcmljZSA9IDIyMFxyXG5mYWtlUHJvZHVjdEluZm8zLmltZ0ZpbGVOYW1lID0gXCLlm5vlraPosYYuanBnXCJcclxuLy9mYWtlUHJvZHVjdEluZm8zLmltZ1VybCA9IFwiaW1hZ2VzL+iUpeeIhueJm+iCiS1jNTAxNWQ0MGNhMTkxY2JiMzMwMDI0NTdmNjRhN2NmNy5qcGdcIlxyXG5leHBvcnQge1xyXG4gICAgZmFrZVByb2R1Y3RJbmZvMSxcclxuICAgIGZha2VQcm9kdWN0SW5mbzIsXHJcbiAgICBmYWtlUHJvZHVjdEluZm8zXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICogQHBhcmFtIHs/RGF0ZX0gaW5EYXRlIFxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RGlzcGxheVRpbWUoaW5EYXRlKSB7XHJcbiAgICBpZiAoIWluRGF0ZSlcclxuICAgICAgICByZXR1cm4gJ25vVGltZSdcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gYCR7aW5EYXRlLmdldEZ1bGxZZWFyKCl9LyR7aW5EYXRlLmdldE1vbnRoKCkrMX0vJHtpbkRhdGUuZ2V0RGF0ZSgpfSAke2luRGF0ZS5nZXRIb3VycygpfToke2luRGF0ZS5nZXRNaW51dGVzKCl9OiR7aW5EYXRlLmdldFNlY29uZHMoKX1gXHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFxQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUF4Q0E7QUFBQTtBQVVBO0FBQ0E7QUFBQTtBQVhBO0FBYUE7QUFFQTtBQUNBO0FBaEJBO0FBQUE7QUFBQTtBQXlDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBaERBO0FBQUE7QUFrREE7QUFDQTtBQW5EQTtBQUNBO0FBREE7QUFBQTtBQXFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWpCQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQXlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBdURBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBOURBO0FBQ0E7QUFEQTtBQXlGQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUF6RkE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQTZEQTtBQUNBO0FBQ0E7QUFDQTtBQWpFQTtBQWtFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBdEZBO0FBQUE7QUF3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwSEE7QUF3SEE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQS9IQTtBQUFBO0FBQ0E7QUFJQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBQUE7QUFBQTtBQWVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWpDQTtBQUFBO0FBQ0E7QUFxQ0E7QUF0Q0E7QUF3Q0E7QUFFQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdERBO0FBQUE7QUFBQTtBQWlJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcklBO0FBQ0E7QUFEQTtBQUFBO0FBdUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBZ0JBO0FBQ0E7QUFsQkE7QUFvQkE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQWhDQTtBQWtDQTtBQUNBO0FBQ0E7QUFDQTtBQXJDQTtBQUFBO0FBQUE7QUErQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXREQTtBQUNBO0FBREE7QUFBQTtBQXlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN0RBO0FBMkNBO0FBQ0E7QUFGQTtBQUNBO0FBa0JBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7QUEwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/dataDefine/index.js\n");

/***/ }),

/***/ "./js/firebase/FirebaseMJS.js":
/*!************************************!*\
  !*** ./js/firebase/FirebaseMJS.js ***!
  \************************************/
/*! namespace exports */
/*! export ENUM_orderStatus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Email_ResendPassword [provided] [no usage info] [missing usage info prevents renaming] */
/*! export FIRESTORAGE_FOLDERS [provided] [no usage info] [missing usage info prevents renaming] */
/*! export FIRESTORE_COLLECTION [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MIME_TYPE [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getDate_From_Firestore_TimeStamp [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MIME_TYPE\": () => /* binding */ MIME_TYPE,\n/* harmony export */   \"FIRESTORE_COLLECTION\": () => /* binding */ FIRESTORE_COLLECTION,\n/* harmony export */   \"FIRESTORAGE_FOLDERS\": () => /* binding */ FIRESTORAGE_FOLDERS,\n/* harmony export */   \"ENUM_orderStatus\": () => /* binding */ ENUM_orderStatus,\n/* harmony export */   \"default\": () => /* binding */ FirebaseMJS,\n/* harmony export */   \"getDate_From_Firestore_TimeStamp\": () => /* binding */ getDate_From_Firestore_TimeStamp,\n/* harmony export */   \"Email_ResendPassword\": () => /* binding */ Email_ResendPassword\n/* harmony export */ });\n/* harmony import */ var _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dataDefine/index.js */ \"./js/dataDefine/index.js\");\n/* harmony import */ var _lib_dataKits_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/dataKits.js */ \"./js/lib/dataKits.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n/**@enum {string} */\n\nvar MIME_TYPE = {\n  jpg: 'image/jpeg',\n  png: 'image/png'\n};\n/**@enum {string} */\n\nvar FIRESTORE_COLLECTION = {\n  //Products: \"Products\",\n  ProductInfo: \"ProductInfo\",\n  Users: \"Users\",\n  OrderInfo: \"OrderInfo\"\n};\n/**@enum {string} */\n\nvar FIRESTORAGE_FOLDERS = {\n  Products: \"Products\"\n};\n/**@enum {string} */\n\nvar ENUM_orderStatus = {\n  all: 'all',\n  completed: 'completed',\n  waitForPay: 'waitForPay',\n  waitForDelivery: 'waitForDelivery',\n  canceled: 'canceled'\n};\n/**\r\n * @module\r\n * @class \r\n * @description Firebase class\r\n */\n\nvar FirebaseMJS = /*#__PURE__*/function () {\n  /**\r\n   * @param {firebase} firebase - from firebase\r\n   * @param {import('../lib/dataKits.js')} dataKits\r\n   */\n  function FirebaseMJS(firebase, dataKits) {\n    var _this = this;\n\n    _classCallCheck(this, FirebaseMJS);\n\n    _defineProperty(this, \"initStorage\", function () {\n      if (_this._storageRef == null) // Create a root reference\n        _this._storageRef = _this._firebase.storage().ref();\n    });\n\n    _defineProperty(this, \"initDB\", function () {\n      if (_this._db == null) _this._db = _this._firebase.firestore();\n    });\n\n    _defineProperty(this, \"getOrderInfo\", function (userId, orderStatus) {\n      _this.initDB(); // if(userId)\n      //     fakeUid = userId\n      //let rtnOrderInfo_list=[]\n\n\n      var self = _this;\n      /**@param {ENUM_orderStatus} inOrderStatus */\n\n      function getQuery(inOrderStatus) {\n        switch (inOrderStatus) {\n          case ENUM_orderStatus.all:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId);\n\n          case ENUM_orderStatus.completed:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isCompleted', '==', true);\n\n          case ENUM_orderStatus.waitForPay:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', false).where('orderStatus.isCanceled', '==', false);\n\n          case ENUM_orderStatus.waitForDelivery:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', true).where('orderStatus.isDelivery', '==', false);\n\n          case ENUM_orderStatus.canceled:\n            return self._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isCanceled', '==', true);\n\n          default:\n            break;\n        }\n      } //return this._db.collection(FIRESTORE_COLLECTION.OrderInfo).where('userId', '==', userId).where('orderStatus.isPaid', '==', true).get()\n\n\n      return getQuery(orderStatus).get() //.orderBy(\"fstsCreateDateTime_server\",\"desc\").get()\n      .then(function (snapshot) {\n        var rtnOrderInfo_list = snapshot.docs.map(function (item) {\n          var data = item.data();\n          return _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.OrderInfo.getOrderInfo_FromDbFormat(data);\n        }); // get all related product id\n\n        var list_productId = rtnOrderInfo_list.map(function (eachOrder) {\n          return eachOrder.getShopItems_ProdId();\n        });\n        list_productId = list_productId.flat(); //distinct list_productId\n\n        list_productId = _toConsumableArray(new Set(list_productId)); //sort\n\n        rtnOrderInfo_list.sort(function (a, b) {\n          return b.jsdtCreateDateTime_server - a.jsdtCreateDateTime_server;\n        });\n\n        var promiseAll_loadListProductInfo = _this.getArrayProductInfoFromDb_ByListProductId(list_productId);\n\n        return Promise.all([rtnOrderInfo_list, promiseAll_loadListProductInfo]);\n      }).then(function (array) {\n        var _array = _slicedToArray(array, 2),\n            orderInfo_list = _array[0],\n            list_products = _array[1];\n\n        list_products = list_products.flat();\n        var rtnOrderInfo_list = orderInfo_list.map(function (eachOrderInfo) {\n          //console.log('---------',eachOrderInfo[0])\n          eachOrderInfo.fillShopItems(list_products);\n          return eachOrderInfo; //console.log(element.orderId)\n        }); // rtnOrderInfo_list.forEach(eachOrderInfo => {\n        //     //console.log('---------',eachOrderInfo[0])\n        //     eachOrderInfo.fillShopItems(arrayDistinctProducts)\n        //     //console.log(element.orderId)\n        // });\n\n        /**@type {OrderInfo[]} */\n\n        console.log(\"LOG: ~ file: FirebaseMJS.js ~ line 371 ~ FirebaseMJS ~ .then ~ rtnOrderInfo_list\", rtnOrderInfo_list);\n        return rtnOrderInfo_list;\n      }); // .then((array) => {\n      //     let [orderInfo_list, list_productId] = array\n      //     /**@type {Array} - grouped array, ex:[ [1,3,5],[7,8,9],[13,23,54] ]*/\n      //     let listGroupProductId = FirebaseMJS.getGroupedArray_ByTimes(list_productId, 10)\n      //     // get firestore - Products in Id\n      //     let newPromise = (list_Limit_10_ProductIds) => {\n      //         return self._db.collection(FIRESTORE_COLLECTION.ProductInfo)\n      //             .where(self._firebase.firestore.FieldPath.documentId(), 'in', list_Limit_10_ProductIds) //['02d2bss3-0012','1c718och-0001'])\n      //             .get()\n      //     }\n      //     // console.log(newPromise)\n      //     let PromiseArray = []\n      //     //console.log(listGroupProductId[0])\n      //     PromiseArray.push(orderInfo_list)\n      //     //PromistArray.push(list_productId)\n      //     listGroupProductId.forEach((item) => {\n      //         PromiseArray.push(newPromise(item)) //listGroupProductId[0]))    \n      //     })\n      //     //PromistArray.push(newPromise(listGroupProductId[0]))\n      //     // PromistArray.push(newPromise(listGroupProductId[1]))\n      //     // for(let i=0;i<listGroupProductId.length;i++){\n      //     //     let list_Limit_10_ProductIds = listGroupProductId[i]\n      //     //     PromistArray.push(newPromise(list_Limit_10_ProductIds))\n      //     // }\n      //     return Promise.all(PromiseArray) //[orderInfo_list, list_productId, newPromise()])\n      // })\n      // .then((array) => {\n      //     let orderInfo_list = array.shift() // pop [0]\n      //     //let list_productId = array.splice(0, 1)\n      //     //let [orderInfo_list, list_productId, snapshot] = array\n      //     let arraySnapshot = array\n      //     let rtnOrderInfo_list = orderInfo_list\n      //     /**\n      //      * @type {ProductInfo[]} - distinct productInfo list\n      //      */\n      //     let arrayDistinctProducts = []\n      //     //collect distinct productInfo array\n      //     //arraySnapshot = arraySnapshot.flat(1)\n      //     let arrayDocs = []\n      //     arraySnapshot.forEach(snapshot => {\n      //         arrayDocs = arrayDocs.concat(snapshot.docs)\n      //     });\n      //     //arraySnapshot[0].docs, arraySnapshot[1].docs\n      //     //arrayDocs = arrayDocs.flat(1)\n      //     arrayDocs.forEach(element => {\n      //         /**@type {ProductInfo} */\n      //         let productInfo = element.data()\n      //         productInfo = Object.assign(new ProductInfo(), productInfo)\n      //         arrayDistinctProducts.push(productInfo)\n      //         //console.log(productInfo)\n      //     });\n      //     //fill ShopItems - _productInfo\n      //     //console.log('-----',rtnOrderInfo_list)\n      //     //rtnOrderInfo_list = rtnOrderInfo_list.flat(1)\n      //     rtnOrderInfo_list.forEach(eachOrderInfo => {\n      //         //console.log('---------',eachOrderInfo[0])\n      //         eachOrderInfo.fillShopItems(arrayDistinctProducts)\n      //         //console.log(element.orderId)\n      //     });\n      //     /**@type {OrderInfo[]} */\n      //     return rtnOrderInfo_list\n      // })\n    });\n\n    _defineProperty(this, \"getUser\", function () {\n      if (!_this._firebase.auth()) {\n        throw new Error('this._firebase.auth() is --->' + _this._firebase.auth());\n      }\n\n      if (_this._firebase.auth()) {\n        /**@ignore */\n        var pp = _this._firebase.auth();\n\n        if (pp) pp.currentUser.uid;\n      }\n\n      var uid = _this._firebase.auth().currentUser.uid;\n\n      _this.initDB();\n\n      return _this._db.collection(FIRESTORE_COLLECTION.Users).doc(uid).get().then(function (doc) {\n        return doc.data();\n      }); // .then((query) => {\n      //     console.log(query.docs)\n      // }\n      // )\n    });\n\n    this._firebase = firebase;\n    this._dataKits = dataKits;\n    /**\r\n     * initial-- use this.initStorageRef()\r\n     * @type {object} - this._firebase.storage().ref()\r\n     */\n\n    this._storageRef = null;\n    /**\r\n     * initial-- use this.initDb()\r\n     * @type {object} - this._firebase.firestore()\r\n     */\n\n    this._db = null;\n  }\n  /**@description initial this._firebase.storage().ref() */\n\n\n  _createClass(FirebaseMJS, [{\n    key: \"addProductInfo\",\n\n    /**\r\n     * @param {string} name \r\n     * @param {number} price\r\n     * @param {ENUM_ProductCategory} category - beef/chicken/soybean...etc\r\n     * @param {{beginEvent:function, endEvent:function}} [options] - callback functions\r\n     */\n    value: function addProductInfo(name, price, category, imgUrl, options) {\n      this.initDB();\n      var self = this;\n      var newAutoNum1 = {\n        docid: \"--AutoNum--\",\n        autoNum: 0,\n        updateDateTime: self._firebase.firestore.FieldValue.serverTimestamp()\n      };\n\n      var autoNum_DocRef = self._db.collection(FIRESTORE_COLLECTION.ProductInfo).doc(\"--AutoNum--\");\n\n      return self._db.runTransaction( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(transaction) {\n          var thisData, checkAutoNumExist, _checkAutoNumExist, nowNum, newNumber, newProdId, sNewNumber, newDocRef, prodInfo;\n\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _checkAutoNumExist = function _checkAutoNumExist3() {\n                    _checkAutoNumExist = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                      return regeneratorRuntime.wrap(function _callee$(_context) {\n                        while (1) {\n                          switch (_context.prev = _context.next) {\n                            case 0:\n                              if (!(thisData.autoNum_Doc.exists === false)) {\n                                _context.next = 3;\n                                break;\n                              }\n\n                              _context.next = 3;\n                              return autoNum_DocRef.set(newAutoNum1, {\n                                merge: true\n                              });\n\n                            case 3:\n                            case \"end\":\n                              return _context.stop();\n                          }\n                        }\n                      }, _callee);\n                    }));\n                    return _checkAutoNumExist.apply(this, arguments);\n                  };\n\n                  checkAutoNumExist = function _checkAutoNumExist2() {\n                    return _checkAutoNumExist.apply(this, arguments);\n                  };\n\n                  thisData = {\n                    autoNum_Doc: undefined\n                  }; // get autoNum_Doc\n\n                  _context2.next = 5;\n                  return transaction.get(autoNum_DocRef).then(function (autoNum_Doc) {\n                    thisData.autoNum_Doc = autoNum_Doc;\n                  });\n\n                case 5:\n                  _context2.next = 7;\n                  return checkAutoNumExist();\n\n                case 7:\n                  if (thisData.autoNum_Doc.exists === false) nowNum = newAutoNum1.autoNum;else {\n                    nowNum = thisData.autoNum_Doc.data().autoNum;\n                  }\n\n                  if (!(thisData.autoNum_Doc.exists === false)) {\n                    _context2.next = 11;\n                    break;\n                  }\n\n                  _context2.next = 11;\n                  return transaction.get(autoNum_DocRef);\n\n                case 11:\n                  // get new number and uuid\n                  newNumber = ++nowNum;\n                  transaction.update(autoNum_DocRef, {\n                    autoNum: newNumber,\n                    updateDateTime: self._firebase.firestore.FieldValue.serverTimestamp()\n                  }); // set new ProductInfo\n\n                  newProdId = Math.random().toString(36).substring(2, 5); // 36 carry bit, ignore '0.', get 8 char\n\n                  sNewNumber = newNumber.toString().padStart(4, \"0\");\n                  newProdId = \"\".concat(sNewNumber, \"-\").concat(newProdId); //let newProdId = `${sNowNum}-${getRandomId(3)}`\n                  //let newDoc = this._self._db.collection(FIRESTORE_COLLECTION.Products).doc(uuid)\n\n                  newDocRef = self._db.collection(FIRESTORE_COLLECTION.ProductInfo).doc(newProdId); // let prodInfo = {\n                  //     name: \"John\",\n                  //     autoNum: newNumber\n                  // }\n\n                  /**@type {import('../dataDefine/index.js').ProductInfo} */\n\n                  prodInfo = new _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.ProductInfo();\n                  prodInfo.productId = newProdId; // 0001-tds\n\n                  prodInfo.name = name; //\"白斬雞\"\n\n                  prodInfo.price = price; //140\n\n                  prodInfo.fstsAddDateTime_server = self._firebase.firestore.FieldValue.serverTimestamp();\n                  prodInfo.category = category;\n                  if (imgUrl) prodInfo.imgUrl = imgUrl; //prodInfo.tag = \"#\"\n                  //prodInfo.imgUrl = 'null'\n                  //prodInfo.imgFileName = 'null'\n\n                  prodInfo.autoNum = newNumber; // convert to plain object\n\n                  prodInfo = _lib_dataKits_js__WEBPACK_IMPORTED_MODULE_1__.getPlainObject(prodInfo); // prodInfo = Object.assign({}, prodInfo)\n                  // dataKits.recursiveToPlainObject(prodInfo)\n\n                  transaction.set(newDocRef, prodInfo);\n                  return _context2.abrupt(\"return\", newDocRef);\n\n                case 28:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n    /**@function - get doc.data() from FIRESTORE_COLLECTION.ProductInfo */\n\n  }, {\n    key: \"getProductInfo\",\n    value: function getProductInfo() {\n      this.initDB(); // if(userId)\n      //     fakeUid = userId\n\n      var rtnProductInfo_list = [];\n      var self = this;\n      return this._db.collection(FIRESTORE_COLLECTION.ProductInfo).get().then(function (snapshot) {\n        snapshot.forEach(function (element) {\n          var data = element.data();\n          if (data.hasOwnProperty('--AutoNum--')) return true;\n          var prodInfo = new _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.ProductInfo();\n          prodInfo = Object.assign(prodInfo, data); //prodInfo.fstsCreateDateTime_server = (prodInfo.fstsCreateDateTime_server == null) ? null : prodInfo.fstsCreateDateTime_server.toDate()\n\n          rtnProductInfo_list.push(prodInfo);\n        });\n        rtnProductInfo_list.sort(function (a, b) {\n          return b.autoNum - a.autoNum;\n        });\n        return rtnProductInfo_list;\n      });\n    } // getProducts = () => {\n    //     this.initDB();\n    //     let rtn_ProductInfo_List = []\n    //     return this._db.collection(FIRESTORE_COLLECTION.Products) //.where(\"autoNum\", \"==\", 7)\n    //         .get()\n    //         .then(function (querySnapshot) {\n    //             // let {docs} = querySnapshot\n    //             // console.log(docs[2].data())\n    //             //console.log(querySnapshot.docs[1].data())\n    //             querySnapshot.forEach(function (doc) {\n    //                 //console.log(doc.id)\n    //                 if (doc.id === '--AutoNum--')\n    //                     return true\n    //                 //console.log(111)\n    //                 // doc.data() is never undefined for query doc snapshots\n    //                 //console.log(doc.id)\n    //                 let data = doc.data()\n    //                 rtn_ProductInfo_List.push(data)\n    //                 // str += JSON.stringify(data)\n    //                 // console.log(doc.id, \" => \", doc.data());\n    //             });\n    //             //console.log(888)\n    //             return rtn_ProductInfo_List\n    //         })\n    //     // .catch(function (error) {\n    //     // });\n    // }\n\n    /**\r\n     * add OrderInfo to firestore.OrderInfo\r\n     * @param  {OrderInfo} orderInfo\r\n     */\n\n  }, {\n    key: \"addOrderInfo\",\n    value: function addOrderInfo(orderInfo, _) {\n      this.initDB();\n\n      var toDb_orderInfo = _.cloneDeep(orderInfo);\n\n      toDb_orderInfo = this._dataKits.getPlainObject(toDb_orderInfo); // if(this._dataKits.TypeOf(toDb_orderInfo) == this._dataKits.ENUM_TypeOf.objectClass)\n      //     this._dataKits.recursiveToPlainObject(toDb_orderInfo)\n\n      toDb_orderInfo.fstsCreateDateTime_server = this._firebase.firestore.FieldValue.serverTimestamp(); //clear function props\n      // let order = Object.assign({}, orderInfo);\n      // if (order.userData) {\n      //     order.userData = Object.assign({}, orderInfo.userData);\n      //     if (order.userData.userProfile)\n      //         order.userData.userProfile = Object.assign({}, orderInfo.userData.userProfile);\n      // }\n      //toDb_orderInfo.fstsCreateDateTime_server = this._firebase.firestore.FieldValue.serverTimestamp();\n      // removeFuncProp(order); //remove getShopItems_Id\n      // if (order.userData) {\n      //     removeFuncProp(order.userData);\n      //     if (order.userData.userProfile)\n      //         removeFuncProp(order.userData.userProfile);\n      // }\n\n      var autoNum_DocRef = this._db.collection(FIRESTORE_COLLECTION.OrderInfo).doc(\"--AutoNum--\");\n      /** identify the AutoNum is generated by self, not from other user.*/\n\n\n      var orderIdentityToken = Math.random().toString(36).substring(2, 7); // 36 carry bit, ignore '0.', get 8 char\n\n      var overrideAutoNum = {\n        docid: \"--AutoNum--\",\n        autoNum: this._firebase.firestore.FieldValue.increment(1),\n        updateDateTime: this._firebase.firestore.FieldValue.serverTimestamp(),\n        orderIdentityToken: orderIdentityToken // lastId:'',\n        // lastTime:firebase.firestore.FieldValue.serverTimestamp(),\n\n      }; // (node:15072) UnhandledPromiseRejectionWarning: FirebaseError: \n      // Firestore transactions require all reads to be executed before all writes.\n      //autoNumData.updateDateTime always exist in db, update first.\n\n      var self = this;\n      return autoNum_DocRef.set(overrideAutoNum, {\n        merge: true\n      }).then(function () {\n        return self._db.runTransaction( /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(transaction) {\n            var thisData, autoNumData, autoNewNumber, nowToday, preDayTime, newOrderId_obj, newDocRef;\n            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    thisData = {\n                      autoNum_Doc: undefined\n                    }; // get autoNum_Doc\n\n                    _context3.next = 3;\n                    return transaction.get(autoNum_DocRef).then(function (autoNum_Doc) {\n                      thisData.autoNum_Doc = autoNum_Doc; //return autoNum_DocRef\n                    });\n\n                  case 3:\n                    autoNumData = thisData.autoNum_Doc.data();\n\n                    if (!(autoNumData.orderIdentityToken !== orderIdentityToken)) {\n                      _context3.next = 6;\n                      break;\n                    }\n\n                    throw new Error('addOrderInfo collision occurs with other user (different orderIdentityToken).');\n\n                  case 6:\n                    autoNewNumber = autoNumData.autoNum; //updated from beginning.\n\n                    nowToday = autoNumData.updateDateTime; //updated from beginning                \n\n                    nowToday = getDate_From_Firestore_TimeStamp(nowToday); //convert format to js Date\n\n                    if (autoNumData.lastTime) preDayTime = autoNumData.lastTime;else preDayTime = autoNumData.updateDateTime; //updated from beginning\n\n                    preDayTime = getDate_From_Firestore_TimeStamp(preDayTime); //convert format to js Date\n\n                    newOrderId_obj = FirebaseMJS.getNewOrderInfoId(preDayTime, nowToday, autoNewNumber); //update lastId + lastTime\n\n                    transaction.update(autoNum_DocRef, {\n                      autoNum: newOrderId_obj.autoNum,\n                      lastId: newOrderId_obj.lastId,\n                      lastTime: nowToday //newOrderId_obj.lastTime\n\n                    });\n                    newDocRef = self._db.collection(FIRESTORE_COLLECTION.OrderInfo).doc(newOrderId_obj.lastId);\n                    toDb_orderInfo.orderId = newOrderId_obj.lastId; // let sss = this._firebase.firestore.FieldValue.serverTimestamp()\n                    // console.log('sss-->',sss)\n                    // toDb_orderInfo.fstsCreateDateTime_server = sss;\n\n                    transaction.set(newDocRef, toDb_orderInfo);\n                    return _context3.abrupt(\"return\", newDocRef);\n\n                  case 17:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3);\n          }));\n\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }());\n      });\n    }\n    /**\r\n     * \r\n     * @param {string} userId \r\n     * @param {ENUM_orderStatus} orderStatus \r\n     * @returns {Promise<OrderInfo[]>}\r\n     */\n\n  }, {\n    key: \"getArrayProductInfoFromDb_ByListProductId\",\n    //------- group list_productId limit -- 10\n    value: function getArrayProductInfoFromDb_ByListProductId(list_productId) {\n      /**@type {Array} - grouped array, ex:[ [1,3,5],[7,8,9],[13,23,54] ]*/\n      var listGroupProductId = FirebaseMJS.getGroupedArray_ByTimes(list_productId, 10); // get firestore - Products in Id\n\n      var self = this;\n\n      var newPromise = function newPromise(list_Limit_10_ProductIds) {\n        return self._db.collection(FIRESTORE_COLLECTION.ProductInfo).where(self._firebase.firestore.FieldPath.documentId(), 'in', list_Limit_10_ProductIds) //['02d2bss3-0012','1c718och-0001'])\n        .get().then(function (snapshot) {\n          var arrayProductInfo = snapshot.docs.map(function (item) {\n            return item.data();\n          });\n          return arrayProductInfo;\n        });\n      }; // console.log(newPromise)\n\n\n      var PromiseArray = []; //console.log(listGroupProductId[0])\n      //PromiseArray.push(orderInfo_list)\n      //PromistArray.push(list_productId)\n\n      listGroupProductId.forEach(function (item) {\n        PromiseArray.push(newPromise(item)); //listGroupProductId[0]))    \n      }); //PromistArray.push(newPromise(listGroupProductId[0]))\n      // PromistArray.push(newPromise(listGroupProductId[1]))\n      // for(let i=0;i<listGroupProductId.length;i++){\n      //     let list_Limit_10_ProductIds = listGroupProductId[i]\n      //     PromistArray.push(newPromise(list_Limit_10_ProductIds))\n      // }\n\n      return Promise.all(PromiseArray);\n    } // static getArrayProducts_ByListProductId(arrayProductId){\n    //     //distinct list_productId\n    //     let arrayDistinctProductId = [...new Set(arrayProductId)]\n    //     /**@type {Array} */\n    //     let listGroupProductId = FirebaseMJS.getGroupedArray_ByTimes(list_productId, 10)\n    //     // get firestore - Products in Id\n    //     let newPromise = (list_Limit_10_ProductIds) => {\n    //         return self._db.collection(FIRESTORE_COLLECTION.ProductInfo)\n    //             .where(self._firebase.firestore.FieldPath.documentId(), 'in', list_Limit_10_ProductIds) //['02d2bss3-0012','1c718och-0001'])\n    //             .get()\n    //     }\n    //     // console.log(newPromise)\n    //     let PromistArray = []\n    //     //console.log(listGroupProductId[0])\n    //     PromistArray.push(orderInfo_list)\n    //     //PromistArray.push(list_productId)\n    //     listGroupProductId.forEach((item) => {\n    //         PromistArray.push(newPromise(item)) //listGroupProductId[0]))    \n    //     })\n    //     //PromistArray.push(newPromise(listGroupProductId[0]))\n    //     // PromistArray.push(newPromise(listGroupProductId[1]))\n    //     // for(let i=0;i<listGroupProductId.length;i++){\n    //     //     let list_Limit_10_ProductIds = listGroupProductId[i]\n    //     //     PromistArray.push(newPromise(list_Limit_10_ProductIds))\n    //     // }\n    //     return Promise.all(PromistArray)\n    // }\n    //------- group list_productId limit -- 10\n\n  }], [{\n    key: \"getGroupedArray_ByTimes\",\n    value: function getGroupedArray_ByTimes(TargetArray, eachGroupCount) {\n      var rtnGroupedArray = []; // loop times\n\n      var doTimes = Math.ceil(TargetArray.length / eachGroupCount); //4\n\n      for (var i = 0; i < doTimes; i++) {\n        var newGroup = TargetArray.splice(0, eachGroupCount);\n        rtnGroupedArray.push(newGroup);\n      }\n\n      return rtnGroupedArray;\n    }\n    /**\r\n     * @function\r\n     * @return {Promise<object>} - firestore.Users.data()\r\n     */\n\n  }, {\n    key: \"getProductInfo_GroupedItems_ByCategory\",\n\n    /**\r\n     * @param {import('lodash')} _ \r\n     * @param {ProductInfo[]} listProductInfo \r\n     * @returns {import(\"./FirebaseMJS.js\").groupedCategory[]}\r\n     */\n    value: function getProductInfo_GroupedItems_ByCategory(_, listProductInfo) {\n      var groupedData = _(listProductInfo).groupBy('category').map(function (arrayGroupedItems, category) {\n        // return ''\n        // Object.\n        var categories = {\n          category: category,\n          categoryZhTW: _dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.Map_ProductCategory[category],\n          arrayGroupedItems: arrayGroupedItems,\n          ref: null\n        };\n        return categories; // return {\n        //     category,\n        //     name: _.map(arrayGroupedItems, 'name')\n        // }\n      }).value();\n\n      console.log(\"LOG: ~ file: FirebaseMJS.js ~ line 507 ~ FirebaseMJS ~ groupedData ~ groupedData\", groupedData); //console.log(d2)\n\n      return groupedData;\n    }\n    /**\r\n     * get new OrderInfo ID , check whether cross date or not.\r\n     * @param {Date} preDayTime \r\n     * @param {Date} nowTime \r\n     * @param {number} autoNewNumber \r\n     */\n\n  }, {\n    key: \"getNewOrderInfoId\",\n    value: function getNewOrderInfoId(preDayTime, nowTime, autoNewNumber) {\n      var sPreDayTime_8 = getDateString_correctTimeZone(preDayTime, 1);\n      var sNowToday_8 = getDateString_correctTimeZone(nowTime, 1);\n      var orderNumber;\n      var isCrossDate; //today is the same date with preDayTime\n\n      var newResult = {\n        lastId: '',\n        lastTime: new Date(),\n        isCrossDate: false //today is the same date with preDayTime\n\n      };\n\n      if (sPreDayTime_8 === sNowToday_8) {\n        //today is the same date with preDayTime\n        isCrossDate = false;\n        orderNumber = autoNewNumber;\n      } else {\n        //today is different date with preDayTime\n        isCrossDate = true;\n        orderNumber = 1;\n      }\n      /**\r\n       * @param {string} sDate \r\n       * @param {number} newAutoNum \r\n       */\n\n\n      var getNewID = function getNewID(sDate, newAutoNum) {\n        return \"\".concat(sDate).concat(String(newAutoNum).padStart(4, '0'));\n      }; //sNowToday_8 == correct locale timezone time\n\n\n      var lastId = getNewID(sNowToday_8, orderNumber);\n      newResult = {\n        autoNum: orderNumber,\n        lastId: lastId,\n        lastTime: nowTime,\n        isCrossDate: isCrossDate //today is the same date with preDayTime\n\n      };\n      return newResult;\n    }\n  }]);\n\n  return FirebaseMJS;\n}();\n/**\r\n * get 8 char string from date\r\n * @param {Date} inDate\r\n * @param {(1|2)} formatNo\r\n */\n\n\n\n\nfunction getDateString_correctTimeZone(inDate, formatNo) {\n  // correct timezone time -> inDate.getXXXX()\n  var yy = inDate.getFullYear();\n  var mm = inDate.getMonth() + 1;\n  var dd = inDate.getDate();\n  var MM = String(mm).padStart(2, '0');\n  var DD = String(dd).padStart(2, '0');\n\n  switch (formatNo) {\n    case 1:\n      return \"\".concat(yy).concat(MM).concat(DD);\n\n    default:\n      return '';\n  }\n}\n\nfunction getDate_From_Firestore_TimeStamp(fsTimestamp) {\n  var seconds = null;\n  if (fsTimestamp.seconds) seconds = fsTimestamp.seconds;else if (fsTimestamp._seconds) {\n    seconds = fsTimestamp._seconds;\n  }\n  if (seconds === null) return null;else return new Date(seconds * 1000);\n} // function removeFuncProp(obj) {\n//     for (let propName in obj) {\n//         if (typeof obj[propName] === 'function')\n//             delete obj[propName]\n//         //if(${typeof arry1[0][keyName]} == )\n//     }\n// }\n\nfunction Email_ResendPassword(emailAddress, inFirebase, swal, funcCloseModal) {\n  var auth = inFirebase.auth(); //var emailAddress = this.proxyUI.bindIptResentPwdEmail;\n\n  return auth.sendPasswordResetEmail(emailAddress).then(function () {\n    // Email sent.\n    swal.fire({\n      title: '提醒',\n      text: '密碼已寄出，請至信箱收信',\n      icon: 'success',\n      didOpen: function didOpen(htmlElement) {\n        $('.swal2-confirm').attr('data-testid', 'btnSwalConfirm'); //console.log(assertLog.registerSuccess(true))\n        //console.log(\"LOG: ~ file: cusModalLogin.js ~ line 311 ~ .then ~ htmlElement\", htmlElement)\n      }\n    }).then(function () {\n      //self.showModal(false)\n      if (funcCloseModal) funcCloseModal();\n    });\n  })[\"catch\"](function (error) {\n    // An error happened.\n    var errCode_ZhTW;\n    console.log(error.code);\n\n    switch (error.code) {\n      case 'auth/invalid-email':\n        errCode_ZhTW = '輸入錯誤';\n        break;\n\n      case 'auth/user-not-found':\n        errCode_ZhTW = '此Email帳號不存在';\n        break;\n\n      default:\n        errCode_ZhTW = error.code;\n        break;\n    }\n\n    swal.fire({\n      title: 'Error',\n      text: \"\".concat(errCode_ZhTW, \",\").concat(error.message),\n      icon: 'error' //confirmButtonText: 'Cool'\n\n    });\n  }); //this.showModal(false)\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9maXJlYmFzZS9GaXJlYmFzZU1KUy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2ZpcmViYXNlL0ZpcmViYXNlTUpTLmpzPzI0ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIFByb2R1Y3RJbmZvLFxyXG4gICAgT3JkZXJJbmZvLFxyXG4gICAgRU5VTV9Qcm9kdWN0Q2F0ZWdvcnksXHJcbiAgICBNYXBfUHJvZHVjdENhdGVnb3J5LFxyXG59IGZyb20gXCIuLi9kYXRhRGVmaW5lL2luZGV4LmpzXCI7XHJcbmltcG9ydCAqIGFzIGRhdGFLaXRzIGZyb20gJy4uL2xpYi9kYXRhS2l0cy5qcydcclxuLyoqQGVudW0ge3N0cmluZ30gKi9cclxuZXhwb3J0IGNvbnN0IE1JTUVfVFlQRSA9IHtcclxuICAgIGpwZzogJ2ltYWdlL2pwZWcnLFxyXG4gICAgcG5nOiAnaW1hZ2UvcG5nJyxcclxufVxyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5leHBvcnQgY29uc3QgRklSRVNUT1JFX0NPTExFQ1RJT04gPSB7XHJcbiAgICAvL1Byb2R1Y3RzOiBcIlByb2R1Y3RzXCIsXHJcbiAgICBQcm9kdWN0SW5mbzogXCJQcm9kdWN0SW5mb1wiLFxyXG4gICAgVXNlcnM6IFwiVXNlcnNcIixcclxuICAgIE9yZGVySW5mbzogXCJPcmRlckluZm9cIlxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmV4cG9ydCBjb25zdCBGSVJFU1RPUkFHRV9GT0xERVJTID0ge1xyXG4gICAgUHJvZHVjdHM6IFwiUHJvZHVjdHNcIlxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmV4cG9ydCBjb25zdCBFTlVNX29yZGVyU3RhdHVzID0ge1xyXG4gICAgYWxsOiAnYWxsJyxcclxuICAgIGNvbXBsZXRlZDogJ2NvbXBsZXRlZCcsXHJcbiAgICB3YWl0Rm9yUGF5OiAnd2FpdEZvclBheScsXHJcbiAgICB3YWl0Rm9yRGVsaXZlcnk6ICd3YWl0Rm9yRGVsaXZlcnknLFxyXG4gICAgY2FuY2VsZWQ6ICdjYW5jZWxlZCcsXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG1vZHVsZVxyXG4gKiBAY2xhc3MgXHJcbiAqIEBkZXNjcmlwdGlvbiBGaXJlYmFzZSBjbGFzc1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlyZWJhc2VNSlMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2ZpcmViYXNlfSBmaXJlYmFzZSAtIGZyb20gZmlyZWJhc2VcclxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9saWIvZGF0YUtpdHMuanMnKX0gZGF0YUtpdHNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZmlyZWJhc2UsIGRhdGFLaXRzKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZWJhc2UgPSBmaXJlYmFzZTtcclxuICAgICAgICB0aGlzLl9kYXRhS2l0cyA9IGRhdGFLaXRzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGluaXRpYWwtLSB1c2UgdGhpcy5pbml0U3RvcmFnZVJlZigpXHJcbiAgICAgICAgICogQHR5cGUge29iamVjdH0gLSB0aGlzLl9maXJlYmFzZS5zdG9yYWdlKCkucmVmKClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9zdG9yYWdlUmVmID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBpbml0aWFsLS0gdXNlIHRoaXMuaW5pdERiKClcclxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fSAtIHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZSgpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZGIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqQGRlc2NyaXB0aW9uIGluaXRpYWwgdGhpcy5fZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpICovXHJcbiAgICBpbml0U3RvcmFnZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5fc3RvcmFnZVJlZiA9PSBudWxsKVxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSByb290IHJlZmVyZW5jZVxyXG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlUmVmID0gdGhpcy5fZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpO1xyXG4gICAgfVxyXG4gICAgLyoqQGRlc2NyaXB0aW9uIGluaXRpYWwgdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlKCkqL1xyXG4gICAgaW5pdERCID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9kYiA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLl9kYiA9IHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmljZVxyXG4gICAgICogQHBhcmFtIHtFTlVNX1Byb2R1Y3RDYXRlZ29yeX0gY2F0ZWdvcnkgLSBiZWVmL2NoaWNrZW4vc295YmVhbi4uLmV0Y1xyXG4gICAgICogQHBhcmFtIHt7YmVnaW5FdmVudDpmdW5jdGlvbiwgZW5kRXZlbnQ6ZnVuY3Rpb259fSBbb3B0aW9uc10gLSBjYWxsYmFjayBmdW5jdGlvbnNcclxuICAgICAqL1xyXG4gICAgYWRkUHJvZHVjdEluZm8obmFtZSwgcHJpY2UsIGNhdGVnb3J5LCBpbWdVcmwsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIGxldCBuZXdBdXRvTnVtMSA9IHtcclxuICAgICAgICAgICAgZG9jaWQ6IFwiLS1BdXRvTnVtLS1cIixcclxuICAgICAgICAgICAgYXV0b051bTogMCxcclxuICAgICAgICAgICAgdXBkYXRlRGF0ZVRpbWU6IHNlbGYuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhdXRvTnVtX0RvY1JlZiA9IHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uUHJvZHVjdEluZm8pLmRvYyhcIi0tQXV0b051bS0tXCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fZGIucnVuVHJhbnNhY3Rpb24oYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0aGlzRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGF1dG9OdW1fRG9jOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBnZXQgYXV0b051bV9Eb2NcclxuICAgICAgICAgICAgYXdhaXQgdHJhbnNhY3Rpb24uZ2V0KGF1dG9OdW1fRG9jUmVmKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGF1dG9OdW1fRG9jKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0RhdGEuYXV0b051bV9Eb2MgPSBhdXRvTnVtX0RvY1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8tLS0tLS0gaWYgLS1BdXRvTnVtLS0gbm90IGV4aXN0LCBjcmVhdGUgbmV3IG9uZVxyXG4gICAgICAgICAgICAvLyBtdXN0IGJlIGEgZnVuY3Rpb24sIG9yIGNoZWNrQXV0b051bUV4aXN0KCkgd2lsbCBiZSBleGVjdXRlZCB0d2ljZVxyXG4gICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBjaGVja0F1dG9OdW1FeGlzdCgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzRGF0YS5hdXRvTnVtX0RvYy5leGlzdHMgPT09IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF1dG9OdW1fRG9jUmVmLnNldChuZXdBdXRvTnVtMSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgY2hlY2tBdXRvTnVtRXhpc3QoKTtcclxuICAgICAgICAgICAgLy8tLS0tLS1cclxuICAgICAgICAgICAgbGV0IG5vd051bVxyXG4gICAgICAgICAgICBpZiAodGhpc0RhdGEuYXV0b051bV9Eb2MuZXhpc3RzID09PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIG5vd051bSA9IG5ld0F1dG9OdW0xLmF1dG9OdW1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3dOdW0gPSB0aGlzRGF0YS5hdXRvTnVtX0RvYy5kYXRhKCkuYXV0b051bVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpc0RhdGEuYXV0b051bV9Eb2MuZXhpc3RzID09PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRyYW5zYWN0aW9uLmdldChhdXRvTnVtX0RvY1JlZilcclxuXHJcbiAgICAgICAgICAgIC8vIGdldCBuZXcgbnVtYmVyIGFuZCB1dWlkXHJcbiAgICAgICAgICAgIGxldCBuZXdOdW1iZXIgPSArK25vd051bVxyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi51cGRhdGUoYXV0b051bV9Eb2NSZWYsIHtcclxuICAgICAgICAgICAgICAgIGF1dG9OdW06IG5ld051bWJlcixcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGVUaW1lOiBzZWxmLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gc2V0IG5ldyBQcm9kdWN0SW5mb1xyXG4gICAgICAgICAgICBsZXQgbmV3UHJvZElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDUpIC8vIDM2IGNhcnJ5IGJpdCwgaWdub3JlICcwLicsIGdldCA4IGNoYXJcclxuICAgICAgICAgICAgbGV0IHNOZXdOdW1iZXIgPSBuZXdOdW1iZXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCBcIjBcIilcclxuICAgICAgICAgICAgbmV3UHJvZElkID0gYCR7c05ld051bWJlcn0tJHtuZXdQcm9kSWR9YFxyXG4gICAgICAgICAgICAvL2xldCBuZXdQcm9kSWQgPSBgJHtzTm93TnVtfS0ke2dldFJhbmRvbUlkKDMpfWBcclxuICAgICAgICAgICAgLy9sZXQgbmV3RG9jID0gdGhpcy5fc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0cykuZG9jKHV1aWQpXHJcbiAgICAgICAgICAgIGxldCBuZXdEb2NSZWYgPSBzZWxmLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RJbmZvKS5kb2MobmV3UHJvZElkKVxyXG4gICAgICAgICAgICAvLyBsZXQgcHJvZEluZm8gPSB7XHJcbiAgICAgICAgICAgIC8vICAgICBuYW1lOiBcIkpvaG5cIixcclxuICAgICAgICAgICAgLy8gICAgIGF1dG9OdW06IG5ld051bWJlclxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8qKkB0eXBlIHtpbXBvcnQoJy4uL2RhdGFEZWZpbmUvaW5kZXguanMnKS5Qcm9kdWN0SW5mb30gKi9cclxuICAgICAgICAgICAgbGV0IHByb2RJbmZvID0gbmV3IFByb2R1Y3RJbmZvKCk7XHJcbiAgICAgICAgICAgIHByb2RJbmZvLnByb2R1Y3RJZCA9IG5ld1Byb2RJZCAvLyAwMDAxLXRkc1xyXG4gICAgICAgICAgICBwcm9kSW5mby5uYW1lID0gbmFtZSAvL1wi55m95pas6ZueXCJcclxuICAgICAgICAgICAgcHJvZEluZm8ucHJpY2UgPSBwcmljZSAvLzE0MFxyXG4gICAgICAgICAgICBwcm9kSW5mby5mc3RzQWRkRGF0ZVRpbWVfc2VydmVyID0gc2VsZi5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClcclxuICAgICAgICAgICAgcHJvZEluZm8uY2F0ZWdvcnkgPSBjYXRlZ29yeVxyXG4gICAgICAgICAgICBpZiAoaW1nVXJsKVxyXG4gICAgICAgICAgICAgICAgcHJvZEluZm8uaW1nVXJsID0gaW1nVXJsXHJcbiAgICAgICAgICAgIC8vcHJvZEluZm8udGFnID0gXCIjXCJcclxuICAgICAgICAgICAgLy9wcm9kSW5mby5pbWdVcmwgPSAnbnVsbCdcclxuICAgICAgICAgICAgLy9wcm9kSW5mby5pbWdGaWxlTmFtZSA9ICdudWxsJ1xyXG4gICAgICAgICAgICBwcm9kSW5mby5hdXRvTnVtID0gbmV3TnVtYmVyXHJcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdG8gcGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgIHByb2RJbmZvID0gZGF0YUtpdHMuZ2V0UGxhaW5PYmplY3QocHJvZEluZm8pXHJcbiAgICAgICAgICAgIC8vIHByb2RJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvZEluZm8pXHJcbiAgICAgICAgICAgIC8vIGRhdGFLaXRzLnJlY3Vyc2l2ZVRvUGxhaW5PYmplY3QocHJvZEluZm8pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5zZXQobmV3RG9jUmVmLCBwcm9kSW5mbylcclxuICAgICAgICAgICAgcmV0dXJuIG5ld0RvY1JlZlxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG4gICAgLyoqQGZ1bmN0aW9uIC0gZ2V0IGRvYy5kYXRhKCkgZnJvbSBGSVJFU1RPUkVfQ09MTEVDVElPTi5Qcm9kdWN0SW5mbyAqL1xyXG4gICAgZ2V0UHJvZHVjdEluZm8gKCl7XHJcbiAgICAgICAgdGhpcy5pbml0REIoKTtcclxuXHJcbiAgICAgICAgLy8gaWYodXNlcklkKVxyXG4gICAgICAgIC8vICAgICBmYWtlVWlkID0gdXNlcklkXHJcbiAgICAgICAgbGV0IHJ0blByb2R1Y3RJbmZvX2xpc3QgPSBbXVxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RJbmZvKS5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHtcclxuICAgICAgICAgICAgICAgIHNuYXBzaG90LmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBlbGVtZW50LmRhdGEoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KCctLUF1dG9OdW0tLScpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvZEluZm8gPSBuZXcgUHJvZHVjdEluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kSW5mbyA9IE9iamVjdC5hc3NpZ24ocHJvZEluZm8sIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcHJvZEluZm8uZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlciA9IChwcm9kSW5mby5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyID09IG51bGwpID8gbnVsbCA6IHByb2RJbmZvLmZzdHNDcmVhdGVEYXRlVGltZV9zZXJ2ZXIudG9EYXRlKClcclxuICAgICAgICAgICAgICAgICAgICBydG5Qcm9kdWN0SW5mb19saXN0LnB1c2gocHJvZEluZm8pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBydG5Qcm9kdWN0SW5mb19saXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5hdXRvTnVtIC0gYS5hdXRvTnVtXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ0blByb2R1Y3RJbmZvX2xpc3Q7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvLyBnZXRQcm9kdWN0cyA9ICgpID0+IHtcclxuICAgIC8vICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgLy8gICAgIGxldCBydG5fUHJvZHVjdEluZm9fTGlzdCA9IFtdXHJcblxyXG4gICAgLy8gICAgIHJldHVybiB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RzKSAvLy53aGVyZShcImF1dG9OdW1cIiwgXCI9PVwiLCA3KVxyXG4gICAgLy8gICAgICAgICAuZ2V0KClcclxuICAgIC8vICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHtcclxuICAgIC8vICAgICAgICAgICAgIC8vIGxldCB7ZG9jc30gPSBxdWVyeVNuYXBzaG90XHJcbiAgICAvLyAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2NzWzJdLmRhdGEoKSlcclxuICAgIC8vICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocXVlcnlTbmFwc2hvdC5kb2NzWzFdLmRhdGEoKSlcclxuICAgIC8vICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkb2MuaWQpXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGRvYy5pZCA9PT0gJy0tQXV0b051bS0tJylcclxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIC8vICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKDExMSlcclxuICAgIC8vICAgICAgICAgICAgICAgICAvLyBkb2MuZGF0YSgpIGlzIG5ldmVyIHVuZGVmaW5lZCBmb3IgcXVlcnkgZG9jIHNuYXBzaG90c1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZG9jLmlkKVxyXG4gICAgLy8gICAgICAgICAgICAgICAgIGxldCBkYXRhID0gZG9jLmRhdGEoKVxyXG4gICAgLy8gICAgICAgICAgICAgICAgIHJ0bl9Qcm9kdWN0SW5mb19MaXN0LnB1c2goZGF0YSlcclxuICAgIC8vICAgICAgICAgICAgICAgICAvLyBzdHIgKz0gSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgIC8vICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2MuaWQsIFwiID0+IFwiLCBkb2MuZGF0YSgpKTtcclxuXHJcbiAgICAvLyAgICAgICAgICAgICB9KTtcclxuICAgIC8vICAgICAgICAgICAgIC8vY29uc29sZS5sb2coODg4KVxyXG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIHJ0bl9Qcm9kdWN0SW5mb19MaXN0XHJcbiAgICAvLyAgICAgICAgIH0pXHJcbiAgICAvLyAgICAgLy8gLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgLy8gICAgIC8vIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgLyoqXHJcbiAgICAgKiBhZGQgT3JkZXJJbmZvIHRvIGZpcmVzdG9yZS5PcmRlckluZm9cclxuICAgICAqIEBwYXJhbSAge09yZGVySW5mb30gb3JkZXJJbmZvXHJcbiAgICAgKi9cclxuICAgIGFkZE9yZGVySW5mbyhvcmRlckluZm8sIF8pIHtcclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG4gICAgICAgIGxldCB0b0RiX29yZGVySW5mbyA9IF8uY2xvbmVEZWVwKG9yZGVySW5mbylcclxuICAgICAgICB0b0RiX29yZGVySW5mbyA9IHRoaXMuX2RhdGFLaXRzLmdldFBsYWluT2JqZWN0KHRvRGJfb3JkZXJJbmZvKVxyXG4gICAgICAgIC8vIGlmKHRoaXMuX2RhdGFLaXRzLlR5cGVPZih0b0RiX29yZGVySW5mbykgPT0gdGhpcy5fZGF0YUtpdHMuRU5VTV9UeXBlT2Yub2JqZWN0Q2xhc3MpXHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2RhdGFLaXRzLnJlY3Vyc2l2ZVRvUGxhaW5PYmplY3QodG9EYl9vcmRlckluZm8pXHJcbiAgICAgICAgdG9EYl9vcmRlckluZm8uZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlciA9IHRoaXMuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vY2xlYXIgZnVuY3Rpb24gcHJvcHNcclxuICAgICAgICAvLyBsZXQgb3JkZXIgPSBPYmplY3QuYXNzaWduKHt9LCBvcmRlckluZm8pO1xyXG4gICAgICAgIC8vIGlmIChvcmRlci51c2VyRGF0YSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vICAgICBvcmRlci51c2VyRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIG9yZGVySW5mby51c2VyRGF0YSk7XHJcbiAgICAgICAgLy8gICAgIGlmIChvcmRlci51c2VyRGF0YS51c2VyUHJvZmlsZSlcclxuICAgICAgICAvLyAgICAgICAgIG9yZGVyLnVzZXJEYXRhLnVzZXJQcm9maWxlID0gT2JqZWN0LmFzc2lnbih7fSwgb3JkZXJJbmZvLnVzZXJEYXRhLnVzZXJQcm9maWxlKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy90b0RiX29yZGVySW5mby5mc3RzQ3JlYXRlRGF0ZVRpbWVfc2VydmVyID0gdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVtb3ZlRnVuY1Byb3Aob3JkZXIpOyAvL3JlbW92ZSBnZXRTaG9wSXRlbXNfSWRcclxuICAgICAgICAvLyBpZiAob3JkZXIudXNlckRhdGEpIHtcclxuICAgICAgICAvLyAgICAgcmVtb3ZlRnVuY1Byb3Aob3JkZXIudXNlckRhdGEpO1xyXG4gICAgICAgIC8vICAgICBpZiAob3JkZXIudXNlckRhdGEudXNlclByb2ZpbGUpXHJcbiAgICAgICAgLy8gICAgICAgICByZW1vdmVGdW5jUHJvcChvcmRlci51c2VyRGF0YS51c2VyUHJvZmlsZSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBsZXQgYXV0b051bV9Eb2NSZWYgPSB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykuZG9jKFwiLS1BdXRvTnVtLS1cIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqIGlkZW50aWZ5IHRoZSBBdXRvTnVtIGlzIGdlbmVyYXRlZCBieSBzZWxmLCBub3QgZnJvbSBvdGhlciB1c2VyLiovXHJcbiAgICAgICAgbGV0IG9yZGVySWRlbnRpdHlUb2tlbiA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA3KSAvLyAzNiBjYXJyeSBiaXQsIGlnbm9yZSAnMC4nLCBnZXQgOCBjaGFyXHJcbiAgICAgICAgbGV0IG92ZXJyaWRlQXV0b051bSA9IHtcclxuICAgICAgICAgICAgZG9jaWQ6IFwiLS1BdXRvTnVtLS1cIixcclxuICAgICAgICAgICAgYXV0b051bTogdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuaW5jcmVtZW50KDEpLFxyXG4gICAgICAgICAgICB1cGRhdGVEYXRlVGltZTogdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICAgICAgICAgIG9yZGVySWRlbnRpdHlUb2tlbjogb3JkZXJJZGVudGl0eVRva2VuLFxyXG4gICAgICAgICAgICAvLyBsYXN0SWQ6JycsXHJcbiAgICAgICAgICAgIC8vIGxhc3RUaW1lOmZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpLFxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIChub2RlOjE1MDcyKSBVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZzogRmlyZWJhc2VFcnJvcjogXHJcbiAgICAgICAgLy8gRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cclxuICAgICAgICAvL2F1dG9OdW1EYXRhLnVwZGF0ZURhdGVUaW1lIGFsd2F5cyBleGlzdCBpbiBkYiwgdXBkYXRlIGZpcnN0LlxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIHJldHVybiBhdXRvTnVtX0RvY1JlZi5zZXQob3ZlcnJpZGVBdXRvTnVtLCB7XHJcbiAgICAgICAgICAgICAgICBtZXJnZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9kYi5ydW5UcmFuc2FjdGlvbihhc3luYyAodHJhbnNhY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGhpc0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9OdW1fRG9jOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGF1dG9OdW1fRG9jXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhbnNhY3Rpb24uZ2V0KGF1dG9OdW1fRG9jUmVmKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoYXV0b051bV9Eb2MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNEYXRhLmF1dG9OdW1fRG9jID0gYXV0b051bV9Eb2NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIGF1dG9OdW1fRG9jUmVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhdXRvTnVtRGF0YSA9IHRoaXNEYXRhLmF1dG9OdW1fRG9jLmRhdGEoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdXRvTnVtRGF0YS5vcmRlcklkZW50aXR5VG9rZW4gIT09IG9yZGVySWRlbnRpdHlUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhZGRPcmRlckluZm8gY29sbGlzaW9uIG9jY3VycyB3aXRoIG90aGVyIHVzZXIgKGRpZmZlcmVudCBvcmRlcklkZW50aXR5VG9rZW4pLicpXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF1dG9OZXdOdW1iZXIgPSBhdXRvTnVtRGF0YS5hdXRvTnVtIC8vdXBkYXRlZCBmcm9tIGJlZ2lubmluZy5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vd1RvZGF5ID0gYXV0b051bURhdGEudXBkYXRlRGF0ZVRpbWU7IC8vdXBkYXRlZCBmcm9tIGJlZ2lubmluZyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBub3dUb2RheSA9IGdldERhdGVfRnJvbV9GaXJlc3RvcmVfVGltZVN0YW1wKG5vd1RvZGF5KSAvL2NvbnZlcnQgZm9ybWF0IHRvIGpzIERhdGVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByZURheVRpbWVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXV0b051bURhdGEubGFzdFRpbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZURheVRpbWUgPSBhdXRvTnVtRGF0YS5sYXN0VGltZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlRGF5VGltZSA9IGF1dG9OdW1EYXRhLnVwZGF0ZURhdGVUaW1lOyAvL3VwZGF0ZWQgZnJvbSBiZWdpbm5pbmdcclxuICAgICAgICAgICAgICAgICAgICBwcmVEYXlUaW1lID0gZ2V0RGF0ZV9Gcm9tX0ZpcmVzdG9yZV9UaW1lU3RhbXAocHJlRGF5VGltZSkgLy9jb252ZXJ0IGZvcm1hdCB0byBqcyBEYXRlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdPcmRlcklkX29iaiA9IEZpcmViYXNlTUpTLmdldE5ld09yZGVySW5mb0lkKHByZURheVRpbWUsIG5vd1RvZGF5LCBhdXRvTmV3TnVtYmVyKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3VwZGF0ZSBsYXN0SWQgKyBsYXN0VGltZVxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShhdXRvTnVtX0RvY1JlZiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvTnVtOiBuZXdPcmRlcklkX29iai5hdXRvTnVtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0SWQ6IG5ld09yZGVySWRfb2JqLmxhc3RJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFRpbWU6IG5vd1RvZGF5IC8vbmV3T3JkZXJJZF9vYmoubGFzdFRpbWVcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jUmVmID0gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLmRvYyhuZXdPcmRlcklkX29iai5sYXN0SWQpXHJcbiAgICAgICAgICAgICAgICAgICAgdG9EYl9vcmRlckluZm8ub3JkZXJJZCA9IG5ld09yZGVySWRfb2JqLmxhc3RJZDtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgc3NzID0gdGhpcy5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc3NzLS0+Jyxzc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9EYl9vcmRlckluZm8uZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlciA9IHNzcztcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5zZXQobmV3RG9jUmVmLCB0b0RiX29yZGVySW5mbylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3RG9jUmVmXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIFxyXG4gICAgICogQHBhcmFtIHtFTlVNX29yZGVyU3RhdHVzfSBvcmRlclN0YXR1cyBcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9yZGVySW5mb1tdPn1cclxuICAgICAqL1xyXG4gICAgZ2V0T3JkZXJJbmZvID0gKHVzZXJJZCwgb3JkZXJTdGF0dXMpID0+IHtcclxuICAgICAgICB0aGlzLmluaXREQigpO1xyXG5cclxuICAgICAgICAvLyBpZih1c2VySWQpXHJcbiAgICAgICAgLy8gICAgIGZha2VVaWQgPSB1c2VySWRcclxuICAgICAgICAvL2xldCBydG5PcmRlckluZm9fbGlzdD1bXVxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG5cclxuICAgICAgICAvKipAcGFyYW0ge0VOVU1fb3JkZXJTdGF0dXN9IGluT3JkZXJTdGF0dXMgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRRdWVyeShpbk9yZGVyU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaW5PcmRlclN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFTlVNX29yZGVyU3RhdHVzLmFsbDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpXHJcbiAgICAgICAgICAgICAgICBjYXNlIEVOVU1fb3JkZXJTdGF0dXMuY29tcGxldGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykud2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkud2hlcmUoJ29yZGVyU3RhdHVzLmlzQ29tcGxldGVkJywgJz09JywgdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9vcmRlclN0YXR1cy53YWl0Rm9yUGF5OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykud2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkud2hlcmUoJ29yZGVyU3RhdHVzLmlzUGFpZCcsICc9PScsIGZhbHNlKS53aGVyZSgnb3JkZXJTdGF0dXMuaXNDYW5jZWxlZCcsICc9PScsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFTlVNX29yZGVyU3RhdHVzLndhaXRGb3JEZWxpdmVyeTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5PcmRlckluZm8pLndoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLndoZXJlKCdvcmRlclN0YXR1cy5pc1BhaWQnLCAnPT0nLCB0cnVlKS53aGVyZSgnb3JkZXJTdGF0dXMuaXNEZWxpdmVyeScsICc9PScsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFTlVNX29yZGVyU3RhdHVzLmNhbmNlbGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykud2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkud2hlcmUoJ29yZGVyU3RhdHVzLmlzQ2FuY2VsZWQnLCAnPT0nLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL3JldHVybiB0aGlzLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLk9yZGVySW5mbykud2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkud2hlcmUoJ29yZGVyU3RhdHVzLmlzUGFpZCcsICc9PScsIHRydWUpLmdldCgpXHJcbiAgICAgICAgcmV0dXJuIGdldFF1ZXJ5KG9yZGVyU3RhdHVzKS5nZXQoKSAvLy5vcmRlckJ5KFwiZnN0c0NyZWF0ZURhdGVUaW1lX3NlcnZlclwiLFwiZGVzY1wiKS5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcnRuT3JkZXJJbmZvX2xpc3QgPSBzbmFwc2hvdC5kb2NzLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gaXRlbS5kYXRhKClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT3JkZXJJbmZvLmdldE9yZGVySW5mb19Gcm9tRGJGb3JtYXQoZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyBnZXQgYWxsIHJlbGF0ZWQgcHJvZHVjdCBpZFxyXG4gICAgICAgICAgICAgICAgbGV0IGxpc3RfcHJvZHVjdElkID0gcnRuT3JkZXJJbmZvX2xpc3QubWFwKChlYWNoT3JkZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWFjaE9yZGVyLmdldFNob3BJdGVtc19Qcm9kSWQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBsaXN0X3Byb2R1Y3RJZCA9IGxpc3RfcHJvZHVjdElkLmZsYXQoKVxyXG4gICAgICAgICAgICAgICAgLy9kaXN0aW5jdCBsaXN0X3Byb2R1Y3RJZFxyXG4gICAgICAgICAgICAgICAgbGlzdF9wcm9kdWN0SWQgPSBbLi4ubmV3IFNldChsaXN0X3Byb2R1Y3RJZCldXHJcbiAgICAgICAgICAgICAgICAvL3NvcnRcclxuICAgICAgICAgICAgICAgIHJ0bk9yZGVySW5mb19saXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5qc2R0Q3JlYXRlRGF0ZVRpbWVfc2VydmVyIC0gYS5qc2R0Q3JlYXRlRGF0ZVRpbWVfc2VydmVyXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgbGV0IHByb21pc2VBbGxfbG9hZExpc3RQcm9kdWN0SW5mbyA9IHRoaXMuZ2V0QXJyYXlQcm9kdWN0SW5mb0Zyb21EYl9CeUxpc3RQcm9kdWN0SWQobGlzdF9wcm9kdWN0SWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtydG5PcmRlckluZm9fbGlzdCwgcHJvbWlzZUFsbF9sb2FkTGlzdFByb2R1Y3RJbmZvXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKGFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgW29yZGVySW5mb19saXN0LCBsaXN0X3Byb2R1Y3RzXSA9IGFycmF5XHJcbiAgICAgICAgICAgICAgICBsaXN0X3Byb2R1Y3RzID0gbGlzdF9wcm9kdWN0cy5mbGF0KClcclxuICAgICAgICAgICAgICAgIGxldCBydG5PcmRlckluZm9fbGlzdCA9IG9yZGVySW5mb19saXN0Lm1hcChlYWNoT3JkZXJJbmZvID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCctLS0tLS0tLS0nLGVhY2hPcmRlckluZm9bMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgZWFjaE9yZGVySW5mby5maWxsU2hvcEl0ZW1zKGxpc3RfcHJvZHVjdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVhY2hPcmRlckluZm9cclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGVsZW1lbnQub3JkZXJJZClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gcnRuT3JkZXJJbmZvX2xpc3QuZm9yRWFjaChlYWNoT3JkZXJJbmZvID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKCctLS0tLS0tLS0nLGVhY2hPcmRlckluZm9bMF0pXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZWFjaE9yZGVySW5mby5maWxsU2hvcEl0ZW1zKGFycmF5RGlzdGluY3RQcm9kdWN0cylcclxuICAgICAgICAgICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKGVsZW1lbnQub3JkZXJJZClcclxuICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgICAgLyoqQHR5cGUge09yZGVySW5mb1tdfSAqL1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMT0c6IH4gZmlsZTogRmlyZWJhc2VNSlMuanMgfiBsaW5lIDM3MSB+IEZpcmViYXNlTUpTIH4gLnRoZW4gfiBydG5PcmRlckluZm9fbGlzdFwiLCBydG5PcmRlckluZm9fbGlzdClcclxuICAgICAgICAgICAgICAgIHJldHVybiBydG5PcmRlckluZm9fbGlzdFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIC50aGVuKChhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IFtvcmRlckluZm9fbGlzdCwgbGlzdF9wcm9kdWN0SWRdID0gYXJyYXlcclxuICAgICAgICAgICAgLy8gICAgIC8qKkB0eXBlIHtBcnJheX0gLSBncm91cGVkIGFycmF5LCBleDpbIFsxLDMsNV0sWzcsOCw5XSxbMTMsMjMsNTRdIF0qL1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IGxpc3RHcm91cFByb2R1Y3RJZCA9IEZpcmViYXNlTUpTLmdldEdyb3VwZWRBcnJheV9CeVRpbWVzKGxpc3RfcHJvZHVjdElkLCAxMClcclxuICAgICAgICAgICAgLy8gICAgIC8vIGdldCBmaXJlc3RvcmUgLSBQcm9kdWN0cyBpbiBJZFxyXG4gICAgICAgICAgICAvLyAgICAgbGV0IG5ld1Byb21pc2UgPSAobGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uUHJvZHVjdEluZm8pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIC53aGVyZShzZWxmLl9maXJlYmFzZS5maXJlc3RvcmUuRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgJ2luJywgbGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzKSAvL1snMDJkMmJzczMtMDAxMicsJzFjNzE4b2NoLTAwMDEnXSlcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgLmdldCgpXHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyhuZXdQcm9taXNlKVxyXG4gICAgICAgICAgICAvLyAgICAgbGV0IFByb21pc2VBcnJheSA9IFtdXHJcbiAgICAgICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKGxpc3RHcm91cFByb2R1Y3RJZFswXSlcclxuICAgICAgICAgICAgLy8gICAgIFByb21pc2VBcnJheS5wdXNoKG9yZGVySW5mb19saXN0KVxyXG4gICAgICAgICAgICAvLyAgICAgLy9Qcm9taXN0QXJyYXkucHVzaChsaXN0X3Byb2R1Y3RJZClcclxuICAgICAgICAgICAgLy8gICAgIGxpc3RHcm91cFByb2R1Y3RJZC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgUHJvbWlzZUFycmF5LnB1c2gobmV3UHJvbWlzZShpdGVtKSkgLy9saXN0R3JvdXBQcm9kdWN0SWRbMF0pKSAgICBcclxuICAgICAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgICAgIC8vICAgICAvL1Byb21pc3RBcnJheS5wdXNoKG5ld1Byb21pc2UobGlzdEdyb3VwUHJvZHVjdElkWzBdKSlcclxuICAgICAgICAgICAgLy8gICAgIC8vIFByb21pc3RBcnJheS5wdXNoKG5ld1Byb21pc2UobGlzdEdyb3VwUHJvZHVjdElkWzFdKSlcclxuICAgICAgICAgICAgLy8gICAgIC8vIGZvcihsZXQgaT0wO2k8bGlzdEdyb3VwUHJvZHVjdElkLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAvLyAgICAgLy8gICAgIGxldCBsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMgPSBsaXN0R3JvdXBQcm9kdWN0SWRbaV1cclxuICAgICAgICAgICAgLy8gICAgIC8vICAgICBQcm9taXN0QXJyYXkucHVzaChuZXdQcm9taXNlKGxpc3RfTGltaXRfMTBfUHJvZHVjdElkcykpXHJcbiAgICAgICAgICAgIC8vICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gUHJvbWlzZS5hbGwoUHJvbWlzZUFycmF5KSAvL1tvcmRlckluZm9fbGlzdCwgbGlzdF9wcm9kdWN0SWQsIG5ld1Byb21pc2UoKV0pXHJcbiAgICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgIC8vIC50aGVuKChhcnJheSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgLy8gICAgIGxldCBvcmRlckluZm9fbGlzdCA9IGFycmF5LnNoaWZ0KCkgLy8gcG9wIFswXVxyXG4gICAgICAgICAgICAvLyAgICAgLy9sZXQgbGlzdF9wcm9kdWN0SWQgPSBhcnJheS5zcGxpY2UoMCwgMSlcclxuICAgICAgICAgICAgLy8gICAgIC8vbGV0IFtvcmRlckluZm9fbGlzdCwgbGlzdF9wcm9kdWN0SWQsIHNuYXBzaG90XSA9IGFycmF5XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgYXJyYXlTbmFwc2hvdCA9IGFycmF5XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgcnRuT3JkZXJJbmZvX2xpc3QgPSBvcmRlckluZm9fbGlzdFxyXG4gICAgICAgICAgICAvLyAgICAgLyoqXHJcbiAgICAgICAgICAgIC8vICAgICAgKiBAdHlwZSB7UHJvZHVjdEluZm9bXX0gLSBkaXN0aW5jdCBwcm9kdWN0SW5mbyBsaXN0XHJcbiAgICAgICAgICAgIC8vICAgICAgKi9cclxuICAgICAgICAgICAgLy8gICAgIGxldCBhcnJheURpc3RpbmN0UHJvZHVjdHMgPSBbXVxyXG4gICAgICAgICAgICAvLyAgICAgLy9jb2xsZWN0IGRpc3RpbmN0IHByb2R1Y3RJbmZvIGFycmF5XHJcbiAgICAgICAgICAgIC8vICAgICAvL2FycmF5U25hcHNob3QgPSBhcnJheVNuYXBzaG90LmZsYXQoMSlcclxuICAgICAgICAgICAgLy8gICAgIGxldCBhcnJheURvY3MgPSBbXVxyXG4gICAgICAgICAgICAvLyAgICAgYXJyYXlTbmFwc2hvdC5mb3JFYWNoKHNuYXBzaG90ID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBhcnJheURvY3MgPSBhcnJheURvY3MuY29uY2F0KHNuYXBzaG90LmRvY3MpXHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gICAgIC8vYXJyYXlTbmFwc2hvdFswXS5kb2NzLCBhcnJheVNuYXBzaG90WzFdLmRvY3NcclxuICAgICAgICAgICAgLy8gICAgIC8vYXJyYXlEb2NzID0gYXJyYXlEb2NzLmZsYXQoMSlcclxuICAgICAgICAgICAgLy8gICAgIGFycmF5RG9jcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIC8qKkB0eXBlIHtQcm9kdWN0SW5mb30gKi9cclxuICAgICAgICAgICAgLy8gICAgICAgICBsZXQgcHJvZHVjdEluZm8gPSBlbGVtZW50LmRhdGEoKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHByb2R1Y3RJbmZvID0gT2JqZWN0LmFzc2lnbihuZXcgUHJvZHVjdEluZm8oKSwgcHJvZHVjdEluZm8pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgYXJyYXlEaXN0aW5jdFByb2R1Y3RzLnB1c2gocHJvZHVjdEluZm8pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy9jb25zb2xlLmxvZyhwcm9kdWN0SW5mbylcclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgLy9maWxsIFNob3BJdGVtcyAtIF9wcm9kdWN0SW5mb1xyXG5cclxuICAgICAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2coJy0tLS0tJyxydG5PcmRlckluZm9fbGlzdClcclxuICAgICAgICAgICAgLy8gICAgIC8vcnRuT3JkZXJJbmZvX2xpc3QgPSBydG5PcmRlckluZm9fbGlzdC5mbGF0KDEpXHJcbiAgICAgICAgICAgIC8vICAgICBydG5PcmRlckluZm9fbGlzdC5mb3JFYWNoKGVhY2hPcmRlckluZm8gPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIC8vY29uc29sZS5sb2coJy0tLS0tLS0tLScsZWFjaE9yZGVySW5mb1swXSlcclxuICAgICAgICAgICAgLy8gICAgICAgICBlYWNoT3JkZXJJbmZvLmZpbGxTaG9wSXRlbXMoYXJyYXlEaXN0aW5jdFByb2R1Y3RzKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIC8vY29uc29sZS5sb2coZWxlbWVudC5vcmRlcklkKVxyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICAgICAvKipAdHlwZSB7T3JkZXJJbmZvW119ICovXHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gcnRuT3JkZXJJbmZvX2xpc3RcclxuXHJcbiAgICAgICAgICAgIC8vIH0pXHJcblxyXG4gICAgfVxyXG4gICAgLy8tLS0tLS0tIGdyb3VwIGxpc3RfcHJvZHVjdElkIGxpbWl0IC0tIDEwXHJcbiAgICBnZXRBcnJheVByb2R1Y3RJbmZvRnJvbURiX0J5TGlzdFByb2R1Y3RJZChsaXN0X3Byb2R1Y3RJZCl7XHJcbiAgICAgICAgLyoqQHR5cGUge0FycmF5fSAtIGdyb3VwZWQgYXJyYXksIGV4OlsgWzEsMyw1XSxbNyw4LDldLFsxMywyMyw1NF0gXSovXHJcbiAgICAgICAgbGV0IGxpc3RHcm91cFByb2R1Y3RJZCA9IEZpcmViYXNlTUpTLmdldEdyb3VwZWRBcnJheV9CeVRpbWVzKGxpc3RfcHJvZHVjdElkLCAxMClcclxuICAgICAgICAvLyBnZXQgZmlyZXN0b3JlIC0gUHJvZHVjdHMgaW4gSWRcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICBsZXQgbmV3UHJvbWlzZSA9IChsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uUHJvZHVjdEluZm8pXHJcbiAgICAgICAgICAgICAgICAud2hlcmUoc2VsZi5fZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkUGF0aC5kb2N1bWVudElkKCksICdpbicsIGxpc3RfTGltaXRfMTBfUHJvZHVjdElkcykgLy9bJzAyZDJic3MzLTAwMTInLCcxYzcxOG9jaC0wMDAxJ10pXHJcbiAgICAgICAgICAgICAgICAuZ2V0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhcnJheVByb2R1Y3RJbmZvID0gc25hcHNob3QuZG9jcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YSgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheVByb2R1Y3RJbmZvXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdQcm9taXNlKVxyXG4gICAgICAgIGxldCBQcm9taXNlQXJyYXkgPSBbXVxyXG4gICAgICAgIC8vY29uc29sZS5sb2cobGlzdEdyb3VwUHJvZHVjdElkWzBdKVxyXG4gICAgICAgIC8vUHJvbWlzZUFycmF5LnB1c2gob3JkZXJJbmZvX2xpc3QpXHJcbiAgICAgICAgLy9Qcm9taXN0QXJyYXkucHVzaChsaXN0X3Byb2R1Y3RJZClcclxuICAgICAgICBsaXN0R3JvdXBQcm9kdWN0SWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBQcm9taXNlQXJyYXkucHVzaChuZXdQcm9taXNlKGl0ZW0pKSAvL2xpc3RHcm91cFByb2R1Y3RJZFswXSkpICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy9Qcm9taXN0QXJyYXkucHVzaChuZXdQcm9taXNlKGxpc3RHcm91cFByb2R1Y3RJZFswXSkpXHJcbiAgICAgICAgLy8gUHJvbWlzdEFycmF5LnB1c2gobmV3UHJvbWlzZShsaXN0R3JvdXBQcm9kdWN0SWRbMV0pKVxyXG4gICAgICAgIC8vIGZvcihsZXQgaT0wO2k8bGlzdEdyb3VwUHJvZHVjdElkLmxlbmd0aDtpKyspe1xyXG4gICAgICAgIC8vICAgICBsZXQgbGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzID0gbGlzdEdyb3VwUHJvZHVjdElkW2ldXHJcbiAgICAgICAgLy8gICAgIFByb21pc3RBcnJheS5wdXNoKG5ld1Byb21pc2UobGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzKSlcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFByb21pc2VBcnJheSlcclxuICAgIH1cclxuICAgIC8vIHN0YXRpYyBnZXRBcnJheVByb2R1Y3RzX0J5TGlzdFByb2R1Y3RJZChhcnJheVByb2R1Y3RJZCl7XHJcbiAgICAvLyAgICAgLy9kaXN0aW5jdCBsaXN0X3Byb2R1Y3RJZFxyXG4gICAgLy8gICAgIGxldCBhcnJheURpc3RpbmN0UHJvZHVjdElkID0gWy4uLm5ldyBTZXQoYXJyYXlQcm9kdWN0SWQpXVxyXG5cclxuXHJcbiAgICAvLyAgICAgLyoqQHR5cGUge0FycmF5fSAqL1xyXG4gICAgLy8gICAgIGxldCBsaXN0R3JvdXBQcm9kdWN0SWQgPSBGaXJlYmFzZU1KUy5nZXRHcm91cGVkQXJyYXlfQnlUaW1lcyhsaXN0X3Byb2R1Y3RJZCwgMTApXHJcbiAgICAvLyAgICAgLy8gZ2V0IGZpcmVzdG9yZSAtIFByb2R1Y3RzIGluIElkXHJcbiAgICAvLyAgICAgbGV0IG5ld1Byb21pc2UgPSAobGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLl9kYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlByb2R1Y3RJbmZvKVxyXG4gICAgLy8gICAgICAgICAgICAgLndoZXJlKHNlbGYuX2ZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFBhdGguZG9jdW1lbnRJZCgpLCAnaW4nLCBsaXN0X0xpbWl0XzEwX1Byb2R1Y3RJZHMpIC8vWycwMmQyYnNzMy0wMDEyJywnMWM3MThvY2gtMDAwMSddKVxyXG4gICAgLy8gICAgICAgICAgICAgLmdldCgpXHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKG5ld1Byb21pc2UpXHJcbiAgICAvLyAgICAgbGV0IFByb21pc3RBcnJheSA9IFtdXHJcbiAgICAvLyAgICAgLy9jb25zb2xlLmxvZyhsaXN0R3JvdXBQcm9kdWN0SWRbMF0pXHJcbiAgICAvLyAgICAgUHJvbWlzdEFycmF5LnB1c2gob3JkZXJJbmZvX2xpc3QpXHJcbiAgICAvLyAgICAgLy9Qcm9taXN0QXJyYXkucHVzaChsaXN0X3Byb2R1Y3RJZClcclxuICAgIC8vICAgICBsaXN0R3JvdXBQcm9kdWN0SWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgLy8gICAgICAgICBQcm9taXN0QXJyYXkucHVzaChuZXdQcm9taXNlKGl0ZW0pKSAvL2xpc3RHcm91cFByb2R1Y3RJZFswXSkpICAgIFxyXG4gICAgLy8gICAgIH0pXHJcbiAgICAvLyAgICAgLy9Qcm9taXN0QXJyYXkucHVzaChuZXdQcm9taXNlKGxpc3RHcm91cFByb2R1Y3RJZFswXSkpXHJcbiAgICAvLyAgICAgLy8gUHJvbWlzdEFycmF5LnB1c2gobmV3UHJvbWlzZShsaXN0R3JvdXBQcm9kdWN0SWRbMV0pKVxyXG4gICAgLy8gICAgIC8vIGZvcihsZXQgaT0wO2k8bGlzdEdyb3VwUHJvZHVjdElkLmxlbmd0aDtpKyspe1xyXG4gICAgLy8gICAgIC8vICAgICBsZXQgbGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzID0gbGlzdEdyb3VwUHJvZHVjdElkW2ldXHJcbiAgICAvLyAgICAgLy8gICAgIFByb21pc3RBcnJheS5wdXNoKG5ld1Byb21pc2UobGlzdF9MaW1pdF8xMF9Qcm9kdWN0SWRzKSlcclxuICAgIC8vICAgICAvLyB9XHJcbiAgICAvLyAgICAgcmV0dXJuIFByb21pc2UuYWxsKFByb21pc3RBcnJheSlcclxuICAgICAgICBcclxuICAgIC8vIH1cclxuICAgIC8vLS0tLS0tLSBncm91cCBsaXN0X3Byb2R1Y3RJZCBsaW1pdCAtLSAxMFxyXG4gICAgc3RhdGljIGdldEdyb3VwZWRBcnJheV9CeVRpbWVzKFRhcmdldEFycmF5LCBlYWNoR3JvdXBDb3VudCkge1xyXG4gICAgICAgIGxldCBydG5Hcm91cGVkQXJyYXkgPSBbXVxyXG4gICAgICAgIC8vIGxvb3AgdGltZXNcclxuICAgICAgICBsZXQgZG9UaW1lcyA9IE1hdGguY2VpbChUYXJnZXRBcnJheS5sZW5ndGggLyBlYWNoR3JvdXBDb3VudCkgLy80XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb1RpbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IG5ld0dyb3VwID0gVGFyZ2V0QXJyYXkuc3BsaWNlKDAsIGVhY2hHcm91cENvdW50KVxyXG4gICAgICAgICAgICBydG5Hcm91cGVkQXJyYXkucHVzaChuZXdHcm91cClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJ0bkdyb3VwZWRBcnJheVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8b2JqZWN0Pn0gLSBmaXJlc3RvcmUuVXNlcnMuZGF0YSgpXHJcbiAgICAgKi9cclxuICAgIGdldFVzZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9maXJlYmFzZS5hdXRoKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aGlzLl9maXJlYmFzZS5hdXRoKCkgaXMgLS0tPicgKyB0aGlzLl9maXJlYmFzZS5hdXRoKCkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9maXJlYmFzZS5hdXRoKCkpIHtcclxuICAgICAgICAgICAgLyoqQGlnbm9yZSAqL1xyXG4gICAgICAgICAgICBsZXQgcHAgPSB0aGlzLl9maXJlYmFzZS5hdXRoKClcclxuICAgICAgICAgICAgaWYgKHBwKVxyXG4gICAgICAgICAgICAgICAgcHAuY3VycmVudFVzZXIudWlkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB1aWQgPSB0aGlzLl9maXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkXHJcblxyXG4gICAgICAgIHRoaXMuaW5pdERCKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uVXNlcnMpLmRvYyh1aWQpLmdldCgpXHJcbiAgICAgICAgICAgIC50aGVuKChkb2MpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2MuZGF0YSgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gLnRoZW4oKHF1ZXJ5KSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHF1ZXJ5LmRvY3MpXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIClcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJ2xvZGFzaCcpfSBfIFxyXG4gICAgICogQHBhcmFtIHtQcm9kdWN0SW5mb1tdfSBsaXN0UHJvZHVjdEluZm8gXHJcbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KFwiLi9GaXJlYmFzZU1KUy5qc1wiKS5ncm91cGVkQ2F0ZWdvcnlbXX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFByb2R1Y3RJbmZvX0dyb3VwZWRJdGVtc19CeUNhdGVnb3J5KF8sIGxpc3RQcm9kdWN0SW5mbykge1xyXG4gICAgICAgIGxldCBncm91cGVkRGF0YSA9IF8obGlzdFByb2R1Y3RJbmZvKS5ncm91cEJ5KCdjYXRlZ29yeScpLm1hcCgoYXJyYXlHcm91cGVkSXRlbXMsIGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiAnJ1xyXG4gICAgICAgICAgICAvLyBPYmplY3QuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgY2F0ZWdvcmllcyA9IHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlaaFRXOiBNYXBfUHJvZHVjdENhdGVnb3J5W2NhdGVnb3J5XSxcclxuICAgICAgICAgICAgICAgIGFycmF5R3JvdXBlZEl0ZW1zLFxyXG4gICAgICAgICAgICAgICAgcmVmOm51bGwsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNhdGVnb3JpZXNcclxuICAgICAgICAgICAgLy8gcmV0dXJuIHtcclxuICAgICAgICAgICAgLy8gICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAvLyAgICAgbmFtZTogXy5tYXAoYXJyYXlHcm91cGVkSXRlbXMsICduYW1lJylcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH0pLnZhbHVlKClcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkxPRzogfiBmaWxlOiBGaXJlYmFzZU1KUy5qcyB+IGxpbmUgNTA3IH4gRmlyZWJhc2VNSlMgfiBncm91cGVkRGF0YSB+IGdyb3VwZWREYXRhXCIsIGdyb3VwZWREYXRhKVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coZDIpXHJcbiAgICAgICAgcmV0dXJuIGdyb3VwZWREYXRhXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGdldCBuZXcgT3JkZXJJbmZvIElEICwgY2hlY2sgd2hldGhlciBjcm9zcyBkYXRlIG9yIG5vdC5cclxuICAgICAqIEBwYXJhbSB7RGF0ZX0gcHJlRGF5VGltZSBcclxuICAgICAqIEBwYXJhbSB7RGF0ZX0gbm93VGltZSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdXRvTmV3TnVtYmVyIFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0TmV3T3JkZXJJbmZvSWQocHJlRGF5VGltZSwgbm93VGltZSwgYXV0b05ld051bWJlcikge1xyXG4gICAgICAgIGxldCBzUHJlRGF5VGltZV84ID0gZ2V0RGF0ZVN0cmluZ19jb3JyZWN0VGltZVpvbmUocHJlRGF5VGltZSwgMSlcclxuICAgICAgICBsZXQgc05vd1RvZGF5XzggPSBnZXREYXRlU3RyaW5nX2NvcnJlY3RUaW1lWm9uZShub3dUaW1lLCAxKVxyXG4gICAgICAgIGxldCBvcmRlck51bWJlclxyXG4gICAgICAgIGxldCBpc0Nyb3NzRGF0ZSAvL3RvZGF5IGlzIHRoZSBzYW1lIGRhdGUgd2l0aCBwcmVEYXlUaW1lXHJcbiAgICAgICAgbGV0IG5ld1Jlc3VsdCA9IHtcclxuICAgICAgICAgICAgbGFzdElkOiAnJyxcclxuICAgICAgICAgICAgbGFzdFRpbWU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGlzQ3Jvc3NEYXRlOiBmYWxzZSwgLy90b2RheSBpcyB0aGUgc2FtZSBkYXRlIHdpdGggcHJlRGF5VGltZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc1ByZURheVRpbWVfOCA9PT0gc05vd1RvZGF5XzgpIHtcclxuICAgICAgICAgICAgLy90b2RheSBpcyB0aGUgc2FtZSBkYXRlIHdpdGggcHJlRGF5VGltZVxyXG4gICAgICAgICAgICBpc0Nyb3NzRGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBvcmRlck51bWJlciA9IGF1dG9OZXdOdW1iZXJcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL3RvZGF5IGlzIGRpZmZlcmVudCBkYXRlIHdpdGggcHJlRGF5VGltZVxyXG4gICAgICAgICAgICBpc0Nyb3NzRGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIG9yZGVyTnVtYmVyID0gMVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gc0RhdGUgXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG5ld0F1dG9OdW0gXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbGV0IGdldE5ld0lEID0gKHNEYXRlLCBuZXdBdXRvTnVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHtzRGF0ZX0ke1N0cmluZyhuZXdBdXRvTnVtKS5wYWRTdGFydCg0LCAnMCcpfWBcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9zTm93VG9kYXlfOCA9PSBjb3JyZWN0IGxvY2FsZSB0aW1lem9uZSB0aW1lXHJcbiAgICAgICAgbGV0IGxhc3RJZCA9IGdldE5ld0lEKHNOb3dUb2RheV84LCBvcmRlck51bWJlcilcclxuICAgICAgICBuZXdSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGF1dG9OdW06IG9yZGVyTnVtYmVyLFxyXG4gICAgICAgICAgICBsYXN0SWQ6IGxhc3RJZCxcclxuICAgICAgICAgICAgbGFzdFRpbWU6IG5vd1RpbWUsXHJcbiAgICAgICAgICAgIGlzQ3Jvc3NEYXRlOiBpc0Nyb3NzRGF0ZSwgLy90b2RheSBpcyB0aGUgc2FtZSBkYXRlIHdpdGggcHJlRGF5VGltZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3UmVzdWx0XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBnZXQgOCBjaGFyIHN0cmluZyBmcm9tIGRhdGVcclxuICogQHBhcmFtIHtEYXRlfSBpbkRhdGVcclxuICogQHBhcmFtIHsoMXwyKX0gZm9ybWF0Tm9cclxuICovXHJcbmZ1bmN0aW9uIGdldERhdGVTdHJpbmdfY29ycmVjdFRpbWVab25lKGluRGF0ZSwgZm9ybWF0Tm8pIHtcclxuICAgIC8vIGNvcnJlY3QgdGltZXpvbmUgdGltZSAtPiBpbkRhdGUuZ2V0WFhYWCgpXHJcbiAgICBsZXQgeXkgPSBpbkRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGxldCBtbSA9IGluRGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgIGxldCBkZCA9IGluRGF0ZS5nZXREYXRlKCk7XHJcbiAgICBsZXQgTU0gPSBTdHJpbmcobW0pLnBhZFN0YXJ0KDIsICcwJylcclxuICAgIGxldCBERCA9IFN0cmluZyhkZCkucGFkU3RhcnQoMiwgJzAnKVxyXG4gICAgc3dpdGNoIChmb3JtYXRObykge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgcmV0dXJuIGAke3l5fSR7TU19JHtERH1gO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiAnJ1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0ZV9Gcm9tX0ZpcmVzdG9yZV9UaW1lU3RhbXAoZnNUaW1lc3RhbXApIHtcclxuICAgIGxldCBzZWNvbmRzID0gbnVsbFxyXG4gICAgaWYgKGZzVGltZXN0YW1wLnNlY29uZHMpXHJcbiAgICAgICAgc2Vjb25kcyA9IGZzVGltZXN0YW1wLnNlY29uZHNcclxuICAgIGVsc2UgaWYgKGZzVGltZXN0YW1wLl9zZWNvbmRzKSB7XHJcbiAgICAgICAgc2Vjb25kcyA9IGZzVGltZXN0YW1wLl9zZWNvbmRzXHJcbiAgICB9XHJcbiAgICBpZiAoc2Vjb25kcyA9PT0gbnVsbClcclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgZWxzZVxyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShzZWNvbmRzICogMTAwMClcclxufVxyXG5cclxuLy8gZnVuY3Rpb24gcmVtb3ZlRnVuY1Byb3Aob2JqKSB7XHJcbi8vICAgICBmb3IgKGxldCBwcm9wTmFtZSBpbiBvYmopIHtcclxuLy8gICAgICAgICBpZiAodHlwZW9mIG9ialtwcm9wTmFtZV0gPT09ICdmdW5jdGlvbicpXHJcbi8vICAgICAgICAgICAgIGRlbGV0ZSBvYmpbcHJvcE5hbWVdXHJcbi8vICAgICAgICAgLy9pZigke3R5cGVvZiBhcnJ5MVswXVtrZXlOYW1lXX0gPT0gKVxyXG4vLyAgICAgfVxyXG4vLyB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gRW1haWxfUmVzZW5kUGFzc3dvcmQoZW1haWxBZGRyZXNzLCBpbkZpcmViYXNlLCBzd2FsLCBmdW5jQ2xvc2VNb2RhbCkge1xyXG4gICAgdmFyIGF1dGggPSBpbkZpcmViYXNlLmF1dGgoKTtcclxuICAgIC8vdmFyIGVtYWlsQWRkcmVzcyA9IHRoaXMucHJveHlVSS5iaW5kSXB0UmVzZW50UHdkRW1haWw7XHJcbiAgICByZXR1cm4gYXV0aC5zZW5kUGFzc3dvcmRSZXNldEVtYWlsKGVtYWlsQWRkcmVzcykudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gRW1haWwgc2VudC5cclxuICAgICAgICBzd2FsLmZpcmUoe1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfmj5DphpInLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ+WvhueivOW3suWvhOWHuu+8jOiri+iHs+S/oeeuseaUtuS/oScsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICBkaWRPcGVuOiAoaHRtbEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc3dhbDItY29uZmlybScpLmF0dHIoJ2RhdGEtdGVzdGlkJywnYnRuU3dhbENvbmZpcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFzc2VydExvZy5yZWdpc3RlclN1Y2Nlc3ModHJ1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxPRzogfiBmaWxlOiBjdXNNb2RhbExvZ2luLmpzIH4gbGluZSAzMTEgfiAudGhlbiB+IGh0bWxFbGVtZW50XCIsIGh0bWxFbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL3NlbGYuc2hvd01vZGFsKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgaWYgKGZ1bmNDbG9zZU1vZGFsKVxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmNDbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgLy8gQW4gZXJyb3IgaGFwcGVuZWQuXHJcbiAgICAgICAgbGV0IGVyckNvZGVfWmhUVztcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5jb2RlKVxyXG4gICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xyXG4gICAgICAgICAgICBjYXNlICdhdXRoL2ludmFsaWQtZW1haWwnOlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZV9aaFRXID0gJ+i8uOWFpemMr+iqpCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhdXRoL3VzZXItbm90LWZvdW5kJzpcclxuICAgICAgICAgICAgICAgIGVyckNvZGVfWmhUVyA9ICfmraRFbWFpbOW4s+iZn+S4jeWtmOWcqCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZV9aaFRXID0gZXJyb3IuY29kZVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3YWwuZmlyZSh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLFxyXG4gICAgICAgICAgICB0ZXh0OiBgJHtlcnJDb2RlX1poVFd9LCR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICBpY29uOiAnZXJyb3InLFxyXG4gICAgICAgICAgICAvL2NvbmZpcm1CdXR0b25UZXh0OiAnQ29vbCdcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vdGhpcy5zaG93TW9kYWwoZmFsc2UpXHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFnQkE7QUFFQTtBQUNBO0FBQ0E7QUFwQkE7QUFzQkE7QUFFQTtBQUNBO0FBekJBO0FBc1JBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBMVpBO0FBMmVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFoZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVhBO0FBQUE7QUFDQTtBQVVBO0FBWEE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFGQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBVEE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQW9CQTtBQUdBO0FBQ0E7QUFDQTtBQXpCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUE2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBaEVBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFvRUE7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFQQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUZBO0FBQUE7QUFPQTtBQUVBO0FBQ0E7QUFWQTtBQVdBO0FBQ0E7QUFaQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBMUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUErQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFxSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU1BO0FBQ0E7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwbEJBO0FBQ0E7QUFrbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFSQTtBQVdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFUQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/firebase/FirebaseMJS.js\n");

/***/ }),

/***/ "./js/lib/dataKits.js":
/*!****************************!*\
  !*** ./js/lib/dataKits.js ***!
  \****************************/
/*! namespace exports */
/*! export ENUM_TypeOf [provided] [no usage info] [missing usage info prevents renaming] */
/*! export TypeOf [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getMatches [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getPlainObject [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getRandomString [provided] [no usage info] [missing usage info prevents renaming] */
/*! export recursiveToPlainObject [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ENUM_TypeOf\": () => /* binding */ ENUM_TypeOf,\n/* harmony export */   \"TypeOf\": () => /* binding */ TypeOf,\n/* harmony export */   \"getPlainObject\": () => /* binding */ getPlainObject,\n/* harmony export */   \"recursiveToPlainObject\": () => /* binding */ recursiveToPlainObject,\n/* harmony export */   \"getRandomString\": () => /* binding */ getRandomString,\n/* harmony export */   \"getMatches\": () => /* binding */ getMatches\n/* harmony export */ });\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar TYPE = {\n  number: Symbol('數字'),\n  string: Symbol('文字'),\n  \"boolean\": Symbol('真假'),\n  object: Symbol('純物件'),\n  array: Symbol('陣列'),\n  undefined: Symbol('未定義'),\n  \"null\": Symbol('空值'),\n  \"function\": Symbol('函數'),\n  NaN: Symbol('空數字'),\n  symbol: Symbol('標識符'),\n  error: Symbol('未找到type定義')\n};\nvar ENUM_TypeOf = {\n  array: 'array',\n  \"null\": 'null',\n  objectClass: 'objectClass',\n  objectPlain: 'objectPlain',\n  RegExp: 'RegExp',\n  Date: 'Date',\n  numberNaN: 'numberNaN',\n  \"function\": 'function',\n  number: 'number' // defaltTypes/others\n\n};\nfunction TypeOf(in_Object) {\n  if (_typeof(in_Object) === 'object') {\n    //[object Object]\n    //[object Array]\n    if (Array.isArray(in_Object)) {\n      return ENUM_TypeOf.array;\n    } else if (in_Object === null) {\n      return ENUM_TypeOf[\"null\"];\n    } else if (Object.prototype.toString.call(in_Object) === '[object Object]') {\n      //(variable1.constructor.prototype instanceof Object)//class == true, object == false\n      var objectType = in_Object.constructor.prototype instanceof Object ? ENUM_TypeOf.objectClass : ENUM_TypeOf.objectPlain;\n      return objectType; //return 'object';\n    } else if (Object.prototype.toString.call(in_Object) === '[object RegExp]') {\n      return ENUM_TypeOf.RegExp;\n    } else if (Object.prototype.toString.call(in_Object) === '[object Date]') {\n      return ENUM_TypeOf.Date;\n    } else return Object.prototype.toString.call(in_Object); //'not find type of object';\n\n  } else if (typeof in_Object === 'number') {\n    if (isNaN(in_Object)) {\n      return ENUM_TypeOf.numberNaN;\n    } else return ENUM_TypeOf.number;\n  } else if (typeof in_Object === 'function') {\n    return ENUM_TypeOf[\"function\"];\n  } else return _typeof(in_Object);\n}\n\nfunction CheckVarExist(in_Object) {\n  if (typeof in_Object === 'undefined') return false;else if (_typeof(in_Object) === ( true ? \"undefined\" : 0)) return false;else return true; //window.hasOwnProperty\n  // if (in_Object)..................\n  // 1.undefined: if the value is not defined and it's undefined\n  // 2.null: if it's null, for example, if a DOM element not exists...\n  // 3.empty string: ''\n  // 4.0: number zero\n  // 5.NaN: not a number\n  // 6.false\n  //看下圖\n  //2020-01-11-14-11-32.png\n}\n\nfunction isDate(value) {\n  switch (_typeof(value)) {\n    case 'number':\n      return true;\n\n    case 'string':\n      return !isNaN(Date.parse(value));\n\n    case 'object':\n      if (value instanceof Date) {\n        return !isNaN(value.getTime());\n      }\n\n    default:\n      return false;\n  }\n} // export {\n//     TypeOf\n// }\n//------------------------------\n// document.addEventListener('scroll', (params) => {\n//     // console.log(1)\n//     //isScrolledIntoView(elDiv)\n//     let result = isScrolledIntoView(elDiv)\n//     console.log(result)\n// })\n\n\nfunction isScrolledIntoView(el) {\n  //https://stackoverflow.com/questions/21561480/trigger-event-when-user-scroll-to-specific-element-with-jquery\n  //https://stackoverflow.com/questions/487073/how-to-check-if-element-is-visible-after-scrolling\n  // check for 75% visible\n  var percentVisible = 0.75;\n  var elemTop = el.getBoundingClientRect().top;\n  var elemBottom = el.getBoundingClientRect().bottom;\n  var elemHeight = el.getBoundingClientRect().height;\n  var overhang = elemHeight * (1 - percentVisible);\n  var isVisible = elemTop >= -overhang && elemBottom <= window.innerHeight + overhang;\n  return isVisible;\n}\n\nfunction getDateTimeFormat() {\n  var nn = new Date();\n  console.log(nn.toLocaleDateString()); // const ye = new Intl.DateTimeFormat('en', { year: 'numeric' }).format(nn)\n  // console.log(ye)\n\n  var d = new Date('2010-08-05');\n  var ye = new Intl.DateTimeFormat('en', {\n    year: 'numeric'\n  }).format(d);\n  var mo = new Intl.DateTimeFormat('en', {\n    month: '2-digit'\n  }).format(d);\n  var da = new Intl.DateTimeFormat('en', {\n    day: '2-digit'\n  }).format(d);\n  console.log(\"\".concat(da, \"-\").concat(mo, \"-\").concat(ye));\n  var options = {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit'\n  };\n  console.log(nn.toLocaleDateString('en-US', options));\n  console.log(new Intl.DateTimeFormat('en-US', {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric'\n  }).format(nn));\n}\n\nfunction converter_objectPlain(propValue) {\n  //let value = target[prop];\n  if (TypeOf(propValue) == ENUM_TypeOf.objectClass) propValue = Object.assign({}, propValue);\n}\n\nfunction objectMapValue(objValue) {\n  return Object.assign({}, objValue);\n}\n/**\r\n * \r\n * @param {object} rootNode \r\n * @returns {object} - type is objectPlain\r\n */\n\n\nfunction getPlainObject(rootNode) {\n  recursiveToPlainObject(rootNode); //process all children\n  //process rootNode then return\n\n  if (TypeOf(rootNode) == ENUM_TypeOf.objectClass) rootNode = Object.assign({}, rootNode);\n  return rootNode; //plain object\n}\nfunction recursiveToPlainObject(leafNode) {\n  //search object props\n  //let keys = Object.getOwnPropertyNames(leafNode)// leafNode prop names [Array]\n  for (var keyName in leafNode) {\n    var value = leafNode[keyName];\n\n    if (TypeOf(value) == ENUM_TypeOf.objectClass || TypeOf(value) == ENUM_TypeOf.objectPlain) {\n      recursiveToPlainObject(value); //if(converter) converter(leafNode[keyName]);\n\n      if (TypeOf(value) == ENUM_TypeOf.objectClass) leafNode[keyName] = objectMapValue(value); //Object.assign({},value)\n    } else if (TypeOf(value) == ENUM_TypeOf.array) {\n      for (var i = 0; i < value.length; i++) {\n        var item = value[i];\n\n        if (TypeOf(item) == ENUM_TypeOf.objectClass || TypeOf(item) == ENUM_TypeOf.objectPlain) {\n          recursiveToPlainObject(item); //if(converter) converter(value[i]);\n\n          if (TypeOf(item) == ENUM_TypeOf.objectClass) value[i] = objectMapValue(item); //Object.assign({},item)\n        }\n      } // value.forEach((item) => {\n      //     // else if (TypeOf(item) == ENUM_TypeOf.function) {\n      //     //     delete leafNode[keyName]\n      //     // }\n      //     //recursiveToPlainObject(item)\n      // })\n\n    } else if (TypeOf(value) == ENUM_TypeOf[\"function\"]) {\n      delete leafNode[keyName];\n    }\n  } //done leafNode tasks\n  // leafNode.HH = 555\n\n} //module.exports = TypeOf;\n// module.exports = {\n//     ENUM_TypeOf,\n//     TypeOf\n//     // getDateTimeFormat,\n//     // isScrolledIntoView,\n//     // isDate,\n//     // CheckVarExist\n// }\n\nfunction getRandomString(charCount) {\n  var uuid = Math.random().toString(36).substring(2, 2 + charCount); // 36 carry bit, ignore '0.', get 8 char\n\n  return uuid;\n}\nfunction getMatches(content, regex) {\n  var matches = [];\n  var match;\n  var iTotalMatch = 0; // af=1fdsf1\n\n  var iOnlyVar = 1; //fdsf\n\n  var displayIndex = iOnlyVar;\n\n  while (match = regex.exec(content)) {\n    matches.push(match[displayIndex]);\n  }\n\n  return matches;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9saWIvZGF0YUtpdHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9saWIvZGF0YUtpdHMuanM/Y2RmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVFlQRSA9IHtcclxuICAgIG51bWJlcjogU3ltYm9sKCfmlbjlrZcnKSxcclxuICAgIHN0cmluZzogU3ltYm9sKCfmloflrZcnKSxcclxuICAgIGJvb2xlYW46IFN5bWJvbCgn55yf5YGHJyksXHJcbiAgICBvYmplY3Q6IFN5bWJvbCgn57SU54mp5Lu2JyksXHJcbiAgICBhcnJheTogU3ltYm9sKCfpmaPliJcnKSxcclxuICAgIHVuZGVmaW5lZDogU3ltYm9sKCfmnKrlrprnvqknKSxcclxuICAgIG51bGw6IFN5bWJvbCgn56m65YC8JyksXHJcbiAgICBmdW5jdGlvbjogU3ltYm9sKCflh73mlbgnKSxcclxuICAgIE5hTjogU3ltYm9sKCfnqbrmlbjlrZcnKSxcclxuICAgIHN5bWJvbDogU3ltYm9sKCfmqJnorZjnrKYnKSxcclxuICAgIGVycm9yOiBTeW1ib2woJ+acquaJvuWIsHR5cGXlrprnvqknKVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IEVOVU1fVHlwZU9mID0ge1xyXG4gICAgYXJyYXk6J2FycmF5JyxcclxuICAgIG51bGw6J251bGwnLFxyXG4gICAgb2JqZWN0Q2xhc3M6J29iamVjdENsYXNzJyxcclxuICAgIG9iamVjdFBsYWluOidvYmplY3RQbGFpbicsXHJcbiAgICBSZWdFeHA6J1JlZ0V4cCcsXHJcbiAgICBEYXRlOidEYXRlJyxcclxuICAgIG51bWJlck5hTjonbnVtYmVyTmFOJyxcclxuICAgIGZ1bmN0aW9uOidmdW5jdGlvbicsXHJcbiAgICBudW1iZXI6J251bWJlcicsLy8gZGVmYWx0VHlwZXMvb3RoZXJzXHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIFR5cGVPZihpbl9PYmplY3QpIHtcclxuICAgIGlmICh0eXBlb2YgaW5fT2JqZWN0ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIC8vW29iamVjdCBPYmplY3RdXHJcbiAgICAgICAgLy9bb2JqZWN0IEFycmF5XVxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGluX09iamVjdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVOVU1fVHlwZU9mLmFycmF5XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbl9PYmplY3QgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVOVU1fVHlwZU9mLm51bGxcclxuICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbl9PYmplY3QpID09PSAnW29iamVjdCBPYmplY3RdJykge1xyXG4gICAgICAgICAgICAvLyh2YXJpYWJsZTEuY29uc3RydWN0b3IucHJvdG90eXBlIGluc3RhbmNlb2YgT2JqZWN0KS8vY2xhc3MgPT0gdHJ1ZSwgb2JqZWN0ID09IGZhbHNlXHJcbiAgICAgICAgICAgIGxldCBvYmplY3RUeXBlPShpbl9PYmplY3QuY29uc3RydWN0b3IucHJvdG90eXBlIGluc3RhbmNlb2YgT2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgP0VOVU1fVHlwZU9mLm9iamVjdENsYXNzXHJcbiAgICAgICAgICAgICAgICA6RU5VTV9UeXBlT2Yub2JqZWN0UGxhaW47XHJcbiAgICAgICAgICAgIHJldHVybiBvYmplY3RUeXBlO1xyXG4gICAgICAgICAgICAvL3JldHVybiAnb2JqZWN0JztcclxuICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbl9PYmplY3QpID09PSAnW29iamVjdCBSZWdFeHBdJykge1xyXG4gICAgICAgICAgICByZXR1cm4gRU5VTV9UeXBlT2YuUmVnRXhwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGluX09iamVjdCkgPT09ICdbb2JqZWN0IERhdGVdJykge1xyXG4gICAgICAgICAgICByZXR1cm4gRU5VTV9UeXBlT2YuRGF0ZTtcclxuICAgICAgICB9IGVsc2UgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbl9PYmplY3QpOyAvLydub3QgZmluZCB0eXBlIG9mIG9iamVjdCc7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbl9PYmplY3QgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgaWYgKGlzTmFOKGluX09iamVjdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVOVU1fVHlwZU9mLm51bWJlck5hTlxyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gRU5VTV9UeXBlT2YubnVtYmVyXHJcbiAgICB9IGVsc2UgaWYodHlwZW9mIGluX09iamVjdCA9PT0gJ2Z1bmN0aW9uJyl7XHJcbiAgICAgICAgcmV0dXJuIEVOVU1fVHlwZU9mLmZ1bmN0aW9uXHJcbiAgICB9IGVsc2VcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGluX09iamVjdDtcclxufVxyXG5cclxuZnVuY3Rpb24gQ2hlY2tWYXJFeGlzdChpbl9PYmplY3QpIHtcclxuICAgIGlmICh0eXBlb2YgaW5fT2JqZWN0ID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgaW5fT2JqZWN0ID09PSB0eXBlb2YgdW5kZWZpbmVkKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIC8vd2luZG93Lmhhc093blByb3BlcnR5XHJcbiAgICAvLyBpZiAoaW5fT2JqZWN0KS4uLi4uLi4uLi4uLi4uLi4uLlxyXG4gICAgLy8gMS51bmRlZmluZWQ6IGlmIHRoZSB2YWx1ZSBpcyBub3QgZGVmaW5lZCBhbmQgaXQncyB1bmRlZmluZWRcclxuICAgIC8vIDIubnVsbDogaWYgaXQncyBudWxsLCBmb3IgZXhhbXBsZSwgaWYgYSBET00gZWxlbWVudCBub3QgZXhpc3RzLi4uXHJcbiAgICAvLyAzLmVtcHR5IHN0cmluZzogJydcclxuICAgIC8vIDQuMDogbnVtYmVyIHplcm9cclxuICAgIC8vIDUuTmFOOiBub3QgYSBudW1iZXJcclxuICAgIC8vIDYuZmFsc2VcclxuICAgIC8v55yL5LiL5ZyWXHJcbiAgICAvLzIwMjAtMDEtMTEtMTQtMTEtMzIucG5nXHJcbn1cclxuZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xyXG4gICAgICAgIGNhc2UgJ251bWJlcic6XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgICAgIHJldHVybiAhaXNOYU4oRGF0ZS5wYXJzZSh2YWx1ZSkpO1xyXG4gICAgICAgIGNhc2UgJ29iamVjdCc6XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhaXNOYU4odmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vLyBleHBvcnQge1xyXG4vLyAgICAgVHlwZU9mXHJcbi8vIH1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIChwYXJhbXMpID0+IHtcclxuLy8gICAgIC8vIGNvbnNvbGUubG9nKDEpXHJcbi8vICAgICAvL2lzU2Nyb2xsZWRJbnRvVmlldyhlbERpdilcclxuLy8gICAgIGxldCByZXN1bHQgPSBpc1Njcm9sbGVkSW50b1ZpZXcoZWxEaXYpXHJcbi8vICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbi8vIH0pXHJcblxyXG5mdW5jdGlvbiBpc1Njcm9sbGVkSW50b1ZpZXcoZWwpIHtcclxuICAgIC8vaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjE1NjE0ODAvdHJpZ2dlci1ldmVudC13aGVuLXVzZXItc2Nyb2xsLXRvLXNwZWNpZmljLWVsZW1lbnQtd2l0aC1qcXVlcnlcclxuICAgIC8vaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDg3MDczL2hvdy10by1jaGVjay1pZi1lbGVtZW50LWlzLXZpc2libGUtYWZ0ZXItc2Nyb2xsaW5nXHJcbiAgICAvLyBjaGVjayBmb3IgNzUlIHZpc2libGVcclxuICAgIHZhciBwZXJjZW50VmlzaWJsZSA9IDAuNzU7XHJcbiAgICB2YXIgZWxlbVRvcCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuXHJcbiAgICB2YXIgZWxlbUJvdHRvbSA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcclxuICAgIHZhciBlbGVtSGVpZ2h0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgdmFyIG92ZXJoYW5nID0gZWxlbUhlaWdodCAqICgxIC0gcGVyY2VudFZpc2libGUpO1xyXG5cclxuICAgIHZhciBpc1Zpc2libGUgPSAoZWxlbVRvcCA+PSAtb3ZlcmhhbmcpICYmIChlbGVtQm90dG9tIDw9IHdpbmRvdy5pbm5lckhlaWdodCArIG92ZXJoYW5nKTtcclxuICAgIHJldHVybiBpc1Zpc2libGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERhdGVUaW1lRm9ybWF0KCkge1xyXG4gICAgbGV0IG5uID0gbmV3IERhdGUoKVxyXG4gICAgY29uc29sZS5sb2cobm4udG9Mb2NhbGVEYXRlU3RyaW5nKCkpXHJcblxyXG4gICAgLy8gY29uc3QgeWUgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4nLCB7IHllYXI6ICdudW1lcmljJyB9KS5mb3JtYXQobm4pXHJcbiAgICAvLyBjb25zb2xlLmxvZyh5ZSlcclxuXHJcbiAgICBjb25zdCBkID0gbmV3IERhdGUoJzIwMTAtMDgtMDUnKVxyXG4gICAgY29uc3QgeWUgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4nLCB7XHJcbiAgICAgICAgeWVhcjogJ251bWVyaWMnXHJcbiAgICB9KS5mb3JtYXQoZClcclxuICAgIGNvbnN0IG1vID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuJywge1xyXG4gICAgICAgIG1vbnRoOiAnMi1kaWdpdCdcclxuICAgIH0pLmZvcm1hdChkKVxyXG4gICAgY29uc3QgZGEgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4nLCB7XHJcbiAgICAgICAgZGF5OiAnMi1kaWdpdCdcclxuICAgIH0pLmZvcm1hdChkKVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGAke2RhfS0ke21vfS0ke3llfWApXHJcblxyXG4gICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgeWVhcjogJ251bWVyaWMnLFxyXG4gICAgICAgIG1vbnRoOiAnMi1kaWdpdCcsXHJcbiAgICAgICAgZGF5OiAnMi1kaWdpdCcsXHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhubi50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgb3B0aW9ucykpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1VUycsIHtcclxuICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXHJcbiAgICAgICAgbW9udGg6ICdudW1lcmljJyxcclxuICAgICAgICBkYXk6ICdudW1lcmljJ1xyXG4gICAgfSkuZm9ybWF0KG5uKSlcclxufVxyXG5cclxuZnVuY3Rpb24gY29udmVydGVyX29iamVjdFBsYWluKHByb3BWYWx1ZSl7XHJcbiAgICAvL2xldCB2YWx1ZSA9IHRhcmdldFtwcm9wXTtcclxuICAgIGlmKFR5cGVPZihwcm9wVmFsdWUpID09IEVOVU1fVHlwZU9mLm9iamVjdENsYXNzKVxyXG4gICAgICAgIHByb3BWYWx1ZSA9IE9iamVjdC5hc3NpZ24oe30scHJvcFZhbHVlKVxyXG59XHJcbmZ1bmN0aW9uIG9iamVjdE1hcFZhbHVlKG9ialZhbHVlKXtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LG9ialZhbHVlKVxyXG59XHJcblxyXG4vKipcclxuICogXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSByb290Tm9kZSBcclxuICogQHJldHVybnMge29iamVjdH0gLSB0eXBlIGlzIG9iamVjdFBsYWluXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGxhaW5PYmplY3Qocm9vdE5vZGUpIHtcclxuICAgIHJlY3Vyc2l2ZVRvUGxhaW5PYmplY3Qocm9vdE5vZGUpLy9wcm9jZXNzIGFsbCBjaGlsZHJlblxyXG4gICAgLy9wcm9jZXNzIHJvb3ROb2RlIHRoZW4gcmV0dXJuXHJcbiAgICBpZihUeXBlT2Yocm9vdE5vZGUpPT1FTlVNX1R5cGVPZi5vYmplY3RDbGFzcylcclxuICAgICAgICByb290Tm9kZSA9IE9iamVjdC5hc3NpZ24oe30sIHJvb3ROb2RlKVxyXG4gICAgcmV0dXJuIHJvb3ROb2RlIC8vcGxhaW4gb2JqZWN0XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHJlY3Vyc2l2ZVRvUGxhaW5PYmplY3QobGVhZk5vZGUpIHtcclxuICAgIC8vc2VhcmNoIG9iamVjdCBwcm9wc1xyXG4gICAgLy9sZXQga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGxlYWZOb2RlKS8vIGxlYWZOb2RlIHByb3AgbmFtZXMgW0FycmF5XVxyXG4gICAgZm9yIChsZXQga2V5TmFtZSBpbiBsZWFmTm9kZSkge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9IGxlYWZOb2RlW2tleU5hbWVdXHJcbiAgICAgICAgaWYgKFR5cGVPZih2YWx1ZSkgPT0gRU5VTV9UeXBlT2Yub2JqZWN0Q2xhc3MgfHxcclxuICAgICAgICAgICAgVHlwZU9mKHZhbHVlKSA9PSBFTlVNX1R5cGVPZi5vYmplY3RQbGFpbikge1xyXG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlVG9QbGFpbk9iamVjdCh2YWx1ZSlcclxuICAgICAgICAgICAgLy9pZihjb252ZXJ0ZXIpIGNvbnZlcnRlcihsZWFmTm9kZVtrZXlOYW1lXSk7XHJcbiAgICAgICAgICAgIGlmKFR5cGVPZih2YWx1ZSkgPT0gRU5VTV9UeXBlT2Yub2JqZWN0Q2xhc3MpXHJcbiAgICAgICAgICAgICAgICBsZWFmTm9kZVtrZXlOYW1lXSA9IG9iamVjdE1hcFZhbHVlKHZhbHVlKS8vT2JqZWN0LmFzc2lnbih7fSx2YWx1ZSlcclxuICAgICAgICB9IGVsc2UgaWYgKFR5cGVPZih2YWx1ZSkgPT0gRU5VTV9UeXBlT2YuYXJyYXkpIHtcclxuXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7aTx2YWx1ZS5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gdmFsdWVbaV1cclxuICAgICAgICAgICAgICAgIGlmIChUeXBlT2YoaXRlbSkgPT0gRU5VTV9UeXBlT2Yub2JqZWN0Q2xhc3MgfHxcclxuICAgICAgICAgICAgICAgICAgICBUeXBlT2YoaXRlbSkgPT0gRU5VTV9UeXBlT2Yub2JqZWN0UGxhaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlVG9QbGFpbk9iamVjdChpdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vaWYoY29udmVydGVyKSBjb252ZXJ0ZXIodmFsdWVbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKFR5cGVPZihpdGVtKSA9PSBFTlVNX1R5cGVPZi5vYmplY3RDbGFzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbaV0gPSBvYmplY3RNYXBWYWx1ZShpdGVtKS8vT2JqZWN0LmFzc2lnbih7fSxpdGVtKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHZhbHVlLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAgICAgLy8gZWxzZSBpZiAoVHlwZU9mKGl0ZW0pID09IEVOVU1fVHlwZU9mLmZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAvLyAgICAgZGVsZXRlIGxlYWZOb2RlW2tleU5hbWVdXHJcbiAgICAgICAgICAgIC8vICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vICAgICAvL3JlY3Vyc2l2ZVRvUGxhaW5PYmplY3QoaXRlbSlcclxuICAgICAgICAgICAgLy8gfSlcclxuICAgICAgICB9IGVsc2UgaWYgKFR5cGVPZih2YWx1ZSkgPT0gRU5VTV9UeXBlT2YuZnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgZGVsZXRlIGxlYWZOb2RlW2tleU5hbWVdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9kb25lIGxlYWZOb2RlIHRhc2tzXHJcbiAgICAvLyBsZWFmTm9kZS5ISCA9IDU1NVxyXG59XHJcbi8vbW9kdWxlLmV4cG9ydHMgPSBUeXBlT2Y7XHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHtcclxuLy8gICAgIEVOVU1fVHlwZU9mLFxyXG4vLyAgICAgVHlwZU9mXHJcbi8vICAgICAvLyBnZXREYXRlVGltZUZvcm1hdCxcclxuLy8gICAgIC8vIGlzU2Nyb2xsZWRJbnRvVmlldyxcclxuLy8gICAgIC8vIGlzRGF0ZSxcclxuLy8gICAgIC8vIENoZWNrVmFyRXhpc3RcclxuLy8gfVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tU3RyaW5nKGNoYXJDb3VudCl7XHJcbiAgICBsZXQgdXVpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAyK2NoYXJDb3VudCkgLy8gMzYgY2FycnkgYml0LCBpZ25vcmUgJzAuJywgZ2V0IDggY2hhclxyXG4gICAgcmV0dXJuIHV1aWRcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF0Y2hlcyhjb250ZW50LCByZWdleCkge1xyXG4gICAgdmFyIG1hdGNoZXMgPSBbXTtcclxuICAgIHZhciBtYXRjaDtcclxuICAgIGxldCBpVG90YWxNYXRjaCA9IDAgLy8gYWY9MWZkc2YxXHJcbiAgICBsZXQgaU9ubHlWYXIgPSAxIC8vZmRzZlxyXG4gICAgbGV0IGRpc3BsYXlJbmRleCA9IGlPbmx5VmFyXHJcbiAgICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKGNvbnRlbnQpKSB7XHJcbiAgICAgICAgbWF0Y2hlcy5wdXNoKG1hdGNoW2Rpc3BsYXlJbmRleF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hdGNoZXM7XHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVZBO0FBWUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/lib/dataKits.js\n");

/***/ }),

/***/ "./js/others/useComponent3.js":
/*!************************************!*\
  !*** ./js/others/useComponent3.js ***!
  \************************************/
/*! namespace exports */
/*! export useComponent [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"useComponent\": () => /* binding */ useComponent\n/* harmony export */ });\n/**\r\n * \r\n * @param {string} componentPath \r\n * @param {string} newTagName \r\n */\nfunction useComponent(newTagName, htmlPath, compClass) {\n  return fetch(htmlPath).then(function (res) {\n    return res.text();\n  }).then(function (text) {\n    var parser = new DOMParser();\n    var doc = parser.parseFromString(text, 'text/html');\n    var template = doc.querySelector('template');\n    if (!template) throw new Error('error: webcomponent DOM element<template> not found.');\n    var templateContent = template.content;\n    customElements.define(newTagName, compClass);\n    var ctor = customElements.get(newTagName);\n    var rtnObject = {\n      ctor: ctor,\n      templateContent: templateContent\n    };\n    return rtnObject;\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9vdGhlcnMvdXNlQ29tcG9uZW50My5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL290aGVycy91c2VDb21wb25lbnQzLmpzPzhhNmIiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8qKlxyXG4gKiBcclxuICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudFBhdGggXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdUYWdOYW1lIFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbXBvbmVudChuZXdUYWdOYW1lLCBodG1sUGF0aCwgY29tcENsYXNzKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goaHRtbFBhdGgpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy50ZXh0KClcclxuICAgIH0pXHJcbiAgICAudGhlbigodGV4dCkgPT4ge1xyXG4gICAgICAgIGxldCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XHJcbiAgICAgICAgbGV0IGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcodGV4dCwgJ3RleHQvaHRtbCcpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jLnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJyk7XHJcbiAgICAgICAgaWYoIXRlbXBsYXRlKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Vycm9yOiB3ZWJjb21wb25lbnQgRE9NIGVsZW1lbnQ8dGVtcGxhdGU+IG5vdCBmb3VuZC4nKVxyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlQ29udGVudCA9IHRlbXBsYXRlLmNvbnRlbnQ7XHJcbiAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKG5ld1RhZ05hbWUsIGNvbXBDbGFzcyk7XHJcbiAgICAgICAgbGV0IGN0b3IgPSBjdXN0b21FbGVtZW50cy5nZXQobmV3VGFnTmFtZSk7XHJcbiAgICAgICAgbGV0IHJ0bk9iamVjdCA9IHtcclxuICAgICAgICAgICAgY3RvcjogY3RvcixcclxuICAgICAgICAgICAgdGVtcGxhdGVDb250ZW50OiB0ZW1wbGF0ZUNvbnRlbnRcclxuICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJ0bk9iamVjdFxyXG4gICAgfSlcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/others/useComponent3.js\n");

/***/ }),

/***/ "./js/test/selenium/assertLog.js":
/*!***************************************!*\
  !*** ./js/test/selenium/assertLog.js ***!
  \***************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\nvar assertTitle = 'assertLog:';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  assertTitle: assertTitle,\n  getTitle: function getTitle(mdID, arguments_callee_name) {\n    return \"\".concat(assertTitle, \"[\").concat(mdID, \"-\").concat(arguments_callee_name, \"]  \");\n  } //EntryManager:EntryManager,\n\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy90ZXN0L3NlbGVuaXVtL2Fzc2VydExvZy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL3Rlc3Qvc2VsZW5pdW0vYXNzZXJ0TG9nLmpzP2FhNWYiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IGFzc2VydFRpdGxlID0gJ2Fzc2VydExvZzonXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGFzc2VydFRpdGxlOmFzc2VydFRpdGxlLFxyXG4gICAgZ2V0VGl0bGUgOiAobWRJRCwgYXJndW1lbnRzX2NhbGxlZV9uYW1lKT0+e1xyXG4gICAgICAgIHJldHVybiBgJHthc3NlcnRUaXRsZX1bJHttZElEfS0ke2FyZ3VtZW50c19jYWxsZWVfbmFtZX1dICBgXHJcbiAgICB9LFxyXG4gICAgLy9FbnRyeU1hbmFnZXI6RW50cnlNYW5hZ2VyLFxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/test/selenium/assertLog.js\n");

/***/ }),

/***/ "./js/test/selenium/pages.config.js":
/*!******************************************!*\
  !*** ./js/test/selenium/pages.config.js ***!
  \******************************************/
/*! namespace exports */
/*! export PageConfig [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PageConfig\": () => /* binding */ PageConfig,\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PageConfig = function PageConfig() {\n  _classCallCheck(this, PageConfig);\n\n  _defineProperty(this, \"id\", '');\n\n  _defineProperty(this, \"srcMdFolder\", '');\n\n  _defineProperty(this, \"srcHtml\", '');\n\n  _defineProperty(this, \"filenameMdConfig\", '');\n};\n/**@enum {string} */\n\nvar ENUM_mdId = {\n  forTest: \"forTest\",\n  T1: \"T1\",\n  index: \"index\",\n  cusModalLogin: \"cusModalLogin\",\n  cusModalUserProfile: \"cusModalUserProfile\",\n  ProductListSearch: \"ProductListSearch\",\n  ShopCart: \"ShopCart\",\n  ShopItem: \"ShopItem\",\n  Invoice: \"Invoice\"\n};\nvar generateId = null; //['forTest','index','cusModalLogin']\n\nvar data = [{\n  id: ENUM_mdId.forTest,\n  srcMdFolder: './MDPages/forTest',\n  filenameMdConfig: 'forTest.mdConfig.js',\n  //'./MDPages/forTest/config.md.js',\n  srcHtml: './MDPages/forTest/getDataTestId.htm'\n}, {\n  id: ENUM_mdId.T1,\n  srcMdFolder: './MDPages/forTest',\n  filenameMdConfig: 'T1.mdConfig.js',\n  //'./MDPages/forTest/config.md.js',\n  srcHtml: './MDPages/forTest/T1.jsx'\n}, {\n  id: ENUM_mdId.ProductListSearch,\n  srcMdFolder: './MDPages/ProductListSearch',\n  filenameMdConfig: null,\n  //不指定檔案,使用default\n  srcHtml: '../../react/containers/ProductListSearch.jsx'\n}, {\n  id: ENUM_mdId.ShopCart,\n  srcMdFolder: './MDPages/ShopCart',\n  filenameMdConfig: null,\n  //不指定檔案,使用default\n  srcHtml: '../../react/containers/ShopCart.jsx'\n}, {\n  id: ENUM_mdId.ShopItem,\n  srcMdFolder: './MDPages/ShopItem',\n  filenameMdConfig: null,\n  //不指定檔案,使用default\n  srcHtml: '../../react/components/ShopItem.jsx'\n}, {\n  id: ENUM_mdId.Invoice,\n  srcMdFolder: './MDPages/Invoice',\n  filenameMdConfig: null,\n  //不指定檔案,使用default\n  srcHtml: '../../react/components/Invoice.jsx'\n}, // {\n//     id:ENUM_mdId.,\n//     srcMdFolder:'./MDPages/ShopItem',\n//     filenameMdConfig:null,//不指定檔案,使用default\n//     srcHtml:'../../react/components/Invoice.jsx',\n// },\n{\n  id: ENUM_mdId.index,\n  srcMdFolder: './MDPages/index',\n  filenameMdConfig: 'index.mdConfig.js',\n  srcHtml: '../../../pages/index/index.htm'\n}, {\n  id: ENUM_mdId.cusModalLogin,\n  srcMdFolder: './MDPages/cusModalLogin',\n  filenameMdConfig: null,\n  //不指定檔案,使用default\n  srcHtml: '../../../webcomponents/cusModalLogin3/cusModalLogin.htm'\n}, {\n  id: ENUM_mdId.cusModalUserProfile,\n  srcMdFolder: './MDPages/cusModalUserProfile',\n  filenameMdConfig: null,\n  //不指定檔案,使用default\n  srcHtml: '../../../webcomponents/cusModalUserProfile3/cusModalUserProfile.htm'\n} // {\n//     id:'cusModalLogin',\n//     srcMdFolder:'./cusModalLogin',\n//     filenameMdConfig:'',\n//     srcHtml:'../../../webcomponents/cusModalLogin3/cusModalLogin.htm',\n// },\n];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  PageConfig: PageConfig,\n  data: data,\n  generateId: generateId,\n  ENUM_mdId: ENUM_mdId\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy90ZXN0L3NlbGVuaXVtL3BhZ2VzLmNvbmZpZy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL3Rlc3Qvc2VsZW5pdW0vcGFnZXMuY29uZmlnLmpzPzBkZDEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFBhZ2VDb25maWd7XHJcbiAgICBpZCA9ICcnO1xyXG4gICAgc3JjTWRGb2xkZXIgPSAnJztcclxuICAgIHNyY0h0bWwgPSAnJztcclxuICAgIGZpbGVuYW1lTWRDb25maWcgPSAnJztcclxufVxyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5sZXQgRU5VTV9tZElkID0ge1xyXG4gICAgZm9yVGVzdDpcImZvclRlc3RcIixcclxuICAgIFQxOlwiVDFcIixcclxuICAgIGluZGV4OlwiaW5kZXhcIixcclxuICAgIGN1c01vZGFsTG9naW46XCJjdXNNb2RhbExvZ2luXCIsXHJcbiAgICBjdXNNb2RhbFVzZXJQcm9maWxlOlwiY3VzTW9kYWxVc2VyUHJvZmlsZVwiLFxyXG4gICAgUHJvZHVjdExpc3RTZWFyY2g6XCJQcm9kdWN0TGlzdFNlYXJjaFwiLFxyXG4gICAgU2hvcENhcnQ6XCJTaG9wQ2FydFwiLFxyXG4gICAgU2hvcEl0ZW06XCJTaG9wSXRlbVwiLFxyXG4gICAgSW52b2ljZTpcIkludm9pY2VcIixcclxufVxyXG5sZXQgZ2VuZXJhdGVJZCA9IG51bGwvL1snZm9yVGVzdCcsJ2luZGV4JywnY3VzTW9kYWxMb2dpbiddXHJcbmxldCBkYXRhID0gW1xyXG4gICAge1xyXG4gICAgICAgIGlkOkVOVU1fbWRJZC5mb3JUZXN0LFxyXG4gICAgICAgIHNyY01kRm9sZGVyOicuL01EUGFnZXMvZm9yVGVzdCcsXHJcbiAgICAgICAgZmlsZW5hbWVNZENvbmZpZzonZm9yVGVzdC5tZENvbmZpZy5qcycsLy8nLi9NRFBhZ2VzL2ZvclRlc3QvY29uZmlnLm1kLmpzJyxcclxuICAgICAgICBzcmNIdG1sOicuL01EUGFnZXMvZm9yVGVzdC9nZXREYXRhVGVzdElkLmh0bScsXHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOkVOVU1fbWRJZC5UMSxcclxuICAgICAgICBzcmNNZEZvbGRlcjonLi9NRFBhZ2VzL2ZvclRlc3QnLFxyXG4gICAgICAgIGZpbGVuYW1lTWRDb25maWc6J1QxLm1kQ29uZmlnLmpzJywvLycuL01EUGFnZXMvZm9yVGVzdC9jb25maWcubWQuanMnLFxyXG4gICAgICAgIHNyY0h0bWw6Jy4vTURQYWdlcy9mb3JUZXN0L1QxLmpzeCcsXHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOkVOVU1fbWRJZC5Qcm9kdWN0TGlzdFNlYXJjaCxcclxuICAgICAgICBzcmNNZEZvbGRlcjonLi9NRFBhZ2VzL1Byb2R1Y3RMaXN0U2VhcmNoJyxcclxuICAgICAgICBmaWxlbmFtZU1kQ29uZmlnOm51bGwsLy/kuI3mjIflrprmqpTmoYgs5L2/55SoZGVmYXVsdFxyXG4gICAgICAgIHNyY0h0bWw6Jy4uLy4uL3JlYWN0L2NvbnRhaW5lcnMvUHJvZHVjdExpc3RTZWFyY2guanN4JyxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6RU5VTV9tZElkLlNob3BDYXJ0LFxyXG4gICAgICAgIHNyY01kRm9sZGVyOicuL01EUGFnZXMvU2hvcENhcnQnLFxyXG4gICAgICAgIGZpbGVuYW1lTWRDb25maWc6bnVsbCwvL+S4jeaMh+WumuaqlOahiCzkvb/nlKhkZWZhdWx0XHJcbiAgICAgICAgc3JjSHRtbDonLi4vLi4vcmVhY3QvY29udGFpbmVycy9TaG9wQ2FydC5qc3gnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDpFTlVNX21kSWQuU2hvcEl0ZW0sXHJcbiAgICAgICAgc3JjTWRGb2xkZXI6Jy4vTURQYWdlcy9TaG9wSXRlbScsXHJcbiAgICAgICAgZmlsZW5hbWVNZENvbmZpZzpudWxsLC8v5LiN5oyH5a6a5qqU5qGILOS9v+eUqGRlZmF1bHRcclxuICAgICAgICBzcmNIdG1sOicuLi8uLi9yZWFjdC9jb21wb25lbnRzL1Nob3BJdGVtLmpzeCcsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOkVOVU1fbWRJZC5JbnZvaWNlLFxyXG4gICAgICAgIHNyY01kRm9sZGVyOicuL01EUGFnZXMvSW52b2ljZScsXHJcbiAgICAgICAgZmlsZW5hbWVNZENvbmZpZzpudWxsLC8v5LiN5oyH5a6a5qqU5qGILOS9v+eUqGRlZmF1bHRcclxuICAgICAgICBzcmNIdG1sOicuLi8uLi9yZWFjdC9jb21wb25lbnRzL0ludm9pY2UuanN4JyxcclxuICAgIH0sXHJcbiAgICAvLyB7XHJcbiAgICAvLyAgICAgaWQ6RU5VTV9tZElkLixcclxuICAgIC8vICAgICBzcmNNZEZvbGRlcjonLi9NRFBhZ2VzL1Nob3BJdGVtJyxcclxuICAgIC8vICAgICBmaWxlbmFtZU1kQ29uZmlnOm51bGwsLy/kuI3mjIflrprmqpTmoYgs5L2/55SoZGVmYXVsdFxyXG4gICAgLy8gICAgIHNyY0h0bWw6Jy4uLy4uL3JlYWN0L2NvbXBvbmVudHMvSW52b2ljZS5qc3gnLFxyXG4gICAgLy8gfSxcclxuICAgIHtcclxuICAgICAgICBpZDpFTlVNX21kSWQuaW5kZXgsXHJcbiAgICAgICAgc3JjTWRGb2xkZXI6Jy4vTURQYWdlcy9pbmRleCcsXHJcbiAgICAgICAgZmlsZW5hbWVNZENvbmZpZzonaW5kZXgubWRDb25maWcuanMnLFxyXG4gICAgICAgIHNyY0h0bWw6Jy4uLy4uLy4uL3BhZ2VzL2luZGV4L2luZGV4Lmh0bScsXHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOkVOVU1fbWRJZC5jdXNNb2RhbExvZ2luLFxyXG4gICAgICAgIHNyY01kRm9sZGVyOicuL01EUGFnZXMvY3VzTW9kYWxMb2dpbicsXHJcbiAgICAgICAgZmlsZW5hbWVNZENvbmZpZzpudWxsLC8v5LiN5oyH5a6a5qqU5qGILOS9v+eUqGRlZmF1bHRcclxuICAgICAgICBzcmNIdG1sOicuLi8uLi8uLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uaHRtJyxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6RU5VTV9tZElkLmN1c01vZGFsVXNlclByb2ZpbGUsXHJcbiAgICAgICAgc3JjTWRGb2xkZXI6Jy4vTURQYWdlcy9jdXNNb2RhbFVzZXJQcm9maWxlJyxcclxuICAgICAgICBmaWxlbmFtZU1kQ29uZmlnOm51bGwsLy/kuI3mjIflrprmqpTmoYgs5L2/55SoZGVmYXVsdFxyXG4gICAgICAgIHNyY0h0bWw6Jy4uLy4uLy4uL3dlYmNvbXBvbmVudHMvY3VzTW9kYWxVc2VyUHJvZmlsZTMvY3VzTW9kYWxVc2VyUHJvZmlsZS5odG0nLFxyXG4gICAgfSxcclxuICAgIFxyXG5cclxuXHJcbiAgICBcclxuICAgIC8vIHtcclxuICAgIC8vICAgICBpZDonY3VzTW9kYWxMb2dpbicsXHJcbiAgICAvLyAgICAgc3JjTWRGb2xkZXI6Jy4vY3VzTW9kYWxMb2dpbicsXHJcbiAgICAvLyAgICAgZmlsZW5hbWVNZENvbmZpZzonJyxcclxuICAgIC8vICAgICBzcmNIdG1sOicuLi8uLi8uLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uaHRtJyxcclxuICAgIC8vIH0sXHJcbl1cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgUGFnZUNvbmZpZyxcclxuICAgIGRhdGEsXHJcbiAgICBnZW5lcmF0ZUlkLFxyXG4gICAgRU5VTV9tZElkLFxyXG59XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekVBO0FBMkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/test/selenium/pages.config.js\n");

/***/ }),

/***/ "./pages/index/index.assertLog.js":
/*!****************************************!*\
  !*** ./pages/index/index.assertLog.js ***!
  \****************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\n/* harmony import */ var _js_test_selenium_assertLog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../js/test/selenium/assertLog.js */ \"./js/test/selenium/assertLog.js\");\n/* harmony import */ var _js_test_selenium_pages_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../js/test/selenium/pages.config.js */ \"./js/test/selenium/pages.config.js\");\n\n\nvar getTitle = _js_test_selenium_assertLog_js__WEBPACK_IMPORTED_MODULE_0__.default.getTitle;\nvar ENUM_mdId = _js_test_selenium_pages_config_js__WEBPACK_IMPORTED_MODULE_1__.default.ENUM_mdId; //let assertTitle = 'assertLog:'\n// let getTitle = (mdId, arguments_callee_name) => {\n//     return `${assertTitle}[${mdId}-${arguments_callee_name}]  `\n// }\n\nvar mdID = ENUM_mdId.index;\n\nfunction loginSuccess(funcName, isSuccess) {\n  //arguments.callee.name\n  return \"\".concat(getTitle(mdID, funcName)).concat(isSuccess);\n}\n\nfunction displayLoginName(funcName, loginName) {\n  return \"\".concat(getTitle(mdID, funcName)).concat(loginName);\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  loginSuccess: loginSuccess.bind(null, loginSuccess.name),\n  displayLoginName: displayLoginName.bind(null, displayLoginName.name)\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC9pbmRleC5hc3NlcnRMb2cuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9pbmRleC9pbmRleC5hc3NlcnRMb2cuanM/Yzk5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0TG9nIGZyb20gJy4uLy4uL2pzL3Rlc3Qvc2VsZW5pdW0vYXNzZXJ0TG9nLmpzJ1xyXG5pbXBvcnQgcGFnZUNvbmZpZyBmcm9tICcuLi8uLi9qcy90ZXN0L3NlbGVuaXVtL3BhZ2VzLmNvbmZpZy5qcydcclxuY29uc3Qge2dldFRpdGxlfSA9IGFzc2VydExvZ1xyXG5jb25zdCB7RU5VTV9tZElkfSA9IHBhZ2VDb25maWdcclxuXHJcbi8vbGV0IGFzc2VydFRpdGxlID0gJ2Fzc2VydExvZzonXHJcbi8vIGxldCBnZXRUaXRsZSA9IChtZElkLCBhcmd1bWVudHNfY2FsbGVlX25hbWUpID0+IHtcclxuLy8gICAgIHJldHVybiBgJHthc3NlcnRUaXRsZX1bJHttZElkfS0ke2FyZ3VtZW50c19jYWxsZWVfbmFtZX1dICBgXHJcbi8vIH1cclxubGV0IG1kSUQgPSBFTlVNX21kSWQuaW5kZXhcclxuXHJcbmZ1bmN0aW9uIGxvZ2luU3VjY2VzcyhmdW5jTmFtZSwgaXNTdWNjZXNzKSB7XHJcbiAgICAvL2FyZ3VtZW50cy5jYWxsZWUubmFtZVxyXG4gICAgcmV0dXJuIGAke2dldFRpdGxlKG1kSUQsIGZ1bmNOYW1lKX0ke2lzU3VjY2Vzc31gXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlMb2dpbk5hbWUoZnVuY05hbWUsIGxvZ2luTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2dldFRpdGxlKG1kSUQsIGZ1bmNOYW1lKX0ke2xvZ2luTmFtZX1gXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgbG9naW5TdWNjZXNzOiBsb2dpblN1Y2Nlc3MuYmluZChudWxsLCBsb2dpblN1Y2Nlc3MubmFtZSksXHJcbiAgICBkaXNwbGF5TG9naW5OYW1lOiBkaXNwbGF5TG9naW5OYW1lLmJpbmQobnVsbCwgZGlzcGxheUxvZ2luTmFtZS5uYW1lKSxcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index/index.assertLog.js\n");

/***/ }),

/***/ "./pages/index/index.js":
/*!******************************!*\
  !*** ./pages/index/index.js ***!
  \******************************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var smoothscroll_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! smoothscroll-polyfill */ \"../node_modules/smoothscroll-polyfill/dist/smoothscroll.js\");\n/* harmony import */ var smoothscroll_polyfill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(smoothscroll_polyfill__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bootstrap */ \"../node_modules/bootstrap/dist/js/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index.css */ \"./pages/index/index.css\");\n/* harmony import */ var _js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../js/firebase/FirebaseMJS.js */ \"./js/firebase/FirebaseMJS.js\");\n/* harmony import */ var _indexESM_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./indexESM.js */ \"./pages/index/indexESM.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash */ \"../node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _index_assertLog_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index.assertLog.js */ \"./pages/index/index.assertLog.js\");\n/* harmony import */ var _js_lib_dataKits_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../js/lib/dataKits.js */ \"./js/lib/dataKits.js\");\n/* harmony import */ var _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../js/dataDefine/index.js */ \"./js/dataDefine/index.js\");\n/* harmony import */ var _js_others_useComponent3_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../js/others/useComponent3.js */ \"./js/others/useComponent3.js\");\n/* harmony import */ var _webcomponents_cusModalLogin3_cusModalLogin_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../webcomponents/cusModalLogin3/cusModalLogin.js */ \"./webcomponents/cusModalLogin3/cusModalLogin.js\");\n/* harmony import */ var _webcomponents_cusModalUserProfile3_cusModalUserProfile_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../webcomponents/cusModalUserProfile3/cusModalUserProfile.js */ \"./webcomponents/cusModalUserProfile3/cusModalUserProfile.js\");\n/* harmony import */ var _webcomponents_cusFullPageScroll_fullPageScroll_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../webcomponents/cusFullPageScroll/fullPageScroll.js */ \"./webcomponents/cusFullPageScroll/fullPageScroll.js\");\n/* harmony import */ var _webcomponents_cusModalUserProfile3_cusModalUserProfile_css__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../webcomponents/cusModalUserProfile3/cusModalUserProfile.css */ \"./webcomponents/cusModalUserProfile3/cusModalUserProfile.css\");\n/* harmony import */ var _webcomponents_cusModalLogin3_cusModalLogin_css__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../webcomponents/cusModalLogin3/cusModalLogin.css */ \"./webcomponents/cusModalLogin3/cusModalLogin.css\");\n/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! sweetalert2 */ \"../node_modules/sweetalert2/dist/sweetalert2.all.js\");\n/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_16__);\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n//@ts-check\n\n\n //import 'popper.js'\n// import 'bootstrap/dist/css/bootstrap.min.css';\n\n //import indexEsm from './index.esm.js'\n\n\n\n\n\n // import firebase from \"firebase/app\";\n// import \"firebase/auth\"\n// import 'firebase/firestore'\n//import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faUser,\n//     faShoppingCart\n// } from \"@fortawesome/fontawesome-free-solid\";\n// import index_css from './index.css'\n\n\n\n\n\n\n\n\n\n__webpack_require__(/*! @babel/polyfill */ \"../node_modules/@babel/polyfill/lib/index.js\"); //for async await syntax\n//const Swal = require('sweetalert2')\n\n\n //fontawesome.library.add([faUser,faShoppingCart]);\n//require(\"html-loader!./webpack_html/img_html.html\");\n\nwindow.Swal = (sweetalert2__WEBPACK_IMPORTED_MODULE_16___default());\nwindow.$ = $;\nwindow._ = (lodash__WEBPACK_IMPORTED_MODULE_6___default()); //console.log('lodash--',_)\n// kick off the polyfill!\n\nsmoothscroll_polyfill__WEBPACK_IMPORTED_MODULE_0___default().polyfill();\n\nvar firebaseConfig = __webpack_require__(/*! ../../projectConfig/firebaseProj.config.json */ \"./projectConfig/firebaseProj.config.json\");\n\nvar firebase = __webpack_require__(/*! firebase/app */ \"../node_modules/firebase/app/dist/index.cjs.js\");\n\n__webpack_require__(/*! firebase/auth */ \"../node_modules/firebase/auth/dist/index.esm.js\");\n\n__webpack_require__(/*! firebase/firestore */ \"../node_modules/firebase/firestore/dist/index.esm.js\");\n\nfirebase.initializeApp(firebaseConfig); // To apply the default browser preference instead of explicitly setting it.\n\nfirebase.auth().useDeviceLanguage();\nvar liLogin = document.querySelector('#liLogin');\nvar liUserDropdown = document.querySelector('#liUserDropdown');\nvar aMyOrder = document.querySelector('#aMyOrder');\nvar aMyProfile = document.querySelector('#aMyProfile');\nvar aLogout = document.querySelector('#aLogout');\nvar spanDisplayEmail = document.querySelector('#spanDisplayEmail');\nvar aOpenModalShopcart = document.querySelector('#aOpenModalShopcart');\nwindow.firebase = firebase;\n/**@enum {string} */\n\nvar ENUM_static_scroll_href_Id = {\n  history: 'history',\n  news: 'news',\n  qanda: 'qanda',\n  contactus: 'contactus' //page-react\n\n}; // const ENUM_reactSwitchPage = {\n//     ProductListSearch: 'ProductListSearch',\n//     ViewOrders: 'ViewOrders',\n// }\n//var //---pure data\n\nvar proxyMainPageUI = {\n  /**@type {boolean} */\n  isReactPage: false,\n  //.history|'news'|'qanda'|'contactus\n\n  /**@type {ENUM_static_scroll_href_Id} */\n  scrollToHrefId: ENUM_static_scroll_href_Id.history,\n  // /**@type {ENUM_reactSwitchPage} */\n  // reactSwitchPage: ENUM_reactSwitchPage.ProductListSearch,\n\n  /**@type {number} */\n  shopItemCount: 0,\n\n  /**@type {cusFullPageScroll}} */\n  cusFullPageScroll: null,\n\n  /**@type {cusModalLogin} */\n  cusModalLogin: null,\n\n  /**@type {cusModalUserProfile}} */\n  cusModalUserProfile: null\n};\n/**\r\n * @callback pushUrlFunc\r\n * @param {string} url - ...\r\n */\n\nwindow.app = {\n  pushUrl: function pushUrl(url) {\n    /* history.push(?) */\n  },\n  viewSize: function viewSize() {\n    return $('#sizer').find('div:visible').data('size');\n  },\n  setShopItemCount: function setShopItemCount(itemCount) {\n    proxyMainPageUI.shopItemCount = itemCount;\n  },\n  navbar1: document.querySelector('#navbar1'),\n  openModalShopCart: null,\n  userData: null,\n  history: null,\n  switchIndexPage: switchIndexPage,\n  arrayGroupedCategories: null,\n  arrayProductInfo: null\n};\n\nfunction switchIndexPage(enum_switchIndexPage) {\n  switch (enum_switchIndexPage) {\n    case _indexESM_js__WEBPACK_IMPORTED_MODULE_5__.ENUM_switchIndexPage.ProductListSearch:\n      proxyMainPageUI.isReactPage = true; //proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ProductListSearch;\n\n      window.app.pushUrl('/ProductListSearch'); //ProductListSearch\n\n      setTimeout(function () {\n        window.scrollTo({\n          top: 0,\n          left: 0,\n          behavior: 'auto' //'smooth'\n\n        });\n      }, 500); //0的話有可能無法滑到最頂端，看運氣\n\n      break;\n\n    case _indexESM_js__WEBPACK_IMPORTED_MODULE_5__.ENUM_switchIndexPage.ViewOrders:\n      proxyMainPageUI.isReactPage = true; //proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ViewOrders;\n\n      window.app.pushUrl('/ViewOrders'); //ProductListSearch\n\n      setTimeout(function () {\n        window.scrollTo({\n          top: 0,\n          left: 0,\n          behavior: 'auto' //'smooth'\n\n        });\n      }, 500); //0的話有可能無法滑到最頂端，看運氣\n\n      break;\n\n    default:\n      break;\n  }\n\n  proxyMainPageUI.isReactPage = true; //ENUM_switchIndexPage\n} //-------------Proxy\n//---pure data\n\n\nvar proxyUserMenuDropdown = {\n  /** user dropdown menu, display login button / user dropdown menu */\n  isLogin: false,\n\n  /** user dropdown menu, display email account name */\n  loginName: \"\"\n}; //mvvm observeble pattern\n\nproxyUserMenuDropdown = new Proxy(proxyUserMenuDropdown, {\n  get: function get(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop) {\n    return target[prop];\n  },\n  set: function set(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop, value) {\n    switch (prop) {\n      case \"isLogin\":\n        if (value == true) {\n          //remove class displayNone\n          liLogin.classList.add('displayNone');\n          liUserDropdown.classList.remove('displayNone');\n        } else {\n          //add class displayNone\n          liLogin.classList.remove('displayNone');\n          liUserDropdown.classList.add('displayNone');\n        }\n\n        console.log(_index_assertLog_js__WEBPACK_IMPORTED_MODULE_7__.default.loginSuccess(value));\n        break;\n\n      case \"loginName\":\n        spanDisplayEmail.textContent = value;\n        console.log(_index_assertLog_js__WEBPACK_IMPORTED_MODULE_7__.default.displayLoginName(value));\n        break;\n\n      default:\n        break;\n    }\n\n    target[prop] = value;\n    return true;\n  }\n}); //test mvvm data binding\n// let aTestLogin = document.querySelector('#aTestLogin');\n// let aTestLogout = document.querySelector('#aTestLogout');\n// aTestLogin.addEventListener('click', (e) => {\n//     proxyUserMenuDropdown.isLogin = true;\n//     proxyUserMenuDropdown.loginName = \"John\"\n// })\n// aTestLogout.addEventListener('click', (e) => {\n//     proxyUserMenuDropdown.isLogin = false;\n// })\n//------------firebase onAuthChanged\n// tset case 1: no authUser (not signin)\n// tset case 2: has authUser -- UI display name change\n// tset case 3: (has authUser, has window.app.userData) -- sync emailVerified_auth\n// tset case 4: (has authUser, no window.app.userData) -- getDbUser\n// tset case 5: (has authUser, no window.app.userData, has DbUser) -- window.app.userData = dbUser; + sync emailVerified_auth;\n// tset case 6: (has authUser, no window.app.userData, no DbUser) -- userInfo = authUser; + window.app.userData = userInfo(已同時 sync emailVerified_auth);\n\nfirebase.auth().onAuthStateChanged(function (\n/**@type {any}*/\nauthUser) {\n  var db = firebase.firestore(); //functions....\n\n  /**\r\n   * save partial fields of UserInfo to firestore.collection('Users')\r\n   * @param {any} userInfo \r\n   */\n\n  function SetUserData(userInfo) {\n    // let type = \n    return db.collection(_js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_4__.FIRESTORE_COLLECTION.Users).doc(userInfo.uid).set(userInfo, {\n      merge: true\n    });\n  }\n  /**\r\n   * save UserInfo.emailVerified to firestore.collection('Users')\r\n   * @param {boolean} emailVerified_FromAuth auth-user's emailVerified prop value\r\n   * @param {string} uid auth-user's uid\r\n   */\n\n\n  function syncEmailVerified_ToDB(emailVerified_FromAuth, uid) {\n    var userInfo = {\n      uid: uid,\n      emailVerified: emailVerified_FromAuth\n    };\n    return SetUserData(userInfo);\n  } //-----------------\n\n\n  if (authUser) {\n    // User is signed in.\n    proxyUserMenuDropdown.isLogin = true;\n    proxyUserMenuDropdown.loginName = authUser.email;\n    var uid = authUser.uid,\n        emailVerified_auth = authUser.emailVerified;\n    console.log(\"LOG:: authUser\", authUser);\n    console.log(\"LOG:: uid\", uid); //----window.app.userData exist\n\n    if (window.app.userData) {\n      var emailVerified_db = window.app.userData.emailVerified; //sync auth emailVerified to DB\n\n      if (emailVerified_auth != emailVerified_db) syncEmailVerified_ToDB(emailVerified_auth, uid);\n    } //----window.app.userData not exist!\n\n\n    if (!window.app.userData) {\n      var getDbUser = function getDbUser(\n      /**@type {string} */\n      uid) {\n        return db.collection(_js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_4__.FIRESTORE_COLLECTION.Users).doc(uid).get().then(function (\n        /**@type {any}*/\n        querySnapshot) {\n          if (querySnapshot.exists === false) return null;else return querySnapshot.data(); // let dbUser = {\n          //     exists: querySnapshot.exists,\n          //     doc: querySnapshot.data()\n          // }\n          // return dbUser\n        });\n      };\n      /**\r\n       * \r\n       * @param {any} authUser \r\n       */\n\n\n      var getUserInfo = function getUserInfo(authUser) {\n        var userInfo = new _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_9__.UserData(); // let dispalyName = null;\n        // if (authUser.dispalyName === undefined)\n        //     dispalyName = null;\n        // else\n        //     dispalyName = authUser.dispalyName;\n        // }\n\n        userInfo.dispalyName = authUser.dispalyName ? authUser.dispalyName : null;\n        userInfo.email = authUser.email;\n        userInfo.emailVerified = authUser.emailVerified;\n        userInfo.phoneNumber = authUser.phoneNumber;\n        userInfo.photoURL = authUser.photoURL;\n        userInfo.uid = authUser.uid;\n        userInfo.listProviderId = _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_9__.UserData.getListProviderId_ByAuthUserProviderData(authUser.providerData); //providerId: auto get by self. //authUser.providerData[0].providerId,   \n\n        return userInfo;\n      }; // start load db user info --> ready to set window.app.userData\n\n\n      console.log('load user data from firestore...');\n      getDbUser(uid).then(function (\n      /**@type {any}*/\n      dbUser) {\n        // db user exist\n        if (dbUser) {\n          window.app.userData = Object.assign(new _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_9__.UserData(), dbUser);\n          var _emailVerified_db = dbUser.emailVerified; //sync auth emailVerified to DB\n\n          if (emailVerified_auth != _emailVerified_db) syncEmailVerified_ToDB(emailVerified_auth, uid);\n        } //not exist\n        else {\n            //get info from authUser\n            var userInfo = getUserInfo(authUser);\n            window.app.userData = userInfo; //save info to db (First time)\n\n            var userData_fs = (0,_js_lib_dataKits_js__WEBPACK_IMPORTED_MODULE_8__.getPlainObject)(userInfo);\n            SetUserData(userData_fs); // return true //new user\n          }\n      })[\"catch\"](function (\n      /**@type {any}*/\n      err) {\n        console.error('onAuthStateChanged, get userData failed. ', err.code, err.message);\n      });\n    }\n  } else {\n    // No user is signed in.\n    proxyUserMenuDropdown.isLogin = false;\n    proxyUserMenuDropdown.loginName = null;\n    console.log('No user is signed in...');\n  }\n}); //firebase.analytics();\n// console.log(firebase)\n// let db = firebase.firestore();\n// db.collection(\"Products\")//.where(\"autoNum\", \"==\", 7)\n//     .get()\n//     .then(function (querySnapshot) {\n//     })\n//     .catch((err) => {\n//     })\n// console.log(__dirname)\n//mvvm observeble pattern\n\nvar pageStatic = $('#page-static');\nvar pageReact = $('#page-react'); //let navbar1 = document.querySelector('#navbar1');\n//let navbar_height = window.app.navbar1.offsetHeight + 5\n\nproxyMainPageUI = new Proxy(proxyMainPageUI, {\n  get: function get(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop) {\n    return target[prop];\n  },\n  set: function set(\n  /**@type {any} */\n  target,\n  /**@type {any} */\n  prop, value) {\n    switch (prop) {\n      case \"isReactPage\":\n        if (value == true) {\n          pageStatic.hide();\n          pageReact.fadeIn(500);\n        } else {\n          pageStatic.fadeIn(500);\n          pageReact.hide();\n        }\n\n        break;\n\n      case \"scrollToHrefId\":\n        target.cusFullPageScroll.scrollToElem('#' + value);\n        break;\n\n      case \"shopItemCount\":\n        //$('.fa-shopping-cart').attr(\"data-count\", value)\n        var numberBadges = document.querySelectorAll('.numberBadge');\n        numberBadges.forEach(function (element) {\n          element.textContent = value;\n        });\n        break;\n      // case \"reactSwitchPage\":\n      //     switch (value) {\n      //         case ENUM_reactSwitchPage.ProductListSearch:\n      //             window.app.pushUrl('/ProductListSearch'); //ProductListSearch\n      //             setTimeout(() => {\n      //                 window.scrollTo({\n      //                     top: 0,\n      //                     left: 0,\n      //                     behavior: 'auto' //'smooth'\n      //                 });\n      //             }, 10); //0的話有可能無法滑到最頂端，看運氣\n      //             break;\n      //         case ENUM_reactSwitchPage.ViewOrders:\n      //             window.app.pushUrl('/ViewOrders'); //ProductListSearch\n      //             setTimeout(() => {\n      //                 window.scrollTo({\n      //                     top: 0,\n      //                     left: 0,\n      //                     behavior: 'auto' //'smooth'\n      //                 });\n      //             }, 10); //0的話有可能無法滑到最頂端，看運氣\n      //             break;\n      //         default:\n      //             break;\n      //     }\n      //     break;\n\n      default:\n        break;\n    }\n\n    target[prop] = value;\n    return true;\n  }\n}); //------------ load webcomponents\n\nvar newTagName = \"cus-full-page-scroll\";\nvar pathHtml_fullPageScroll = '../../webcomponents/cusFullPageScroll/fullPageScroll.htm';\nif (!proxyMainPageUI.cusFullPageScroll) (0,_js_others_useComponent3_js__WEBPACK_IMPORTED_MODULE_10__.useComponent)(newTagName, pathHtml_fullPageScroll, _webcomponents_cusFullPageScroll_fullPageScroll_js__WEBPACK_IMPORTED_MODULE_13__.default).then(function (htmlFile) {\n  var newComponent = new htmlFile.ctor(htmlFile.templateContent);\n  proxyMainPageUI.cusFullPageScroll = newComponent;\n  pageStatic.append(newComponent); //newComponent.scrollToElem('#news')\n}); //---------------------Constructor()-> setFirebase(firebase) - > Auth().getRedirectResult()\n\nnewTagName = \"cus-modal-login\"; //let login_Element = document.querySelector(newTagName);\n\nif (!proxyMainPageUI.cusModalLogin) {\n  (0,_js_others_useComponent3_js__WEBPACK_IMPORTED_MODULE_10__.useComponent)(newTagName, '../../webcomponents/cusModalLogin3/cusModalLogin.htm', _webcomponents_cusModalLogin3_cusModalLogin_js__WEBPACK_IMPORTED_MODULE_11__.default).then(function (htmlFile) {\n    var plugins = {\n      Swal: (sweetalert2__WEBPACK_IMPORTED_MODULE_16___default()),\n      Email_ResendPassword: _js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_4__.Email_ResendPassword\n    }; //class-instance APPEAR!!  you can set template now~~~\n\n    /**@type {cusModalLogin} */\n\n    var newComponent = new htmlFile.ctor(htmlFile.templateContent, plugins); // if (WebpackDefinePlugin.devMode) {\n    //     newComponent.proxyUI.bindIptSigninEmail = 'ice4kimo@yahoo.com.tw'\n    //     newComponent.proxyUI.bindIptSigninPWD = '11111111'\n    //     newComponent.proxyUI.bindIptRegisterEmail = 'ice4kimo@yahoo.com.tw'\n    //     newComponent.proxyUI.bindIptRegisterPWD1 = '11111111'\n    //     newComponent.proxyUI.bindIptRegisterPWD2 = '11111111'\n    //     newComponent.proxyUI.bindIptResentPwdEmail = 'ice4kimo@yahoo.com.tw'\n    // }\n\n    proxyMainPageUI.cusModalLogin = newComponent;\n    /**@type {any} */\n\n    var node = newComponent;\n    document.body.appendChild(node);\n  });\n} //------------------- aMyProfile\n\n\nvar pathHtml_userProfile = '../../webcomponents/cusModalUserProfile3/cusModalUserProfile.htm';\naMyProfile.addEventListener('click', function (e) {\n  e.preventDefault();\n  var newTagName = \"cus-modal-user-profile\"; //let login_Element = document.querySelector(newTagName);\n\n  if (proxyMainPageUI.cusModalUserProfile) proxyMainPageUI.cusModalUserProfile.showModal(true);else {\n    (0,_js_others_useComponent3_js__WEBPACK_IMPORTED_MODULE_10__.useComponent)(newTagName, pathHtml_userProfile, _webcomponents_cusModalUserProfile3_cusModalUserProfile_js__WEBPACK_IMPORTED_MODULE_12__.default).then(function (compUI) {\n      var plugins = {\n        Swal: (sweetalert2__WEBPACK_IMPORTED_MODULE_16___default()),\n        Email_ResendPassword: _js_firebase_FirebaseMJS_js__WEBPACK_IMPORTED_MODULE_4__.Email_ResendPassword\n      };\n      var newComponent = new compUI.ctor(compUI.templateContent, plugins);\n      proxyMainPageUI.cusModalUserProfile = newComponent; // newComponent.setDataDefine({\n      //     UserData: UserData\n      // });\n\n      document.body.appendChild(newComponent);\n      var uid = firebase.auth().currentUser.uid;\n      newComponent.loadDbProfile(uid);\n      newComponent.showModal(true); //UI control\n\n      newComponent.proxyUI.isEmailVerified = firebase.auth().currentUser.emailVerified;\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }\n}); // get 5 navbar items\n\nvar all_MenuHref = document.querySelectorAll('a[href]'); // ----------- add button click event\n//     <a href=\"#history\" class=\"nav-link\">老店歷史</a>\n//     <a href=\"#news\" class=\"nav-link\">最新消息</a>\n//     <a href=\"#page-react\" class=\"nav-link\" id=\"aOrderProducts\">產品訂購</a>\n//     <a href=\"#qanda\" class=\"nav-link\">常見問題(購物)</a>\n//     <a href=\"#contactus\" class=\"nav-link\">聯絡我們</a>\n\nvar array_MenuHrefs = _toConsumableArray(all_MenuHref).filter(function (item) {\n  var href = item.getAttribute('href');\n  return href !== \"#\"; // 總共有5個\n}); // add nav item click event\n// e.preventDefault()->ignore default scroll behavior, need to change react page?\n\n\narray_MenuHrefs.forEach(function (element) {\n  var href = element.getAttribute('href');\n\n  switch (href) {\n    case '#page-react':\n      element.addEventListener('click', function (e) {\n        e.preventDefault(); //proxyMainPageUI.isReactPage = true;\n        //proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ProductListSearch;\n\n        window.app.switchIndexPage(_indexESM_js__WEBPACK_IMPORTED_MODULE_5__.ENUM_switchIndexPage.ProductListSearch);\n      });\n      break;\n\n    case '#history':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        proxyMainPageUI.isReactPage = false;\n        proxyMainPageUI.scrollToHrefId = ENUM_static_scroll_href_Id.history;\n      });\n      break;\n\n    case '#news':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        proxyMainPageUI.isReactPage = false;\n        proxyMainPageUI.scrollToHrefId = ENUM_static_scroll_href_Id.news;\n      });\n      break;\n\n    case '#qanda':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        proxyMainPageUI.isReactPage = false;\n        proxyMainPageUI.scrollToHrefId = ENUM_static_scroll_href_Id.qanda;\n      });\n      break;\n\n    case '#contactus':\n      element.addEventListener('click', function (e) {\n        e.preventDefault();\n        proxyMainPageUI.isReactPage = false;\n        proxyMainPageUI.scrollToHrefId = ENUM_static_scroll_href_Id.contactus;\n      });\n      break;\n\n    default:\n      break;\n  }\n}); //------------------- liLogin\n\nliLogin.addEventListener('click', function (e) {\n  e.preventDefault();\n  proxyMainPageUI.cusModalLogin.showModal(true);\n}); //------------------- aLogout\n\naLogout.addEventListener('click', function (e) {\n  e.preventDefault();\n  firebase.auth().signOut().then(function () {// Sign-out successful.\n  })[\"catch\"](function (\n  /**@type {any}*/\n  error) {// An error happened.\n  });\n}); //------------------- aMyOrder\n\naMyOrder.addEventListener('click', function (e) {\n  e.preventDefault();\n  window.app.switchIndexPage(_indexESM_js__WEBPACK_IMPORTED_MODULE_5__.ENUM_switchIndexPage.ViewOrders); // proxyMainPageUI.isReactPage = true\n  // proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ViewOrders\n  //window.app.pushUrl('/ViewOrders'); //ProductListSearch\n});\naOpenModalShopcart.addEventListener('click', function () {\n  window.app.switchIndexPage(_indexESM_js__WEBPACK_IMPORTED_MODULE_5__.ENUM_switchIndexPage.ProductListSearch); // proxyMainPageUI.isReactPage = true\n  // proxyMainPageUI.reactSwitchPage = ENUM_reactSwitchPage.ProductListSearch;\n\n  setTimeout(function () {\n    if (window.app.openModalShopCart) window.app.openModalShopCart();\n  }, 100);\n}); //-------------\n\n$(document).ready(function () {\n  //pageStatic.hide();\n  //pageReact.hide();\n  proxyMainPageUI.isReactPage = false;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2luZGV4L2luZGV4LmpzPzgwMzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy9AdHMtY2hlY2tcclxuaW1wb3J0IHNtb290aHNjcm9sbCBmcm9tICdzbW9vdGhzY3JvbGwtcG9seWZpbGwnO1xyXG5pbXBvcnQgJ2pxdWVyeSdcclxuaW1wb3J0ICdib290c3RyYXAnXHJcbi8vaW1wb3J0ICdwb3BwZXIuanMnXHJcbi8vIGltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzJztcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbi8vaW1wb3J0IGluZGV4RXNtIGZyb20gJy4vaW5kZXguZXNtLmpzJ1xyXG5pbXBvcnQgRmlyZWJhc2VNSlMsIHtcclxuICAgIC8vc3luY0VtYWlsVmVyaWZpZWRfVG9EQixcclxuICAgIEVtYWlsX1Jlc2VuZFBhc3N3b3JkLFxyXG4gICAgRklSRVNUT1JFX0NPTExFQ1RJT05cclxufSBmcm9tICcuLi8uLi9qcy9maXJlYmFzZS9GaXJlYmFzZU1KUy5qcydcclxuaW1wb3J0IHtcclxuICAgIEVOVU1fc3dpdGNoSW5kZXhQYWdlXHJcbn0gZnJvbSAnLi9pbmRleEVTTS5qcydcclxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xyXG5pbXBvcnQgYXNzZXJ0TG9nIGZyb20gJy4vaW5kZXguYXNzZXJ0TG9nLmpzJ1xyXG5pbXBvcnQge2dldFBsYWluT2JqZWN0fSBmcm9tICcuLi8uLi9qcy9saWIvZGF0YUtpdHMuanMnXHJcbi8vIGltcG9ydCBmaXJlYmFzZSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XHJcbi8vIGltcG9ydCBcImZpcmViYXNlL2F1dGhcIlxyXG4vLyBpbXBvcnQgJ2ZpcmViYXNlL2ZpcmVzdG9yZSdcclxuXHJcbi8vaW1wb3J0IGZvbnRhd2Vzb21lIGZyb20gXCJAZm9ydGF3ZXNvbWUvZm9udGF3ZXNvbWVcIjtcclxuLy8gaW1wb3J0IHtcclxuLy8gICAgIGZhVXNlcixcclxuLy8gICAgIGZhU2hvcHBpbmdDYXJ0XHJcbi8vIH0gZnJvbSBcIkBmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlLXNvbGlkXCI7XHJcbi8vIGltcG9ydCBpbmRleF9jc3MgZnJvbSAnLi9pbmRleC5jc3MnXHJcbmltcG9ydCB7XHJcbiAgICBVc2VyRGF0YVxyXG59IGZyb20gJy4uLy4uL2pzL2RhdGFEZWZpbmUvaW5kZXguanMnXHJcbmltcG9ydCB7XHJcbiAgICB1c2VDb21wb25lbnRcclxufSBmcm9tICcuLi8uLi9qcy9vdGhlcnMvdXNlQ29tcG9uZW50My5qcydcclxuXHJcbmltcG9ydCBjdXNNb2RhbExvZ2luIGZyb20gJy4uLy4uL3dlYmNvbXBvbmVudHMvY3VzTW9kYWxMb2dpbjMvY3VzTW9kYWxMb2dpbi5qcydcclxuaW1wb3J0IGN1c01vZGFsVXNlclByb2ZpbGUgZnJvbSAnLi4vLi4vd2ViY29tcG9uZW50cy9jdXNNb2RhbFVzZXJQcm9maWxlMy9jdXNNb2RhbFVzZXJQcm9maWxlLmpzJ1xyXG5pbXBvcnQgY3VzRnVsbFBhZ2VTY3JvbGwgZnJvbSAnLi4vLi4vd2ViY29tcG9uZW50cy9jdXNGdWxsUGFnZVNjcm9sbC9mdWxsUGFnZVNjcm9sbC5qcydcclxuXHJcbmltcG9ydCAnLi4vLi4vd2ViY29tcG9uZW50cy9jdXNNb2RhbFVzZXJQcm9maWxlMy9jdXNNb2RhbFVzZXJQcm9maWxlLmNzcydcclxuaW1wb3J0ICcuLi8uLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uY3NzJ1xyXG5yZXF1aXJlKCdAYmFiZWwvcG9seWZpbGwnKSAvL2ZvciBhc3luYyBhd2FpdCBzeW50YXhcclxuXHJcbi8vY29uc3QgU3dhbCA9IHJlcXVpcmUoJ3N3ZWV0YWxlcnQyJylcclxuaW1wb3J0IFN3YWwgZnJvbSAnc3dlZXRhbGVydDInXHJcblxyXG4vL2ZvbnRhd2Vzb21lLmxpYnJhcnkuYWRkKFtmYVVzZXIsZmFTaG9wcGluZ0NhcnRdKTtcclxuXHJcbi8vcmVxdWlyZShcImh0bWwtbG9hZGVyIS4vd2VicGFja19odG1sL2ltZ19odG1sLmh0bWxcIik7XHJcbndpbmRvdy5Td2FsID0gU3dhbDtcclxud2luZG93LiQgPSAkXHJcbndpbmRvdy5fID0gX1xyXG4vL2NvbnNvbGUubG9nKCdsb2Rhc2gtLScsXylcclxuXHJcbi8vIGtpY2sgb2ZmIHRoZSBwb2x5ZmlsbCFcclxuc21vb3Roc2Nyb2xsLnBvbHlmaWxsKCk7XHJcblxyXG5sZXQgZmlyZWJhc2VDb25maWcgPSByZXF1aXJlKCcuLi8uLi9wcm9qZWN0Q29uZmlnL2ZpcmViYXNlUHJvai5jb25maWcuanNvbicpXHJcbmxldCBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlL2FwcCcpO1xyXG5yZXF1aXJlKCdmaXJlYmFzZS9hdXRoJylcclxucmVxdWlyZSgnZmlyZWJhc2UvZmlyZXN0b3JlJylcclxuZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcblxyXG4vLyBUbyBhcHBseSB0aGUgZGVmYXVsdCBicm93c2VyIHByZWZlcmVuY2UgaW5zdGVhZCBvZiBleHBsaWNpdGx5IHNldHRpbmcgaXQuXHJcbmZpcmViYXNlLmF1dGgoKS51c2VEZXZpY2VMYW5ndWFnZSgpO1xyXG5cclxubGV0IGxpTG9naW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlMb2dpbicpO1xyXG5sZXQgbGlVc2VyRHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlVc2VyRHJvcGRvd24nKTtcclxubGV0IGFNeU9yZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FNeU9yZGVyJyk7XHJcbmxldCBhTXlQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FNeVByb2ZpbGUnKTtcclxuXHJcbmxldCBhTG9nb3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FMb2dvdXQnKTtcclxubGV0IHNwYW5EaXNwbGF5RW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3BhbkRpc3BsYXlFbWFpbCcpO1xyXG5sZXQgYU9wZW5Nb2RhbFNob3BjYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FPcGVuTW9kYWxTaG9wY2FydCcpO1xyXG5cclxud2luZG93LmZpcmViYXNlID0gZmlyZWJhc2VcclxuXHJcbi8qKkBlbnVtIHtzdHJpbmd9ICovXHJcbmNvbnN0IEVOVU1fc3RhdGljX3Njcm9sbF9ocmVmX0lkID0ge1xyXG4gICAgaGlzdG9yeTogJ2hpc3RvcnknLFxyXG4gICAgbmV3czogJ25ld3MnLFxyXG4gICAgcWFuZGE6ICdxYW5kYScsXHJcbiAgICBjb250YWN0dXM6ICdjb250YWN0dXMnLFxyXG4gICAgLy9wYWdlLXJlYWN0XHJcbn1cclxuXHJcbi8vIGNvbnN0IEVOVU1fcmVhY3RTd2l0Y2hQYWdlID0ge1xyXG4vLyAgICAgUHJvZHVjdExpc3RTZWFyY2g6ICdQcm9kdWN0TGlzdFNlYXJjaCcsXHJcbi8vICAgICBWaWV3T3JkZXJzOiAnVmlld09yZGVycycsXHJcbi8vIH1cclxuXHJcblxyXG4vL3ZhciAvLy0tLXB1cmUgZGF0YVxyXG52YXIgcHJveHlNYWluUGFnZVVJID0ge1xyXG4gICAgLyoqQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICBpc1JlYWN0UGFnZTogZmFsc2UsXHJcbiAgICAvLy5oaXN0b3J5fCduZXdzJ3wncWFuZGEnfCdjb250YWN0dXNcclxuICAgIC8qKkB0eXBlIHtFTlVNX3N0YXRpY19zY3JvbGxfaHJlZl9JZH0gKi9cclxuICAgIHNjcm9sbFRvSHJlZklkOiBFTlVNX3N0YXRpY19zY3JvbGxfaHJlZl9JZC5oaXN0b3J5LFxyXG4gICAgLy8gLyoqQHR5cGUge0VOVU1fcmVhY3RTd2l0Y2hQYWdlfSAqL1xyXG4gICAgLy8gcmVhY3RTd2l0Y2hQYWdlOiBFTlVNX3JlYWN0U3dpdGNoUGFnZS5Qcm9kdWN0TGlzdFNlYXJjaCxcclxuICAgIC8qKkB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICBzaG9wSXRlbUNvdW50OiAwLFxyXG4gICAgLyoqQHR5cGUge2N1c0Z1bGxQYWdlU2Nyb2xsfX0gKi9cclxuICAgIGN1c0Z1bGxQYWdlU2Nyb2xsOiBudWxsLFxyXG4gICAgLyoqQHR5cGUge2N1c01vZGFsTG9naW59ICovXHJcbiAgICBjdXNNb2RhbExvZ2luOiBudWxsLFxyXG4gICAgLyoqQHR5cGUge2N1c01vZGFsVXNlclByb2ZpbGV9fSAqL1xyXG4gICAgY3VzTW9kYWxVc2VyUHJvZmlsZTogbnVsbCxcclxufVxyXG5cclxuLyoqXHJcbiAqIEBjYWxsYmFjayBwdXNoVXJsRnVuY1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gLi4uXHJcbiAqL1xyXG53aW5kb3cuYXBwID0ge1xyXG4gICAgcHVzaFVybDogKHVybCkgPT4ge1xyXG4gICAgICAgIC8qIGhpc3RvcnkucHVzaCg/KSAqL1xyXG4gICAgfSxcclxuICAgIHZpZXdTaXplOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICQoJyNzaXplcicpLmZpbmQoJ2Rpdjp2aXNpYmxlJykuZGF0YSgnc2l6ZScpO1xyXG4gICAgfSxcclxuICAgIHNldFNob3BJdGVtQ291bnQ6IGZ1bmN0aW9uIChpdGVtQ291bnQpIHtcclxuICAgICAgICBwcm94eU1haW5QYWdlVUkuc2hvcEl0ZW1Db3VudCA9IGl0ZW1Db3VudDtcclxuICAgIH0sXHJcbiAgICBuYXZiYXIxOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmF2YmFyMScpLFxyXG4gICAgb3Blbk1vZGFsU2hvcENhcnQ6IG51bGwsXHJcbiAgICB1c2VyRGF0YTogbnVsbCxcclxuICAgIGhpc3Rvcnk6IG51bGwsXHJcbiAgICBzd2l0Y2hJbmRleFBhZ2U6IHN3aXRjaEluZGV4UGFnZSxcclxuICAgIGFycmF5R3JvdXBlZENhdGVnb3JpZXM6IG51bGwsXHJcbiAgICBhcnJheVByb2R1Y3RJbmZvOiBudWxsLFxyXG59XHJcblxyXG5mdW5jdGlvbiBzd2l0Y2hJbmRleFBhZ2UoZW51bV9zd2l0Y2hJbmRleFBhZ2UpIHtcclxuICAgIHN3aXRjaCAoZW51bV9zd2l0Y2hJbmRleFBhZ2UpIHtcclxuICAgICAgICBjYXNlIEVOVU1fc3dpdGNoSW5kZXhQYWdlLlByb2R1Y3RMaXN0U2VhcmNoOlxyXG4gICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuaXNSZWFjdFBhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAvL3Byb3h5TWFpblBhZ2VVSS5yZWFjdFN3aXRjaFBhZ2UgPSBFTlVNX3JlYWN0U3dpdGNoUGFnZS5Qcm9kdWN0TGlzdFNlYXJjaDtcclxuICAgICAgICAgICAgd2luZG93LmFwcC5wdXNoVXJsKCcvUHJvZHVjdExpc3RTZWFyY2gnKTsgLy9Qcm9kdWN0TGlzdFNlYXJjaFxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdhdXRvJyAvLydzbW9vdGgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgNTAwKTsgLy8w55qE6Kmx5pyJ5Y+v6IO954Sh5rOV5ruR5Yiw5pyA6aCC56uv77yM55yL6YGL5rCjXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRU5VTV9zd2l0Y2hJbmRleFBhZ2UuVmlld09yZGVyczpcclxuICAgICAgICAgICAgcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy9wcm94eU1haW5QYWdlVUkucmVhY3RTd2l0Y2hQYWdlID0gRU5VTV9yZWFjdFN3aXRjaFBhZ2UuVmlld09yZGVycztcclxuICAgICAgICAgICAgd2luZG93LmFwcC5wdXNoVXJsKCcvVmlld09yZGVycycpOyAvL1Byb2R1Y3RMaXN0U2VhcmNoXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ2F1dG8nIC8vJ3Ntb290aCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCA1MDApOyAvLzDnmoToqbHmnInlj6/og73nhKHms5Xmu5HliLDmnIDpoILnq6/vvIznnIvpgYvmsKNcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gdHJ1ZTtcclxuICAgIC8vRU5VTV9zd2l0Y2hJbmRleFBhZ2VcclxufVxyXG4vLy0tLS0tLS0tLS0tLS1Qcm94eVxyXG4vLy0tLXB1cmUgZGF0YVxyXG5sZXQgcHJveHlVc2VyTWVudURyb3Bkb3duID0ge1xyXG4gICAgLyoqIHVzZXIgZHJvcGRvd24gbWVudSwgZGlzcGxheSBsb2dpbiBidXR0b24gLyB1c2VyIGRyb3Bkb3duIG1lbnUgKi9cclxuICAgIGlzTG9naW46IGZhbHNlLFxyXG4gICAgLyoqIHVzZXIgZHJvcGRvd24gbWVudSwgZGlzcGxheSBlbWFpbCBhY2NvdW50IG5hbWUgKi9cclxuICAgIGxvZ2luTmFtZTogXCJcIixcclxufVxyXG4vL212dm0gb2JzZXJ2ZWJsZSBwYXR0ZXJuXHJcbnByb3h5VXNlck1lbnVEcm9wZG93biA9IG5ldyBQcm94eShwcm94eVVzZXJNZW51RHJvcGRvd24sIHtcclxuICAgIGdldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3ApIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJpc0xvZ2luXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIGNsYXNzIGRpc3BsYXlOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgbGlMb2dpbi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpXHJcbiAgICAgICAgICAgICAgICAgICAgbGlVc2VyRHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheU5vbmUnKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2FkZCBjbGFzcyBkaXNwbGF5Tm9uZVxyXG4gICAgICAgICAgICAgICAgICAgIGxpTG9naW4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheU5vbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpVXNlckRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFzc2VydExvZy5sb2dpblN1Y2Nlc3ModmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsb2dpbk5hbWVcIjpcclxuICAgICAgICAgICAgICAgIHNwYW5EaXNwbGF5RW1haWwudGV4dENvbnRlbnQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFzc2VydExvZy5kaXNwbGF5TG9naW5OYW1lKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59KVxyXG5cclxuLy90ZXN0IG12dm0gZGF0YSBiaW5kaW5nXHJcbi8vIGxldCBhVGVzdExvZ2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FUZXN0TG9naW4nKTtcclxuLy8gbGV0IGFUZXN0TG9nb3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FUZXN0TG9nb3V0Jyk7XHJcbi8vIGFUZXN0TG9naW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4vLyAgICAgcHJveHlVc2VyTWVudURyb3Bkb3duLmlzTG9naW4gPSB0cnVlO1xyXG4vLyAgICAgcHJveHlVc2VyTWVudURyb3Bkb3duLmxvZ2luTmFtZSA9IFwiSm9oblwiXHJcbi8vIH0pXHJcbi8vIGFUZXN0TG9nb3V0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuLy8gICAgIHByb3h5VXNlck1lbnVEcm9wZG93bi5pc0xvZ2luID0gZmFsc2U7XHJcbi8vIH0pXHJcblxyXG4vLy0tLS0tLS0tLS0tLWZpcmViYXNlIG9uQXV0aENoYW5nZWRcclxuLy8gdHNldCBjYXNlIDE6IG5vIGF1dGhVc2VyIChub3Qgc2lnbmluKVxyXG4vLyB0c2V0IGNhc2UgMjogaGFzIGF1dGhVc2VyIC0tIFVJIGRpc3BsYXkgbmFtZSBjaGFuZ2VcclxuLy8gdHNldCBjYXNlIDM6IChoYXMgYXV0aFVzZXIsIGhhcyB3aW5kb3cuYXBwLnVzZXJEYXRhKSAtLSBzeW5jIGVtYWlsVmVyaWZpZWRfYXV0aFxyXG4vLyB0c2V0IGNhc2UgNDogKGhhcyBhdXRoVXNlciwgbm8gd2luZG93LmFwcC51c2VyRGF0YSkgLS0gZ2V0RGJVc2VyXHJcbi8vIHRzZXQgY2FzZSA1OiAoaGFzIGF1dGhVc2VyLCBubyB3aW5kb3cuYXBwLnVzZXJEYXRhLCBoYXMgRGJVc2VyKSAtLSB3aW5kb3cuYXBwLnVzZXJEYXRhID0gZGJVc2VyOyArIHN5bmMgZW1haWxWZXJpZmllZF9hdXRoO1xyXG4vLyB0c2V0IGNhc2UgNjogKGhhcyBhdXRoVXNlciwgbm8gd2luZG93LmFwcC51c2VyRGF0YSwgbm8gRGJVc2VyKSAtLSB1c2VySW5mbyA9IGF1dGhVc2VyOyArIHdpbmRvdy5hcHAudXNlckRhdGEgPSB1c2VySW5mbyjlt7LlkIzmmYIgc3luYyBlbWFpbFZlcmlmaWVkX2F1dGgpO1xyXG5maXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uICggLyoqQHR5cGUge2FueX0qLyBhdXRoVXNlcikge1xyXG4gICAgbGV0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7XHJcbiAgICAvL2Z1bmN0aW9ucy4uLi5cclxuICAgIC8qKlxyXG4gICAgICogc2F2ZSBwYXJ0aWFsIGZpZWxkcyBvZiBVc2VySW5mbyB0byBmaXJlc3RvcmUuY29sbGVjdGlvbignVXNlcnMnKVxyXG4gICAgICogQHBhcmFtIHthbnl9IHVzZXJJbmZvIFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBTZXRVc2VyRGF0YSh1c2VySW5mbykge1xyXG4gICAgICAgIC8vIGxldCB0eXBlID0gXHJcbiAgICAgICAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oRklSRVNUT1JFX0NPTExFQ1RJT04uVXNlcnMpLmRvYyh1c2VySW5mby51aWQpLnNldCh1c2VySW5mbywge1xyXG4gICAgICAgICAgICBtZXJnZTogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHNhdmUgVXNlckluZm8uZW1haWxWZXJpZmllZCB0byBmaXJlc3RvcmUuY29sbGVjdGlvbignVXNlcnMnKVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbWFpbFZlcmlmaWVkX0Zyb21BdXRoIGF1dGgtdXNlcidzIGVtYWlsVmVyaWZpZWQgcHJvcCB2YWx1ZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVpZCBhdXRoLXVzZXIncyB1aWRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gc3luY0VtYWlsVmVyaWZpZWRfVG9EQihlbWFpbFZlcmlmaWVkX0Zyb21BdXRoLCB1aWQpIHtcclxuICAgICAgICBsZXQgdXNlckluZm8gPSB7XHJcbiAgICAgICAgICAgIHVpZDogdWlkLFxyXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBlbWFpbFZlcmlmaWVkX0Zyb21BdXRoXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBTZXRVc2VyRGF0YSh1c2VySW5mbylcclxuICAgIH1cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGlmIChhdXRoVXNlcikge1xyXG4gICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluLlxyXG5cclxuICAgICAgICBwcm94eVVzZXJNZW51RHJvcGRvd24uaXNMb2dpbiA9IHRydWU7XHJcbiAgICAgICAgcHJveHlVc2VyTWVudURyb3Bkb3duLmxvZ2luTmFtZSA9IGF1dGhVc2VyLmVtYWlsXHJcblxyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHVpZCxcclxuICAgICAgICAgICAgZW1haWxWZXJpZmllZDogZW1haWxWZXJpZmllZF9hdXRoXHJcbiAgICAgICAgfSA9IGF1dGhVc2VyXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJMT0c6OiBhdXRoVXNlclwiLCBhdXRoVXNlcilcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkxPRzo6IHVpZFwiLCB1aWQpXHJcblxyXG4gICAgICAgIC8vLS0tLXdpbmRvdy5hcHAudXNlckRhdGEgZXhpc3RcclxuICAgICAgICBpZiAod2luZG93LmFwcC51c2VyRGF0YSkge1xyXG4gICAgICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDogZW1haWxWZXJpZmllZF9kYlxyXG4gICAgICAgICAgICB9ID0gd2luZG93LmFwcC51c2VyRGF0YVxyXG4gICAgICAgICAgICAvL3N5bmMgYXV0aCBlbWFpbFZlcmlmaWVkIHRvIERCXHJcbiAgICAgICAgICAgIGlmIChlbWFpbFZlcmlmaWVkX2F1dGggIT0gZW1haWxWZXJpZmllZF9kYilcclxuICAgICAgICAgICAgICAgIHN5bmNFbWFpbFZlcmlmaWVkX1RvREIoZW1haWxWZXJpZmllZF9hdXRoLCB1aWQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vLS0tLXdpbmRvdy5hcHAudXNlckRhdGEgbm90IGV4aXN0IVxyXG4gICAgICAgIGlmICghd2luZG93LmFwcC51c2VyRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZCB1c2VyIGRhdGEgZnJvbSBmaXJlc3RvcmUuLi4nKVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RGJVc2VyKCAvKipAdHlwZSB7c3RyaW5nfSAqLyB1aWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKEZJUkVTVE9SRV9DT0xMRUNUSU9OLlVzZXJzKS5kb2ModWlkKS5nZXQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCggLyoqQHR5cGUge2FueX0qLyBxdWVyeVNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVNuYXBzaG90LmV4aXN0cyA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5U25hcHNob3QuZGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGRiVXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGV4aXN0czogcXVlcnlTbmFwc2hvdC5leGlzdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBkb2M6IHF1ZXJ5U25hcHNob3QuZGF0YSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGRiVXNlclxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2FueX0gYXV0aFVzZXIgXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRVc2VySW5mbyhhdXRoVXNlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHVzZXJJbmZvID0gbmV3IFVzZXJEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgZGlzcGFseU5hbWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKGF1dGhVc2VyLmRpc3BhbHlOYW1lID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZGlzcGFseU5hbWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8gZWxzZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGRpc3BhbHlOYW1lID0gYXV0aFVzZXIuZGlzcGFseU5hbWU7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5kaXNwYWx5TmFtZSA9IChhdXRoVXNlci5kaXNwYWx5TmFtZSkgPyBhdXRoVXNlci5kaXNwYWx5TmFtZSA6IG51bGxcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvLmVtYWlsID0gYXV0aFVzZXIuZW1haWw7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5lbWFpbFZlcmlmaWVkID0gYXV0aFVzZXIuZW1haWxWZXJpZmllZDtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvLnBob25lTnVtYmVyID0gYXV0aFVzZXIucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5waG90b1VSTCA9IGF1dGhVc2VyLnBob3RvVVJMO1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8udWlkID0gYXV0aFVzZXIudWlkO1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8ubGlzdFByb3ZpZGVySWQgPSBVc2VyRGF0YS5nZXRMaXN0UHJvdmlkZXJJZF9CeUF1dGhVc2VyUHJvdmlkZXJEYXRhKGF1dGhVc2VyLnByb3ZpZGVyRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvL3Byb3ZpZGVySWQ6IGF1dG8gZ2V0IGJ5IHNlbGYuIC8vYXV0aFVzZXIucHJvdmlkZXJEYXRhWzBdLnByb3ZpZGVySWQsICAgXHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJJbmZvXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gc3RhcnQgbG9hZCBkYiB1c2VyIGluZm8gLS0+IHJlYWR5IHRvIHNldCB3aW5kb3cuYXBwLnVzZXJEYXRhXHJcbiAgICAgICAgICAgIGdldERiVXNlcih1aWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoIC8qKkB0eXBlIHthbnl9Ki8gZGJVc2VyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGIgdXNlciBleGlzdFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYlVzZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFwcC51c2VyRGF0YSA9IE9iamVjdC5hc3NpZ24obmV3IFVzZXJEYXRhKCksIGRiVXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbWFpbFZlcmlmaWVkX2RiID0gZGJVc2VyLmVtYWlsVmVyaWZpZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zeW5jIGF1dGggZW1haWxWZXJpZmllZCB0byBEQlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW1haWxWZXJpZmllZF9hdXRoICE9IGVtYWlsVmVyaWZpZWRfZGIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW5jRW1haWxWZXJpZmllZF9Ub0RCKGVtYWlsVmVyaWZpZWRfYXV0aCwgdWlkKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gLy9ub3QgZXhpc3RcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9nZXQgaW5mbyBmcm9tIGF1dGhVc2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1c2VySW5mbyA9IGdldFVzZXJJbmZvKGF1dGhVc2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFwcC51c2VyRGF0YSA9IHVzZXJJbmZvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NhdmUgaW5mbyB0byBkYiAoRmlyc3QgdGltZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJEYXRhX2ZzID0gZ2V0UGxhaW5PYmplY3QodXNlckluZm8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldFVzZXJEYXRhKHVzZXJEYXRhX2ZzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRydWUgLy9uZXcgdXNlclxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCggLyoqQHR5cGUge2FueX0qLyBlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdvbkF1dGhTdGF0ZUNoYW5nZWQsIGdldCB1c2VyRGF0YSBmYWlsZWQuICcsIGVyci5jb2RlLCBlcnIubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIE5vIHVzZXIgaXMgc2lnbmVkIGluLlxyXG4gICAgICAgIHByb3h5VXNlck1lbnVEcm9wZG93bi5pc0xvZ2luID0gZmFsc2U7XHJcbiAgICAgICAgcHJveHlVc2VyTWVudURyb3Bkb3duLmxvZ2luTmFtZSA9IG51bGxcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gdXNlciBpcyBzaWduZWQgaW4uLi4nKVxyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG4vL2ZpcmViYXNlLmFuYWx5dGljcygpO1xyXG4vLyBjb25zb2xlLmxvZyhmaXJlYmFzZSlcclxuXHJcbi8vIGxldCBkYiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpO1xyXG5cclxuLy8gZGIuY29sbGVjdGlvbihcIlByb2R1Y3RzXCIpLy8ud2hlcmUoXCJhdXRvTnVtXCIsIFwiPT1cIiwgNylcclxuLy8gICAgIC5nZXQoKVxyXG4vLyAgICAgLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHtcclxuLy8gICAgIH0pXHJcbi8vICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG5cclxuLy8gICAgIH0pXHJcbi8vIGNvbnNvbGUubG9nKF9fZGlybmFtZSlcclxuXHJcblxyXG5cclxuLy9tdnZtIG9ic2VydmVibGUgcGF0dGVyblxyXG5cclxubGV0IHBhZ2VTdGF0aWMgPSAkKCcjcGFnZS1zdGF0aWMnKVxyXG5sZXQgcGFnZVJlYWN0ID0gJCgnI3BhZ2UtcmVhY3QnKVxyXG4vL2xldCBuYXZiYXIxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdmJhcjEnKTtcclxuLy9sZXQgbmF2YmFyX2hlaWdodCA9IHdpbmRvdy5hcHAubmF2YmFyMS5vZmZzZXRIZWlnaHQgKyA1XHJcbnByb3h5TWFpblBhZ2VVSSA9IG5ldyBQcm94eShwcm94eU1haW5QYWdlVUksIHtcclxuICAgIGdldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3ApIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyB0YXJnZXQsIC8qKkB0eXBlIHthbnl9ICovIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJpc1JlYWN0UGFnZVwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU3RhdGljLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VSZWFjdC5mYWRlSW4oNTAwKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU3RhdGljLmZhZGVJbig1MDApXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVJlYWN0LmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxUb0hyZWZJZFwiOlxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmN1c0Z1bGxQYWdlU2Nyb2xsLnNjcm9sbFRvRWxlbSgnIycgKyB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic2hvcEl0ZW1Db3VudFwiOlxyXG4gICAgICAgICAgICAgICAgLy8kKCcuZmEtc2hvcHBpbmctY2FydCcpLmF0dHIoXCJkYXRhLWNvdW50XCIsIHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgbGV0IG51bWJlckJhZGdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5udW1iZXJCYWRnZScpXHJcbiAgICAgICAgICAgICAgICBudW1iZXJCYWRnZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gY2FzZSBcInJlYWN0U3dpdGNoUGFnZVwiOlxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY2FzZSBFTlVNX3JlYWN0U3dpdGNoUGFnZS5Qcm9kdWN0TGlzdFNlYXJjaDpcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHdpbmRvdy5hcHAucHVzaFVybCgnL1Byb2R1Y3RMaXN0U2VhcmNoJyk7IC8vUHJvZHVjdExpc3RTZWFyY2hcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdhdXRvJyAvLydzbW9vdGgnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9LCAxMCk7IC8vMOeahOipseacieWPr+iDveeEoeazlea7keWIsOacgOmgguerr++8jOeci+mBi+awo1xyXG5cclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjYXNlIEVOVU1fcmVhY3RTd2l0Y2hQYWdlLlZpZXdPcmRlcnM6XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB3aW5kb3cuYXBwLnB1c2hVcmwoJy9WaWV3T3JkZXJzJyk7IC8vUHJvZHVjdExpc3RTZWFyY2hcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdhdXRvJyAvLydzbW9vdGgnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9LCAxMCk7IC8vMOeahOipseacieWPr+iDveeEoeazlea7keWIsOacgOmgguerr++8jOeci+mBi+awo1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0pXHJcblxyXG5cclxuLy8tLS0tLS0tLS0tLS0gbG9hZCB3ZWJjb21wb25lbnRzXHJcbmxldCBuZXdUYWdOYW1lID0gXCJjdXMtZnVsbC1wYWdlLXNjcm9sbFwiO1xyXG5sZXQgcGF0aEh0bWxfZnVsbFBhZ2VTY3JvbGwgPSAnLi4vLi4vd2ViY29tcG9uZW50cy9jdXNGdWxsUGFnZVNjcm9sbC9mdWxsUGFnZVNjcm9sbC5odG0nO1xyXG5pZiAoIXByb3h5TWFpblBhZ2VVSS5jdXNGdWxsUGFnZVNjcm9sbClcclxuICAgIHVzZUNvbXBvbmVudChuZXdUYWdOYW1lLCBwYXRoSHRtbF9mdWxsUGFnZVNjcm9sbCwgY3VzRnVsbFBhZ2VTY3JvbGwpXHJcbiAgICAudGhlbigoaHRtbEZpbGUpID0+IHtcclxuICAgICAgICBsZXQgbmV3Q29tcG9uZW50ID0gbmV3IGh0bWxGaWxlLmN0b3IoaHRtbEZpbGUudGVtcGxhdGVDb250ZW50KTtcclxuICAgICAgICBwcm94eU1haW5QYWdlVUkuY3VzRnVsbFBhZ2VTY3JvbGwgPSBuZXdDb21wb25lbnRcclxuICAgICAgICBwYWdlU3RhdGljLmFwcGVuZChuZXdDb21wb25lbnQpXHJcbiAgICAgICAgLy9uZXdDb21wb25lbnQuc2Nyb2xsVG9FbGVtKCcjbmV3cycpXHJcbiAgICB9KVxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLUNvbnN0cnVjdG9yKCktPiBzZXRGaXJlYmFzZShmaXJlYmFzZSkgLSA+IEF1dGgoKS5nZXRSZWRpcmVjdFJlc3VsdCgpXHJcbm5ld1RhZ05hbWUgPSBcImN1cy1tb2RhbC1sb2dpblwiO1xyXG4vL2xldCBsb2dpbl9FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuZXdUYWdOYW1lKTtcclxuaWYgKCFwcm94eU1haW5QYWdlVUkuY3VzTW9kYWxMb2dpbikge1xyXG4gICAgdXNlQ29tcG9uZW50KG5ld1RhZ05hbWUsICcuLi8uLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uaHRtJywgY3VzTW9kYWxMb2dpbilcclxuICAgICAgICAudGhlbigoaHRtbEZpbGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IHBsdWdpbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBTd2FsLFxyXG4gICAgICAgICAgICAgICAgRW1haWxfUmVzZW5kUGFzc3dvcmRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2NsYXNzLWluc3RhbmNlIEFQUEVBUiEhICB5b3UgY2FuIHNldCB0ZW1wbGF0ZSBub3d+fn5cclxuICAgICAgICAgICAgLyoqQHR5cGUge2N1c01vZGFsTG9naW59ICovXHJcbiAgICAgICAgICAgIGxldCBuZXdDb21wb25lbnQgPSBuZXcgaHRtbEZpbGUuY3RvcihodG1sRmlsZS50ZW1wbGF0ZUNvbnRlbnQsIHBsdWdpbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gaWYgKFdlYnBhY2tEZWZpbmVQbHVnaW4uZGV2TW9kZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgbmV3Q29tcG9uZW50LnByb3h5VUkuYmluZElwdFNpZ25pbkVtYWlsID0gJ2ljZTRraW1vQHlhaG9vLmNvbS50dydcclxuICAgICAgICAgICAgLy8gICAgIG5ld0NvbXBvbmVudC5wcm94eVVJLmJpbmRJcHRTaWduaW5QV0QgPSAnMTExMTExMTEnXHJcbiAgICAgICAgICAgIC8vICAgICBuZXdDb21wb25lbnQucHJveHlVSS5iaW5kSXB0UmVnaXN0ZXJFbWFpbCA9ICdpY2U0a2ltb0B5YWhvby5jb20udHcnXHJcbiAgICAgICAgICAgIC8vICAgICBuZXdDb21wb25lbnQucHJveHlVSS5iaW5kSXB0UmVnaXN0ZXJQV0QxID0gJzExMTExMTExJ1xyXG4gICAgICAgICAgICAvLyAgICAgbmV3Q29tcG9uZW50LnByb3h5VUkuYmluZElwdFJlZ2lzdGVyUFdEMiA9ICcxMTExMTExMSdcclxuICAgICAgICAgICAgLy8gICAgIG5ld0NvbXBvbmVudC5wcm94eVVJLmJpbmRJcHRSZXNlbnRQd2RFbWFpbCA9ICdpY2U0a2ltb0B5YWhvby5jb20udHcnXHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcblxyXG4gICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuY3VzTW9kYWxMb2dpbiA9IG5ld0NvbXBvbmVudFxyXG4gICAgICAgICAgICAvKipAdHlwZSB7YW55fSAqL1xyXG4gICAgICAgICAgICBsZXQgbm9kZSA9IG5ld0NvbXBvbmVudFxyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vZGUpXHJcbiAgICAgICAgfSlcclxufVxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0gYU15UHJvZmlsZVxyXG5sZXQgcGF0aEh0bWxfdXNlclByb2ZpbGUgPSAnLi4vLi4vd2ViY29tcG9uZW50cy9jdXNNb2RhbFVzZXJQcm9maWxlMy9jdXNNb2RhbFVzZXJQcm9maWxlLmh0bSc7XHJcbmFNeVByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbGV0IG5ld1RhZ05hbWUgPSBcImN1cy1tb2RhbC11c2VyLXByb2ZpbGVcIjtcclxuICAgIC8vbGV0IGxvZ2luX0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5ld1RhZ05hbWUpO1xyXG4gICAgaWYgKHByb3h5TWFpblBhZ2VVSS5jdXNNb2RhbFVzZXJQcm9maWxlKVxyXG4gICAgICAgIHByb3h5TWFpblBhZ2VVSS5jdXNNb2RhbFVzZXJQcm9maWxlLnNob3dNb2RhbCh0cnVlKVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdXNlQ29tcG9uZW50KG5ld1RhZ05hbWUsIHBhdGhIdG1sX3VzZXJQcm9maWxlLCBjdXNNb2RhbFVzZXJQcm9maWxlKVxyXG4gICAgICAgICAgICAudGhlbigoY29tcFVJKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGx1Z2lucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBTd2FsLFxyXG4gICAgICAgICAgICAgICAgICAgIEVtYWlsX1Jlc2VuZFBhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbXBvbmVudCA9IG5ldyBjb21wVUkuY3Rvcihjb21wVUkudGVtcGxhdGVDb250ZW50LCBwbHVnaW5zKTtcclxuICAgICAgICAgICAgICAgIHByb3h5TWFpblBhZ2VVSS5jdXNNb2RhbFVzZXJQcm9maWxlID0gbmV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAvLyBuZXdDb21wb25lbnQuc2V0RGF0YURlZmluZSh7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgVXNlckRhdGE6IFVzZXJEYXRhXHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobmV3Q29tcG9uZW50KVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCB1aWQgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkXHJcbiAgICAgICAgICAgICAgICBuZXdDb21wb25lbnQubG9hZERiUHJvZmlsZSh1aWQpO1xyXG4gICAgICAgICAgICAgICAgbmV3Q29tcG9uZW50LnNob3dNb2RhbCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgLy9VSSBjb250cm9sXHJcbiAgICAgICAgICAgICAgICBuZXdDb21wb25lbnQucHJveHlVSS5pc0VtYWlsVmVyaWZpZWQgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuZW1haWxWZXJpZmllZDtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vIGdldCA1IG5hdmJhciBpdGVtc1xyXG5sZXQgYWxsX01lbnVIcmVmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXScpXHJcbi8vIC0tLS0tLS0tLS0tIGFkZCBidXR0b24gY2xpY2sgZXZlbnRcclxuLy8gICAgIDxhIGhyZWY9XCIjaGlzdG9yeVwiIGNsYXNzPVwibmF2LWxpbmtcIj7ogIHlupfmrbflj7I8L2E+XHJcbi8vICAgICA8YSBocmVmPVwiI25ld3NcIiBjbGFzcz1cIm5hdi1saW5rXCI+5pyA5paw5raI5oGvPC9hPlxyXG4vLyAgICAgPGEgaHJlZj1cIiNwYWdlLXJlYWN0XCIgY2xhc3M9XCJuYXYtbGlua1wiIGlkPVwiYU9yZGVyUHJvZHVjdHNcIj7nlKLlk4HoqILos7w8L2E+XHJcbi8vICAgICA8YSBocmVmPVwiI3FhbmRhXCIgY2xhc3M9XCJuYXYtbGlua1wiPuW4uOimi+WVj+mhjCjos7zniakpPC9hPlxyXG4vLyAgICAgPGEgaHJlZj1cIiNjb250YWN0dXNcIiBjbGFzcz1cIm5hdi1saW5rXCI+6IGv57Wh5oiR5YCRPC9hPlxyXG5sZXQgYXJyYXlfTWVudUhyZWZzID0gWy4uLmFsbF9NZW51SHJlZl0uZmlsdGVyKChpdGVtKSA9PiB7XHJcbiAgICBsZXQgaHJlZiA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdocmVmJylcclxuICAgIHJldHVybiBocmVmICE9PSBcIiNcIiAvLyDnuL3lhbHmnIk15YCLXHJcbn0pXHJcbi8vIGFkZCBuYXYgaXRlbSBjbGljayBldmVudFxyXG4vLyBlLnByZXZlbnREZWZhdWx0KCktPmlnbm9yZSBkZWZhdWx0IHNjcm9sbCBiZWhhdmlvciwgbmVlZCB0byBjaGFuZ2UgcmVhY3QgcGFnZT9cclxuYXJyYXlfTWVudUhyZWZzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgIGxldCBocmVmID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKVxyXG4gICAgc3dpdGNoIChocmVmKSB7XHJcbiAgICAgICAgY2FzZSAnI3BhZ2UtcmVhY3QnOlxyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgLy9wcm94eU1haW5QYWdlVUkuaXNSZWFjdFBhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy9wcm94eU1haW5QYWdlVUkucmVhY3RTd2l0Y2hQYWdlID0gRU5VTV9yZWFjdFN3aXRjaFBhZ2UuUHJvZHVjdExpc3RTZWFyY2g7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXBwLnN3aXRjaEluZGV4UGFnZShFTlVNX3N3aXRjaEluZGV4UGFnZS5Qcm9kdWN0TGlzdFNlYXJjaClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJyNoaXN0b3J5JzpcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgIHByb3h5TWFpblBhZ2VVSS5pc1JlYWN0UGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcHJveHlNYWluUGFnZVVJLnNjcm9sbFRvSHJlZklkID0gRU5VTV9zdGF0aWNfc2Nyb2xsX2hyZWZfSWQuaGlzdG9yeVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnI25ld3MnOlxyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuc2Nyb2xsVG9IcmVmSWQgPSBFTlVNX3N0YXRpY19zY3JvbGxfaHJlZl9JZC5uZXdzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICcjcWFuZGEnOlxyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuc2Nyb2xsVG9IcmVmSWQgPSBFTlVNX3N0YXRpY19zY3JvbGxfaHJlZl9JZC5xYW5kYVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnI2NvbnRhY3R1cyc6XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgICAgICBwcm94eU1haW5QYWdlVUkuaXNSZWFjdFBhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHByb3h5TWFpblBhZ2VVSS5zY3JvbGxUb0hyZWZJZCA9IEVOVU1fc3RhdGljX3Njcm9sbF9ocmVmX0lkLmNvbnRhY3R1c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tIGxpTG9naW5cclxubGlMb2dpbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgIHByb3h5TWFpblBhZ2VVSS5jdXNNb2RhbExvZ2luLnNob3dNb2RhbCh0cnVlKVxyXG59KTtcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tIGFMb2dvdXRcclxuYUxvZ291dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgIGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gU2lnbi1vdXQgc3VjY2Vzc2Z1bC5cclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uICggLyoqQHR5cGUge2FueX0qLyBlcnJvcikge1xyXG4gICAgICAgIC8vIEFuIGVycm9yIGhhcHBlbmVkLlxyXG4gICAgfSk7XHJcbn0pXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLSBhTXlPcmRlclxyXG5hTXlPcmRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgIHdpbmRvdy5hcHAuc3dpdGNoSW5kZXhQYWdlKEVOVU1fc3dpdGNoSW5kZXhQYWdlLlZpZXdPcmRlcnMpO1xyXG4gICAgLy8gcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gdHJ1ZVxyXG4gICAgLy8gcHJveHlNYWluUGFnZVVJLnJlYWN0U3dpdGNoUGFnZSA9IEVOVU1fcmVhY3RTd2l0Y2hQYWdlLlZpZXdPcmRlcnNcclxuICAgIC8vd2luZG93LmFwcC5wdXNoVXJsKCcvVmlld09yZGVycycpOyAvL1Byb2R1Y3RMaXN0U2VhcmNoXHJcbn0pO1xyXG5cclxuXHJcbmFPcGVuTW9kYWxTaG9wY2FydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHdpbmRvdy5hcHAuc3dpdGNoSW5kZXhQYWdlKEVOVU1fc3dpdGNoSW5kZXhQYWdlLlByb2R1Y3RMaXN0U2VhcmNoKVxyXG4gICAgLy8gcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gdHJ1ZVxyXG4gICAgLy8gcHJveHlNYWluUGFnZVVJLnJlYWN0U3dpdGNoUGFnZSA9IEVOVU1fcmVhY3RTd2l0Y2hQYWdlLlByb2R1Y3RMaXN0U2VhcmNoO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5hcHAub3Blbk1vZGFsU2hvcENhcnQpXHJcbiAgICAgICAgICAgIHdpbmRvdy5hcHAub3Blbk1vZGFsU2hvcENhcnQoKTtcclxuICAgIH0sIDEwMCk7XHJcbn0pXHJcbi8vLS0tLS0tLS0tLS0tLVxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAvL3BhZ2VTdGF0aWMuaGlkZSgpO1xyXG4gICAgLy9wYWdlUmVhY3QuaGlkZSgpO1xyXG4gICAgcHJveHlNYWluUGFnZVVJLmlzUmVhY3RQYWdlID0gZmFsc2U7XHJcbn0pIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFTQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBZkE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7QUFDQTtBQTRCQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFsQkE7QUFDQTtBQW1CQTtBQUNBO0FBQ0E7QUEzQkE7QUErQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUpBO0FBQUE7QUFVQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7QUF1QkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUF6Q0E7QUF5Q0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBaERBO0FBQ0E7QUFpREE7QUFDQTtBQUNBO0FBekRBO0FBQ0E7QUE2REE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBdENBO0FBd0NBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/index/index.js\n");

/***/ }),

/***/ "./pages/index/indexESM.js":
/*!*********************************!*\
  !*** ./pages/index/indexESM.js ***!
  \*********************************/
/*! namespace exports */
/*! export ENUM_switchIndexPage [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ENUM_switchIndexPage\": () => /* binding */ ENUM_switchIndexPage\n/* harmony export */ });\n/**@enum {string} */\nvar ENUM_switchIndexPage = {\n  ProductListSearch: 'ProductListSearch',\n  ViewOrders: 'ViewOrders'\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC9pbmRleEVTTS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2luZGV4L2luZGV4RVNNLmpzPzlmNGIiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5leHBvcnQgY29uc3QgRU5VTV9zd2l0Y2hJbmRleFBhZ2UgPSB7XHJcbiAgICBQcm9kdWN0TGlzdFNlYXJjaDogJ1Byb2R1Y3RMaXN0U2VhcmNoJyxcclxuICAgIFZpZXdPcmRlcnM6ICdWaWV3T3JkZXJzJyxcclxufSJdLCJtYXBwaW5ncyI6Ijs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index/indexESM.js\n");

/***/ }),

/***/ "./webcomponents/cusFullPageScroll/fullPageScroll.js":
/*!***********************************************************!*\
  !*** ./webcomponents/cusFullPageScroll/fullPageScroll.js ***!
  \***********************************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ _default\n/* harmony export */ });\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar _default = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(_default, _HTMLElement);\n\n  var _super = _createSuper(_default);\n\n  /**\r\n   * \r\n   * @param {HTMLElement} templateContent \r\n   */\n  function _default(templateContent) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _super.call(this);\n    if (!templateContent) throw new Error('Argument dose not exist.');\n\n    _this.appendChild(templateContent);\n\n    return _this;\n  }\n  /**\r\n   * \r\n   * @param {string} targetEle \r\n   */\n\n\n  _createClass(_default, [{\n    key: \"scrollToElem\",\n    value: function scrollToElem(targetEle) {\n      var ele = this.querySelector(targetEle);\n      ele.scrollIntoView();\n    }\n  }]);\n\n  return _default;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c0Z1bGxQYWdlU2Nyb2xsL2Z1bGxQYWdlU2Nyb2xsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd2ViY29tcG9uZW50cy9jdXNGdWxsUGFnZVNjcm9sbC9mdWxsUGFnZVNjcm9sbC5qcz9jZjk2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgSFRNTEVsZW1lbnR7XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVDb250ZW50IFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZUNvbnRlbnQpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgaWYoIXRlbXBsYXRlQ29udGVudClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FyZ3VtZW50IGRvc2Ugbm90IGV4aXN0LicpO1xyXG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGVtcGxhdGVDb250ZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0RWxlIFxyXG4gICAgICovXHJcbiAgICBzY3JvbGxUb0VsZW0odGFyZ2V0RWxlKXtcclxuICAgICAgICBsZXQgZWxlID0gdGhpcy5xdWVyeVNlbGVjdG9yKHRhcmdldEVsZSk7XHJcbiAgICAgICAgZWxlLnNjcm9sbEludG9WaWV3KCk7XHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFsQkE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./webcomponents/cusFullPageScroll/fullPageScroll.js\n");

/***/ }),

/***/ "./webcomponents/cusModalLogin3/cusModalLogin.assertLog.js":
/*!*****************************************************************!*\
  !*** ./webcomponents/cusModalLogin3/cusModalLogin.assertLog.js ***!
  \*****************************************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\n/* harmony import */ var _js_test_selenium_assertLog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../js/test/selenium/assertLog.js */ \"./js/test/selenium/assertLog.js\");\n/* harmony import */ var _js_test_selenium_pages_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../js/test/selenium/pages.config.js */ \"./js/test/selenium/pages.config.js\");\n\n\nvar getTitle = _js_test_selenium_assertLog_js__WEBPACK_IMPORTED_MODULE_0__.default.getTitle;\nvar ENUM_mdId = _js_test_selenium_pages_config_js__WEBPACK_IMPORTED_MODULE_1__.default.ENUM_mdId; // let {\n//     getTitle\n// } = require('../../assertLog.js')\n//let assertTitle = 'assertLog:'\n// let getTitle = (mdId, arguments_callee_name) => {\n//     return `${assertTitle}[${mdId}-${arguments_callee_name}]  `\n// }\n\nvar mdID = ENUM_mdId.cusModalLogin; //'cusModalLogin'\n\nfunction duplicatedRegisterAccount(funcName, isDuplicated) {\n  //arguments.callee.name\n  return \"\".concat(getTitle(mdID, funcName)).concat(isDuplicated);\n}\n\nfunction registerSuccess(funcName, isSuccess) {\n  return \"\".concat(getTitle(mdID, funcName)).concat(isSuccess);\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  duplicatedRegisterAccount: duplicatedRegisterAccount.bind(null, duplicatedRegisterAccount.name),\n  registerSuccess: registerSuccess.bind(null, registerSuccess.name)\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uYXNzZXJ0TG9nLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd2ViY29tcG9uZW50cy9jdXNNb2RhbExvZ2luMy9jdXNNb2RhbExvZ2luLmFzc2VydExvZy5qcz8wNWY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFzc2VydExvZyBmcm9tICcuLi8uLi9qcy90ZXN0L3NlbGVuaXVtL2Fzc2VydExvZy5qcydcclxuaW1wb3J0ICogYXMgcGFnZUNvbmZpZyBmcm9tICcuLi8uLi9qcy90ZXN0L3NlbGVuaXVtL3BhZ2VzLmNvbmZpZy5qcydcclxuXHJcblxyXG5sZXQge2dldFRpdGxlfSA9IGFzc2VydExvZy5kZWZhdWx0XHJcbmxldCB7RU5VTV9tZElkfSA9IHBhZ2VDb25maWcuZGVmYXVsdFxyXG5cclxuXHJcbi8vIGxldCB7XHJcbi8vICAgICBnZXRUaXRsZVxyXG4vLyB9ID0gcmVxdWlyZSgnLi4vLi4vYXNzZXJ0TG9nLmpzJylcclxuXHJcbi8vbGV0IGFzc2VydFRpdGxlID0gJ2Fzc2VydExvZzonXHJcbi8vIGxldCBnZXRUaXRsZSA9IChtZElkLCBhcmd1bWVudHNfY2FsbGVlX25hbWUpID0+IHtcclxuLy8gICAgIHJldHVybiBgJHthc3NlcnRUaXRsZX1bJHttZElkfS0ke2FyZ3VtZW50c19jYWxsZWVfbmFtZX1dICBgXHJcbi8vIH1cclxubGV0IG1kSUQgPSBFTlVNX21kSWQuY3VzTW9kYWxMb2dpbjsvLydjdXNNb2RhbExvZ2luJ1xyXG5cclxuZnVuY3Rpb24gZHVwbGljYXRlZFJlZ2lzdGVyQWNjb3VudChmdW5jTmFtZSwgaXNEdXBsaWNhdGVkKSB7XHJcbiAgICAvL2FyZ3VtZW50cy5jYWxsZWUubmFtZVxyXG4gICAgcmV0dXJuIGAke2dldFRpdGxlKG1kSUQsIGZ1bmNOYW1lKX0ke2lzRHVwbGljYXRlZH1gXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyU3VjY2VzcyhmdW5jTmFtZSwgaXNTdWNjZXNzKSB7XHJcbiAgICByZXR1cm4gYCR7Z2V0VGl0bGUobWRJRCwgZnVuY05hbWUpfSR7aXNTdWNjZXNzfWBcclxufVxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBkdXBsaWNhdGVkUmVnaXN0ZXJBY2NvdW50OiBkdXBsaWNhdGVkUmVnaXN0ZXJBY2NvdW50LmJpbmQobnVsbCwgZHVwbGljYXRlZFJlZ2lzdGVyQWNjb3VudC5uYW1lKSxcclxuICAgIHJlZ2lzdGVyU3VjY2VzczogcmVnaXN0ZXJTdWNjZXNzLmJpbmQobnVsbCwgcmVnaXN0ZXJTdWNjZXNzLm5hbWUpLFxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./webcomponents/cusModalLogin3/cusModalLogin.assertLog.js\n");

/***/ }),

/***/ "./webcomponents/cusModalLogin3/cusModalLogin.js":
/*!*******************************************************!*\
  !*** ./webcomponents/cusModalLogin3/cusModalLogin.js ***!
  \*******************************************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ cusModalLogin\n/* harmony export */ });\n/* harmony import */ var _cusModalLogin_assertLog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cusModalLogin.assertLog.js */ \"./webcomponents/cusModalLogin3/cusModalLogin.assertLog.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n //const {duplicatedRegisterAccount, registerSuccess } = assertLog\n//@ts-check\n\n/**@enum {string} */\n\nvar ENUM_switchPage = {\n  radioSignin: \"radioSignin\",\n  radioSignup: \"radioSignup\",\n  radioForgetPwd: \"radioForgetPwd\"\n};\n\nvar cusModalLogin = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(cusModalLogin, _HTMLElement);\n\n  var _super = _createSuper(cusModalLogin);\n\n  /**\r\n   * @param {HTMLElement} templateContent \r\n   * @param {import(\"./cusModalLogin\").plugins} plugins \r\n   */\n  function cusModalLogin(templateContent, plugins) {\n    var _this;\n\n    _classCallCheck(this, cusModalLogin);\n\n    _this = _super.call(this);\n    /** {Swal , Email_ResendPassword(...)} */\n\n    _this.plugins = plugins; // assign firebase\n\n    _this.firebase = null;\n    _this.db = null;\n    if (window.firebase) _this.setFirebase(window.firebase); // initial templateContent\n\n    if (templateContent) _this.appendTemplate(templateContent);\n    _this.proxyUI = {\n      bindIptSigninEmail: '',\n      bindIptSigninPWD: '',\n      bindCkboxSigninKeepIn: false,\n      bindIptRegisterEmail: '',\n      bindIptRegisterPWD1: '',\n      bindIptRegisterPWD2: '',\n      bindIptResentPwdEmail: '',\n      switchPage: ENUM_switchPage.radioSignin\n    };\n\n    var self = _assertThisInitialized(_this);\n\n    _this.proxyUI = new Proxy(_this.proxyUI, {\n      /**@param {string} prop */\n      get: function get(target, prop) {\n        /**@type {HTMLInputElement} */\n        var elem = self.querySelector(\"[\".concat(prop, \"]\"));\n        if (prop === \"bindCkboxSigninKeepIn\") return elem.checked;else return elem.value;\n      },\n\n      /**@param {string} prop */\n      set: function set(target, prop, value) {\n        /**@type {HTMLInputElement} */\n        var elem;\n\n        switch (prop) {\n          //================ switchPage\n          case 'switchPage':\n            switch (value) {\n              case ENUM_switchPage.radioSignin:\n                /**@type {HTMLInputElement} */\n                elem = self.querySelector('.modal-header .radioSignin');\n                elem.checked = true;\n                /**@type {HTMLInputElement} */\n\n                var ckboxSignIn = self.querySelector('.modal-body .ckboxSignIn');\n                ckboxSignIn.checked = true;\n                break;\n\n              case ENUM_switchPage.radioSignup:\n                /**@type {HTMLInputElement} */\n                elem = self.querySelector('.modal-header .radioSignup');\n                elem.checked = true;\n                /**@type {HTMLInputElement} */\n\n                var ckboxSignUp = self.querySelector('.modal-body .ckboxSignUp');\n                ckboxSignUp.checked = true;\n                break;\n\n              case ENUM_switchPage.radioForgetPwd:\n                /**@type {HTMLInputElement} */\n                elem = self.querySelector('.modal-header .radioForgetPwd');\n                elem.checked = true;\n                /**@type {HTMLInputElement} */\n\n                var ckboxForgetPwdHtm = self.querySelector('.modal-body .ckboxForgetPwdHtm');\n                ckboxForgetPwdHtm.checked = true;\n                break;\n\n              default:\n                break;\n            }\n\n            break;\n          //================ other bindXXXXX props\n\n          default:\n            elem = self.querySelector(\"[\".concat(prop, \"]\"));\n            if (prop === \"bindCkboxSigninKeepIn\") elem.checked = value;else elem.value = value;\n            break;\n        }\n\n        return true;\n      }\n    });\n    return _this;\n  }\n  /**\r\n   * @function - append DOM UI\r\n   * @param {HTMLElement} templateContent \r\n   */\n\n\n  _createClass(cusModalLogin, [{\n    key: \"appendTemplate\",\n    value: function appendTemplate(templateContent) {\n      var _this2 = this;\n\n      this.appendChild(templateContent);\n      var self = this; //===== GOOGLE LOGIN\n\n      this.btnGoogleSignin = this.querySelector('.signInHtm .btnGoogleSignin');\n      this.btnGoogleSignin.addEventListener('click', this.Google_Register_Login.bind(this)); //===== EMAIL LOGIN -- form onSubmit\n\n      this.btnEmailSignin = this.querySelector('.signInHtm .btnEmailSignin');\n      this.btnEmailSignin.addEventListener('click', function (e) {//begin html input check\n        //don't write code here, but write code on onSubmit of Form (formSignInHtm).\n      });\n      var formSignInHtm = this.querySelector('.signInHtm');\n      formSignInHtm.addEventListener('submit', function (e) {\n        e.preventDefault(); //already pass form input valid check\n\n        _this2.Email_Login();\n\n        return false;\n      }); //===== EMAIL REGISTER\n\n      var signUpHtm = this.querySelector('.signUpHtm');\n      signUpHtm.addEventListener('submit', function (e) {\n        e.preventDefault(); //console.log(5555)\n\n        self.Email_Register();\n      });\n      this.btnEmailRegister = this.querySelector('.signUpHtm .btnEmailSignin');\n      this.btnEmailRegister.addEventListener('click', function (e) {//submit to Form ('.signUpHtm')\n      }); //===== EMAIL RESEND PASSWORD -- form onSubmit\n\n      var forgetPwdHtm = this.querySelector('.forgetPwdHtm');\n      forgetPwdHtm.addEventListener('submit', function (e) {\n        e.preventDefault();\n        var emailAddress = self.proxyUI.bindIptResentPwdEmail; //already pass form input valid check\n        // extends from baseComponent.js\n\n        self.Email_ResendPassword(emailAddress); //return false\n      }); // Go back to Login Page\n\n      var leftArrow = this.querySelector('.modal-header .leftArrow');\n      leftArrow.addEventListener('click', function (e) {\n        self.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n      }); // Goto Signup Page\n\n      var divSignupHtm = this.querySelector('.modal-body .divSignupHtm');\n      divSignupHtm.addEventListener('click', function (e) {\n        self.proxyUI.switchPage = ENUM_switchPage.radioSignup;\n      }); // Goto ForgetPWD page\n\n      var divForgetPassword = this.querySelector('.modal-body .divForgetPassword');\n      divForgetPassword.addEventListener('click', function (e) {\n        self.proxyUI.switchPage = ENUM_switchPage.radioForgetPwd;\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} htmlElement \r\n     */\n\n  }, {\n    key: \"appendTestArea\",\n    value: function appendTestArea(htmlElement) {\n      var testArea = this.querySelector('[testArea]');\n      testArea.appendChild(htmlElement); //console.log(aa)\n    }\n  }, {\n    key: \"setFirebase\",\n    value: function setFirebase(\n    /**@type {import('firebase')}}*/\n    inFirebase) {\n      // console.log(inFirebase)\n      this.firebase = inFirebase;\n      this.db = this.firebase.firestore();\n      this.setAuth_getRedirectResult();\n    }\n    /**\r\n     * @function - when google signin, page will redirect URL, clear all js, and starts again from here.\r\n     */\n\n  }, {\n    key: \"setAuth_getRedirectResult\",\n    value: function setAuth_getRedirectResult() {\n      var self = this;\n      this.firebase.auth().getRedirectResult().then(function (\n      /**@type {any}*/\n      result) {\n        if (result.credential) {\n          // This gives you a Google Access Token. You can use it to access the Google API.\n          var token = result.credential.accessToken; // ...\n        } // The signed-in user info.\n\n\n        var user = result.user;\n\n        if (user) {\n          //self.checkDB_User(user)\n          // hide self element\n          self.showModal(false);\n        }\n      })[\"catch\"](function (\n      /**@type {any}*/\n      error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message; // The email of the user's account used.\n\n        var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n        var credential = error.credential; // ...\n      });\n    }\n  }, {\n    key: \"clearAllInputs\",\n    value: function clearAllInputs() {\n      this.proxyUI.bindIptSigninEmail = '';\n      this.proxyUI.bindIptSigninPWD = '';\n      this.proxyUI.bindIptRegisterEmail = '';\n      this.proxyUI.bindIptRegisterPWD1 = '';\n      this.proxyUI.bindIptRegisterPWD2 = '';\n      this.proxyUI.bindIptResentPwdEmail = '';\n    }\n    /**\r\n     * @function - show modal self\r\n     * @param {boolean} isShow \r\n     */\n\n  }, {\n    key: \"showModal\",\n    value: function showModal(isShow) {\n      /**@type {HTMLInputElement} */\n      var iptEmail = this.querySelector(\".modal .signInHtm input[type='email']\");\n      $('#modalLogin').on('shown.bs.modal', function () {\n        iptEmail.focus();\n      });\n      var options = {\n        show: isShow,\n        focus: true,\n        keyboard: true\n      };\n      var strShow = null;\n\n      if (isShow == true) {\n        this.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n        this.clearAllInputs();\n\n        if (true) {\n          this.proxyUI.bindIptSigninEmail = 'ice4kimo@yahoo.com.tw';\n          this.proxyUI.bindIptSigninPWD = '11111111';\n          this.proxyUI.bindIptRegisterEmail = 'ice4kimo@yahoo.com.tw';\n          this.proxyUI.bindIptRegisterPWD1 = '11111111';\n          this.proxyUI.bindIptRegisterPWD2 = '11111111';\n          this.proxyUI.bindIptResentPwdEmail = 'ice4kimo@yahoo.com.tw';\n        }\n\n        strShow = 'show';\n      } else {\n        this.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n        this.clearAllInputs();\n        strShow = 'hide';\n      }\n\n      $('#modalLogin').modal(strShow);\n    } // extends from baseComponent.js\n\n    /**\r\n     * @param {string} emailAddress \r\n     */\n\n  }, {\n    key: \"Email_ResendPassword\",\n    value: function Email_ResendPassword(emailAddress) {\n      var self = this;\n      return this.plugins.Email_ResendPassword(emailAddress, this.firebase, self.plugins.Swal, function () {\n        self.showModal(false);\n        self.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n      });\n    } // Email_ResendPassword(emailAddress) {\n    //     let self = this\n    //     return this.plugins.Email_ResendPassword(\n    //         emailAddress,\n    //         window.firebase,\n    //         self.plugins.Swal,\n    //         () => {\n    //             self.showModal(false)\n    //             self.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n    //         }\n    //     );\n    // }\n\n  }, {\n    key: \"Email_Register\",\n    value: function Email_Register() {\n      //ice4kimo@yahoo.com.tw\n      var email = this.proxyUI.bindIptRegisterEmail;\n      var password = this.proxyUI.bindIptRegisterPWD1;\n      var persistence = this.getPersistence(this.proxyUI.bindCkboxSigninKeepIn);\n      var self = this;\n      this.firebase.auth().setPersistence(persistence).then(function () {\n        return self.firebase.auth().createUserWithEmailAndPassword(email, password);\n      }) // .then(() => {\n      //     let user = this.firebase.auth().currentUser;\n      //     if (user) // ice4kimo@yahoo.com.tw  11111111\n      //         return this.checkDB_User(user); //newUser = true\n      //     else\n      //         return false //oldUser = false\n      // })\n      .then(function () {\n        var user = self.firebase.auth().currentUser;\n        return user.sendEmailVerification(); // no return\n        //send verification email\n      }).then(function () {\n        return self.plugins.Swal.fire({\n          title: '提醒',\n          text: \"認證信已寄出，請至信箱收信，並點選確認連結\",\n          icon: 'success',\n          didOpen: function didOpen(htmlElement) {\n            $('.swal2-confirm').attr('data-testid', 'btnSwalConfirm');\n            console.log(_cusModalLogin_assertLog_js__WEBPACK_IMPORTED_MODULE_0__.default.registerSuccess(true)); //console.log(\"LOG: ~ file: cusModalLogin.js ~ line 311 ~ .then ~ htmlElement\", htmlElement)\n          } //confirmButtonText: 'Cool'\n\n        });\n      }).then(function (e) {\n        if (e.isConfirmed === true) {\n          //window.app.switchIndexPage(ENUM_switchIndexPage.ViewOrders)\n          self.showModal(false);\n        }\n      })[\"catch\"](function (\n      /**@type {any} */\n      error) {\n        // Handle Errors here.\n        var errZhTw = getErrorMessageZHTW(error.code, error.message);\n        self.plugins.Swal.fire({\n          title: '注意',\n          text: \"\".concat(errZhTw.errCodeZHTW, \",\").concat(errZhTw.errMessageZHTW),\n          icon: 'warning',\n          didOpen: function didOpen(htmlElement) {\n            $('.swal2-confirm').attr('data-testid', 'btnSwalConfirm');\n            console.log(_cusModalLogin_assertLog_js__WEBPACK_IMPORTED_MODULE_0__.default.duplicatedRegisterAccount(true)); //console.log(\"LOG: ~ file: cusModalLogin.js ~ line 311 ~ .then ~ htmlElement\", htmlElement)\n          } //confirmButtonText: 'Cool'\n\n        }); //auth/email-already-in-use The email address is already in use by another account.\n        // ...\n      });\n    }\n    /**\r\n     * this.firebase.auth().setPersistence(persistence)\r\n     * @param {boolean} isCkboxSigninKeepIn proxyUI.bindCkboxSigninKeepIn\r\n     * @returns {string} firebase.auth.Auth.Persistence.LOCAL...etc\r\n     */\n\n  }, {\n    key: \"getPersistence\",\n    value: function getPersistence(isCkboxSigninKeepIn) {\n      var persistence;\n      if (isCkboxSigninKeepIn) persistence = this.firebase.auth.Auth.Persistence.LOCAL;else persistence = this.firebase.auth.Auth.Persistence.NONE;\n      return persistence;\n    }\n  }, {\n    key: \"Email_Login\",\n    value: function Email_Login() {\n      var _this3 = this;\n\n      var email = this.proxyUI.bindIptSigninEmail;\n      var password = this.proxyUI.bindIptSigninPWD;\n      var persistence = this.getPersistence(this.proxyUI.bindCkboxSigninKeepIn);\n      var self = this;\n      this.firebase.auth().setPersistence(persistence).then(function () {\n        self.showModal(false);\n        return _this3.firebase.auth().signInWithEmailAndPassword(email, password);\n      }).then(function () {})[\"catch\"](function (\n      /**@type {any} */\n      error) {\n        // Handle Errors here.\n        var errZhTw = getErrorMessageZHTW(error.code, error.message);\n        self.plugins.Swal.fire({\n          title: '注意',\n          text: \"\".concat(errZhTw.errCodeZHTW, \",\").concat(errZhTw.errMessageZHTW),\n          icon: 'warning' //confirmButtonText: 'Cool'\n\n        }); // ...\n      });\n    }\n  }, {\n    key: \"Google_Register_Login\",\n    value: function Google_Register_Login(\n    /**@type {any} */\n    e) {\n      var _this4 = this;\n\n      var self = this;\n      var provider = new this.firebase.auth.GoogleAuthProvider();\n      var persistence = this.getPersistence(this.proxyUI.bindCkboxSigninKeepIn);\n      this.firebase.auth().setPersistence(persistence).then(function () {\n        return _this4.firebase.auth().signInWithRedirect(provider);\n      })[\"catch\"](function (\n      /**@type {any} */\n      error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log('error-->', errorMessage); // ...\n      });\n      return;\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {//updateStyle(this);\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {}\n  }, {\n    key: \"adoptedCallback\",\n    value: function adoptedCallback() {}\n    /**\r\n     * \r\n     * @param {*} name \r\n     * @param {*} oldValue \r\n     * @param {*} newValue \r\n     */\n\n  }, {\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(name, oldValue, newValue) {//updateStyle(this);\n    }\n  }]);\n\n  return cusModalLogin;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n/**\r\n * @function - get chinese error message\r\n * @param {string} errCode \r\n * @param {string} errMessage \r\n */\n\n\n\n\nfunction getErrorMessageZHTW(errCode, errMessage) {\n  console.log(\"LOG:: cusModalLogin -> getErrorMessageZHTW -> errCode\", errCode);\n  var errCodeZHTW;\n  var errMessageZHTW = errMessage;\n\n  switch (errCode) {\n    case 'auth/user-not-found':\n      errCodeZHTW = \"這個Email帳號不存在\";\n      errMessageZHTW = \"請先註冊帳號或是用google登入\";\n      break;\n\n    case 'auth/wrong-password':\n      errCodeZHTW = '密碼錯誤';\n      break;\n\n    case 'auth/email-already-in-use':\n      errCodeZHTW = '這個帳號已被註冊';\n      break;\n\n    default:\n      errCodeZHTW = errCode;\n      errMessageZHTW = errMessage;\n      break;\n  }\n\n  return {\n    errCodeZHTW: errCodeZHTW,\n    errMessageZHTW: errMessageZHTW\n  }; // auth/invalid-phone-number, TOO_SHORT\n  // auth/invalid-phone-number, TOO_LONG        \n  // auth/invalid-verification-code, The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.        \n  // auth/provider-already-linked, User can only be linked to one identity for the given provider.\n  // case 'auth/missing-phone-number':\n  // case 'auth/too-many-requests':\n  //address bug\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uanM/ODdjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0TG9nIGZyb20gJy4vY3VzTW9kYWxMb2dpbi5hc3NlcnRMb2cuanMnXHJcbi8vY29uc3Qge2R1cGxpY2F0ZWRSZWdpc3RlckFjY291bnQsIHJlZ2lzdGVyU3VjY2VzcyB9ID0gYXNzZXJ0TG9nXHJcblxyXG4vL0B0cy1jaGVja1xyXG4vKipAZW51bSB7c3RyaW5nfSAqL1xyXG5jb25zdCBFTlVNX3N3aXRjaFBhZ2UgPSB7XHJcbiAgICByYWRpb1NpZ25pbjogXCJyYWRpb1NpZ25pblwiLFxyXG4gICAgcmFkaW9TaWdudXA6IFwicmFkaW9TaWdudXBcIixcclxuICAgIHJhZGlvRm9yZ2V0UHdkOiBcInJhZGlvRm9yZ2V0UHdkXCJcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgY3VzTW9kYWxMb2dpbiBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVDb250ZW50IFxyXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2N1c01vZGFsTG9naW5cIikucGx1Z2luc30gcGx1Z2lucyBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVDb250ZW50LCBwbHVnaW5zKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICAvKioge1N3YWwgLCBFbWFpbF9SZXNlbmRQYXNzd29yZCguLi4pfSAqL1xyXG4gICAgICAgIHRoaXMucGx1Z2lucyA9IHBsdWdpbnM7XHJcblxyXG4gICAgICAgIC8vIGFzc2lnbiBmaXJlYmFzZVxyXG4gICAgICAgIHRoaXMuZmlyZWJhc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGIgPSBudWxsXHJcblxyXG4gICAgICAgIGlmICh3aW5kb3cuZmlyZWJhc2UpXHJcbiAgICAgICAgICAgIHRoaXMuc2V0RmlyZWJhc2Uod2luZG93LmZpcmViYXNlKVxyXG5cclxuICAgICAgICAvLyBpbml0aWFsIHRlbXBsYXRlQ29udGVudFxyXG4gICAgICAgIGlmICh0ZW1wbGF0ZUNvbnRlbnQpXHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kVGVtcGxhdGUodGVtcGxhdGVDb250ZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5wcm94eVVJID0ge1xyXG4gICAgICAgICAgICBiaW5kSXB0U2lnbmluRW1haWw6ICcnLFxyXG4gICAgICAgICAgICBiaW5kSXB0U2lnbmluUFdEOiAnJyxcclxuICAgICAgICAgICAgYmluZENrYm94U2lnbmluS2VlcEluOiBmYWxzZSxcclxuICAgICAgICAgICAgYmluZElwdFJlZ2lzdGVyRW1haWw6ICcnLFxyXG4gICAgICAgICAgICBiaW5kSXB0UmVnaXN0ZXJQV0QxOiAnJyxcclxuICAgICAgICAgICAgYmluZElwdFJlZ2lzdGVyUFdEMjogJycsXHJcbiAgICAgICAgICAgIGJpbmRJcHRSZXNlbnRQd2RFbWFpbDogJycsXHJcbiAgICAgICAgICAgIHN3aXRjaFBhZ2U6IEVOVU1fc3dpdGNoUGFnZS5yYWRpb1NpZ25pblxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wcm94eVVJID0gbmV3IFByb3h5KHRoaXMucHJveHlVSSwge1xyXG4gICAgICAgICAgICAvKipAcGFyYW0ge3N0cmluZ30gcHJvcCAqL1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0YXJnZXQsIHByb3ApIHtcclxuICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW0gPSBzZWxmLnF1ZXJ5U2VsZWN0b3IoYFske3Byb3B9XWApXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gXCJiaW5kQ2tib3hTaWduaW5LZWVwSW5cIilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5jaGVja2VkXHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0udmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKkBwYXJhbSB7c3RyaW5nfSBwcm9wICovXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW07XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLz09PT09PT09PT09PT09PT0gc3dpdGNoUGFnZVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N3aXRjaFBhZ2UnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVOVU1fc3dpdGNoUGFnZS5yYWRpb1NpZ25pbjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gc2VsZi5xdWVyeVNlbGVjdG9yKCcubW9kYWwtaGVhZGVyIC5yYWRpb1NpZ25pbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNrYm94U2lnbkluID0gc2VsZi5xdWVyeVNlbGVjdG9yKCcubW9kYWwtYm9keSAuY2tib3hTaWduSW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBja2JveFNpZ25Jbi5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9zd2l0Y2hQYWdlLnJhZGlvU2lnbnVwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0gPSBzZWxmLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1oZWFkZXIgLnJhZGlvU2lnbnVwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2tib3hTaWduVXAgPSBzZWxmLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1ib2R5IC5ja2JveFNpZ25VcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNrYm94U2lnblVwLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX3N3aXRjaFBhZ2UucmFkaW9Gb3JnZXRQd2Q6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9IHNlbGYucXVlcnlTZWxlY3RvcignLm1vZGFsLWhlYWRlciAucmFkaW9Gb3JnZXRQd2QnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBja2JveEZvcmdldFB3ZEh0bSA9IHNlbGYucXVlcnlTZWxlY3RvcignLm1vZGFsLWJvZHkgLmNrYm94Rm9yZ2V0UHdkSHRtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2tib3hGb3JnZXRQd2RIdG0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLz09PT09PT09PT09PT09PT0gb3RoZXIgYmluZFhYWFhYIHByb3BzXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9IHNlbGYucXVlcnlTZWxlY3RvcihgWyR7cHJvcH1dYClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09IFwiYmluZENrYm94U2lnbmluS2VlcEluXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNoZWNrZWQgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiAtIGFwcGVuZCBET00gVUlcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRlbXBsYXRlQ29udGVudCBcclxuICAgICAqL1xyXG4gICAgYXBwZW5kVGVtcGxhdGUodGVtcGxhdGVDb250ZW50KSB7XHJcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0ZW1wbGF0ZUNvbnRlbnQpXHJcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG5cclxuXHJcbiAgICAgICAgLy89PT09PSBHT09HTEUgTE9HSU5cclxuICAgICAgICB0aGlzLmJ0bkdvb2dsZVNpZ25pbiA9IHRoaXMucXVlcnlTZWxlY3RvcignLnNpZ25Jbkh0bSAuYnRuR29vZ2xlU2lnbmluJylcclxuICAgICAgICB0aGlzLmJ0bkdvb2dsZVNpZ25pbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuR29vZ2xlX1JlZ2lzdGVyX0xvZ2luLmJpbmQodGhpcykpO1xyXG4gICAgICAgIC8vPT09PT0gRU1BSUwgTE9HSU4gLS0gZm9ybSBvblN1Ym1pdFxyXG4gICAgICAgIHRoaXMuYnRuRW1haWxTaWduaW4gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5zaWduSW5IdG0gLmJ0bkVtYWlsU2lnbmluJylcclxuICAgICAgICB0aGlzLmJ0bkVtYWlsU2lnbmluLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgLy9iZWdpbiBodG1sIGlucHV0IGNoZWNrXHJcbiAgICAgICAgICAgIC8vZG9uJ3Qgd3JpdGUgY29kZSBoZXJlLCBidXQgd3JpdGUgY29kZSBvbiBvblN1Ym1pdCBvZiBGb3JtIChmb3JtU2lnbkluSHRtKS5cclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgZm9ybVNpZ25Jbkh0bSA9IHRoaXMucXVlcnlTZWxlY3RvcignLnNpZ25Jbkh0bScpO1xyXG4gICAgICAgIGZvcm1TaWduSW5IdG0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgIC8vYWxyZWFkeSBwYXNzIGZvcm0gaW5wdXQgdmFsaWQgY2hlY2tcclxuICAgICAgICAgICAgdGhpcy5FbWFpbF9Mb2dpbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vPT09PT0gRU1BSUwgUkVHSVNURVJcclxuICAgICAgICBsZXQgc2lnblVwSHRtID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcuc2lnblVwSHRtJyk7XHJcbiAgICAgICAgc2lnblVwSHRtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKDU1NTUpXHJcbiAgICAgICAgICAgIHNlbGYuRW1haWxfUmVnaXN0ZXIoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuYnRuRW1haWxSZWdpc3RlciA9IHRoaXMucXVlcnlTZWxlY3RvcignLnNpZ25VcEh0bSAuYnRuRW1haWxTaWduaW4nKVxyXG4gICAgICAgIHRoaXMuYnRuRW1haWxSZWdpc3Rlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vc3VibWl0IHRvIEZvcm0gKCcuc2lnblVwSHRtJylcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLz09PT09IEVNQUlMIFJFU0VORCBQQVNTV09SRCAtLSBmb3JtIG9uU3VibWl0XHJcbiAgICAgICAgbGV0IGZvcmdldFB3ZEh0bSA9IHRoaXMucXVlcnlTZWxlY3RvcignLmZvcmdldFB3ZEh0bScpO1xyXG4gICAgICAgIGZvcmdldFB3ZEh0bS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgdmFyIGVtYWlsQWRkcmVzcyA9IHNlbGYucHJveHlVSS5iaW5kSXB0UmVzZW50UHdkRW1haWw7XHJcbiAgICAgICAgICAgIC8vYWxyZWFkeSBwYXNzIGZvcm0gaW5wdXQgdmFsaWQgY2hlY2tcclxuICAgICAgICAgICAgLy8gZXh0ZW5kcyBmcm9tIGJhc2VDb21wb25lbnQuanNcclxuICAgICAgICAgICAgc2VsZi5FbWFpbF9SZXNlbmRQYXNzd29yZChlbWFpbEFkZHJlc3MpO1xyXG4gICAgICAgICAgICAvL3JldHVybiBmYWxzZVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAvLyBHbyBiYWNrIHRvIExvZ2luIFBhZ2VcclxuICAgICAgICBsZXQgbGVmdEFycm93ID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcubW9kYWwtaGVhZGVyIC5sZWZ0QXJyb3cnKVxyXG4gICAgICAgIGxlZnRBcnJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGYucHJveHlVSS5zd2l0Y2hQYWdlID0gRU5VTV9zd2l0Y2hQYWdlLnJhZGlvU2lnbmluO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gR290byBTaWdudXAgUGFnZVxyXG4gICAgICAgIGxldCBkaXZTaWdudXBIdG0gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1ib2R5IC5kaXZTaWdudXBIdG0nKVxyXG4gICAgICAgIGRpdlNpZ251cEh0bS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGYucHJveHlVSS5zd2l0Y2hQYWdlID0gRU5VTV9zd2l0Y2hQYWdlLnJhZGlvU2lnbnVwO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gR290byBGb3JnZXRQV0QgcGFnZVxyXG4gICAgICAgIGxldCBkaXZGb3JnZXRQYXNzd29yZCA9IHRoaXMucXVlcnlTZWxlY3RvcignLm1vZGFsLWJvZHkgLmRpdkZvcmdldFBhc3N3b3JkJylcclxuICAgICAgICBkaXZGb3JnZXRQYXNzd29yZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGYucHJveHlVSS5zd2l0Y2hQYWdlID0gRU5VTV9zd2l0Y2hQYWdlLnJhZGlvRm9yZ2V0UHdkO1xyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBodG1sRWxlbWVudCBcclxuICAgICAqL1xyXG4gICAgYXBwZW5kVGVzdEFyZWEoaHRtbEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgdGVzdEFyZWEgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ1t0ZXN0QXJlYV0nKTtcclxuICAgICAgICB0ZXN0QXJlYS5hcHBlbmRDaGlsZChodG1sRWxlbWVudClcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGFhKVxyXG4gICAgfVxyXG5cclxuICAgIHNldEZpcmViYXNlKCAvKipAdHlwZSB7aW1wb3J0KCdmaXJlYmFzZScpfX0qLyBpbkZpcmViYXNlKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coaW5GaXJlYmFzZSlcclxuICAgICAgICB0aGlzLmZpcmViYXNlID0gaW5GaXJlYmFzZTtcclxuICAgICAgICB0aGlzLmRiID0gdGhpcy5maXJlYmFzZS5maXJlc3RvcmUoKTtcclxuICAgICAgICB0aGlzLnNldEF1dGhfZ2V0UmVkaXJlY3RSZXN1bHQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIC0gd2hlbiBnb29nbGUgc2lnbmluLCBwYWdlIHdpbGwgcmVkaXJlY3QgVVJMLCBjbGVhciBhbGwganMsIGFuZCBzdGFydHMgYWdhaW4gZnJvbSBoZXJlLlxyXG4gICAgICovXHJcbiAgICBzZXRBdXRoX2dldFJlZGlyZWN0UmVzdWx0KCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2UuYXV0aCgpLmdldFJlZGlyZWN0UmVzdWx0KCkudGhlbihmdW5jdGlvbiAoIC8qKkB0eXBlIHthbnl9Ki8gcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBHb29nbGUgQWNjZXNzIFRva2VuLiBZb3UgY2FuIHVzZSBpdCB0byBhY2Nlc3MgdGhlIEdvb2dsZSBBUEkuXHJcbiAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHQuY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gICAgICAgICAgICBsZXQgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gICAgICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgLy9zZWxmLmNoZWNrREJfVXNlcih1c2VyKVxyXG4gICAgICAgICAgICAgICAgLy8gaGlkZSBzZWxmIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIHNlbGYuc2hvd01vZGFsKGZhbHNlKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICggLyoqQHR5cGUge2FueX0qLyBlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBIYW5kbGUgRXJyb3JzIGhlcmUuXHJcbiAgICAgICAgICAgIHZhciBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgLy8gVGhlIGVtYWlsIG9mIHRoZSB1c2VyJ3MgYWNjb3VudCB1c2VkLlxyXG4gICAgICAgICAgICB2YXIgZW1haWwgPSBlcnJvci5lbWFpbDtcclxuICAgICAgICAgICAgLy8gVGhlIGZpcmViYXNlLmF1dGguQXV0aENyZWRlbnRpYWwgdHlwZSB0aGF0IHdhcyB1c2VkLlxyXG4gICAgICAgICAgICB2YXIgY3JlZGVudGlhbCA9IGVycm9yLmNyZWRlbnRpYWw7XHJcbiAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xlYXJBbGxJbnB1dHMoKSB7XHJcbiAgICAgICAgdGhpcy5wcm94eVVJLmJpbmRJcHRTaWduaW5FbWFpbCA9ICcnO1xyXG4gICAgICAgIHRoaXMucHJveHlVSS5iaW5kSXB0U2lnbmluUFdEID0gJyc7XHJcbiAgICAgICAgdGhpcy5wcm94eVVJLmJpbmRJcHRSZWdpc3RlckVtYWlsID0gJyc7XHJcbiAgICAgICAgdGhpcy5wcm94eVVJLmJpbmRJcHRSZWdpc3RlclBXRDEgPSAnJztcclxuICAgICAgICB0aGlzLnByb3h5VUkuYmluZElwdFJlZ2lzdGVyUFdEMiA9ICcnO1xyXG4gICAgICAgIHRoaXMucHJveHlVSS5iaW5kSXB0UmVzZW50UHdkRW1haWwgPSAnJztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIC0gc2hvdyBtb2RhbCBzZWxmXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzU2hvdyBcclxuICAgICAqL1xyXG4gICAgc2hvd01vZGFsKGlzU2hvdykge1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgIGxldCBpcHRFbWFpbCA9IHRoaXMucXVlcnlTZWxlY3RvcihcIi5tb2RhbCAuc2lnbkluSHRtIGlucHV0W3R5cGU9J2VtYWlsJ11cIik7XHJcbiAgICAgICAgJCgnI21vZGFsTG9naW4nKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlwdEVtYWlsLmZvY3VzKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgc2hvdzogaXNTaG93LFxyXG4gICAgICAgICAgICBmb2N1czogdHJ1ZSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHN0clNob3cgPSBudWxsO1xyXG4gICAgICAgIGlmIChpc1Nob3cgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3h5VUkuc3dpdGNoUGFnZSA9IEVOVU1fc3dpdGNoUGFnZS5yYWRpb1NpZ25pbjtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckFsbElucHV0cygpO1xyXG4gICAgICAgICAgICBpZiAoV2VicGFja0RlZmluZVBsdWdpbiAmJiBXZWJwYWNrRGVmaW5lUGx1Z2luLmRldk1vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJveHlVSS5iaW5kSXB0U2lnbmluRW1haWwgPSAnaWNlNGtpbW9AeWFob28uY29tLnR3J1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eVVJLmJpbmRJcHRTaWduaW5QV0QgPSAnMTExMTExMTEnXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5VUkuYmluZElwdFJlZ2lzdGVyRW1haWwgPSAnaWNlNGtpbW9AeWFob28uY29tLnR3J1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eVVJLmJpbmRJcHRSZWdpc3RlclBXRDEgPSAnMTExMTExMTEnXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5VUkuYmluZElwdFJlZ2lzdGVyUFdEMiA9ICcxMTExMTExMSdcclxuICAgICAgICAgICAgICAgIHRoaXMucHJveHlVSS5iaW5kSXB0UmVzZW50UHdkRW1haWwgPSAnaWNlNGtpbW9AeWFob28uY29tLnR3J1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0clNob3cgPSAnc2hvdyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcm94eVVJLnN3aXRjaFBhZ2UgPSBFTlVNX3N3aXRjaFBhZ2UucmFkaW9TaWduaW47XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJBbGxJbnB1dHMoKTtcclxuICAgICAgICAgICAgc3RyU2hvdyA9ICdoaWRlJztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAkKCcjbW9kYWxMb2dpbicpLm1vZGFsKHN0clNob3cpXHJcblxyXG4gICAgfVxyXG4gICAgLy8gZXh0ZW5kcyBmcm9tIGJhc2VDb21wb25lbnQuanNcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsQWRkcmVzcyBcclxuICAgICAqL1xyXG4gICAgRW1haWxfUmVzZW5kUGFzc3dvcmQoZW1haWxBZGRyZXNzKSB7XHJcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1Z2lucy5FbWFpbF9SZXNlbmRQYXNzd29yZChcclxuICAgICAgICAgICAgZW1haWxBZGRyZXNzLFxyXG4gICAgICAgICAgICB0aGlzLmZpcmViYXNlLFxyXG4gICAgICAgICAgICBzZWxmLnBsdWdpbnMuU3dhbCxcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93TW9kYWwoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICBzZWxmLnByb3h5VUkuc3dpdGNoUGFnZSA9IEVOVU1fc3dpdGNoUGFnZS5yYWRpb1NpZ25pbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW1haWxfUmVzZW5kUGFzc3dvcmQoZW1haWxBZGRyZXNzKSB7XHJcbiAgICAvLyAgICAgbGV0IHNlbGYgPSB0aGlzXHJcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMucGx1Z2lucy5FbWFpbF9SZXNlbmRQYXNzd29yZChcclxuICAgIC8vICAgICAgICAgZW1haWxBZGRyZXNzLFxyXG4gICAgLy8gICAgICAgICB3aW5kb3cuZmlyZWJhc2UsXHJcbiAgICAvLyAgICAgICAgIHNlbGYucGx1Z2lucy5Td2FsLFxyXG4gICAgLy8gICAgICAgICAoKSA9PiB7XHJcbiAgICAvLyAgICAgICAgICAgICBzZWxmLnNob3dNb2RhbChmYWxzZSlcclxuICAgIC8vICAgICAgICAgICAgIHNlbGYucHJveHlVSS5zd2l0Y2hQYWdlID0gRU5VTV9zd2l0Y2hQYWdlLnJhZGlvU2lnbmluO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgKTtcclxuICAgIC8vIH1cclxuICAgIEVtYWlsX1JlZ2lzdGVyKCkge1xyXG4gICAgICAgIC8vaWNlNGtpbW9AeWFob28uY29tLnR3XHJcbiAgICAgICAgbGV0IGVtYWlsID0gdGhpcy5wcm94eVVJLmJpbmRJcHRSZWdpc3RlckVtYWlsO1xyXG4gICAgICAgIGxldCBwYXNzd29yZCA9IHRoaXMucHJveHlVSS5iaW5kSXB0UmVnaXN0ZXJQV0QxO1xyXG4gICAgICAgIGxldCBwZXJzaXN0ZW5jZSA9IHRoaXMuZ2V0UGVyc2lzdGVuY2UodGhpcy5wcm94eVVJLmJpbmRDa2JveFNpZ25pbktlZXBJbilcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICB0aGlzLmZpcmViYXNlLmF1dGgoKS5zZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZmlyZWJhc2UuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgIGxldCB1c2VyID0gdGhpcy5maXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodXNlcikgLy8gaWNlNGtpbW9AeWFob28uY29tLnR3ICAxMTExMTExMVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrREJfVXNlcih1c2VyKTsgLy9uZXdVc2VyID0gdHJ1ZVxyXG4gICAgICAgICAgICAvLyAgICAgZWxzZVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiBmYWxzZSAvL29sZFVzZXIgPSBmYWxzZVxyXG4gICAgICAgICAgICAvLyB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdXNlciA9IHNlbGYuZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXIuc2VuZEVtYWlsVmVyaWZpY2F0aW9uKCkgLy8gbm8gcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAvL3NlbmQgdmVyaWZpY2F0aW9uIGVtYWlsXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5wbHVnaW5zLlN3YWwuZmlyZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmj5DphpInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFwi6KqN6K2J5L+h5bey5a+E5Ye677yM6KuL6Iez5L+h566x5pS25L+h77yM5Lim6bue6YG456K66KqN6YCj57WQXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpZE9wZW46IChodG1sRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc3dhbDItY29uZmlybScpLmF0dHIoJ2RhdGEtdGVzdGlkJywnYnRuU3dhbENvbmZpcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXNzZXJ0TG9nLnJlZ2lzdGVyU3VjY2Vzcyh0cnVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxPRzogfiBmaWxlOiBjdXNNb2RhbExvZ2luLmpzIH4gbGluZSAzMTEgfiAudGhlbiB+IGh0bWxFbGVtZW50XCIsIGh0bWxFbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2NvbmZpcm1CdXR0b25UZXh0OiAnQ29vbCdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5pc0NvbmZpcm1lZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vd2luZG93LmFwcC5zd2l0Y2hJbmRleFBhZ2UoRU5VTV9zd2l0Y2hJbmRleFBhZ2UuVmlld09yZGVycylcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dNb2RhbChmYWxzZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICggLyoqQHR5cGUge2FueX0gKi8gZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBFcnJvcnMgaGVyZS5cclxuICAgICAgICAgICAgICAgIGxldCBlcnJaaFR3ID0gZ2V0RXJyb3JNZXNzYWdlWkhUVyhlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5wbHVnaW5zLlN3YWwuZmlyZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfms6jmhI8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGAke2VyclpoVHcuZXJyQ29kZVpIVFd9LCR7ZXJyWmhUdy5lcnJNZXNzYWdlWkhUV31gLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nJyxcclxuICAgICAgICAgICAgICAgICAgICBkaWRPcGVuOiAoaHRtbEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnN3YWwyLWNvbmZpcm0nKS5hdHRyKCdkYXRhLXRlc3RpZCcsJ2J0blN3YWxDb25maXJtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFzc2VydExvZy5kdXBsaWNhdGVkUmVnaXN0ZXJBY2NvdW50KHRydWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTE9HOiB+IGZpbGU6IGN1c01vZGFsTG9naW4uanMgfiBsaW5lIDMxMSB+IC50aGVuIH4gaHRtbEVsZW1lbnRcIiwgaHRtbEVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uZmlybUJ1dHRvblRleHQ6ICdDb29sJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vYXV0aC9lbWFpbC1hbHJlYWR5LWluLXVzZSBUaGUgZW1haWwgYWRkcmVzcyBpcyBhbHJlYWR5IGluIHVzZSBieSBhbm90aGVyIGFjY291bnQuXHJcbiAgICAgICAgICAgICAgICAvLyAuLi5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHRoaXMuZmlyZWJhc2UuYXV0aCgpLnNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc0NrYm94U2lnbmluS2VlcEluIHByb3h5VUkuYmluZENrYm94U2lnbmluS2VlcEluXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBmaXJlYmFzZS5hdXRoLkF1dGguUGVyc2lzdGVuY2UuTE9DQUwuLi5ldGNcclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc2lzdGVuY2UoaXNDa2JveFNpZ25pbktlZXBJbikge1xyXG4gICAgICAgIGxldCBwZXJzaXN0ZW5jZTtcclxuICAgICAgICBpZiAoaXNDa2JveFNpZ25pbktlZXBJbilcclxuICAgICAgICAgICAgcGVyc2lzdGVuY2UgPSB0aGlzLmZpcmViYXNlLmF1dGguQXV0aC5QZXJzaXN0ZW5jZS5MT0NBTFxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcGVyc2lzdGVuY2UgPSB0aGlzLmZpcmViYXNlLmF1dGguQXV0aC5QZXJzaXN0ZW5jZS5OT05FXHJcbiAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlXHJcbiAgICB9XHJcbiAgICBFbWFpbF9Mb2dpbigpIHtcclxuICAgICAgICBsZXQgZW1haWwgPSB0aGlzLnByb3h5VUkuYmluZElwdFNpZ25pbkVtYWlsO1xyXG4gICAgICAgIGxldCBwYXNzd29yZCA9IHRoaXMucHJveHlVSS5iaW5kSXB0U2lnbmluUFdEO1xyXG4gICAgICAgIGxldCBwZXJzaXN0ZW5jZSA9IHRoaXMuZ2V0UGVyc2lzdGVuY2UodGhpcy5wcm94eVVJLmJpbmRDa2JveFNpZ25pbktlZXBJbilcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICB0aGlzLmZpcmViYXNlLmF1dGgoKS5zZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93TW9kYWwoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLlxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBlcnJaaFR3ID0gZ2V0RXJyb3JNZXNzYWdlWkhUVyhlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKVxyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYucGx1Z2lucy5Td2FsLmZpcmUoe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+azqOaEjycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYCR7ZXJyWmhUdy5lcnJDb2RlWkhUV30sJHtlcnJaaFR3LmVyck1lc3NhZ2VaSFRXfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uZmlybUJ1dHRvblRleHQ6ICdDb29sJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbiAgICBHb29nbGVfUmVnaXN0ZXJfTG9naW4oIC8qKkB0eXBlIHthbnl9ICovIGUpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IHRoaXMuZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICAgICAgICBsZXQgcGVyc2lzdGVuY2UgPSB0aGlzLmdldFBlcnNpc3RlbmNlKHRoaXMucHJveHlVSS5iaW5kQ2tib3hTaWduaW5LZWVwSW4pXHJcbiAgICAgICAgdGhpcy5maXJlYmFzZS5hdXRoKCkuc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoUmVkaXJlY3QocHJvdmlkZXIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCAvKipAdHlwZSB7YW55fSAqLyBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLlxyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvci0tPicsIGVycm9yTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIC8vdXBkYXRlU3R5bGUodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7fVxyXG5cclxuICAgIGFkb3B0ZWRDYWxsYmFjaygpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Kn0gbmFtZSBcclxuICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgXHJcbiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbHVlIFxyXG4gICAgICovXHJcbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgLy91cGRhdGVTdHlsZSh0aGlzKTtcclxuICAgIH1cclxuXHJcbn1cclxuLyoqXHJcbiAqIEBmdW5jdGlvbiAtIGdldCBjaGluZXNlIGVycm9yIG1lc3NhZ2VcclxuICogQHBhcmFtIHtzdHJpbmd9IGVyckNvZGUgXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBlcnJNZXNzYWdlIFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlWkhUVyhlcnJDb2RlLCBlcnJNZXNzYWdlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkxPRzo6IGN1c01vZGFsTG9naW4gLT4gZ2V0RXJyb3JNZXNzYWdlWkhUVyAtPiBlcnJDb2RlXCIsIGVyckNvZGUpXHJcbiAgICBsZXQgZXJyQ29kZVpIVFc7XHJcbiAgICBsZXQgZXJyTWVzc2FnZVpIVFcgPSBlcnJNZXNzYWdlO1xyXG4gICAgc3dpdGNoIChlcnJDb2RlKSB7XHJcbiAgICAgICAgY2FzZSAnYXV0aC91c2VyLW5vdC1mb3VuZCc6XHJcbiAgICAgICAgICAgIGVyckNvZGVaSFRXID0gXCLpgJnlgItFbWFpbOW4s+iZn+S4jeWtmOWcqFwiXHJcbiAgICAgICAgICAgIGVyck1lc3NhZ2VaSFRXID0gXCLoq4vlhYjoqLvlhorluLPomZ/miJbmmK/nlKhnb29nbGXnmbvlhaVcIlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdhdXRoL3dyb25nLXBhc3N3b3JkJzpcclxuICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSAn5a+G56K86Yyv6KqkJ1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdhdXRoL2VtYWlsLWFscmVhZHktaW4tdXNlJzpcclxuICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSAn6YCZ5YCL5biz6Jmf5bey6KKr6Ki75YaKJ1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBlcnJDb2RlWkhUVyA9IGVyckNvZGU7XHJcbiAgICAgICAgICAgIGVyck1lc3NhZ2VaSFRXID0gZXJyTWVzc2FnZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGVyckNvZGVaSFRXLFxyXG4gICAgICAgIGVyck1lc3NhZ2VaSFRXXHJcbiAgICB9XHJcbiAgICAvLyBhdXRoL2ludmFsaWQtcGhvbmUtbnVtYmVyLCBUT09fU0hPUlRcclxuICAgIC8vIGF1dGgvaW52YWxpZC1waG9uZS1udW1iZXIsIFRPT19MT05HICAgICAgICBcclxuICAgIC8vIGF1dGgvaW52YWxpZC12ZXJpZmljYXRpb24tY29kZSwgVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzIGludmFsaWQuIFBsZWFzZSByZXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNtcyBhbmQgYmUgc3VyZSB1c2UgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLiAgICAgICAgXHJcbiAgICAvLyBhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkLCBVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci5cclxuICAgIC8vIGNhc2UgJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInOlxyXG4gICAgLy8gY2FzZSAnYXV0aC90b28tbWFueS1yZXF1ZXN0cyc6XHJcblxyXG4gICAgLy9hZGRyZXNzIGJ1Z1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQTFCQTtBQUNBO0FBMkJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBdkNBO0FBQ0E7QUF5Q0E7QUFDQTtBQXpEQTtBQTNCQTtBQXVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBVEE7QUFXQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVRBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUVBOzs7O0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBRUE7OztBQUVBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUVBOzs7O0FBamFBO0FBb2FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMWFBO0FBQ0E7QUF3YUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBQ0E7QUFlQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./webcomponents/cusModalLogin3/cusModalLogin.js\n");

/***/ }),

/***/ "./webcomponents/cusModalUserProfile3/cusModalUserProfile.js":
/*!*******************************************************************!*\
  !*** ./webcomponents/cusModalUserProfile3/cusModalUserProfile.js ***!
  \*******************************************************************/
/*! namespace exports */
/*! export ENUM_LoginMethod [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ENUM_PhoneStatus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ENUM_PhoneStatus\": () => /* binding */ ENUM_PhoneStatus,\n/* harmony export */   \"ENUM_LoginMethod\": () => /* binding */ ENUM_LoginMethod,\n/* harmony export */   \"default\": () => /* binding */ cusModalUserProfile\n/* harmony export */ });\n/* harmony import */ var _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../js/dataDefine/index.js */ \"./js/dataDefine/index.js\");\n/* harmony import */ var _js_firebase_FirebaseMJS__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../js/firebase/FirebaseMJS */ \"./js/firebase/FirebaseMJS.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"../node_modules/jquery/dist/jquery.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//@ts-check\n\n\n/**@class */\n\nvar ProxyFormData = function ProxyFormData() {\n  _classCallCheck(this, ProxyFormData);\n\n  _defineProperty(this, \"iptAccount\", \"\");\n\n  _defineProperty(this, \"iptEmail\", \"\");\n\n  _defineProperty(this, \"iptName\", \"\");\n\n  _defineProperty(this, \"iptPhone\", \"\");\n\n  _defineProperty(this, \"iptAddress\", \"\");\n\n  _defineProperty(this, \"userData\", null);\n};\n/**@enum {string}*/\n\n\n_defineProperty(ProxyFormData, \"userProfileConverter\", {\n  toFirestore: function toFirestore(\n  /**@type {ProxyFormData} */\n  proxyFormData) {\n    return {\n      // only write back key-userProfile\n      userProfile: {\n        //sendEmail: proxyFormData.iptEmail,\n        name: proxyFormData.iptName,\n        //phoneNumber: proxyFormData.iptPhone,\n        address: proxyFormData.iptAddress // address1: proxyFormData.iptAddress1,\n        // address2: proxyFormData.iptAddress2,\n        // address3: proxyFormData.iptAddress3,\n        //selectAddress: proxyFormData.selectAddress,\n\n      }\n    };\n  },\n  fromFirestore: function fromFirestore(\n  /**@type {any}} */\n  snapshot,\n  /**@type {any}}*/\n  options) {\n    var data = snapshot.data(options);\n    var proxyFormData = new ProxyFormData();\n    proxyFormData.userData = Object.assign(new _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.UserData(), data); //load email + phone + userProfile\n\n    proxyFormData.iptEmail = data.email;\n    proxyFormData.iptPhone = defaultValue.iptPhone;\n    if (data.phoneNumber) proxyFormData.iptPhone = data.phoneNumber;\n\n    if (data.userProfile) {\n      //proxyFormData.iptEmail = data.userProfile.sendEmail\n      proxyFormData.iptName = data.userProfile.name; //proxyFormData.iptPhone = data.userProfile.phoneNumber\n\n      proxyFormData.iptAddress = data.userProfile.address; // proxyFormData.iptAddress1 = data.userProfile.address1\n      // proxyFormData.iptAddress2 = data.userProfile.address2\n      // proxyFormData.iptAddress3 = data.userProfile.address3\n      // proxyFormData.selectAddress = data.userProfile.selectAddress\n    }\n\n    return proxyFormData;\n  }\n});\n\nvar ENUM_PhoneStatus = {\n  noPhoneNubmer: \"noPhoneNubmer\",\n  inputPhoneFailed: \"inputPhoneFailed\",\n  inputVerifyCode: \"inputVerifyCode\",\n  verifyFailed: \"verifyFailed\",\n  verifiedOK: \"verifiedOK\"\n};\n/**@enum {string}*/\n\nvar ENUM_LoginMethod = {\n  google: \"google\",\n  email: \"email\"\n};\nvar defaultValue = {\n  iptPhone: '+886',\n  iptPhoneVerifyCode: ''\n};\n\nvar cusModalUserProfile = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(cusModalUserProfile, _HTMLElement);\n\n  var _super = _createSuper(cusModalUserProfile);\n\n  /**\r\n   * \r\n   * @param {HTMLElement} templateContent \r\n   * @param {import('../cusModalLogin3/cusModalLogin.js').plugins} plugins \r\n   */\n  function cusModalUserProfile(templateContent, plugins) {\n    var _this;\n\n    _classCallCheck(this, cusModalUserProfile);\n\n    _this = _super.call(this);\n    /** {Swal , Email_ResendPassword(...)} */\n\n    _this.plugins = plugins; //this.plugins.Email_ResendPassword()\n    // assign firebase\n\n    _this.firebase = null;\n    _this.db = null;\n    if (firebase) _this.setFirebase(firebase);\n    if (!templateContent) throw new Error('error, arg - templateContent not defined!');\n    /**@typedef {sweetalert2} Swal */\n\n    if (!Swal) throw new Error('error, please implement sweetalert2 first!');\n\n    _this.appendTemplate(templateContent);\n\n    var proxyUI = {\n      /**@prop {ENUM_PhoneStatus}*/\n      enumPhoneStatus: ENUM_PhoneStatus.noPhoneNubmer,\n\n      /**@prop {ENUM_LoginMethod}*/\n      enumLoginMethod: ENUM_LoginMethod.google,\n      divInputPhoneFailed_Text: '輸入電話失敗',\n      divVerifyFailed_Text: '驗證失敗',\n      divAccount_Show: false,\n      isEmailVerified: true,\n      isAccountOfGoogle: true //not show btnResendPassword\n\n    };\n\n    var self = _assertThisInitialized(_this);\n\n    _this.proxyUI = new Proxy(proxyUI, {\n      get: function get(\n      /**@type {any}*/\n      target, prop) {\n        return target[prop];\n      },\n      set: function set(\n      /**@type {any}*/\n      target, prop, value) {\n        switch (prop) {\n          case 'enumPhoneStatus':\n            switch (value) {\n              case ENUM_PhoneStatus.noPhoneNubmer:\n                self.iptPhone.setDisabled(false);\n                self.btnVerifyNumber.setShow(true);\n                self.btnVerifyNumber.setDisabled(false);\n                self.btnDeleteNumber.setShow(false);\n                self.divInputPhoneFailed.setShow(false); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(false);\n                self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode; // self.iptPhoneVerifyCode.setDisabled(true)\n                // self.btnSendVerifyCode.setDisabled(true)\n                //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(false);\n                break;\n\n              case ENUM_PhoneStatus.inputPhoneFailed:\n                self.iptPhone.setDisabled(false);\n                self.btnVerifyNumber.setShow(true);\n                self.btnVerifyNumber.setDisabled(false);\n                self.btnDeleteNumber.setShow(false);\n                self.divInputPhoneFailed.setShow(true); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(false);\n                self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode; // self.iptPhoneVerifyCode.setDisabled(true)\n                // self.btnSendVerifyCode.setDisabled(true)\n                //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(false);\n                break;\n\n              case ENUM_PhoneStatus.inputVerifyCode:\n                self.iptPhone.setDisabled(true);\n                self.btnVerifyNumber.setShow(true);\n                self.btnVerifyNumber.setDisabled(true);\n                self.btnDeleteNumber.setShow(false);\n                self.divInputPhoneFailed.setShow(false); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(true);\n                self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode;\n                self.iptPhoneVerifyCode.setDisabled(false);\n                self.btnSendVerifyCode.setDisabled(false); //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(false);\n                break;\n\n              case ENUM_PhoneStatus.verifyFailed:\n                self.iptPhone.setDisabled(true);\n                self.btnVerifyNumber.setShow(true);\n                self.btnVerifyNumber.setDisabled(true);\n                self.btnDeleteNumber.setShow(false);\n                self.divInputPhoneFailed.setShow(false); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(true); //self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode\n\n                self.iptPhoneVerifyCode.setDisabled(false);\n                self.btnSendVerifyCode.setDisabled(false); //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(true);\n                break;\n\n              case ENUM_PhoneStatus.verifiedOK:\n                self.iptPhone.setDisabled(true);\n                self.btnVerifyNumber.setShow(false); //self.btnVerifyNumber.setDisabled(true)\n\n                self.btnDeleteNumber.setShow(true);\n                self.divInputPhoneFailed.setShow(false); //-------divVerifyCode\n\n                self.divVerifyCode.setShow(false);\n                self.iptPhoneVerifyCode.value = defaultValue.iptPhoneVerifyCode; // self.iptPhoneVerifyCode.setDisabled(true)\n                // self.btnSendVerifyCode.setDisabled(true)\n                //-------divVerifyFailed\n\n                self.divVerifyFailed.setShow(false);\n                break;\n\n              default:\n                break;\n            }\n\n            break;\n\n          case 'enumLoginMethod':\n            /**@type {HTMLElement} */\n            var iFaEnvelope = self.querySelector('#iFaEnvelope');\n            /**@type {HTMLElement} */\n\n            var iFaGoogle = self.querySelector('#iFaGoogle');\n\n            switch (value) {\n              case ENUM_LoginMethod.google:\n                iFaEnvelope.classList.add('d-none');\n                iFaGoogle.classList.remove('d-none');\n                break;\n\n              case ENUM_LoginMethod.email:\n                iFaEnvelope.classList.remove('d-none');\n                iFaGoogle.classList.add('d-none');\n                break;\n\n              default:\n                break;\n            }\n\n            break;\n\n          case \"divInputPhoneFailed_Text\":\n            self.divInputPhoneFailed.innerHTML = value; //document.querySelector()\n\n            break;\n\n          case \"divVerifyFailed_Text\":\n            self.divVerifyFailed.innerHTML = value;\n            break;\n\n          case 'isEmailVerified':\n            /**@type {HTMLInputElement} */\n            var uiCkboxEmailVerified = self.querySelector('#uiCkboxEmailVerified');\n            uiCkboxEmailVerified.checked = value;\n            break;\n\n          case 'isAccountOfGoogle':\n            /**@type {HTMLInputElement} */\n            var uiCkboxIsAccountOfGoogle = self.querySelector('#uiCkboxIsAccountOfGoogle');\n            uiCkboxIsAccountOfGoogle.checked = value;\n            break;\n\n          case 'divAccount_Show':\n            var divAccount = self.querySelector('#formUserProfile #divAccount');\n            if (value === false) divAccount.classList.add('d-none');else divAccount.classList.remove('d-none');\n            break;\n          // ...\n\n          default:\n            /**@type {string} - UI input value */\n            target[prop] = value;\n            break;\n        }\n\n        target[prop] = value;\n        return true;\n      }\n    });\n    _this.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.verifiedOK;\n    return _this;\n  }\n\n  _createClass(cusModalUserProfile, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      var _this2 = this;\n\n      //-----------Phone Verify renderRecaptcha\n      this.recaptchaVerifier = null;\n      this.verificationId = null; //this.renderRecaptcha('btnSendVerifyCode')\n\n      this.renderRecaptcha('btnVerifyNumber');\n      var self = this;\n      var authUser = this.firebase.auth().currentUser; //set emailVerified UI -- warning icon + btnResendVerify show\n\n      this.proxyUI.isEmailVerified = authUser.emailVerified; //check if google account\n\n      /**@type {any[]}} */\n\n      var findGoogleProvider = authUser.providerData.filter(function (\n      /**@type {any}*/\n      item) {\n        return item.providerId === 'google.com';\n      });\n      this.proxyUI.isAccountOfGoogle = findGoogleProvider.length > 0 ? this.proxyUI.isAccountOfGoogle = true : this.proxyUI.isAccountOfGoogle = false;\n      this.btnSendVerifyCode.addEventListener('click', function (e) {\n        e.preventDefault();\n        console.log(_this2.verificationId);\n        var sVerifyCode = self.iptPhoneVerifyCode.value;\n\n        var credential_phone = _this2.firebase.auth.PhoneAuthProvider.credential(_this2.verificationId, sVerifyCode);\n\n        authUser.linkWithCredential(credential_phone).then(function (\n        /**@type {any}*/\n        e) {\n          self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.verifiedOK;\n          self.saveUserData({\n            phoneNumber: authUser.phoneNumber\n          });\n          self.proxyFormData.iptPhone = authUser.phoneNumber;\n        })[\"catch\"](function (\n        /**@type {any}*/\n        error) {\n          var _self$getErrorMessage = self.getErrorMessageZHTW(error.code, error.message),\n              errCodeZHTW = _self$getErrorMessage.errCodeZHTW,\n              errMessageZHTW = _self$getErrorMessage.errMessageZHTW;\n\n          self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.verifyFailed;\n          self.proxyUI.divVerifyFailed_Text = \"\".concat(errCodeZHTW, \", \").concat(errMessageZHTW);\n        });\n      });\n      this.btnDeleteNumber.addEventListener('click', function (e) {\n        var self = _this2;\n        console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> authUser\", authUser);\n        authUser.unlink('phone').then(function () {\n          // Auth provider unlinked from account\n          // ...\n          console.log('unlink phone OK!');\n          self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.noPhoneNubmer;\n          console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> authUser\", authUser);\n          self.saveUserData({\n            phoneNumber: null\n          });\n          self.proxyFormData.iptPhone = defaultValue.iptPhone;\n        })[\"catch\"](function (\n        /**@type {any}*/\n        error) {\n          console.log(\"error -- LOG:: cusModalUserProfile -> connectedCallback -> error\", error); // An error happened\n          // ...\n        });\n      }); // setTimeout(() => {\n      //     this.renderRecaptcha('btnSendVerifyCode')\n      // }, 2000);\n\n      var btnResendEmailVerify = this.querySelector('#btnResendEmailVerify');\n      btnResendEmailVerify.addEventListener('click', function (e) {\n        var self = _this2;\n        authUser.sendEmailVerification().then(function () {\n          // Email sent.\n          self.plugins.Swal.fire('Email認證信已寄出', '請到信箱收信，並按下確認連結', 'success');\n        })[\"catch\"](function (\n        /**@type {any}*/\n        error) {\n          // An error happened.\n          self.plugins.Swal.fire('發生錯誤', \"\".concat(error.code, \",\").concat(error.message), 'error');\n          console.log(error);\n        });\n      });\n      this.btnResendPassword = this.querySelector('#btnResendPassword');\n      this.btnResendPassword.addEventListener('click', function () {\n        var self = _this2;\n        var emailAddress = _this2.proxyFormData.iptEmail;\n\n        _this2.plugins.Email_ResendPassword(emailAddress, _this2.firebase, _this2.plugins.Swal, function () {\n          self.showModal(false); //self.proxyUI.switchPage = ENUM_switchPage.radioSignin;\n        });\n      }); // let btnModifyPassword = this.querySelector('#btnModifyPassword');\n      // btnModifyPassword.addEventListener('click', (e) => {\n      //     let self = this\n      //     let html = `\n      //     <form id=\"formModifyPassword\">\n      //         <div>\n      //             <span class=\"titleWhite\">輸入舊密碼</span>\n      //             <input id=\"swal-input1\" type=\"password\" class=\"swal2-input inputCheckValid\" placeholder=\"英文字母或數字，至少8位數\" pattern=\"^[0-9a-zA-Z]{8,}$\" required autocomplete=\"current-password\">\n      //             <span></span>\n      //         </div>\n      //         <div>\n      //             <span class=\"titleWhite\">輸入新密碼</span>\n      //             <input id=\"swal-input2\" type=\"password\" class=\"swal2-input inputCheckValid\" placeholder=\"英文字母或數字，至少8位數\" pattern=\"^[0-9a-zA-Z]{8,}$\" required>\n      //             <span></span>\n      //         </div>\n      //         <div>\n      //             <span class=\"titleWhite\">再次輸入新密碼</span>\n      //             <input id=\"swal-input3\" type=\"password\" class=\"swal2-input inputCheckValid\" placeholder=\"英文字母或數字，至少8位數\" pattern=\"^[0-9a-zA-Z]{8,}$\" required>\n      //             <span></span>\n      //         </div>\n      //         <button id=\"btnValid\" class=\"b-displayNone\">Check Form Valid</button>\n      //     </form>\n      //     `;\n      //     // html= '<input id=\"swal-input1\" class=\"swal2-input\">' +\n      //     //     '<input id=\"swal-input2\" class=\"swal2-input\">',\n      //     Swal.fire({\n      //             title: '修改密碼',\n      //             html: html,\n      //             customClass: {\n      //                 confirmButton: 'swalbtn'\n      //             },\n      //             // inputAttributes: {\n      //             //     maxlength: 10,\n      //             //     autocapitalize: 'off',\n      //             //     autocorrect: 'on'\n      //             // },\n      //             focusConfirm: false,\n      //             preConfirm: (e) => {\n      //                 console.log('---------preConfirm-----------')\n      //                 console.log('---------HTML5 validation-----------')\n      //                 let btnValid = document.querySelector('#btnValid')\n      //                 btnValid.click();\n      //                 let ipt1 = document.querySelector('#formModifyPassword #swal-input1')\n      //                 let ipt2 = document.querySelector('#formModifyPassword #swal-input2')\n      //                 let ipt3 = document.querySelector('#formModifyPassword #swal-input3')\n      //                 let isHTML5Valid = true;\n      //                 if (ipt1.checkValidity() === false ||\n      //                     ipt2.checkValidity() === false ||\n      //                     ipt3.checkValidity() === false) {\n      //                     Swal.showValidationMessage('');\n      //                     return false\n      //                 }\n      //                 //-------other check\n      //                 console.log('---------other check-----------')\n      //                 if (ipt2.value !== ipt3.value) {\n      //                     Swal.showValidationMessage('兩次輸入的新密碼必須一致');\n      //                 }\n      //                 // let form = document.querySelector('#formModifyPassword')\n      //                 // console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> form\", form)\n      //                 // let aa = document.querySelector('#formModifyPassword #swal-input1').checkValidity();\n      //                 // console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> aa\", aa)\n      //                 //Swal.showValidationMessage(''); //stop confirm process\n      //                 return [\n      //                     ipt1.value,\n      //                     ipt2.value,\n      //                     ipt3.value\n      //                 ]\n      //             },\n      //             // onOpen:function(e){\n      //             //     console.log('-------open------------')\n      //             // },\n      //             didRender: function (e) {\n      //                 //-------- only for html5 form validation\n      //                 let formModifyPassword = document.querySelector('#formModifyPassword');\n      //                 formModifyPassword.addEventListener('submit', (e) => {\n      //                     e.preventDefault()\n      //                 })\n      //             },\n      //             showCancelButton: true,\n      //             // inputValidator: (value) => {\n      //             //     return 111\n      //             //     console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> value\", value)\n      //             //     if (!value) {\n      //             //         return 'You need to write something!'\n      //             //     }\n      //             // }\n      //         })\n      //         .then((result) => {\n      //             console.log(\"LOG:: cusModalUserProfile -> connectedCallback -> result\", result)\n      //         })\n      // })\n    }\n    /**\r\n     * @param {string} buttonID \r\n     */\n\n  }, {\n    key: \"renderRecaptcha\",\n    value: function renderRecaptcha(buttonID) {\n      var self = this; // [START appVerifier]\n\n      window.recaptchaVerifier = new this.firebase.auth.RecaptchaVerifier(buttonID, {\n        'size': 'invisible',\n        'callback': function callback(\n        /**@type {any}*/\n        response) {\n          // reCAPTCHA solved, allow signInWithPhoneNumber.\n          //window.signingIn = true;\n          //updateSignInButtonUI();\n          //var phoneNumber = getPhoneNumberFromUserInput();\n          var appVerifier = window.recaptchaVerifier;\n          var sPhoneNumber = self.iptPhone.value; //document.querySelector('#iptPhone').textContent;\n\n          self.firebase.auth().signInWithPhoneNumber(sPhoneNumber, appVerifier).then(function (\n          /**@type {any}*/\n          confirmationResult) {\n            //window.confirmationResult = confirmationResult;\n            self.verificationId = confirmationResult.verificationId;\n            self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.inputVerifyCode;\n          })[\"catch\"](function (\n          /**@type {any}*/\n          error) {\n            self.proxyUI.enumPhoneStatus = ENUM_PhoneStatus.inputPhoneFailed;\n            self.proxyUI.divInputPhoneFailed_Text = \"\".concat(error.code, \", \").concat(error.message); // Error; SMS not sent\n\n            console.error('Error during signInWithPhoneNumber', error); // window.alert('Error during signInWithPhoneNumber:\\n\\n' +\n            //     error.code + '\\n\\n' + error.message);\n            //window.signingIn = false;\n            // updateSignInFormUI();\n            // updateSignInButtonUI();\n          });\n        }\n      }); // [END appVerifier]\n      // button start working\n\n      window.recaptchaVerifier.render().then(function (widgetId) {\n        var recaptchaWidgetId = widgetId; //updateSignInButtonUI();\n      })[\"catch\"](function (error) {});\n    } // onInputChange(e) {\n    //     let thisElement = e.target;\n    //     this.proxyFormData[e.target.id] = e.target.value;\n    //     // console.log(e.target.id)\n    //     // console.log(this.proxyFormData[e.target.id])\n    // }\n\n    /**\r\n     * \r\n     * @param {HTMLElement} templateContent \r\n     */\n\n  }, {\n    key: \"appendTemplate\",\n    value: function appendTemplate(templateContent) {\n      // const shadowRoot = this.attachShadow({mode: 'open'});\n      // shadowRoot.appendChild(templateContent)\n      this.appendChild(templateContent); //------------------\n\n      /**@type {HTMLInputElement} */\n\n      this.iptAccount = this.querySelector('#iptAccount');\n      this.iptAccount.addEventListener('input', this.onInputChange.bind(this));\n      /**@type {HTMLInputElement} */\n\n      this.iptEmail = this.querySelector('#iptEmail');\n      this.iptEmail.addEventListener('input', this.onInputChange.bind(this));\n      /**@type {HTMLInputElement} */\n\n      this.iptName = this.querySelector('#iptName');\n      this.iptName.addEventListener('input', this.onInputChange.bind(this)); // this.iptPhone = this.querySelector('#iptPhone');\n      // this.iptPhone.addEventListener('input', this.onInputChange.bind(this));\n\n      /**@type {HTMLInputElement} */\n\n      this.iptAddress = this.querySelector('#iptAddress');\n      this.iptAddress.addEventListener('input', this.onInputChange.bind(this)); //======== Phone Number Verify=========\n\n      /**@type {HTMLInputElement} */\n\n      this.iptPhone = this.querySelector('#iptPhone');\n      /**@type {HTMLElement} */\n\n      this.btnVerifyNumber = this.querySelector('#btnVerifyNumber');\n      /**@type {HTMLElement} */\n\n      this.btnDeleteNumber = this.querySelector('#btnDeleteNumber');\n      /**@type {HTMLElement} */\n\n      this.divInputPhoneFailed = this.querySelector('#divInputPhoneFailed');\n      /**@type {HTMLElement} */\n\n      this.divVerifyCode = this.querySelector('#divVerifyCode');\n      /**@type {HTMLInputElement} */\n\n      this.iptPhoneVerifyCode = this.querySelector('#iptPhoneVerifyCode');\n      /**@type {HTMLElement} */\n\n      this.btnSendVerifyCode = this.querySelector('#btnSendVerifyCode');\n      /**@type {HTMLElement} */\n\n      this.divVerifyFailed = this.querySelector('#divVerifyFailed');\n      /**\r\n       * @this {HTMLElement | HTMLInputElement}\r\n       * @param {boolean} value \r\n       */\n\n      function setDisabled(value) {\n        if (value) this.setAttribute('disabled', '');else this.removeAttribute('disabled');\n      }\n      /**\r\n       * @this {HTMLElement | HTMLInputElement}\r\n       * @param {boolean} value \r\n       */\n\n\n      function setShow(value) {\n        if (value) this.classList.remove('d-none');else this.classList.add('d-none');\n      }\n\n      var arrayElements_isDisable = this.querySelectorAll('[isDisable]');\n      var arrayElements_isShow = this.querySelectorAll('[isShow]'); // arrayElements_isDisable = arrayElements_isDisable.map((item) => {\n      //     item.setDisabled = setDisabled\n      //     return item\n      // })\n\n      arrayElements_isDisable.forEach(function (item) {\n        item.setDisabled = setDisabled;\n      });\n      arrayElements_isShow.forEach(function (item) {\n        item.setShow = setShow;\n      }); //this.iptPhone.setDisabled(true)\n      // this.divVerifyFailed.setShow(true)\n\n      /**@type {HTMLElement} */\n\n      this.formUserProfile = this.querySelector('#formUserProfile');\n      this.formUserProfile.addEventListener('submit', this.onFormSubmit.bind(this));\n      var proxyFormData = new ProxyFormData(); // let proxyFormData = {\n      //     iptAccount: \"\",\n      //     iptName: \"\",\n      //     iptEmail: \"\",\n      //     iptPhone: \"\",\n      //     iptAddress1: \"\",\n      //     iptAddress2: \"\",\n      //     iptAddress3: \"\",\n      // }\n\n      /**@type {any}}*/\n\n      var self = this;\n      this.proxyFormData = new Proxy(proxyFormData, {\n        get: function get(\n        /**@type {any}*/\n        target, prop) {\n          return target[prop];\n        },\n        set: function set(\n        /**@type {any}*/\n        target, prop, value) {\n          switch (prop) {\n            default:\n              /**@type {string} - UI input value */\n              if (self[prop]) //userData === undefined\n                self[prop].value = value;\n              break;\n          }\n\n          target[prop] = value; //console.log(target, prop, value)\n\n          return true;\n        }\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} htmlElement \r\n     */\n\n  }, {\n    key: \"appendTestArea\",\n    value: function appendTestArea(htmlElement) {\n      var testArea = document.querySelector('[testArea]');\n      testArea.appendChild(htmlElement); //console.log(aa)\n    }\n  }, {\n    key: \"showTestUI\",\n    value: function showTestUI() {\n      var uiCkboxEmailVerified = this.querySelector('#uiCkboxEmailVerified');\n      uiCkboxEmailVerified.classList.remove('b-displayNone');\n    }\n    /**\r\n     * \r\n     * @param {firebase} inFirebase \r\n     */\n\n  }, {\n    key: \"setFirebase\",\n    value: function setFirebase(inFirebase) {\n      // console.log(inFirebase)\n      this.firebase = inFirebase;\n      this.db = this.firebase.firestore(); //this.setAuth_getRedirectResult();\n    }\n    /**\r\n     * @function - save partial of userData to firestore\r\n     * @param {any} userData \r\n     */\n\n  }, {\n    key: \"saveUserData\",\n    value: function saveUserData(userData) {\n      var uid = this.proxyFormData.iptAccount;\n      this.db.collection(_js_firebase_FirebaseMJS__WEBPACK_IMPORTED_MODULE_1__.FIRESTORE_COLLECTION.Users).doc(uid).set(userData, {\n        merge: true\n      });\n    }\n    /**\r\n     * \r\n     * @param {boolean} isShow \r\n     */\n\n  }, {\n    key: \"showModal\",\n    value: function showModal(isShow) {\n      //let modalLogin2 = document.querySelector('#modalLogin2');\n      //console.log(modalLogin2)\n      //modalLogin2.assign();\n      var options = {\n        show: isShow,\n        focus: true,\n        keyboard: true\n      };\n      var strShow = null;\n      if (isShow == true) strShow = 'show';else strShow = 'hide';\n      $('#modalProfile').modal(strShow); //console.log($('#modalLogin'))\n    }\n  }, {\n    key: \"onFormSubmit\",\n    value: function onFormSubmit(\n    /**@type {any}*/\n    e) {\n      e.preventDefault();\n      var uid = this.proxyFormData.iptAccount;\n      this.db.collection(_js_firebase_FirebaseMJS__WEBPACK_IMPORTED_MODULE_1__.FIRESTORE_COLLECTION.Users).doc(uid).withConverter(ProxyFormData.userProfileConverter).set(_objectSpread({}, this.proxyFormData), {\n        merge: true\n      });\n      this.showModal(false);\n    }\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(\n    /**@type {any}*/\n    e) {\n      var thisElement = e.target;\n      this.proxyFormData[e.target.id] = e.target.value; // console.log(e.target.id)\n      // console.log(this.proxyFormData[e.target.id])\n    } // } //-----------------------------------------\n\n    /**\r\n     * \r\n     * @param {string} uid \r\n     */\n\n  }, {\n    key: \"loadDbProfile\",\n    value: function loadDbProfile(uid) {\n      var self = this;\n      var authUser = this.firebase.auth().currentUser;\n      this.proxyFormData.iptAccount = uid; // 畫面UI資料以auth()為準\n\n      if (authUser) {\n        console.log(\"LOG:: cusModalUserProfile -> loadDbProfile -> authUser\", authUser);\n        this.proxyFormData.iptAccount = uid;\n        this.proxyFormData.iptEmail = authUser.email;\n        this.proxyFormData.iptPhone = authUser.phoneNumber; //==== phone status\n\n        this.proxyUI.enumPhoneStatus = authUser.phoneNumber ? ENUM_PhoneStatus.verifiedOK : ENUM_PhoneStatus.noPhoneNubmer; //==== signin provider type\n\n        var listProviderId = _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.UserData.getListProviderId_ByAuthUserProviderData(authUser.providerData);\n        var fakeUser = new _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.UserData();\n        fakeUser.listProviderId = listProviderId;\n        var providerId = fakeUser.providerId;\n        this.proxyUI.enumLoginMethod = providerId === _js_dataDefine_index_js__WEBPACK_IMPORTED_MODULE_0__.UserData.ENUM_ProviderType.google ? ENUM_LoginMethod.google : ENUM_LoginMethod.email; // /**@type {Array} */\n        // let findGoogleProvider = authUser.providerData.filter((item) => {\n        //     return item.providerId === 'google.com' // google.com password\n        // })\n        // if (findGoogleProvider.length > 0)\n        //     this.proxyUI.enumLoginMethod = ENUM_LoginMethod.google;\n        // else\n        //     this.proxyUI.enumLoginMethod = ENUM_LoginMethod.email;\n      } //newAA.proxyFormData.iptAccount = 'RZN9NipaymMkYA8Pr4a8Tg5gvz13'\n      //var self = this.firebase\n\n\n      this.db.collection(_js_firebase_FirebaseMJS__WEBPACK_IMPORTED_MODULE_1__.FIRESTORE_COLLECTION.Users).doc(uid).withConverter(ProxyFormData.userProfileConverter).get().then(function (\n      /**@type {any}*/\n      e) {\n        var userInfo = e.data();\n\n        if (userInfo) {\n          self.proxyFormData.iptName = userInfo.iptName;\n          self.proxyFormData.iptAddress = userInfo.iptAddress;\n        }\n      });\n    }\n    /**\r\n     * \r\n     * @param {string} errCode \r\n     * @param {string} errMessage \r\n     */\n\n  }, {\n    key: \"getErrorMessageZHTW\",\n    value: function getErrorMessageZHTW(errCode, errMessage) {\n      console.log(\"LOG:: cusModalUserProfile -> getErrorMessageZHTW -> errCode\", errCode);\n      var errCodeZHTW;\n      var errMessageZHTW = errMessage;\n\n      switch (errCode) {\n        case 'auth/invalid-phone-number':\n          errCodeZHTW = '電話號碼格式錯誤';\n          break;\n\n        case 'auth/invalid-verification-code':\n          errCodeZHTW = '驗證碼輸入錯誤';\n          break;\n\n        case 'auth/provider-already-linked':\n          errCodeZHTW = '此電話號碼已存在';\n          break;\n\n        case 'auth/credential-already-in-use':\n          errCodeZHTW = '此電話號碼已被使用';\n          break;\n\n        case 'auth/missing-phone-number':\n          errCodeZHTW = errCode;\n          break;\n\n        case 'auth/too-many-requests':\n          errCodeZHTW = errCode;\n          break;\n\n        default:\n          errCodeZHTW = errCode;\n          errMessageZHTW = errMessage;\n          break;\n      }\n\n      return {\n        errCodeZHTW: errCodeZHTW,\n        errMessageZHTW: errMessageZHTW\n      }; // auth/invalid-phone-number, TOO_SHORT\n      // auth/invalid-phone-number, TOO_LONG        \n      // auth/invalid-verification-code, The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.        \n      // auth/provider-already-linked, User can only be linked to one identity for the given provider.\n      // case 'auth/missing-phone-number':\n      // case 'auth/too-many-requests':\n      //address bug\n    }\n  }]);\n\n  return cusModalUserProfile;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsVXNlclByb2ZpbGUzL2N1c01vZGFsVXNlclByb2ZpbGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJjb21wb25lbnRzL2N1c01vZGFsVXNlclByb2ZpbGUzL2N1c01vZGFsVXNlclByb2ZpbGUuanM/MjQwOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvL0B0cy1jaGVja1xyXG5cclxuaW1wb3J0IHsgVXNlckRhdGEgfSBmcm9tICcuLi8uLi9qcy9kYXRhRGVmaW5lL2luZGV4LmpzJ1xyXG5pbXBvcnQge0ZJUkVTVE9SRV9DT0xMRUNUSU9OfSBmcm9tICcuLi8uLi9qcy9maXJlYmFzZS9GaXJlYmFzZU1KUydcclxuXHJcbi8qKkBjbGFzcyAqL1xyXG5jbGFzcyBQcm94eUZvcm1EYXRhIHtcclxuICAgIC8qKkBwcm9wIHtzdHJpbmd9ICovXHJcbiAgICBpcHRBY2NvdW50ID0gXCJcIlxyXG4gICAgLyoqQHByb3Age3N0cmluZ30gKi9cclxuICAgIGlwdEVtYWlsID0gXCJcIlxyXG4gICAgLyoqQHByb3Age3N0cmluZ30gKi9cclxuICAgIGlwdE5hbWUgPSBcIlwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgaXB0UGhvbmUgPSBcIlwiXHJcbiAgICAvKipAcHJvcCB7c3RyaW5nfSAqL1xyXG4gICAgaXB0QWRkcmVzcyA9IFwiXCJcclxuICAgIC8qKkB0eXBlIHtpbXBvcnQoJy4uLy4uL2pzL2RhdGFEZWZpbmUvaW5kZXguanMnKS5Vc2VyRGF0YX0gKi9cclxuICAgIHVzZXJEYXRhID0gbnVsbC8ve31cclxuICAgIHN0YXRpYyB1c2VyUHJvZmlsZUNvbnZlcnRlciA9IHtcclxuICAgICAgICB0b0ZpcmVzdG9yZTogZnVuY3Rpb24gKC8qKkB0eXBlIHtQcm94eUZvcm1EYXRhfSAqLyBwcm94eUZvcm1EYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHdyaXRlIGJhY2sga2V5LXVzZXJQcm9maWxlXHJcbiAgICAgICAgICAgICAgICB1c2VyUHJvZmlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc2VuZEVtYWlsOiBwcm94eUZvcm1EYXRhLmlwdEVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb3h5Rm9ybURhdGEuaXB0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAvL3Bob25lTnVtYmVyOiBwcm94eUZvcm1EYXRhLmlwdFBob25lLFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHByb3h5Rm9ybURhdGEuaXB0QWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGRyZXNzMTogcHJveHlGb3JtRGF0YS5pcHRBZGRyZXNzMSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGRyZXNzMjogcHJveHlGb3JtRGF0YS5pcHRBZGRyZXNzMixcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGRyZXNzMzogcHJveHlGb3JtRGF0YS5pcHRBZGRyZXNzMyxcclxuICAgICAgICAgICAgICAgICAgICAvL3NlbGVjdEFkZHJlc3M6IHByb3h5Rm9ybURhdGEuc2VsZWN0QWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnJvbUZpcmVzdG9yZTogZnVuY3Rpb24gKC8qKkB0eXBlIHthbnl9fSAqL3NuYXBzaG90LCAvKipAdHlwZSB7YW55fX0qL29wdGlvbnMpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBzbmFwc2hvdC5kYXRhKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHByb3h5Rm9ybURhdGEgPSBuZXcgUHJveHlGb3JtRGF0YSgpO1xyXG4gICAgICAgICAgICBwcm94eUZvcm1EYXRhLnVzZXJEYXRhID0gT2JqZWN0LmFzc2lnbihuZXcgVXNlckRhdGEoKSxkYXRhKVxyXG4gICAgICAgICAgICAvL2xvYWQgZW1haWwgKyBwaG9uZSArIHVzZXJQcm9maWxlXHJcbiAgICAgICAgICAgIHByb3h5Rm9ybURhdGEuaXB0RW1haWwgPSBkYXRhLmVtYWlsO1xyXG4gICAgICAgICAgICBwcm94eUZvcm1EYXRhLmlwdFBob25lID0gZGVmYXVsdFZhbHVlLmlwdFBob25lXHJcbiAgICAgICAgICAgIGlmIChkYXRhLnBob25lTnVtYmVyKVxyXG4gICAgICAgICAgICAgICAgcHJveHlGb3JtRGF0YS5pcHRQaG9uZSA9IGRhdGEucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnVzZXJQcm9maWxlKSB7XHJcbiAgICAgICAgICAgICAgICAvL3Byb3h5Rm9ybURhdGEuaXB0RW1haWwgPSBkYXRhLnVzZXJQcm9maWxlLnNlbmRFbWFpbFxyXG4gICAgICAgICAgICAgICAgcHJveHlGb3JtRGF0YS5pcHROYW1lID0gZGF0YS51c2VyUHJvZmlsZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAvL3Byb3h5Rm9ybURhdGEuaXB0UGhvbmUgPSBkYXRhLnVzZXJQcm9maWxlLnBob25lTnVtYmVyXHJcbiAgICAgICAgICAgICAgICBwcm94eUZvcm1EYXRhLmlwdEFkZHJlc3MgPSBkYXRhLnVzZXJQcm9maWxlLmFkZHJlc3NcclxuICAgICAgICAgICAgICAgIC8vIHByb3h5Rm9ybURhdGEuaXB0QWRkcmVzczEgPSBkYXRhLnVzZXJQcm9maWxlLmFkZHJlc3MxXHJcbiAgICAgICAgICAgICAgICAvLyBwcm94eUZvcm1EYXRhLmlwdEFkZHJlc3MyID0gZGF0YS51c2VyUHJvZmlsZS5hZGRyZXNzMlxyXG4gICAgICAgICAgICAgICAgLy8gcHJveHlGb3JtRGF0YS5pcHRBZGRyZXNzMyA9IGRhdGEudXNlclByb2ZpbGUuYWRkcmVzczNcclxuICAgICAgICAgICAgICAgIC8vIHByb3h5Rm9ybURhdGEuc2VsZWN0QWRkcmVzcyA9IGRhdGEudXNlclByb2ZpbGUuc2VsZWN0QWRkcmVzc1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJveHlGb3JtRGF0YVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipAZW51bSB7c3RyaW5nfSovXHJcbmV4cG9ydCBjb25zdCBFTlVNX1Bob25lU3RhdHVzID0ge1xyXG4gICAgbm9QaG9uZU51Ym1lcjogXCJub1Bob25lTnVibWVyXCIsXHJcbiAgICBpbnB1dFBob25lRmFpbGVkOiBcImlucHV0UGhvbmVGYWlsZWRcIixcclxuICAgIGlucHV0VmVyaWZ5Q29kZTogXCJpbnB1dFZlcmlmeUNvZGVcIixcclxuICAgIHZlcmlmeUZhaWxlZDogXCJ2ZXJpZnlGYWlsZWRcIixcclxuICAgIHZlcmlmaWVkT0s6IFwidmVyaWZpZWRPS1wiLFxyXG59XHJcbi8qKkBlbnVtIHtzdHJpbmd9Ki9cclxuZXhwb3J0IGNvbnN0IEVOVU1fTG9naW5NZXRob2QgPSB7XHJcbiAgICBnb29nbGU6IFwiZ29vZ2xlXCIsXHJcbiAgICBlbWFpbDogXCJlbWFpbFwiXHJcbn1cclxuY29uc3QgZGVmYXVsdFZhbHVlID0ge1xyXG4gICAgaXB0UGhvbmU6ICcrODg2JyxcclxuICAgIGlwdFBob25lVmVyaWZ5Q29kZTogJycsXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGN1c01vZGFsVXNlclByb2ZpbGUgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVDb250ZW50IFxyXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uanMnKS5wbHVnaW5zfSBwbHVnaW5zIFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZUNvbnRlbnQsIHBsdWdpbnMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIC8qKiB7U3dhbCAsIEVtYWlsX1Jlc2VuZFBhc3N3b3JkKC4uLil9ICovXHJcbiAgICAgICAgdGhpcy5wbHVnaW5zID0gcGx1Z2luc1xyXG4gICAgICAgIC8vdGhpcy5wbHVnaW5zLkVtYWlsX1Jlc2VuZFBhc3N3b3JkKClcclxuICAgICAgICBcclxuICAgICAgICAvLyBhc3NpZ24gZmlyZWJhc2VcclxuICAgICAgICB0aGlzLmZpcmViYXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRiID0gbnVsbFxyXG4gICAgICAgIGlmIChmaXJlYmFzZSlcclxuICAgICAgICAgICAgdGhpcy5zZXRGaXJlYmFzZShmaXJlYmFzZSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZUNvbnRlbnQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXJyb3IsIGFyZyAtIHRlbXBsYXRlQ29udGVudCBub3QgZGVmaW5lZCEnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKkB0eXBlZGVmIHtzd2VldGFsZXJ0Mn0gU3dhbCAqL1xyXG4gICAgICAgIGlmICghU3dhbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcnJvciwgcGxlYXNlIGltcGxlbWVudCBzd2VldGFsZXJ0MiBmaXJzdCEnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYXBwZW5kVGVtcGxhdGUodGVtcGxhdGVDb250ZW50KTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcHJveHlVSSA9IHtcclxuICAgICAgICAgICAgLyoqQHByb3Age0VOVU1fUGhvbmVTdGF0dXN9Ki9cclxuICAgICAgICAgICAgZW51bVBob25lU3RhdHVzOiBFTlVNX1Bob25lU3RhdHVzLm5vUGhvbmVOdWJtZXIsXHJcbiAgICAgICAgICAgIC8qKkBwcm9wIHtFTlVNX0xvZ2luTWV0aG9kfSovXHJcbiAgICAgICAgICAgIGVudW1Mb2dpbk1ldGhvZDogRU5VTV9Mb2dpbk1ldGhvZC5nb29nbGUsXHJcbiAgICAgICAgICAgIGRpdklucHV0UGhvbmVGYWlsZWRfVGV4dDogJ+i8uOWFpembu+ipseWkseaVlycsXHJcbiAgICAgICAgICAgIGRpdlZlcmlmeUZhaWxlZF9UZXh0OiAn6amX6K2J5aSx5pWXJyxcclxuICAgICAgICAgICAgZGl2QWNjb3VudF9TaG93OiBmYWxzZSxcclxuICAgICAgICAgICAgaXNFbWFpbFZlcmlmaWVkOiB0cnVlLFxyXG4gICAgICAgICAgICBpc0FjY291bnRPZkdvb2dsZTogdHJ1ZSwgLy9ub3Qgc2hvdyBidG5SZXNlbmRQYXNzd29yZFxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICB0aGlzLnByb3h5VUkgPSBuZXcgUHJveHkocHJveHlVSSwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgvKipAdHlwZSB7YW55fSovIHRhcmdldCwgcHJvcCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgvKipAdHlwZSB7YW55fSovdGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW51bVBob25lU3RhdHVzJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX1Bob25lU3RhdHVzLm5vUGhvbmVOdWJtZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZS5zZXREaXNhYmxlZChmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJ0blZlcmlmeU51bWJlci5zZXRTaG93KHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5WZXJpZnlOdW1iZXIuc2V0RGlzYWJsZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5EZWxldGVOdW1iZXIuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdklucHV0UGhvbmVGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlDb2RlLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWUgPSBkZWZhdWx0VmFsdWUuaXB0UGhvbmVWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUuc2V0RGlzYWJsZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmJ0blNlbmRWZXJpZnlDb2RlLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5RmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9QaG9uZVN0YXR1cy5pbnB1dFBob25lRmFpbGVkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXB0UGhvbmUuc2V0RGlzYWJsZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5WZXJpZnlOdW1iZXIuc2V0U2hvdyh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuVmVyaWZ5TnVtYmVyLnNldERpc2FibGVkKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuRGVsZXRlTnVtYmVyLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZJbnB1dFBob25lRmFpbGVkLnNldFNob3codHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlDb2RlLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWUgPSBkZWZhdWx0VmFsdWUuaXB0UGhvbmVWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUuc2V0RGlzYWJsZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmJ0blNlbmRWZXJpZnlDb2RlLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5RmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9QaG9uZVN0YXR1cy5pbnB1dFZlcmlmeUNvZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZS5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuVmVyaWZ5TnVtYmVyLnNldFNob3codHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJ0blZlcmlmeU51bWJlci5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuRGVsZXRlTnVtYmVyLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZJbnB1dFBob25lRmFpbGVkLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5Q29kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGl2VmVyaWZ5Q29kZS5zZXRTaG93KHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWUgPSBkZWZhdWx0VmFsdWUuaXB0UGhvbmVWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUuc2V0RGlzYWJsZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5TZW5kVmVyaWZ5Q29kZS5zZXREaXNhYmxlZChmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlGYWlsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdlZlcmlmeUZhaWxlZC5zZXRTaG93KGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX1Bob25lU3RhdHVzLnZlcmlmeUZhaWxlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlwdFBob25lLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5WZXJpZnlOdW1iZXIuc2V0U2hvdyh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuVmVyaWZ5TnVtYmVyLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5idG5EZWxldGVOdW1iZXIuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdklucHV0UGhvbmVGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlDb2RlLnNldFNob3codHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NlbGYuaXB0UGhvbmVWZXJpZnlDb2RlLnZhbHVlID0gZGVmYXVsdFZhbHVlLmlwdFBob25lVmVyaWZ5Q29kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXB0UGhvbmVWZXJpZnlDb2RlLnNldERpc2FibGVkKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuU2VuZFZlcmlmeUNvZGUuc2V0RGlzYWJsZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5RmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlGYWlsZWQuc2V0U2hvdyh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX1Bob25lU3RhdHVzLnZlcmlmaWVkT0s6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZS5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuVmVyaWZ5TnVtYmVyLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zZWxmLmJ0blZlcmlmeU51bWJlci5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuRGVsZXRlTnVtYmVyLnNldFNob3codHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdklucHV0UGhvbmVGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS1kaXZWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlDb2RlLnNldFNob3coZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWUgPSBkZWZhdWx0VmFsdWUuaXB0UGhvbmVWZXJpZnlDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUuc2V0RGlzYWJsZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmJ0blNlbmRWZXJpZnlDb2RlLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tZGl2VmVyaWZ5RmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXZWZXJpZnlGYWlsZWQuc2V0U2hvdyhmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudW1Mb2dpbk1ldGhvZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlGYUVudmVsb3BlID0gc2VsZi5xdWVyeVNlbGVjdG9yKCcjaUZhRW52ZWxvcGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge0hUTUxFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaUZhR29vZ2xlID0gc2VsZi5xdWVyeVNlbGVjdG9yKCcjaUZhR29vZ2xlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRU5VTV9Mb2dpbk1ldGhvZC5nb29nbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaUZhRW52ZWxvcGUuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaUZhR29vZ2xlLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTlVNX0xvZ2luTWV0aG9kLmVtYWlsOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlGYUVudmVsb3BlLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlGYUdvb2dsZS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRpdklucHV0UGhvbmVGYWlsZWRfVGV4dFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdklucHV0UGhvbmVGYWlsZWQuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkaXZWZXJpZnlGYWlsZWRfVGV4dFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpdlZlcmlmeUZhaWxlZC5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaXNFbWFpbFZlcmlmaWVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1aUNrYm94RW1haWxWZXJpZmllZCA9IHNlbGYucXVlcnlTZWxlY3RvcignI3VpQ2tib3hFbWFpbFZlcmlmaWVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpQ2tib3hFbWFpbFZlcmlmaWVkLmNoZWNrZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaXNBY2NvdW50T2ZHb29nbGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVpQ2tib3hJc0FjY291bnRPZkdvb2dsZSA9IHNlbGYucXVlcnlTZWxlY3RvcignI3VpQ2tib3hJc0FjY291bnRPZkdvb2dsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1aUNrYm94SXNBY2NvdW50T2ZHb29nbGUuY2hlY2tlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkaXZBY2NvdW50X1Nob3cnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGl2QWNjb3VudCA9IHNlbGYucXVlcnlTZWxlY3RvcignI2Zvcm1Vc2VyUHJvZmlsZSAjZGl2QWNjb3VudCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZBY2NvdW50LmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdkFjY291bnQuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKkB0eXBlIHtzdHJpbmd9IC0gVUkgaW5wdXQgdmFsdWUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5wcm94eVVJLmVudW1QaG9uZVN0YXR1cyA9IEVOVU1fUGhvbmVTdGF0dXMudmVyaWZpZWRPSztcclxuXHJcbiAgICB9XHJcbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLy0tLS0tLS0tLS0tUGhvbmUgVmVyaWZ5IHJlbmRlclJlY2FwdGNoYVxyXG4gICAgICAgIHRoaXMucmVjYXB0Y2hhVmVyaWZpZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudmVyaWZpY2F0aW9uSWQgPSBudWxsO1xyXG4gICAgICAgIC8vdGhpcy5yZW5kZXJSZWNhcHRjaGEoJ2J0blNlbmRWZXJpZnlDb2RlJylcclxuICAgICAgICB0aGlzLnJlbmRlclJlY2FwdGNoYSgnYnRuVmVyaWZ5TnVtYmVyJylcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICBsZXQgYXV0aFVzZXIgPSB0aGlzLmZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlclxyXG4gICAgICAgIC8vc2V0IGVtYWlsVmVyaWZpZWQgVUkgLS0gd2FybmluZyBpY29uICsgYnRuUmVzZW5kVmVyaWZ5IHNob3dcclxuICAgICAgICB0aGlzLnByb3h5VUkuaXNFbWFpbFZlcmlmaWVkID0gYXV0aFVzZXIuZW1haWxWZXJpZmllZDtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgLy9jaGVjayBpZiBnb29nbGUgYWNjb3VudFxyXG4gICAgICAgIC8qKkB0eXBlIHthbnlbXX19ICovXHJcbiAgICAgICAgbGV0IGZpbmRHb29nbGVQcm92aWRlciA9IGF1dGhVc2VyLnByb3ZpZGVyRGF0YS5maWx0ZXIoKC8qKkB0eXBlIHthbnl9Ki9pdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnByb3ZpZGVySWQ9PT0nZ29vZ2xlLmNvbSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMucHJveHlVSS5pc0FjY291bnRPZkdvb2dsZSA9IChmaW5kR29vZ2xlUHJvdmlkZXIubGVuZ3RoPjApP3RoaXMucHJveHlVSS5pc0FjY291bnRPZkdvb2dsZSA9IHRydWU6dGhpcy5wcm94eVVJLmlzQWNjb3VudE9mR29vZ2xlID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5idG5TZW5kVmVyaWZ5Q29kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy52ZXJpZmljYXRpb25JZClcclxuICAgICAgICAgICAgbGV0IHNWZXJpZnlDb2RlID0gc2VsZi5pcHRQaG9uZVZlcmlmeUNvZGUudmFsdWVcclxuICAgICAgICAgICAgbGV0IGNyZWRlbnRpYWxfcGhvbmUgPSB0aGlzLmZpcmViYXNlLmF1dGguUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh0aGlzLnZlcmlmaWNhdGlvbklkLCBzVmVyaWZ5Q29kZSk7XHJcbiAgICAgICAgICAgIGF1dGhVc2VyLmxpbmtXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsX3Bob25lKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKC8qKkB0eXBlIHthbnl9Ki9lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eVVJLmVudW1QaG9uZVN0YXR1cyA9IEVOVU1fUGhvbmVTdGF0dXMudmVyaWZpZWRPSztcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNhdmVVc2VyRGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBhdXRoVXNlci5waG9uZU51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eUZvcm1EYXRhLmlwdFBob25lID0gYXV0aFVzZXIucGhvbmVOdW1iZXJcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKC8qKkB0eXBlIHthbnl9Ki9lcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyckNvZGVaSFRXLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJNZXNzYWdlWkhUV1xyXG4gICAgICAgICAgICAgICAgICAgIH0gPSBzZWxmLmdldEVycm9yTWVzc2FnZVpIVFcoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByb3h5VUkuZW51bVBob25lU3RhdHVzID0gRU5VTV9QaG9uZVN0YXR1cy52ZXJpZnlGYWlsZWRcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByb3h5VUkuZGl2VmVyaWZ5RmFpbGVkX1RleHQgPSBgJHtlcnJDb2RlWkhUV30sICR7ZXJyTWVzc2FnZVpIVFd9YFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuYnRuRGVsZXRlTnVtYmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTE9HOjogY3VzTW9kYWxVc2VyUHJvZmlsZSAtPiBjb25uZWN0ZWRDYWxsYmFjayAtPiBhdXRoVXNlclwiLCBhdXRoVXNlcilcclxuICAgICAgICAgICAgYXV0aFVzZXIudW5saW5rKCdwaG9uZScpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXV0aCBwcm92aWRlciB1bmxpbmtlZCBmcm9tIGFjY291bnRcclxuICAgICAgICAgICAgICAgIC8vIC4uLlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VubGluayBwaG9uZSBPSyEnKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5wcm94eVVJLmVudW1QaG9uZVN0YXR1cyA9IEVOVU1fUGhvbmVTdGF0dXMubm9QaG9uZU51Ym1lclxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMT0c6OiBjdXNNb2RhbFVzZXJQcm9maWxlIC0+IGNvbm5lY3RlZENhbGxiYWNrIC0+IGF1dGhVc2VyXCIsIGF1dGhVc2VyKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5zYXZlVXNlckRhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBudWxsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgc2VsZi5wcm94eUZvcm1EYXRhLmlwdFBob25lID0gZGVmYXVsdFZhbHVlLmlwdFBob25lXHJcblxyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoLyoqQHR5cGUge2FueX0qL2Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIC0tIExPRzo6IGN1c01vZGFsVXNlclByb2ZpbGUgLT4gY29ubmVjdGVkQ2FsbGJhY2sgLT4gZXJyb3JcIiwgZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAvLyBBbiBlcnJvciBoYXBwZW5lZFxyXG4gICAgICAgICAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucmVuZGVyUmVjYXB0Y2hhKCdidG5TZW5kVmVyaWZ5Q29kZScpXHJcbiAgICAgICAgLy8gfSwgMjAwMCk7XHJcbiAgICAgICAgbGV0IGJ0blJlc2VuZEVtYWlsVmVyaWZ5ID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjYnRuUmVzZW5kRW1haWxWZXJpZnknKTtcclxuICAgICAgICBidG5SZXNlbmRFbWFpbFZlcmlmeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgICAgICBhdXRoVXNlci5zZW5kRW1haWxWZXJpZmljYXRpb24oKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIEVtYWlsIHNlbnQuXHJcbiAgICAgICAgICAgICAgICBzZWxmLnBsdWdpbnMuU3dhbC5maXJlKCdFbWFpbOiqjeitieS/oeW3suWvhOWHuicsICfoq4vliLDkv6HnrrHmlLbkv6HvvIzkuKbmjInkuIvnorroqo3pgKPntZAnLCAnc3VjY2VzcycpXHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgvKipAdHlwZSB7YW55fSovZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFuIGVycm9yIGhhcHBlbmVkLlxyXG4gICAgICAgICAgICAgICAgc2VsZi5wbHVnaW5zLlN3YWwuZmlyZSgn55m855Sf6Yyv6KqkJywgYCR7ZXJyb3IuY29kZX0sJHtlcnJvci5tZXNzYWdlfWAsICdlcnJvcicpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLmJ0blJlc2VuZFBhc3N3b3JkID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjYnRuUmVzZW5kUGFzc3dvcmQnKTtcclxuICAgICAgICB0aGlzLmJ0blJlc2VuZFBhc3N3b3JkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICAgICAgbGV0IGVtYWlsQWRkcmVzcyA9IHRoaXMucHJveHlGb3JtRGF0YS5pcHRFbWFpbDtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW5zLkVtYWlsX1Jlc2VuZFBhc3N3b3JkKFxyXG4gICAgICAgICAgICAgICAgZW1haWxBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5maXJlYmFzZSxcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2lucy5Td2FsLFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd01vZGFsKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vc2VsZi5wcm94eVVJLnN3aXRjaFBhZ2UgPSBFTlVNX3N3aXRjaFBhZ2UucmFkaW9TaWduaW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gbGV0IGJ0bk1vZGlmeVBhc3N3b3JkID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjYnRuTW9kaWZ5UGFzc3dvcmQnKTtcclxuICAgICAgICAvLyBidG5Nb2RpZnlQYXNzd29yZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgICAgIC8vICAgICBsZXQgaHRtbCA9IGBcclxuICAgICAgICAvLyAgICAgPGZvcm0gaWQ9XCJmb3JtTW9kaWZ5UGFzc3dvcmRcIj5cclxuICAgICAgICAvLyAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aXRsZVdoaXRlXCI+6Ly45YWl6IiK5a+G56K8PC9zcGFuPlxyXG4gICAgICAgIC8vICAgICAgICAgICAgIDxpbnB1dCBpZD1cInN3YWwtaW5wdXQxXCIgdHlwZT1cInBhc3N3b3JkXCIgY2xhc3M9XCJzd2FsMi1pbnB1dCBpbnB1dENoZWNrVmFsaWRcIiBwbGFjZWhvbGRlcj1cIuiLseaWh+Wtl+avjeaIluaVuOWtl++8jOiHs+WwkTjkvY3mlbhcIiBwYXR0ZXJuPVwiXlswLTlhLXpBLVpdezgsfSRcIiByZXF1aXJlZCBhdXRvY29tcGxldGU9XCJjdXJyZW50LXBhc3N3b3JkXCI+XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxyXG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgLy8gICAgICAgICA8ZGl2PlxyXG4gICAgICAgIC8vICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGl0bGVXaGl0ZVwiPui8uOWFpeaWsOWvhueivDwvc3Bhbj5cclxuICAgICAgICAvLyAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJzd2FsLWlucHV0MlwiIHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwic3dhbDItaW5wdXQgaW5wdXRDaGVja1ZhbGlkXCIgcGxhY2Vob2xkZXI9XCLoi7HmloflrZfmr43miJbmlbjlrZfvvIzoh7PlsJE45L2N5pW4XCIgcGF0dGVybj1cIl5bMC05YS16QS1aXXs4LH0kXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxyXG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgLy8gICAgICAgICA8ZGl2PlxyXG4gICAgICAgIC8vICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGl0bGVXaGl0ZVwiPuWGjeasoei8uOWFpeaWsOWvhueivDwvc3Bhbj5cclxuICAgICAgICAvLyAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJzd2FsLWlucHV0M1wiIHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwic3dhbDItaW5wdXQgaW5wdXRDaGVja1ZhbGlkXCIgcGxhY2Vob2xkZXI9XCLoi7HmloflrZfmr43miJbmlbjlrZfvvIzoh7PlsJE45L2N5pW4XCIgcGF0dGVybj1cIl5bMC05YS16QS1aXXs4LH0kXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxyXG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgLy8gICAgICAgICA8YnV0dG9uIGlkPVwiYnRuVmFsaWRcIiBjbGFzcz1cImItZGlzcGxheU5vbmVcIj5DaGVjayBGb3JtIFZhbGlkPC9idXR0b24+XHJcbiAgICAgICAgLy8gICAgIDwvZm9ybT5cclxuICAgICAgICAvLyAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gICAgIC8vIGh0bWw9ICc8aW5wdXQgaWQ9XCJzd2FsLWlucHV0MVwiIGNsYXNzPVwic3dhbDItaW5wdXRcIj4nICtcclxuICAgICAgICAvLyAgICAgLy8gICAgICc8aW5wdXQgaWQ9XCJzd2FsLWlucHV0MlwiIGNsYXNzPVwic3dhbDItaW5wdXRcIj4nLFxyXG4gICAgICAgIC8vICAgICBTd2FsLmZpcmUoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRpdGxlOiAn5L+u5pS55a+G56K8JyxcclxuICAgICAgICAvLyAgICAgICAgICAgICBodG1sOiBodG1sLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGN1c3RvbUNsYXNzOiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b246ICdzd2FsYnRuJ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gaW5wdXRBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gICAgIG1heGxlbmd0aDogMTAsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gICAgIGF1dG9jYXBpdGFsaXplOiAnb2ZmJyxcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyAgICAgYXV0b2NvcnJlY3Q6ICdvbidcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcHJlQ29uZmlybTogKGUpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLXByZUNvbmZpcm0tLS0tLS0tLS0tLScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS1IVE1MNSB2YWxpZGF0aW9uLS0tLS0tLS0tLS0nKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBsZXQgYnRuVmFsaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuVmFsaWQnKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBidG5WYWxpZC5jbGljaygpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgbGV0IGlwdDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybU1vZGlmeVBhc3N3b3JkICNzd2FsLWlucHV0MScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGxldCBpcHQyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm1Nb2RpZnlQYXNzd29yZCAjc3dhbC1pbnB1dDInKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBsZXQgaXB0MyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtTW9kaWZ5UGFzc3dvcmQgI3N3YWwtaW5wdXQzJylcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgbGV0IGlzSFRNTDVWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChpcHQxLmNoZWNrVmFsaWRpdHkoKSA9PT0gZmFsc2UgfHxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGlwdDIuY2hlY2tWYWxpZGl0eSgpID09PSBmYWxzZSB8fFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgaXB0My5jaGVja1ZhbGlkaXR5KCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBTd2FsLnNob3dWYWxpZGF0aW9uTWVzc2FnZSgnJyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAvLy0tLS0tLS1vdGhlciBjaGVja1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tb3RoZXIgY2hlY2stLS0tLS0tLS0tLScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChpcHQyLnZhbHVlICE9PSBpcHQzLnZhbHVlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBTd2FsLnNob3dWYWxpZGF0aW9uTWVzc2FnZSgn5YWp5qyh6Ly45YWl55qE5paw5a+G56K85b+F6aCI5LiA6Ie0Jyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gbGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybU1vZGlmeVBhc3N3b3JkJylcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJMT0c6OiBjdXNNb2RhbFVzZXJQcm9maWxlIC0+IGNvbm5lY3RlZENhbGxiYWNrIC0+IGZvcm1cIiwgZm9ybSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gbGV0IGFhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm1Nb2RpZnlQYXNzd29yZCAjc3dhbC1pbnB1dDEnKS5jaGVja1ZhbGlkaXR5KCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiTE9HOjogY3VzTW9kYWxVc2VyUHJvZmlsZSAtPiBjb25uZWN0ZWRDYWxsYmFjayAtPiBhYVwiLCBhYSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy9Td2FsLnNob3dWYWxpZGF0aW9uTWVzc2FnZSgnJyk7IC8vc3RvcCBjb25maXJtIHByb2Nlc3NcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGlwdDEudmFsdWUsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpcHQyLnZhbHVlLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgaXB0My52YWx1ZVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfSxcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyBvbk9wZW46ZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCctLS0tLS0tb3Blbi0tLS0tLS0tLS0tLScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBkaWRSZW5kZXI6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0gb25seSBmb3IgaHRtbDUgZm9ybSB2YWxpZGF0aW9uXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGxldCBmb3JtTW9kaWZ5UGFzc3dvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybU1vZGlmeVBhc3N3b3JkJyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGZvcm1Nb2RpZnlQYXNzd29yZC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vIGlucHV0VmFsaWRhdG9yOiAodmFsdWUpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIDExMVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkxPRzo6IGN1c01vZGFsVXNlclByb2ZpbGUgLT4gY29ubmVjdGVkQ2FsbGJhY2sgLT4gdmFsdWVcIiwgdmFsdWUpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiAnWW91IG5lZWQgdG8gd3JpdGUgc29tZXRoaW5nISdcclxuICAgICAgICAvLyAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAvLyAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJMT0c6OiBjdXNNb2RhbFVzZXJQcm9maWxlIC0+IGNvbm5lY3RlZENhbGxiYWNrIC0+IHJlc3VsdFwiLCByZXN1bHQpXHJcblxyXG4gICAgICAgIC8vICAgICAgICAgfSlcclxuICAgICAgICAvLyB9KVxyXG5cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJ1dHRvbklEIFxyXG4gICAgICovXHJcbiAgICByZW5kZXJSZWNhcHRjaGEoYnV0dG9uSUQpIHtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICAvLyBbU1RBUlQgYXBwVmVyaWZpZXJdXHJcbiAgICAgICAgd2luZG93LnJlY2FwdGNoYVZlcmlmaWVyID0gbmV3IHRoaXMuZmlyZWJhc2UuYXV0aC5SZWNhcHRjaGFWZXJpZmllcihidXR0b25JRCwge1xyXG4gICAgICAgICAgICAnc2l6ZSc6ICdpbnZpc2libGUnLFxyXG4gICAgICAgICAgICAnY2FsbGJhY2snOiBmdW5jdGlvbiAoLyoqQHR5cGUge2FueX0qL3Jlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIHJlQ0FQVENIQSBzb2x2ZWQsIGFsbG93IHNpZ25JbldpdGhQaG9uZU51bWJlci5cclxuICAgICAgICAgICAgICAgIC8vd2luZG93LnNpZ25pbmdJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvL3VwZGF0ZVNpZ25JbkJ1dHRvblVJKCk7XHJcbiAgICAgICAgICAgICAgICAvL3ZhciBwaG9uZU51bWJlciA9IGdldFBob25lTnVtYmVyRnJvbVVzZXJJbnB1dCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFwcFZlcmlmaWVyID0gd2luZG93LnJlY2FwdGNoYVZlcmlmaWVyO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNQaG9uZU51bWJlciA9IHNlbGYuaXB0UGhvbmUudmFsdWU7IC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lwdFBob25lJykudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoUGhvbmVOdW1iZXIoc1Bob25lTnVtYmVyLCBhcHBWZXJpZmllcilcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoLyoqQHR5cGUge2FueX0qL2NvbmZpcm1hdGlvblJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy93aW5kb3cuY29uZmlybWF0aW9uUmVzdWx0ID0gY29uZmlybWF0aW9uUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnZlcmlmaWNhdGlvbklkID0gY29uZmlybWF0aW9uUmVzdWx0LnZlcmlmaWNhdGlvbklkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJveHlVSS5lbnVtUGhvbmVTdGF0dXMgPSBFTlVNX1Bob25lU3RhdHVzLmlucHV0VmVyaWZ5Q29kZTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoLyoqQHR5cGUge2FueX0qL2Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJveHlVSS5lbnVtUGhvbmVTdGF0dXMgPSBFTlVNX1Bob25lU3RhdHVzLmlucHV0UGhvbmVGYWlsZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJveHlVSS5kaXZJbnB1dFBob25lRmFpbGVkX1RleHQgPSBgJHtlcnJvci5jb2RlfSwgJHtlcnJvci5tZXNzYWdlfWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXJyb3I7IFNNUyBub3Qgc2VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgc2lnbkluV2l0aFBob25lTnVtYmVyJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuYWxlcnQoJ0Vycm9yIGR1cmluZyBzaWduSW5XaXRoUGhvbmVOdW1iZXI6XFxuXFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBlcnJvci5jb2RlICsgJ1xcblxcbicgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy93aW5kb3cuc2lnbmluZ0luID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZVNpZ25JbkZvcm1VSSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGVTaWduSW5CdXR0b25VSSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gW0VORCBhcHBWZXJpZmllcl1cclxuICAgICAgICAvLyBidXR0b24gc3RhcnQgd29ya2luZ1xyXG4gICAgICAgIHdpbmRvdy5yZWNhcHRjaGFWZXJpZmllci5yZW5kZXIoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAod2lkZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZWNhcHRjaGFXaWRnZXRJZCA9IHdpZGdldElkO1xyXG4gICAgICAgICAgICAgICAgLy91cGRhdGVTaWduSW5CdXR0b25VSSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7XHJcbiAgICB9XHJcbiAgICAvLyBvbklucHV0Q2hhbmdlKGUpIHtcclxuICAgIC8vICAgICBsZXQgdGhpc0VsZW1lbnQgPSBlLnRhcmdldDtcclxuICAgIC8vICAgICB0aGlzLnByb3h5Rm9ybURhdGFbZS50YXJnZXQuaWRdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQuaWQpXHJcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm94eUZvcm1EYXRhW2UudGFyZ2V0LmlkXSlcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVDb250ZW50IFxyXG4gICAgICovXHJcbiAgICBhcHBlbmRUZW1wbGF0ZSh0ZW1wbGF0ZUNvbnRlbnQpIHtcclxuICAgICAgICAvLyBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pO1xyXG4gICAgICAgIC8vIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGVDb250ZW50KVxyXG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGVtcGxhdGVDb250ZW50KVxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLyoqQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovXHJcbiAgICAgICAgdGhpcy5pcHRBY2NvdW50ID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjaXB0QWNjb3VudCcpO1xyXG4gICAgICAgIHRoaXMuaXB0QWNjb3VudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25JbnB1dENoYW5nZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmlwdEVtYWlsID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjaXB0RW1haWwnKTtcclxuICAgICAgICB0aGlzLmlwdEVtYWlsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5vbklucHV0Q2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgIHRoaXMuaXB0TmFtZSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2lwdE5hbWUnKTtcclxuICAgICAgICB0aGlzLmlwdE5hbWUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLm9uSW5wdXRDaGFuZ2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLy8gdGhpcy5pcHRQaG9uZSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2lwdFBob25lJyk7XHJcbiAgICAgICAgLy8gdGhpcy5pcHRQaG9uZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25JbnB1dENoYW5nZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmlwdEFkZHJlc3MgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNpcHRBZGRyZXNzJyk7XHJcbiAgICAgICAgdGhpcy5pcHRBZGRyZXNzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5vbklucHV0Q2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vPT09PT09PT0gUGhvbmUgTnVtYmVyIFZlcmlmeT09PT09PT09PVxyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqL1xyXG4gICAgICAgIHRoaXMuaXB0UGhvbmUgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNpcHRQaG9uZScpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmJ0blZlcmlmeU51bWJlciA9IHRoaXMucXVlcnlTZWxlY3RvcignI2J0blZlcmlmeU51bWJlcicpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmJ0bkRlbGV0ZU51bWJlciA9IHRoaXMucXVlcnlTZWxlY3RvcignI2J0bkRlbGV0ZU51bWJlcicpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmRpdklucHV0UGhvbmVGYWlsZWQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNkaXZJbnB1dFBob25lRmFpbGVkJyk7XHJcbiAgICAgICAgLyoqQHR5cGUge0hUTUxFbGVtZW50fSAqL1xyXG4gICAgICAgIHRoaXMuZGl2VmVyaWZ5Q29kZSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2RpdlZlcmlmeUNvZGUnKTtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmlwdFBob25lVmVyaWZ5Q29kZSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2lwdFBob25lVmVyaWZ5Q29kZScpO1xyXG4gICAgICAgIC8qKkB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLmJ0blNlbmRWZXJpZnlDb2RlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjYnRuU2VuZFZlcmlmeUNvZGUnKTtcclxuICAgICAgICAvKipAdHlwZSB7SFRNTEVsZW1lbnR9ICovXHJcbiAgICAgICAgdGhpcy5kaXZWZXJpZnlGYWlsZWQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNkaXZWZXJpZnlGYWlsZWQnKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHRoaXMge0hUTUxFbGVtZW50IHwgSFRNTElucHV0RWxlbWVudH1cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlIFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldERpc2FibGVkKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdGhpcyB7SFRNTEVsZW1lbnQgfCBIVE1MSW5wdXRFbGVtZW50fVxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0U2hvdyh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGFycmF5RWxlbWVudHNfaXNEaXNhYmxlID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdbaXNEaXNhYmxlXScpO1xyXG4gICAgICAgIGxldCBhcnJheUVsZW1lbnRzX2lzU2hvdyA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnW2lzU2hvd10nKTtcclxuICAgICAgICAvLyBhcnJheUVsZW1lbnRzX2lzRGlzYWJsZSA9IGFycmF5RWxlbWVudHNfaXNEaXNhYmxlLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIC8vICAgICBpdGVtLnNldERpc2FibGVkID0gc2V0RGlzYWJsZWRcclxuICAgICAgICAvLyAgICAgcmV0dXJuIGl0ZW1cclxuICAgICAgICAvLyB9KVxyXG4gICAgICAgIGFycmF5RWxlbWVudHNfaXNEaXNhYmxlLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaXRlbS5zZXREaXNhYmxlZCA9IHNldERpc2FibGVkXHJcbiAgICAgICAgfSlcclxuICAgICAgICBhcnJheUVsZW1lbnRzX2lzU2hvdy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0U2hvdyA9IHNldFNob3dcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vdGhpcy5pcHRQaG9uZS5zZXREaXNhYmxlZCh0cnVlKVxyXG4gICAgICAgIC8vIHRoaXMuZGl2VmVyaWZ5RmFpbGVkLnNldFNob3codHJ1ZSlcclxuXHJcbiAgICAgICAgLyoqQHR5cGUge0hUTUxFbGVtZW50fSAqL1xyXG4gICAgICAgIHRoaXMuZm9ybVVzZXJQcm9maWxlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjZm9ybVVzZXJQcm9maWxlJyk7XHJcbiAgICAgICAgdGhpcy5mb3JtVXNlclByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5vbkZvcm1TdWJtaXQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGxldCBwcm94eUZvcm1EYXRhID0gbmV3IFByb3h5Rm9ybURhdGEoKTtcclxuICAgICAgICAvLyBsZXQgcHJveHlGb3JtRGF0YSA9IHtcclxuICAgICAgICAvLyAgICAgaXB0QWNjb3VudDogXCJcIixcclxuICAgICAgICAvLyAgICAgaXB0TmFtZTogXCJcIixcclxuICAgICAgICAvLyAgICAgaXB0RW1haWw6IFwiXCIsXHJcbiAgICAgICAgLy8gICAgIGlwdFBob25lOiBcIlwiLFxyXG4gICAgICAgIC8vICAgICBpcHRBZGRyZXNzMTogXCJcIixcclxuICAgICAgICAvLyAgICAgaXB0QWRkcmVzczI6IFwiXCIsXHJcbiAgICAgICAgLy8gICAgIGlwdEFkZHJlc3MzOiBcIlwiLFxyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLyoqQHR5cGUge2FueX19Ki9cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICB0aGlzLnByb3h5Rm9ybURhdGEgPSBuZXcgUHJveHkocHJveHlGb3JtRGF0YSwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgvKipAdHlwZSB7YW55fSovdGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKC8qKkB0eXBlIHthbnl9Ki90YXJnZXQsIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqQHR5cGUge3N0cmluZ30gLSBVSSBpbnB1dCB2YWx1ZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZltwcm9wXSkgLy91c2VyRGF0YSA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmW3Byb3BdLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGFyZ2V0LCBwcm9wLCB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBodG1sRWxlbWVudCBcclxuICAgICAqL1xyXG4gICAgYXBwZW5kVGVzdEFyZWEoaHRtbEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgdGVzdEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbdGVzdEFyZWFdJyk7XHJcbiAgICAgICAgdGVzdEFyZWEuYXBwZW5kQ2hpbGQoaHRtbEVsZW1lbnQpXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhhYSlcclxuICAgIH1cclxuICAgIHNob3dUZXN0VUkoKSB7XHJcbiAgICAgICAgbGV0IHVpQ2tib3hFbWFpbFZlcmlmaWVkID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjdWlDa2JveEVtYWlsVmVyaWZpZWQnKTtcclxuICAgICAgICB1aUNrYm94RW1haWxWZXJpZmllZC5jbGFzc0xpc3QucmVtb3ZlKCdiLWRpc3BsYXlOb25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7ZmlyZWJhc2V9IGluRmlyZWJhc2UgXHJcbiAgICAgKi9cclxuICAgIHNldEZpcmViYXNlKGluRmlyZWJhc2UpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbkZpcmViYXNlKVxyXG4gICAgICAgIHRoaXMuZmlyZWJhc2UgPSBpbkZpcmViYXNlO1xyXG4gICAgICAgIHRoaXMuZGIgPSB0aGlzLmZpcmViYXNlLmZpcmVzdG9yZSgpO1xyXG4gICAgICAgIC8vdGhpcy5zZXRBdXRoX2dldFJlZGlyZWN0UmVzdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gLSBzYXZlIHBhcnRpYWwgb2YgdXNlckRhdGEgdG8gZmlyZXN0b3JlXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gdXNlckRhdGEgXHJcbiAgICAgKi9cclxuICAgIHNhdmVVc2VyRGF0YSh1c2VyRGF0YSkge1xyXG4gICAgICAgIGxldCB1aWQgPSB0aGlzLnByb3h5Rm9ybURhdGEuaXB0QWNjb3VudFxyXG4gICAgICAgIHRoaXMuZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Vc2VycykuZG9jKHVpZCkuc2V0KHVzZXJEYXRhLCB7XHJcbiAgICAgICAgICAgIG1lcmdlOiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzU2hvdyBcclxuICAgICAqL1xyXG4gICAgc2hvd01vZGFsKGlzU2hvdykge1xyXG4gICAgICAgIC8vbGV0IG1vZGFsTG9naW4yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsTG9naW4yJyk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhtb2RhbExvZ2luMilcclxuICAgICAgICAvL21vZGFsTG9naW4yLmFzc2lnbigpO1xyXG5cclxuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgc2hvdzogaXNTaG93LFxyXG4gICAgICAgICAgICBmb2N1czogdHJ1ZSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHN0clNob3cgPSBudWxsO1xyXG4gICAgICAgIGlmIChpc1Nob3cgPT0gdHJ1ZSlcclxuICAgICAgICAgICAgc3RyU2hvdyA9ICdzaG93JztcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHN0clNob3cgPSAnaGlkZSdcclxuICAgICAgICAkKCcjbW9kYWxQcm9maWxlJykubW9kYWwoc3RyU2hvdylcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCQoJyNtb2RhbExvZ2luJykpXHJcbiAgICB9XHJcbiAgICBvbkZvcm1TdWJtaXQoLyoqQHR5cGUge2FueX0qL2UpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGxldCB1aWQgPSB0aGlzLnByb3h5Rm9ybURhdGEuaXB0QWNjb3VudFxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Vc2VycykuZG9jKHVpZCkud2l0aENvbnZlcnRlcihQcm94eUZvcm1EYXRhLnVzZXJQcm9maWxlQ29udmVydGVyKS5zZXQoe1xyXG4gICAgICAgICAgICAuLi50aGlzLnByb3h5Rm9ybURhdGFcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG1lcmdlOiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnNob3dNb2RhbChmYWxzZSlcclxuICAgIH1cclxuICAgIG9uSW5wdXRDaGFuZ2UoLyoqQHR5cGUge2FueX0qL2UpIHtcclxuICAgICAgICBsZXQgdGhpc0VsZW1lbnQgPSBlLnRhcmdldDtcclxuICAgICAgICB0aGlzLnByb3h5Rm9ybURhdGFbZS50YXJnZXQuaWRdID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQuaWQpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm94eUZvcm1EYXRhW2UudGFyZ2V0LmlkXSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gfSAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVpZCBcclxuICAgICAqL1xyXG4gICAgbG9hZERiUHJvZmlsZSh1aWQpIHtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXNcclxuICAgICAgICBsZXQgYXV0aFVzZXIgPSB0aGlzLmZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlclxyXG4gICAgICAgIHRoaXMucHJveHlGb3JtRGF0YS5pcHRBY2NvdW50ID0gdWlkXHJcbiAgICAgICAgLy8g55Wr6Z2iVUnos4fmlpnku6VhdXRoKCnngrrmupZcclxuICAgICAgICBpZiAoYXV0aFVzZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJMT0c6OiBjdXNNb2RhbFVzZXJQcm9maWxlIC0+IGxvYWREYlByb2ZpbGUgLT4gYXV0aFVzZXJcIiwgYXV0aFVzZXIpXHJcbiAgICAgICAgICAgIHRoaXMucHJveHlGb3JtRGF0YS5pcHRBY2NvdW50ID0gdWlkO1xyXG4gICAgICAgICAgICB0aGlzLnByb3h5Rm9ybURhdGEuaXB0RW1haWwgPSBhdXRoVXNlci5lbWFpbDtcclxuICAgICAgICAgICAgdGhpcy5wcm94eUZvcm1EYXRhLmlwdFBob25lID0gYXV0aFVzZXIucGhvbmVOdW1iZXJcclxuICAgICAgICAgICAgLy89PT09IHBob25lIHN0YXR1c1xyXG4gICAgICAgICAgICB0aGlzLnByb3h5VUkuZW51bVBob25lU3RhdHVzID0gKGF1dGhVc2VyLnBob25lTnVtYmVyKSA/IEVOVU1fUGhvbmVTdGF0dXMudmVyaWZpZWRPSyA6IEVOVU1fUGhvbmVTdGF0dXMubm9QaG9uZU51Ym1lcjtcclxuICAgICAgICAgICAgLy89PT09IHNpZ25pbiBwcm92aWRlciB0eXBlXHJcbiAgICAgICAgICAgIGxldCBsaXN0UHJvdmlkZXJJZCA9IFVzZXJEYXRhLmdldExpc3RQcm92aWRlcklkX0J5QXV0aFVzZXJQcm92aWRlckRhdGEoYXV0aFVzZXIucHJvdmlkZXJEYXRhKTtcclxuICAgICAgICAgICAgbGV0IGZha2VVc2VyID0gbmV3IFVzZXJEYXRhKCk7XHJcbiAgICAgICAgICAgIGZha2VVc2VyLmxpc3RQcm92aWRlcklkID0gbGlzdFByb3ZpZGVySWQ7XHJcbiAgICAgICAgICAgIGxldCBwcm92aWRlcklkID0gZmFrZVVzZXIucHJvdmlkZXJJZDtcclxuICAgICAgICAgICAgdGhpcy5wcm94eVVJLmVudW1Mb2dpbk1ldGhvZCA9IChwcm92aWRlcklkID09PSBVc2VyRGF0YS5FTlVNX1Byb3ZpZGVyVHlwZS5nb29nbGUpP0VOVU1fTG9naW5NZXRob2QuZ29vZ2xlOkVOVU1fTG9naW5NZXRob2QuZW1haWw7XHJcbiAgICAgICAgICAgIC8vIC8qKkB0eXBlIHtBcnJheX0gKi9cclxuICAgICAgICAgICAgLy8gbGV0IGZpbmRHb29nbGVQcm92aWRlciA9IGF1dGhVc2VyLnByb3ZpZGVyRGF0YS5maWx0ZXIoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiBpdGVtLnByb3ZpZGVySWQgPT09ICdnb29nbGUuY29tJyAvLyBnb29nbGUuY29tIHBhc3N3b3JkXHJcbiAgICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgIC8vIGlmIChmaW5kR29vZ2xlUHJvdmlkZXIubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMucHJveHlVSS5lbnVtTG9naW5NZXRob2QgPSBFTlVNX0xvZ2luTWV0aG9kLmdvb2dsZTtcclxuICAgICAgICAgICAgLy8gZWxzZVxyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5wcm94eVVJLmVudW1Mb2dpbk1ldGhvZCA9IEVOVU1fTG9naW5NZXRob2QuZW1haWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL25ld0FBLnByb3h5Rm9ybURhdGEuaXB0QWNjb3VudCA9ICdSWk45TmlwYXltTWtZQThQcjRhOFRnNWd2ejEzJ1xyXG5cclxuICAgICAgICAvL3ZhciBzZWxmID0gdGhpcy5maXJlYmFzZVxyXG4gICAgICAgIHRoaXMuZGIuY29sbGVjdGlvbihGSVJFU1RPUkVfQ09MTEVDVElPTi5Vc2VycykuZG9jKHVpZCkud2l0aENvbnZlcnRlcihQcm94eUZvcm1EYXRhLnVzZXJQcm9maWxlQ29udmVydGVyKS5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbigoLyoqQHR5cGUge2FueX0qL2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB1c2VySW5mbyA9IGUuZGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eUZvcm1EYXRhLmlwdE5hbWUgPSB1c2VySW5mby5pcHROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eUZvcm1EYXRhLmlwdEFkZHJlc3MgPSB1c2VySW5mby5pcHRBZGRyZXNzXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJDb2RlIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVyck1lc3NhZ2UgXHJcbiAgICAgKi9cclxuICAgIGdldEVycm9yTWVzc2FnZVpIVFcoZXJyQ29kZSwgZXJyTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTE9HOjogY3VzTW9kYWxVc2VyUHJvZmlsZSAtPiBnZXRFcnJvck1lc3NhZ2VaSFRXIC0+IGVyckNvZGVcIiwgZXJyQ29kZSlcclxuICAgICAgICBsZXQgZXJyQ29kZVpIVFc7XHJcbiAgICAgICAgbGV0IGVyck1lc3NhZ2VaSFRXID0gZXJyTWVzc2FnZTtcclxuICAgICAgICBzd2l0Y2ggKGVyckNvZGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnYXV0aC9pbnZhbGlkLXBob25lLW51bWJlcic6XHJcbiAgICAgICAgICAgICAgICBlcnJDb2RlWkhUVyA9ICfpm7voqbHomZ/norzmoLzlvI/pjK/oqqQnXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlJzpcclxuICAgICAgICAgICAgICAgIGVyckNvZGVaSFRXID0gJ+mpl+itieeivOi8uOWFpemMr+iqpCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkJzpcclxuICAgICAgICAgICAgICAgIGVyckNvZGVaSFRXID0gJ+atpOmbu+ipseiZn+eivOW3suWtmOWcqCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhdXRoL2NyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2UnOlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSAn5q2k6Zu76Kmx6Jmf56K85bey6KKr5L2/55SoJ1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInOlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSBlcnJDb2RlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2F1dGgvdG9vLW1hbnktcmVxdWVzdHMnOlxyXG4gICAgICAgICAgICAgICAgZXJyQ29kZVpIVFcgPSBlcnJDb2RlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBlcnJDb2RlWkhUVyA9IGVyckNvZGU7XHJcbiAgICAgICAgICAgICAgICBlcnJNZXNzYWdlWkhUVyA9IGVyck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZXJyQ29kZVpIVFcsXHJcbiAgICAgICAgICAgIGVyck1lc3NhZ2VaSFRXXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGF1dGgvaW52YWxpZC1waG9uZS1udW1iZXIsIFRPT19TSE9SVFxyXG4gICAgICAgIC8vIGF1dGgvaW52YWxpZC1waG9uZS1udW1iZXIsIFRPT19MT05HICAgICAgICBcclxuICAgICAgICAvLyBhdXRoL2ludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGUsIFRoZSBTTVMgdmVyaWZpY2F0aW9uIGNvZGUgdXNlZCB0byBjcmVhdGUgdGhlIHBob25lIGF1dGggY3JlZGVudGlhbCBpcyBpbnZhbGlkLiBQbGVhc2UgcmVzZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSBzbXMgYW5kIGJlIHN1cmUgdXNlIHRoZSB2ZXJpZmljYXRpb24gY29kZSBwcm92aWRlZCBieSB0aGUgdXNlci4gICAgICAgIFxyXG4gICAgICAgIC8vIGF1dGgvcHJvdmlkZXItYWxyZWFkeS1saW5rZWQsIFVzZXIgY2FuIG9ubHkgYmUgbGlua2VkIHRvIG9uZSBpZGVudGl0eSBmb3IgdGhlIGdpdmVuIHByb3ZpZGVyLlxyXG4gICAgICAgIC8vIGNhc2UgJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInOlxyXG4gICAgICAgIC8vIGNhc2UgJ2F1dGgvdG9vLW1hbnktcmVxdWVzdHMnOlxyXG5cclxuICAgICAgICAvL2FkZHJlc3MgYnVnXHJcbiAgICB9XHJcblxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQTJDQTtBQUNBO0FBQ0E7QUF6REE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFGQTtBQWFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUFDQTtBQTBDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFDQTtBQVVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBeEVBO0FBQ0E7QUF5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFWQTtBQUNBO0FBV0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBNUhBO0FBQ0E7QUE4SEE7QUFDQTtBQUNBO0FBdElBO0FBd0lBO0FBektBO0FBMktBO0FBQ0E7OztBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0JBO0FBOEJBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBbEJBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFJQTtBQUVBOzs7O0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBREE7QUFHQTtBQUNBOzs7O0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUF0QkE7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBanNCQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./webcomponents/cusModalUserProfile3/cusModalUserProfile.js\n");

/***/ }),

/***/ "./pages/index/index.css":
/*!*******************************!*\
  !*** ./pages/index/index.css ***!
  \*******************************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC9pbmRleC5jc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9pbmRleC9pbmRleC5jc3M/MjJmYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibWFwcGluZ3MiOiI7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index/index.css\n");

/***/ }),

/***/ "./webcomponents/cusModalLogin3/cusModalLogin.css":
/*!********************************************************!*\
  !*** ./webcomponents/cusModalLogin3/cusModalLogin.css ***!
  \********************************************************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsTG9naW4zL2N1c01vZGFsTG9naW4uY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd2ViY29tcG9uZW50cy9jdXNNb2RhbExvZ2luMy9jdXNNb2RhbExvZ2luLmNzcz8wZDZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJtYXBwaW5ncyI6IjtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./webcomponents/cusModalLogin3/cusModalLogin.css\n");

/***/ }),

/***/ "./webcomponents/cusModalUserProfile3/cusModalUserProfile.css":
/*!********************************************************************!*\
  !*** ./webcomponents/cusModalUserProfile3/cusModalUserProfile.css ***!
  \********************************************************************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93ZWJjb21wb25lbnRzL2N1c01vZGFsVXNlclByb2ZpbGUzL2N1c01vZGFsVXNlclByb2ZpbGUuY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd2ViY29tcG9uZW50cy9jdXNNb2RhbFVzZXJQcm9maWxlMy9jdXNNb2RhbFVzZXJQcm9maWxlLmNzcz84YzBhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJtYXBwaW5ncyI6IjtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./webcomponents/cusModalUserProfile3/cusModalUserProfile.css\n");

/***/ }),

/***/ "./projectConfig/firebaseProj.config.json":
/*!************************************************!*\
  !*** ./projectConfig/firebaseProj.config.json ***!
  \************************************************/
/*! default exports */
/*! export apiKey [provided] [no usage info] [missing usage info prevents renaming] */
/*! export appId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export authDomain [provided] [no usage info] [missing usage info prevents renaming] */
/*! export databaseURL [provided] [no usage info] [missing usage info prevents renaming] */
/*! export measurementId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export messagingSenderId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export projectId [provided] [no usage info] [missing usage info prevents renaming] */
/*! export storageBucket [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: module */
/***/ ((module) => {

"use strict";
module.exports = JSON.parse("{\"apiKey\":\"AIzaSyAkKicYbDRQacOaN5uxceuBrfcT_8qukJw\",\"authDomain\":\"ming2-dad1d.firebaseapp.com\",\"databaseURL\":\"https://ming2-dad1d.firebaseio.com\",\"projectId\":\"ming2-dad1d\",\"storageBucket\":\"ming2-dad1d.appspot.com\",\"messagingSenderId\":\"892998272030\",\"appId\":\"1:892998272030:web:b9906ea10ebcef222a1a0f\",\"measurementId\":\"G-4R4YVH2JLX\"}");

/***/ })

},
0,[["./pages/index/index.js","runtime","vendors-node_modules_jquery_dist_jquery_js-node_modules_lodash_lodash_js-node_modules_sweetal-57bcc4","vendors-node_modules_babel_polyfill_lib_index_js-node_modules_bootstrap_dist_js_bootstrap_js--8b5564"]]]);