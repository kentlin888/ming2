let mind = {
    "meta": {
        "name": "jsMind",
        "author": "hizzgdev@163.com",
        "version": "0.4.6"
    },
    "format": "node_array",
    "data": [{
        "id": "root",
        "topic": "明記官方網站",
        "expanded": true,
        "isroot": true
    }, {
        "id": "6c6cac2b9101023b",
        "topic": "HTML",
        "expanded": true,
        "parentid": "root",
        "direction": "right",
        "background-color": "#DD4B25",

    }, {
        "id": "6c6cb762954d74e4",
        "topic": "Seo",
        "expanded": true,
        "parentid": "6c6cac2b9101023b"
    }, {
        "id": "6c6cb8439b869ce0",
        "topic": "Light house",
        "expanded": true,
        "parentid": "6c6cb762954d74e4"
    }, {
        "id": "6c6db7316217d0a9",
        "topic": "Hybrid Single Page App(SPA)",
        "expanded": true,
        "parentid": "6c6cb762954d74e4"
    }, {
        "id": "6c6cbb8f7344759b",
        "topic": "Markdown",
        "expanded": true,
        "parentid": "6c6cac2b9101023b"
    }, {
        "id": "6c6cadcce4d2efeb",
        "topic": "CSS",
        "expanded": true,
        "parentid": "root",
        "direction": "right",
        "background-color": "#254BDD",

    }, {
        "id": "6c6cd1ba8d57320b",
        "topic": "Sass",
        "expanded": true,
        "parentid": "6c6cadcce4d2efeb",
        "background-color": "#C76494",
    }, {
        "id": "6c6cd3886f1e7182",
        "topic": "BEM",
        "expanded": true,
        "parentid": "6c6cadcce4d2efeb"
    }, {
        "id": "6c6cd83d8bd9b022",
        "topic": "OOCSS",
        "expanded": true,
        "parentid": "6c6cd3886f1e7182"
    }, {
        "id": "6c6cd93ce3496962",
        "topic": "SMACSS",
        "expanded": true,
        "parentid": "6c6cd83d8bd9b022"
    }, {
        "id": "RWD",
        "topic": "RWD",
        "expanded": true,
        "parentid": "6c6cadcce4d2efeb",
    }, {
        "id": "Flexbox",
        "topic": "Flexbox",
        "expanded": true,
        "parentid": "RWD",
    }, {
        "id": "6c6cd476e3514902",
        "topic": "Bootstrap",
        "expanded": true,
        "parentid": "RWD",
        "background-color": "#7710F1",
    }, {
        "id": "6c6cd65cf9ac20eb",
        "topic": "Tailwind",
        "expanded": true,
        "parentid": "6c6cadcce4d2efeb",
        "notuse": 2,
    }, 
    
    //========= REACT
    {
        "id": "6c6d32dc0f91d2f2",
        "topic": "React",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57",
        "background-color": "#48CEF7",
        "foreground-color": "black"
    }, {
        "id": "6c6d4bf1252b46f4",
        "topic": "Redux",
        "expanded": true,
        "parentid": "6c6d32dc0f91d2f2"
    }, {
        "id": "6c6d4cd352501b61",
        "topic": "thunk",
        "expanded": true,
        "parentid": "6c6d4bf1252b46f4"
    }, {
        "id": "6c6d50feeaa2f79b",
        "topic": "Router",
        "expanded": true,
        "parentid": "6c6d32dc0f91d2f2"
    }, {
        "id": "Middleware",
        "topic": "Middleware",
        "expanded": true,
        "parentid": "6c6d32dc0f91d2f2"
    }, {
        "id": "6c6d523ff8b11600",
        "topic": "Context",
        "expanded": true,
        "parentid": "6c6d32dc0f91d2f2"
    }, {
        "id": "6c6d536e6e3b9158",
        "topic": "Styled components",
        "expanded": true,
        "parentid": "6c6d32dc0f91d2f2",
        notuse:2,
    }, {
        "id": "6c6d55c6dbead6fa",
        "topic": "React native",
        "expanded": true,
        "parentid": "6c6d32dc0f91d2f2",
        notuse:2,
    }, 
    //========= REACT END

    //======= JAVASCRIPT
    {
        "id": "6c6caea06e4c1c57",
        "topic": "JAVASCRIPT",
        "expanded": true,
        "parentid": "root",
        "direction": "left",
        "background-color": "yellow",
        "foreground-color": "black",
    }, 
    
    //========== Testing
    {
        "id": "6c6d36057b5c836f",
        "topic": "Testing",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57",
        "background-color":"#01CC00",
        //"foreground-color": "black",
    }, {
        "id": "6c6d5a1a0a2bbe21",
        "topic": "Mocha",
        "expanded": true,
        "parentid": "6c6d36057b5c836f"
    }, {
        "id": "6c6d5ce49a92641f",
        "topic": "chai",
        "expanded": true,
        "parentid": "6c6d5a1a0a2bbe21"
    }, {
        "id": "6c6d5ad2eadcf983",
        "topic": "Jest",
        "expanded": true,
        "parentid": "6c6d36057b5c836f"
    }, {
        "id": "6c6d5dd709d90126",
        "topic": "Enzyme",
        "expanded": true,
        "parentid": "6c6d5ad2eadcf983"
    }, {
        "id": "6c6d5b5f67ee01ae",
        "topic": "Selenium",
        "expanded": true,
        "parentid": "6c6d36057b5c836f"
    }, 
    //========== Testing END

    {
        "id": "6c6d340e635c5338",
        "topic": "ES6+",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57"
    }, {
        "id": "6c6d5820d1221e89",
        "topic": "web components",
        "expanded": true,
        "parentid": "6c6d340e635c5338"
    }, {
        "id": "6c6d3890869dd6ad",
        "topic": "documentation",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57"
    }, {
        "id": "6c6d603f1ca7d09f",
        "topic": "JSDoc",
        "expanded": true,
        "parentid": "6c6d3890869dd6ad"
    }, {
        "id": "6c6d612461bb8889",
        "topic": ".d.ts(TS)",
        "expanded": true,
        "parentid": "6c6d3890869dd6ad"
    }, {
        "id": "6c6d3b18dcbf7b22",
        "topic": "JQuery",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57",
        //"background-color": "#0565A7",
    }, {
        "id": "6c6d3c87e63b6638",
        "topic": "MVVM",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57"
    }, {
        "id": "6c6d3d696af99d40",
        "topic": "ES6 Proxy",
        "expanded": true,
        "parentid": "6c6d3c87e63b6638"
    }, {
        "id": "6c6d3fa4ea3c7fcd",
        "topic": "module management",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57"
    }, {
        "id": "6c6d41ab126d2585",
        "topic": "CommonJS",
        "expanded": true,
        "parentid": "6c6d3fa4ea3c7fcd"
    }, {
        "id": "6c6d43236c383f48",
        "topic": "ES6 module",
        "expanded": true,
        "parentid": "6c6d3fa4ea3c7fcd"
    }, {
        "id": "6c6d44d2789e2d4d",
        "topic": "AMD",
        "expanded": true,
        "parentid": "6c6d3fa4ea3c7fcd",
        "notuse": 1,
    }, {
        "id": "6c6d471207c54966",
        "topic": "requirejs",
        "expanded": true,
        "parentid": "6c6d44d2789e2d4d",
        
    }, {
        "id": "6c6d369a0b3ada46",
        "topic": "Others",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57"
    }, {
        "id": "6c6d6659fd7dc600",
        "topic": "lodash",
        "expanded": true,
        "parentid": "6c6d369a0b3ada46"
    }, {
        "id": "6c6d68ca647fdd71",
        "topic": "sweetalert2",
        "expanded": true,
        "parentid": "6c6d369a0b3ada46"
    }, {
        "id": "6c6d6a95e28fe137",
        "topic": "i18n",
        "expanded": true,
        "parentid": "6c6d369a0b3ada46",
        "notuse": 1,
    }, {
        "id": "6c6d6b72ef00cbf3",
        "topic": "ESlint",
        "expanded": true,
        "parentid": "6c6d369a0b3ada46",
        "notuse": 1,
    }, {
        "id": "6c6d6d7262a4af5e",
        "topic": "TypeScript",
        "expanded": true,
        "parentid": "6c6d369a0b3ada46",
        "notuse": 1,
    }, 
    //========= JAVASCRIPT END

    //========= WEBPACK
    {
        "id": "6c6d193af78c4e12",
        "topic": "Webpack",
        "expanded": true,
        "parentid": "6c6caea06e4c1c57",
        "direction": "left",
        "background-color": "#8ACEF2",
        "foreground-color": "black"
    }, {
        "id": "6c6d214dabca274a",
        "topic": "babel",
        "expanded": true,
        "parentid": "6c6d193af78c4e12"
    }, {
        "id": "6c6d22d5e362189e",
        "topic": "css-loader",
        "expanded": true,
        "parentid": "6c6d193af78c4e12"
    }, {
        "id": "6c6d23da6072d731",
        "topic": "url-loader",
        "expanded": true,
        "parentid": "6c6d193af78c4e12"
    }, {
        "id": "6c6d26a16848ae76",
        "topic": "file-loader",
        "expanded": true,
        "parentid": "6c6d193af78c4e12"
    }, {
        "id": "6c6d27c3e61f6e7c",
        "topic": "html-webpack-plugin",
        "expanded": true,
        "parentid": "6c6d193af78c4e12"
    }, {
        "id": "6c6d2a0080a361bd",
        "topic": "mini-css-extract-plugin",
        "expanded": true,
        "parentid": "6c6d193af78c4e12"
    }, 
    //========= WEBPACK END

    {
        "id": "6c6cdbd51936da23",
        "topic": "Cloud Service(BAAS)",
        "expanded": true,
        "parentid": "root",
        "direction": "right",
        "background-color": "#F62925",

    }, {
        "id": "6c6cdfa30e7005a8",
        "topic": "Database",
        "expanded": true,
        "parentid": "6c6cdbd51936da23"
    }, {
        "id": "6c6ce87988e5d620",
        "topic": "Google firestore",
        "expanded": true,
        "parentid": "6c6cdfa30e7005a8"
    }, {
        "id": "6c6ceecfe00245dc",
        "topic": "GraphQL",
        "expanded": true,
        "parentid": "6c6cdfa30e7005a8",
        "notuse": 2,
    }, {
        "id": "6c6ce0ae63867a89",
        "topic": "Web hosting",
        "expanded": true,
        "parentid": "6c6cdbd51936da23"
    }, {
        "id": "6c6ceb45b69a576a",
        "topic": "Google firebase",
        "expanded": true,
        "parentid": "6c6ce0ae63867a89"
    }, {
        "id": "6c6ce2197b6afd6d",
        "topic": "Server Side Render(SSR)",
        "expanded": true,
        "parentid": "6c6cdbd51936da23",
        "notuse": 2,
    }, {
        "id": "6c6cfbdc781cb9bd",
        "topic": "Next.js",
        "expanded": true,
        "parentid": "6c6ce2197b6afd6d"
    }, {
        "id": "6c6cfd11e3086b96",
        "topic": "GatsbyJS",
        "expanded": true,
        "parentid": "6c6ce2197b6afd6d"
    }, {
        "id": "6c6cfe4eedbd250d",
        "topic": "docker",
        "expanded": true,
        "parentid": "6c6ce2197b6afd6d"
    }, {
        "id": "6c6cff13f2aacc98",
        "topic": "Apache",
        "expanded": true,
        "parentid": "6c6ce2197b6afd6d"
    }, {
        "id": "6c6cb47a79e13b26",
        "topic": "Git",
        "expanded": true,
        "parentid": "root",
        "background-color": "#E84D31",
    }, {
        "id": "6c6cb5626e9f1832",
        "topic": "Github",
        "expanded": true,
        "parentid": "6c6cb47a79e13b26"
    }, {
        "id": "6c6d020d748cd3f7",
        "topic": "Security",
        "expanded": true,
        "parentid": "root",
        "direction": "right",
        "notuse": 2,
    }, {
        "id": "6c6d09660a8e81f9",
        "topic": "CORS",
        "expanded": true,
        "parentid": "6c6d020d748cd3f7"
    }, {
        "id": "6c6d0a4b6c158a24",
        "topic": "SQL Injection",
        "expanded": true,
        "parentid": "6c6d020d748cd3f7"
    }, {
        "id": "6c6d0edce409af85",
        "topic": "XSS",
        "expanded": true,
        "parentid": "6c6d020d748cd3f7"
    }, {
        "id": "6c6d0fb3ebc65fe7",
        "topic": "CSRF",
        "expanded": true,
        "parentid": "6c6d020d748cd3f7"
    }, {
        "id": "6c6d10965ebeb0c2",
        "topic": "DDOS",
        "expanded": true,
        "parentid": "6c6d020d748cd3f7"
    }, {
        "id": "6c6d1184e399cc2d",
        "topic": "Encrypt",
        "expanded": true,
        "parentid": "6c6d020d748cd3f7"
    }, {
        "id": "6c6d12d5e7ac9a15",
        "topic": "Directory traversal",
        "expanded": true,
        "parentid": "6c6d020d748cd3f7"
    }, {
        "id": "6c6d15946928665a",
        "topic": "Bug bounty",
        "expanded": true,
        "parentid": "6c6d020d748cd3f7"
    }, {
        "id": "tools",
        "topic": "Tools",
        "expanded": true,
        "parentid": "root",
        "background-color": "#FF00BF",
    }, {
        "id": "6c6d71426bee3fcc",
        "topic": "VSCode",
        "expanded": true,
        "parentid": "tools",
    },{
        "id": "VSCodePlugins",
        "topic": "VSCode Plugins",
        "expanded": true,
        "parentid": "6c6d71426bee3fcc",
    },{
        "id": "6c6d733ae7df687d",
        "topic": "Chrome dev tools",
        "expanded": true,
        "parentid": "tools",
        "direction": "right"
    }, {
        "id": "6c6d8faa5673e5f1",
        "topic": "Cross platform",
        "expanded": true,
        "parentid": "root",
        notuse:2,
    }, {
        "id": "6c6d7690e0aa0b32",
        "topic": "Electron",
        "expanded": true,
        "parentid": "6c6d8faa5673e5f1",
    }, {
        "id": "6c6d7571ee6bb364",
        "topic": "PWA",
        "expanded": true,
        "parentid": "6c6d8faa5673e5f1",
    }]
};
let arrayColorNodes = []

function colorMind(list_MindData) {
    //let list_ColorData = list_MindData;
    arrayColorNodes = list_MindData.filter((item) => {
        return (item["background-color"]) //not null
    })
    list_MindData.forEach(itemChild => {
        if (itemChild["background-color"])
            return
        if (itemChild.notuse) {
            switch (itemChild.notuse) {
                case 1:// learened
                    itemChild["background-color"] = "#888888" //888888
                    break;
                case 2:// can't do it
                    itemChild["background-color"] = "#888888" //CCCCCC
                    break;
                default:
                    itemChild["background-color"] = "#CCCCCC"
                    break;
            }
            return
        }
        let foundParent = arrayColorNodes.find((itemParent) => {
            return (itemParent.id === itemChild.parentid)
        })
        // possible undefined
        if (foundParent) {
            itemChild["background-color"] = foundParent["background-color"]
            itemChild["foreground-color"] = foundParent["foreground-color"]
        }


        //console.log("LOG: ~ file: 1_basic.js ~ line 445 ~ found ~ found", found)
        // if(arrayColorNodes.includes(item.parentid))//is child
        // item["background-color"] = 
    });
    return list_MindData;
}

function load_jsmind() {
    let list_ColorData = colorMind(mind.data);
    list_ColorData = colorMind(mind.data);
    list_ColorData = colorMind(mind.data);
    list_ColorData = list_ColorData.map((item) => {
        if(item.notuse)
            item.expanded = false;
        return item
    })
    mind.data = list_ColorData;
    var options = {
        container: 'jsmind_container',
        editable: true,
        theme: 'primary',
        view:{
            engine: 'canvas',   // 思维导图各节点之间线条的绘制引擎 canvas/svg
            // hmargin:100,        // 思维导图距容器外框的最小水平距离
            // vmargin:50,         // 思维导图距容器外框的最小垂直距离
            // line_width:2,       // 思维导图线条的粗细
            // line_color:'#555'   // 思维导图线条的颜色
        },
    }
    var jm = jsMind.show(options, mind);
    

    // remove not use nodes
    let listNotuseNodes = list_ColorData.filter((item) => {
        return (item.notuse)
    })
    listNotuseNodes.forEach((item) => {
        jm.remove_node(item.id)
    })
    //jm.remove_node('6c6d020d748cd3f7')//Security

    // jm.set_readonly(true);
    // var mind_data = jm.get_data();
    // alert(mind_data);
    // jm.add_node("sub2", "sub23", "new node", {
    //     "background-color": "red"
    // });
    // jm.set_node_color('sub21', 'green', '#ccc');
}

load_jsmind();
// console.log(arrayColorNodes)